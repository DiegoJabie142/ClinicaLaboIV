import{a as Z}from"./chunk-6QYUKPQV.js";import{a as $}from"./chunk-IKOEVS5N.js";import{a as j}from"./chunk-PR2O7PN4.js";import{e as s,g as N,h as A,i as f,k as W,r as D,s as z,t as B,z as V}from"./chunk-JAPQ2JVT.js";import{C as R,f as L,v as M,x as O}from"./chunk-LWEM5HZJ.js";import{Ab as C,Ca as U,Jb as d,Sb as k,Va as i,Wa as q,g as w,ia as x,jb as p,lb as l,ma as T,nb as I,pb as _,pc as F,qb as a,rb as r,sb as h,tb as g,ub as v,yb as P}from"./chunk-JWOBJSOL.js";function J(e,o){e&1&&h(0,"app-header",18),e&2&&l("title","Registro")("back",!0)("whereToBack","/sign-up/select")}function K(e,o){e&1&&(a(0,"div",20),d(1,"El nombre es requerido"),r())}function Q(e,o){e&1&&(a(0,"div",20),d(1,"El nombre debe tener 5 o m\xE1s car\xE1cteres y contener solo letras"),r())}function X(e,o){if(e&1&&(g(0,8),p(1,K,2,0,"div",19)(2,Q,2,0,"div",19),v()),e&2){let t=C();i(),l("ngIf",t.form.controls.name.errors==null?null:t.form.controls.name.errors.required),i(),l("ngIf",!(t.form.controls.name.errors!=null&&t.form.controls.name.errors.required))}}function Y(e,o){e&1&&(a(0,"div",20),d(1,"El apellido es requerido"),r())}function ee(e,o){e&1&&(a(0,"div",20),d(1,"El apellido debe tener 5 o m\xE1s car\xE1cteres"),r())}function te(e,o){if(e&1&&(g(0,8),p(1,Y,2,0,"div",19)(2,ee,2,0,"div",19),v()),e&2){let t=C();i(),l("ngIf",t.form.controls.lastName.errors==null?null:t.form.controls.lastName.errors.required),i(),l("ngIf",!(t.form.controls.lastName.errors!=null&&t.form.controls.lastName.errors.required))}}function ne(e,o){e&1&&(a(0,"div",20),d(1,"El dni es requerido"),r())}function ie(e,o){e&1&&(a(0,"div",20),d(1,"El dni debe tener entre 6 y 8 car\xE1cteres"),r())}function oe(e,o){if(e&1&&(g(0,8),p(1,ne,2,0,"div",19)(2,ie,2,0,"div",19),v()),e&2){let t=C();i(),l("ngIf",t.form.controls.dni.errors==null?null:t.form.controls.dni.errors.required),i(),l("ngIf",!(t.form.controls.dni.errors!=null&&t.form.controls.dni.errors.required))}}function re(e,o){e&1&&(a(0,"div",20),d(1,"La edad es requerida"),r())}function ae(e,o){e&1&&(a(0,"div",20),d(1,"La edad acepta valores entre 0 y 100"),r())}function le(e,o){if(e&1&&(g(0,8),p(1,re,2,0,"div",19)(2,ae,2,0,"div",19),v()),e&2){let t=C();i(),l("ngIf",t.form.controls.age.errors==null?null:t.form.controls.age.errors.required),i(),l("ngIf",!(t.form.controls.age.errors!=null&&t.form.controls.age.errors.required))}}function me(e,o){e&1&&(a(0,"div",20),d(1,"La obra social es requerida"),r())}function se(e,o){e&1&&(a(0,"div",20),d(1,"La obra social debe tener 4 o m\xE1s car\xE1cteres"),r())}function pe(e,o){if(e&1&&(g(0,8),p(1,me,2,0,"div",19)(2,se,2,0,"div",19),v()),e&2){let t=C();i(),l("ngIf",t.form.controls.socialWork.errors==null?null:t.form.controls.socialWork.errors.required),i(),l("ngIf",!(t.form.controls.socialWork.errors!=null&&t.form.controls.socialWork.errors.required))}}function de(e,o){e&1&&(a(0,"div",20),d(1,"El correo es requerido"),r())}function ce(e,o){e&1&&(a(0,"div",20),d(1,"Ingrese un formato correcto"),r())}function ue(e,o){if(e&1&&(g(0,8),p(1,de,2,0,"div",19)(2,ce,2,0,"div",19),v()),e&2){let t=C();i(),l("ngIf",t.form.controls.email.errors==null?null:t.form.controls.email.errors.required),i(),l("ngIf",t.form.controls.email.errors==null?null:t.form.controls.email.errors.email)}}function fe(e,o){e&1&&(a(0,"div",20),d(1,"La contrase\xF1a es requerida"),r())}function _e(e,o){e&1&&(a(0,"div",20),d(1,"Debe tener 6 car\xE1cteres o m\xE1s"),r())}function ge(e,o){if(e&1&&(g(0,8),p(1,fe,2,0,"div",19)(2,_e,2,0,"div",19),v()),e&2){let t=C();i(),l("ngIf",t.form.controls.password.errors==null?null:t.form.controls.password.errors.required),i(),l("ngIf",t.form.controls.password.errors==null?null:t.form.controls.password.errors.email)}}function ve(e,o){e&1&&(a(0,"div",20),d(1,"La imagen es requerida"),r())}function Ce(e,o){if(e&1&&(g(0,8),p(1,ve,2,0,"div",19),v()),e&2){let t=C();i(),l("ngIf",t.form.controls.profilePic.errors==null?null:t.form.controls.profilePic.errors.required)}}function Se(e,o){e&1&&(a(0,"div",20),d(1,"La imagen es requerida"),r())}function he(e,o){if(e&1&&(g(0,8),p(1,Se,2,0,"div",19),v()),e&2){let t=C();i(),l("ngIf",t.form.controls.profilePic2.errors==null?null:t.form.controls.profilePic2.errors.required)}}var Ne=(()=>{let o=class o{constructor(m){this.router=m,this.header=!0,this.esAdmin=!1,this.color="blue",this.patientUploaded=new U,this.fb=x(D),this.form=this.fb.group({uid:new f(""),name:new f("",[s.required,s.minLength(5),s.pattern("^[a-zA-Z]+$")]),lastName:new f("",[s.required,s.minLength(5),s.pattern("^[a-zA-Z]+$")]),dni:new f("",[s.required,s.minLength(6),s.maxLength(8)]),socialWork:new f("",[s.required,s.minLength(4)]),email:new f("",[s.required,s.email]),password:new f("",[s.required,s.minLength(6)]),profilePic:new f(null,[s.required]),profilePic2:new f(null,[s.required]),age:new f("",[s.required,s.min(0),s.max(100)])}),this.firebaseSvc=x(R),this.utilSvc=x(O)}get formControls(){return this.form.controls}onFileSelected(m,u){m.size>2097152?(console.log("El archivo es demasiado grande. El tama\xF1o m\xE1ximo permitido es 2 MB."),this.formControls[u].setValue(null)):this.formControls[u].setValue(m)}onSubmit(){return w(this,null,function*(){if(this.form.valid){let m=this.form.value,u=m.profilePic,n=m.profilePic2;if(u&&n){let S=[this.firebaseSvc.uploadImage(u,`profilePics/${m.name}_${m.dni}_1`),this.firebaseSvc.uploadImage(n,`profilePics/${m.name}_${m.dni}_2`)];Promise.all(S).then(([c,E])=>{if(c&&E){let b={uid:m.uid,name:m.name,lastName:m.lastName,dni:m.dni,socialWork:m.socialWork,email:m.email,profilePic:c,profilePic2:E,age:m.age};m.email&&m.password?this.firebaseSvc.signUp(m.email,m.password).then(y=>{let G=y.user;b.uid=G.uid,this.firebaseSvc.saveUserDataAsPatient(b).then(()=>{console.log("Paciente registrado con \xE9xito"),this.esAdmin==!1&&this.router.navigate(["./home"]),this.patientUploaded.emit(!0),this.form.reset()}).catch(H=>{console.error("Error al guardar los datos del paciente: ",H)})}).catch(y=>{console.error("Error al registrar el usuario: ",y)}):console.log("Faltan email o contrase\xF1a para registrar al paciente")}else console.error("No se pudieron obtener las URLs de las im\xE1genes")}).catch(c=>{console.error("Error al subir las im\xE1genes: ",c)})}else console.log("Las im\xE1genes no se han seleccionado correctamente")}else console.log("Formulario no v\xE1lido")})}allowOnlyLetters(m){/^[a-zA-Z ]+$/.test(m.key)||m.preventDefault()}onFileRemoved(){this.form.get("profilePic")?.setValue(null)}onFileRemoved2(){this.form.get("profilePic2")?.setValue(null)}};o.\u0275fac=function(u){return new(u||o)(q(L))},o.\u0275cmp=T({type:o,selectors:[["app-sign-up-patient"]],inputs:{header:"header",esAdmin:"esAdmin",color:"color"},outputs:{patientUploaded:"patientUploaded"},standalone:!0,features:[k],decls:35,vars:22,consts:[[3,"title","back","whereToBack",4,"ngIf"],[1,"container"],[1,"d-flex-center","widht-100"],[3,"titulo","color"],[1,"d-flex-center","width-500"],[1,"auth-form",3,"ngSubmit"],[1,"margin-input"],["label","Nombre","type","text",3,"keypress","control"],[1,"validators-container"],["label","Apellido","type","text",3,"keypress","control"],["label","DNI","type","number",3,"control"],["label","EDAD","type","number",3,"control"],["label","OBRA SOCIAL","type","text",3,"control"],["label","Correo","type","email",3,"control"],["label","Contrase\xF1a","type","password",3,"control"],[1,"widht-100","d-flex-center"],["label","Selecciona tu imagen",3,"fileSelected","fileRemoved"],["mat-flat-button","","color","warn",1,"button-login",3,"disabled"],[3,"title","back","whereToBack"],["class","validators",4,"ngIf"],[1,"validators"]],template:function(u,n){u&1&&(p(0,J,1,3,"app-header",0),a(1,"div",1)(2,"div",2),h(3,"app-logo",3),r(),a(4,"div",4)(5,"form",5),P("ngSubmit",function(){return n.onSubmit()}),a(6,"div",6)(7,"app-custom-input",7),P("keypress",function(c){return n.allowOnlyLetters(c)}),r(),p(8,X,3,2,"ng-container",8),r(),a(9,"div",6)(10,"app-custom-input",9),P("keypress",function(c){return n.allowOnlyLetters(c)}),r(),p(11,te,3,2,"ng-container",8),r(),a(12,"div",6),h(13,"app-custom-input",10),p(14,oe,3,2,"ng-container",8),r(),a(15,"div",6),h(16,"app-custom-input",11),p(17,le,3,2,"ng-container",8),r(),a(18,"div",6),h(19,"app-custom-input",12),p(20,pe,3,2,"ng-container",8),r(),a(21,"div",6),h(22,"app-custom-input",13),p(23,ue,3,2,"ng-container",8),r(),a(24,"div",6),h(25,"app-custom-input",14),p(26,ge,3,2,"ng-container",8),r(),a(27,"div",15)(28,"app-picture-input",16),P("fileSelected",function(c){return n.onFileSelected(c,"profilePic")})("fileRemoved",function(){return n.onFileRemoved()}),r(),p(29,Ce,2,1,"ng-container",8),a(30,"app-picture-input",16),P("fileSelected",function(c){return n.onFileSelected(c,"profilePic2")})("fileRemoved",function(){return n.onFileRemoved2()}),r(),p(31,he,2,1,"ng-container",8),r(),a(32,"div",2)(33,"button",17),d(34,"REGISTRARSE"),r()()()()()),u&2&&(l("ngIf",n.header),i(),I("body",n.header),i(2),l("titulo","Registro de Paciente")("color",n.color),i(4),l("control",n.form.controls.name),i(),_(8,n.form.controls.name.errors&&n.form.controls.name.touched?8:-1),i(2),l("control",n.form.controls.lastName),i(),_(11,n.form.controls.lastName.errors&&n.form.controls.lastName.touched?11:-1),i(2),l("control",n.form.controls.dni),i(),_(14,n.form.controls.dni.errors&&n.form.controls.dni.touched?14:-1),i(2),l("control",n.form.controls.age),i(),_(17,n.form.controls.age.errors&&n.form.controls.age.touched?17:-1),i(2),l("control",n.form.controls.socialWork),i(),_(20,n.form.controls.socialWork.errors&&n.form.controls.socialWork.touched?20:-1),i(2),l("control",n.form.controls.email),i(),_(23,n.form.controls.email.errors&&n.form.controls.email.touched?23:-1),i(2),l("control",n.form.controls.password),i(),_(26,n.form.controls.password.errors&&n.form.controls.password.touched?26:-1),i(3),_(29,n.form.controls.profilePic.errors&&n.form.controls.profilePic.touched?29:-1),i(2),_(31,n.form.controls.profilePic2.errors&&n.form.controls.profilePic2.touched?31:-1),i(2),l("disabled",n.form.invalid))},dependencies:[V,$,j,M,B,W,N,z,A,F,Z],styles:['@charset "UTF-8";.d-flex[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;flex-wrap:wrap}.body[_ngcontent-%COMP%]{height:800px;margin-top:20px;background-position-y:-50px}body[_ngcontent-%COMP%]{position:relative;margin:0;font-family:Arial,sans-serif}.body[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:10px 0 0;background:url("./media/background-patient-HLLCCCEI.jpg");background-repeat:no-repeat;background-position-x:center;background-size:1875px;opacity:.2;z-index:-1}.d-flex-space-between[_ngcontent-%COMP%]{display:flex;align-content:space-between;justify-content:space-between}.margin-input[_ngcontent-%COMP%]{margin-top:40px}.button-login[_ngcontent-%COMP%]{padding:22px;margin-top:40px}.validators[_ngcontent-%COMP%]{font-size:15px;text-align:center;color:red}.width-500[_ngcontent-%COMP%], .auth-form[_ngcontent-%COMP%]{width:100%;display:flex;flex-wrap:wrap;justify-content:center}.margin-input[_ngcontent-%COMP%]{margin-right:40px;width:30%}.widht-100[_ngcontent-%COMP%]{width:100%}.widht-50[_ngcontent-%COMP%]{width:100%;display:flex}']});let e=o;return e})();export{Ne as a};
