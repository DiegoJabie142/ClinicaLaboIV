import{a as Q}from"./chunk-S2WSGE4Z.js";import{a as Y}from"./chunk-JUZHZSBE.js";import{a as J}from"./chunk-J447TY2B.js";import{a as K}from"./chunk-POG2CTK2.js";import{h as H}from"./chunk-5PP5VR5I.js";import{b as c,e as B,f as $,g as _,i as j,p as X,q as Z,r as G}from"./chunk-7YVO6NQX.js";import{B as A,L as W,Q as z,f as N}from"./chunk-YYGECID7.js";import{Bc as E,Dc as T,Eb as m,Nb as M,Pa as n,Qa as O,ba as y,db as d,fa as k,fb as a,hb as F,jb as f,kb as l,lb as r,lc as R,mb as C,nb as v,ob as g,pa as x,pb as L,qa as S,sb as h,ub as p,wa as V,yc as D,zc as w}from"./chunk-HTI5VKZI.js";import{g as q}from"./chunk-5G567QLT.js";function ie(t,i){t&1&&C(0,"app-header",2),t&2&&a("title","Registro")("back",!0)("whereToBack","/sign-up/select")}function oe(t,i){t&1&&(l(0,"div",21),m(1,"El nombre es requerido"),r())}function re(t,i){t&1&&(l(0,"div",21),m(1,"El nombre debe tener 5 o m\xE1s car\xE1cteres y contener solo letras"),r())}function ae(t,i){if(t&1&&(v(0,10),d(1,oe,2,0,"div",20)(2,re,2,0,"div",20),g()),t&2){let e=p(2);n(),a("ngIf",e.form.controls.name.errors==null?null:e.form.controls.name.errors.required),n(),a("ngIf",!(e.form.controls.name.errors!=null&&e.form.controls.name.errors.required))}}function le(t,i){t&1&&(l(0,"div",21),m(1,"El apellido es requerido"),r())}function se(t,i){t&1&&(l(0,"div",21),m(1,"El apellido debe tener 5 o m\xE1s car\xE1cteres"),r())}function ce(t,i){if(t&1&&(v(0,10),d(1,le,2,0,"div",20)(2,se,2,0,"div",20),g()),t&2){let e=p(2);n(),a("ngIf",e.form.controls.lastName.errors==null?null:e.form.controls.lastName.errors.required),n(),a("ngIf",!(e.form.controls.lastName.errors!=null&&e.form.controls.lastName.errors.required))}}function de(t,i){t&1&&(l(0,"div",21),m(1,"El dni es requerido"),r())}function me(t,i){t&1&&(l(0,"div",21),m(1,"El dni debe tener entre 6 y 8 car\xE1cteres"),r())}function pe(t,i){if(t&1&&(v(0,10),d(1,de,2,0,"div",20)(2,me,2,0,"div",20),g()),t&2){let e=p(2);n(),a("ngIf",e.form.controls.dni.errors==null?null:e.form.controls.dni.errors.required),n(),a("ngIf",!(e.form.controls.dni.errors!=null&&e.form.controls.dni.errors.required))}}function ue(t,i){t&1&&(l(0,"div",21),m(1,"La edad es requerida"),r())}function _e(t,i){t&1&&(l(0,"div",21),m(1,"La edad acepta valores entre 0 y 100"),r())}function fe(t,i){if(t&1&&(v(0,10),d(1,ue,2,0,"div",20)(2,_e,2,0,"div",20),g()),t&2){let e=p(2);n(),a("ngIf",e.form.controls.age.errors==null?null:e.form.controls.age.errors.required),n(),a("ngIf",!(e.form.controls.age.errors!=null&&e.form.controls.age.errors.required))}}function ve(t,i){t&1&&(l(0,"div",21),m(1,"La obra social es requerida"),r())}function ge(t,i){t&1&&(l(0,"div",21),m(1,"La obra social debe tener 4 o m\xE1s car\xE1cteres"),r())}function Ce(t,i){if(t&1&&(v(0,10),d(1,ve,2,0,"div",20)(2,ge,2,0,"div",20),g()),t&2){let e=p(2);n(),a("ngIf",e.form.controls.socialWork.errors==null?null:e.form.controls.socialWork.errors.required),n(),a("ngIf",!(e.form.controls.socialWork.errors!=null&&e.form.controls.socialWork.errors.required))}}function xe(t,i){t&1&&(l(0,"div",21),m(1,"El correo es requerido"),r())}function Se(t,i){t&1&&(l(0,"div",21),m(1,"Ingrese un formato correcto"),r())}function he(t,i){if(t&1&&(v(0,10),d(1,xe,2,0,"div",20)(2,Se,2,0,"div",20),g()),t&2){let e=p(2);n(),a("ngIf",e.form.controls.email.errors==null?null:e.form.controls.email.errors.required),n(),a("ngIf",e.form.controls.email.errors==null?null:e.form.controls.email.errors.email)}}function Pe(t,i){t&1&&(l(0,"div",21),m(1,"La contrase\xF1a es requerida"),r())}function ye(t,i){t&1&&(l(0,"div",21),m(1,"Debe tener 6 car\xE1cteres o m\xE1s"),r())}function Ee(t,i){if(t&1&&(v(0,10),d(1,Pe,2,0,"div",20)(2,ye,2,0,"div",20),g()),t&2){let e=p(2);n(),a("ngIf",e.form.controls.password.errors==null?null:e.form.controls.password.errors.required),n(),a("ngIf",e.form.controls.password.errors==null?null:e.form.controls.password.errors.email)}}function be(t,i){t&1&&(l(0,"div",21),m(1,"La imagen es requerida"),r())}function we(t,i){if(t&1&&(v(0,10),d(1,be,2,0,"div",20),g()),t&2){let e=p(2);n(),a("ngIf",e.form.controls.profilePic.errors==null?null:e.form.controls.profilePic.errors.required)}}function Te(t,i){t&1&&(l(0,"div",21),m(1,"La imagen es requerida"),r())}function Ue(t,i){if(t&1&&(v(0,10),d(1,Te,2,0,"div",20),g()),t&2){let e=p(2);n(),a("ngIf",e.form.controls.profilePic2.errors==null?null:e.form.controls.profilePic2.errors.required)}}function Ie(t,i){if(t&1){let e=L();l(0,"div",3)(1,"div",4),C(2,"app-logo",5),r(),l(3,"div",6)(4,"form",7)(5,"div",8)(6,"app-custom-input",9),h("keypress",function(s){x(e);let u=p();return S(u.allowOnlyLetters(s))}),r(),d(7,ae,3,2,"ng-container",10),r(),l(8,"div",8)(9,"app-custom-input",11),h("keypress",function(s){x(e);let u=p();return S(u.allowOnlyLetters(s))}),r(),d(10,ce,3,2,"ng-container",10),r(),l(11,"div",8),C(12,"app-custom-input",12),d(13,pe,3,2,"ng-container",10),r(),l(14,"div",8),C(15,"app-custom-input",13),d(16,fe,3,2,"ng-container",10),r(),l(17,"div",8),C(18,"app-custom-input",14),d(19,Ce,3,2,"ng-container",10),r(),l(20,"div",8),C(21,"app-custom-input",15),d(22,he,3,2,"ng-container",10),r(),l(23,"div",8),C(24,"app-custom-input",16),d(25,Ee,3,2,"ng-container",10),r(),l(26,"div",17)(27,"app-picture-input",18),h("fileSelected",function(s){x(e);let u=p();return S(u.onFileSelected(s,"profilePic"))})("fileRemoved",function(){x(e);let s=p();return S(s.onFileRemoved())}),r(),d(28,we,2,1,"ng-container",10),l(29,"app-picture-input",18),h("fileSelected",function(s){x(e);let u=p();return S(u.onFileSelected(s,"profilePic2"))})("fileRemoved",function(){x(e);let s=p();return S(s.onFileRemoved2())}),r(),d(30,Ue,2,1,"ng-container",10),r(),l(31,"div",4)(32,"button",19),m(33," REGISTRARSE "),r()()()()()}if(t&2){let e=p();F("body",e.header),a("@slideInOut",void 0),n(2),a("titulo","Registro de Paciente")("color",e.color),n(4),a("control",e.form.controls.name),n(),f(7,e.form.controls.name.errors&&e.form.controls.name.touched?7:-1),n(2),a("control",e.form.controls.lastName),n(),f(10,e.form.controls.lastName.errors&&e.form.controls.lastName.touched?10:-1),n(2),a("control",e.form.controls.dni),n(),f(13,e.form.controls.dni.errors&&e.form.controls.dni.touched?13:-1),n(2),a("control",e.form.controls.age),n(),f(16,e.form.controls.age.errors&&e.form.controls.age.touched?16:-1),n(2),a("control",e.form.controls.socialWork),n(),f(19,e.form.controls.socialWork.errors&&e.form.controls.socialWork.touched?19:-1),n(2),a("control",e.form.controls.email),n(),f(22,e.form.controls.email.errors&&e.form.controls.email.touched?22:-1),n(2),a("control",e.form.controls.password),n(),f(25,e.form.controls.password.errors&&e.form.controls.password.touched?25:-1),n(3),f(28,e.form.controls.profilePic.errors&&e.form.controls.profilePic.touched?28:-1),n(2),f(30,e.form.controls.profilePic2.errors&&e.form.controls.profilePic2.touched?30:-1),n(2),a("disabled",e.form.invalid)("appCaptcha",e.onCaptchaOnSubmit())("captchaTitle","Por favor, resuelve este captcha antes de continuar:")}}var Ge=(()=>{let i=class i{toggleVisibility(){this.isVisible=!this.isVisible}constructor(o){this.router=o,this.header=!0,this.esAdmin=!1,this.color="blue",this.patientUploaded=new V,this.isVisible=!0,this.fb=y(X),this.form=this.fb.group({uid:new _(""),name:new _("",[c.required,c.minLength(5),c.pattern("^[a-zA-Z]+$")]),lastName:new _("",[c.required,c.minLength(5),c.pattern("^[a-zA-Z]+$")]),dni:new _("",[c.required,c.minLength(6),c.maxLength(8)]),socialWork:new _("",[c.required,c.minLength(4)]),email:new _("",[c.required,c.email]),password:new _("",[c.required,c.minLength(6)]),profilePic:new _(null,[c.required]),profilePic2:new _(null,[c.required]),age:new _("",[c.required,c.min(0),c.max(100)])}),this.firebaseSvc=y(z),this.utilSvc=y(W)}get formControls(){return this.form.controls}onFileSelected(o,s){o.size>2097152?(console.log("El archivo es demasiado grande. El tama\xF1o m\xE1ximo permitido es 2 MB."),this.formControls[s].setValue(null)):this.formControls[s].setValue(o)}onSubmit(){return q(this,null,function*(){if(this.form.valid){let o=this.form.value,s=o.profilePic,u=o.profilePic2;if(s&&u){let ee=[this.firebaseSvc.uploadImage(s,`profilePics/${o.name}_${o.dni}_1`),this.firebaseSvc.uploadImage(u,`profilePics/${o.name}_${o.dni}_2`)];Promise.all(ee).then(([P,U])=>{if(P&&U){let I={uid:o.uid,name:o.name,lastName:o.lastName,dni:o.dni,socialWork:o.socialWork,email:o.email,profilePic:P,profilePic2:U,age:o.age};o.email&&o.password?this.firebaseSvc.signUp(o.email,o.password).then(b=>{let te=b.user;I.uid=te.uid,this.firebaseSvc.saveUserDataAsPatient(I).then(()=>{console.log("Paciente registrado con \xE9xito"),this.esAdmin==!1&&this.router.navigate(["./home"]),this.patientUploaded.emit(!0),this.form.reset()}).catch(ne=>{console.error("Error al guardar los datos del paciente: ",ne)})}).catch(b=>{console.error("Error al registrar el usuario: ",b)}):console.log("Faltan email o contrase\xF1a para registrar al paciente")}else console.error("No se pudieron obtener las URLs de las im\xE1genes")}).catch(P=>{console.error("Error al subir las im\xE1genes: ",P)})}else console.log("Las im\xE1genes no se han seleccionado correctamente")}else console.log("Formulario no v\xE1lido")})}allowOnlyLetters(o){/^[a-zA-Z ]+$/.test(o.key)||o.preventDefault()}onFileRemoved(){this.form.get("profilePic")?.setValue(null)}onFileRemoved2(){this.form.get("profilePic2")?.setValue(null)}onCaptchaOnSubmit(){return()=>this.onSubmit()}};i.\u0275fac=function(s){return new(s||i)(O(N))},i.\u0275cmp=k({type:i,selectors:[["app-sign-up-patient"]],inputs:{header:"header",esAdmin:"esAdmin",color:"color"},outputs:{patientUploaded:"patientUploaded"},standalone:!0,features:[M],decls:2,vars:2,consts:[[3,"title","back","whereToBack",4,"ngIf"],["class","container",3,"body",4,"ngIf"],[3,"title","back","whereToBack"],[1,"container"],[1,"d-flex-center","widht-100"],[3,"titulo","color"],[1,"d-flex-center","width-500"],[1,"auth-form"],[1,"margin-input"],["label","Nombre","type","text",3,"keypress","control"],[1,"validators-container"],["label","Apellido","type","text",3,"keypress","control"],["label","DNI","type","number",3,"control"],["label","EDAD","type","number",3,"control"],["label","OBRA SOCIAL","type","text",3,"control"],["label","Correo","type","email",3,"control"],["label","Contrase\xF1a","type","password",3,"control"],[1,"widht-100","d-flex-center"],["label","Selecciona tu imagen",3,"fileSelected","fileRemoved"],["mat-flat-button","","color","warn",1,"button-login",3,"disabled","appCaptcha","captchaTitle"],["class","validators",4,"ngIf"],[1,"validators"]],template:function(s,u){s&1&&d(0,ie,1,3,"app-header",0)(1,Ie,34,24,"div",1),s&2&&(a("ngIf",u.header),n(),a("ngIf",u.isVisible))},dependencies:[H,J,K,A,G,j,B,Z,$,R,Q,Y],styles:['@charset "UTF-8";.d-flex[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;flex-wrap:wrap}.body[_ngcontent-%COMP%]{height:800px;margin-top:20px;background-position-y:-50px}body[_ngcontent-%COMP%]{position:relative;margin:0;font-family:Arial,sans-serif}.body[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:10px 0 0;background:url("./media/background-patient-HLLCCCEI.jpg");background-repeat:no-repeat;background-position-x:center;background-size:1875px;opacity:.2;z-index:-1}.d-flex-space-between[_ngcontent-%COMP%]{display:flex;align-content:space-between;justify-content:space-between}.margin-input[_ngcontent-%COMP%]{margin-top:40px}.button-login[_ngcontent-%COMP%]{padding:22px;margin-top:40px}.validators[_ngcontent-%COMP%]{font-size:15px;text-align:center;color:red}.width-500[_ngcontent-%COMP%], .auth-form[_ngcontent-%COMP%]{width:100%;display:flex;flex-wrap:wrap;justify-content:center}.margin-input[_ngcontent-%COMP%]{margin-right:40px;width:30%}.widht-100[_ngcontent-%COMP%]{width:100%}.widht-50[_ngcontent-%COMP%]{width:100%;display:flex}'],data:{animation:[D("slideInOut",[T(":enter",[E({transform:"translateX(-100%)"}),w("1000ms ease-out",E({transform:"translateX(0)"}))]),T(":leave",[w("300ms ease-in",E({transform:"translateX(-100%)"}))])])]}});let t=i;return t})();export{Ge as a};
