import{$ as Dt,$a as Lg,$b as pa,A as ms,Aa as Jl,Ab as da,Ac as ru,B as me,Ba as Ft,Bb as ha,C as ra,Ca as ge,Cb as Hi,Cc as ga,D as ql,Da as Sg,Dc as su,Ea as aa,Ec as ou,F as bg,Fa as Cg,Fb as Es,G as vg,Ga as Je,Gb as Gi,H as ce,Ha as Jn,Hb as Ki,I as Wl,Ia as ys,J as Bi,Ja as zi,Jb as fa,K as Qn,Ka as $i,L as Hl,La as xg,Lb as ma,M as Gl,Ma as Dg,N as we,Na as kg,O as yg,Oa as Pg,P as Kl,Pa as Og,Q as ps,Qa as Ng,R as An,Ra as Mg,S as Yl,Sa as Zn,Sb as en,T as wg,U as Ig,Ua as ws,Va as ti,Wa as lt,X as sa,Xa as Zl,Y as gs,Ya as Is,Z as pe,Zb as Ts,_ as Ie,_a as ca,_b as qg,a as M,aa as Tt,ac as Wg,b as xt,bc as Hg,ca as L,cb as G,cc as As,da as dt,db as qi,dc as eu,ea as Eg,eb as ei,ec as ii,f as In,fa as J,fb as Rn,fc as Gg,g,ga as Ql,gb as Fg,gc as nn,h as Yn,ha as x,hb as Vg,hc as nu,i as mg,ia as V,ib as Ug,ic as Kg,j as En,ja as Mt,jb as la,jc as Yg,k as Vl,ka as _s,kb as ni,kc as Z,l as Ul,la as kt,lc as Yi,m as ct,ma as Xe,mc as Qg,n as re,na as ht,nb as Wi,o as pg,oa as $t,ob as jg,p as gg,pa as Xl,pb as tu,q as Tn,qb as Sn,r as jl,ra as Tg,rb as Ze,s as Bl,sa as bs,sb as tn,t as zl,ta as Xn,tc as Xg,u as fe,ua as vs,uc as Jg,v as q,va as Ag,vb as Bg,vc as iu,w as fs,wa as Rg,wc as Zg,x as $l,xa as oa,xb as zg,y as _g,yb as ua,z as nt,za as Lt,zb as $g,zc as t_}from"./chunk-JWOBJSOL.js";var cu=class{};var Qi=class n{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(e=>{let i=e.indexOf(":");if(i>0){let r=e.slice(0,i),s=r.toLowerCase(),o=e.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,i)=>{this.setHeaderEntries(i,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,i])=>{this.setHeaderEntries(e,i)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){let e=new n;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){let e=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(t.name,e);let r=(t.op==="a"?this.headers.get(e):void 0)||[];r.push(...i),this.headers.set(e,r);break;case"d":let s=t.value;if(!s)this.headers.delete(e),this.normalizedNames.delete(e);else{let o=this.headers.get(e);if(!o)return;o=o.filter(c=>s.indexOf(c)===-1),o.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,o)}break}}setHeaderEntries(t,e){let i=(Array.isArray(e)?e:[e]).map(s=>s.toString()),r=t.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(t,r)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}};var lu=class{encodeKey(t){return e_(t)}encodeValue(t){return e_(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function QI(n,t){let e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{let s=r.indexOf("="),[o,c]=s==-1?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,s)),t.decodeValue(r.slice(s+1))],l=e.get(o)||[];l.push(c),e.set(o,l)}),e}var XI=/%(\d[a-f0-9])/gi,JI={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function e_(n){return encodeURIComponent(n).replace(XI,(t,e)=>JI[e]??t)}function _a(n){return`${n}`}var Cn=class n{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new lu,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=QI(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{let i=t.fromObject[e],r=Array.isArray(i)?i.map(_a):[_a(i)];this.map.set(e,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){let e=[];return Object.keys(t).forEach(i=>{let r=t[i];Array.isArray(r)?r.forEach(s=>{e.push({param:i,value:s,op:"a"})}):e.push({param:i,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let e=this.encoder.encodeKey(t);return this.map.get(t).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let e=new n({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let e=(t.op==="a"?this.map.get(t.param):void 0)||[];e.push(_a(t.value)),this.map.set(t.param,e);break;case"d":if(t.value!==void 0){let i=this.map.get(t.param)||[],r=i.indexOf(_a(t.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var uu=class{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function ZI(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function n_(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function i_(n){return typeof Blob<"u"&&n instanceof Blob}function r_(n){return typeof FormData<"u"&&n instanceof FormData}function tE(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var Rs=class n{constructor(t,e,i,r){this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase();let s;if(ZI(this.method)||r?(this.body=i!==void 0?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new Qi,this.context??=new uu,!this.params)this.params=new Cn,this.urlWithParams=e;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=e;else{let c=e.indexOf("?"),l=c===-1?"?":c<e.length-1?"&":"";this.urlWithParams=e+l+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||n_(this.body)||i_(this.body)||r_(this.body)||tE(this.body)?this.body:this.body instanceof Cn?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||r_(this.body)?null:i_(this.body)?this.body.type||null:n_(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Cn?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(t={}){let e=t.method||this.method,i=t.url||this.url,r=t.responseType||this.responseType,s=t.transferCache??this.transferCache,o=t.body!==void 0?t.body:this.body,c=t.withCredentials??this.withCredentials,l=t.reportProgress??this.reportProgress,u=t.headers||this.headers,f=t.params||this.params,p=t.context??this.context;return t.setHeaders!==void 0&&(u=Object.keys(t.setHeaders).reduce((b,A)=>b.set(A,t.setHeaders[A]),u)),t.setParams&&(f=Object.keys(t.setParams).reduce((b,A)=>b.set(A,t.setParams[A]),f)),new n(e,i,o,{params:f,headers:u,context:p,reportProgress:l,responseType:r,withCredentials:c,transferCache:s})}},s_=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(s_||{}),du=class{constructor(t,e=o_.Ok,i="OK"){this.headers=t.headers||new Qi,this.status=t.status!==void 0?t.status:e,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}};var hu=class n extends du{constructor(t={}){super(t),this.type=s_.Response,this.body=t.body!==void 0?t.body:null}clone(t={}){return new n({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}};var o_=function(n){return n[n.Continue=100]="Continue",n[n.SwitchingProtocols=101]="SwitchingProtocols",n[n.Processing=102]="Processing",n[n.EarlyHints=103]="EarlyHints",n[n.Ok=200]="Ok",n[n.Created=201]="Created",n[n.Accepted=202]="Accepted",n[n.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",n[n.NoContent=204]="NoContent",n[n.ResetContent=205]="ResetContent",n[n.PartialContent=206]="PartialContent",n[n.MultiStatus=207]="MultiStatus",n[n.AlreadyReported=208]="AlreadyReported",n[n.ImUsed=226]="ImUsed",n[n.MultipleChoices=300]="MultipleChoices",n[n.MovedPermanently=301]="MovedPermanently",n[n.Found=302]="Found",n[n.SeeOther=303]="SeeOther",n[n.NotModified=304]="NotModified",n[n.UseProxy=305]="UseProxy",n[n.Unused=306]="Unused",n[n.TemporaryRedirect=307]="TemporaryRedirect",n[n.PermanentRedirect=308]="PermanentRedirect",n[n.BadRequest=400]="BadRequest",n[n.Unauthorized=401]="Unauthorized",n[n.PaymentRequired=402]="PaymentRequired",n[n.Forbidden=403]="Forbidden",n[n.NotFound=404]="NotFound",n[n.MethodNotAllowed=405]="MethodNotAllowed",n[n.NotAcceptable=406]="NotAcceptable",n[n.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",n[n.RequestTimeout=408]="RequestTimeout",n[n.Conflict=409]="Conflict",n[n.Gone=410]="Gone",n[n.LengthRequired=411]="LengthRequired",n[n.PreconditionFailed=412]="PreconditionFailed",n[n.PayloadTooLarge=413]="PayloadTooLarge",n[n.UriTooLong=414]="UriTooLong",n[n.UnsupportedMediaType=415]="UnsupportedMediaType",n[n.RangeNotSatisfiable=416]="RangeNotSatisfiable",n[n.ExpectationFailed=417]="ExpectationFailed",n[n.ImATeapot=418]="ImATeapot",n[n.MisdirectedRequest=421]="MisdirectedRequest",n[n.UnprocessableEntity=422]="UnprocessableEntity",n[n.Locked=423]="Locked",n[n.FailedDependency=424]="FailedDependency",n[n.TooEarly=425]="TooEarly",n[n.UpgradeRequired=426]="UpgradeRequired",n[n.PreconditionRequired=428]="PreconditionRequired",n[n.TooManyRequests=429]="TooManyRequests",n[n.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",n[n.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",n[n.InternalServerError=500]="InternalServerError",n[n.NotImplemented=501]="NotImplemented",n[n.BadGateway=502]="BadGateway",n[n.ServiceUnavailable=503]="ServiceUnavailable",n[n.GatewayTimeout=504]="GatewayTimeout",n[n.HttpVersionNotSupported=505]="HttpVersionNotSupported",n[n.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",n[n.InsufficientStorage=507]="InsufficientStorage",n[n.LoopDetected=508]="LoopDetected",n[n.NotExtended=510]="NotExtended",n[n.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",n}(o_||{});function au(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var VP=(()=>{let t=class t{constructor(i){this.handler=i}request(i,r,s={}){let o;if(i instanceof Rs)o=i;else{let u;s.headers instanceof Qi?u=s.headers:u=new Qi(s.headers);let f;s.params&&(s.params instanceof Cn?f=s.params:f=new Cn({fromObject:s.params})),o=new Rs(i,r,s.body!==void 0?s.body:null,{headers:u,context:s.context,params:f,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}let c=q(o).pipe(Qn(u=>this.handler.handle(u)));if(i instanceof Rs||s.observe==="events")return c;let l=c.pipe(ce(u=>u instanceof hu));switch(s.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return l.pipe(nt(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return l.pipe(nt(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return l.pipe(nt(u=>{if(u.body!==null&&typeof u.body!="string")throw new Error("Response is not a string.");return u.body}));case"json":default:return l.pipe(nt(u=>u.body))}case"response":return l;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(i,r={}){return this.request("DELETE",i,r)}get(i,r={}){return this.request("GET",i,r)}head(i,r={}){return this.request("HEAD",i,r)}jsonp(i,r){return this.request("JSONP",i,{params:new Cn().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(i,r={}){return this.request("OPTIONS",i,r)}patch(i,r,s={}){return this.request("PATCH",i,au(s,r))}post(i,r,s={}){return this.request("POST",i,au(s,r))}put(i,r,s={}){return this.request("PUT",i,au(s,r))}};t.\u0275fac=function(r){return new(r||t)(x(cu))},t.\u0275prov=L({token:t,factory:t.\u0275fac});let n=t;return n})();var pu=class extends Yg{constructor(){super(...arguments),this.supportsDOMEvents=!0}},gu=class n extends pu{static makeCurrent(){Kg(new n)}onAndCancel(t,e,i){return t.addEventListener(e,i),()=>{t.removeEventListener(e,i)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=nE();return e==null?null:iE(e)}resetBaseElement(){Ss=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Qg(document.cookie,t)}},Ss=null;function nE(){return Ss=Ss||document.querySelector("base"),Ss?Ss.getAttribute("href"):null}function iE(n){return new URL(n,document.baseURI).pathname}var rE=(()=>{let t=class t{build(){return new XMLHttpRequest}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=L({token:t,factory:t.\u0275fac});let n=t;return n})(),_u=new J(""),u_=(()=>{let t=class t{constructor(i,r){this._zone=r,this._eventNameToPlugin=new Map,i.forEach(s=>{s.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,r,s){return this._findPluginFor(r).addEventListener(i,r,s)}getZone(){return this._zone}_findPluginFor(i){let r=this._eventNameToPlugin.get(i);if(r)return r;if(r=this._plugins.find(o=>o.supports(i)),!r)throw new Tt(5101,!1);return this._eventNameToPlugin.set(i,r),r}};t.\u0275fac=function(r){return new(r||t)(x(_u),x(G))},t.\u0275prov=L({token:t,factory:t.\u0275fac});let n=t;return n})(),ba=class{constructor(t){this._doc=t}},fu="ng-app-id",d_=(()=>{let t=class t{constructor(i,r,s,o={}){this.doc=i,this.appId=r,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=iu(o),this.resetHostNodes()}addStyles(i){for(let r of i)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(i){for(let r of i)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let i=this.styleNodesInDOM;i&&(i.forEach(r=>r.remove()),i.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(let r of this.getAllStyles())this.addStyleToHost(i,r)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(let r of this.hostNodes)this.addStyleToHost(r,i)}onStyleRemoved(i){let r=this.styleRef;r.get(i)?.elements?.forEach(s=>s.remove()),r.delete(i)}collectServerRenderedStyles(){let i=this.doc.head?.querySelectorAll(`style[${fu}="${this.appId}"]`);if(i?.length){let r=new Map;return i.forEach(s=>{s.textContent!=null&&r.set(s.textContent,s)}),r}return null}changeUsageCount(i,r){let s=this.styleRef;if(s.has(i)){let o=s.get(i);return o.usage+=r,o.usage}return s.set(i,{usage:r,elements:[]}),r}getStyleElement(i,r){let s=this.styleNodesInDOM,o=s?.get(r);if(o?.parentNode===i)return s.delete(r),o.removeAttribute(fu),o;{let c=this.doc.createElement("style");return this.nonce&&c.setAttribute("nonce",this.nonce),c.textContent=r,this.platformIsServer&&c.setAttribute(fu,this.appId),i.appendChild(c),c}}addStyleToHost(i,r){let s=this.getStyleElement(i,r),o=this.styleRef,c=o.get(r)?.elements;c?c.push(s):o.set(r,{elements:[s],usage:1})}resetHostNodes(){let i=this.hostNodes;i.clear(),i.add(this.doc.head)}};t.\u0275fac=function(r){return new(r||t)(x(Z),x(aa),x(ys,8),x(Je))},t.\u0275prov=L({token:t,factory:t.\u0275fac});let n=t;return n})(),mu={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},vu=/%COMP%/g,h_="%COMP%",sE=`_nghost-${h_}`,oE=`_ngcontent-${h_}`,aE=!0,cE=new J("",{providedIn:"root",factory:()=>aE});function lE(n){return oE.replace(vu,n)}function uE(n){return sE.replace(vu,n)}function f_(n,t){return t.map(e=>e.replace(vu,n))}var a_=(()=>{let t=class t{constructor(i,r,s,o,c,l,u,f=null){this.eventManager=i,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=c,this.platformId=l,this.ngZone=u,this.nonce=f,this.rendererByCompId=new Map,this.platformIsServer=iu(l),this.defaultRenderer=new Cs(i,c,u,this.platformIsServer)}createRenderer(i,r){if(!i||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===_s.ShadowDom&&(r=xt(M({},r),{encapsulation:_s.Emulated}));let s=this.getOrCreateRenderer(i,r);return s instanceof va?s.applyToHost(i):s instanceof xs&&s.applyStyles(),s}getOrCreateRenderer(i,r){let s=this.rendererByCompId,o=s.get(r.id);if(!o){let c=this.doc,l=this.ngZone,u=this.eventManager,f=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,b=this.platformIsServer;switch(r.encapsulation){case _s.Emulated:o=new va(u,f,r,this.appId,p,c,l,b);break;case _s.ShadowDom:return new bu(u,f,i,r,c,l,this.nonce,b);default:o=new xs(u,f,r,p,c,l,b);break}s.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};t.\u0275fac=function(r){return new(r||t)(x(u_),x(d_),x(aa),x(cE),x(Z),x(Je),x(G),x(ys))},t.\u0275prov=L({token:t,factory:t.\u0275fac});let n=t;return n})(),Cs=class{constructor(t,e,i,r){this.eventManager=t,this.doc=e,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,e){return e?this.doc.createElementNS(mu[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(c_(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&(c_(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let i=typeof t=="string"?this.doc.querySelector(t):t;if(!i)throw new Tt(-5104,!1);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;let s=mu[r];s?t.setAttributeNS(s,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){let r=mu[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(ws.DashCase|ws.Important)?t.style.setProperty(e,i,r&ws.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&ws.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t!=null&&(t[e]=i)}setValue(t,e){t.nodeValue=e}listen(t,e,i){if(typeof t=="string"&&(t=nu().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${e}`);return this.eventManager.addEventListener(t,e,this.decoratePreventDefault(i))}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))===!1&&e.preventDefault()}}};function c_(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var bu=class extends Cs{constructor(t,e,i,r,s,o,c,l){super(t,s,o,l),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=f_(r.id,r.styles);for(let f of u){let p=document.createElement("style");c&&p.setAttribute("nonce",c),p.textContent=f,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},xs=class extends Cs{constructor(t,e,i,r,s,o,c,l){super(t,s,o,c),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=r,this.styles=l?f_(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},va=class extends xs{constructor(t,e,i,r,s,o,c,l){let u=r+"-"+i.id;super(t,e,i,s,o,c,l,u),this.contentAttr=lE(u),this.hostAttr=uE(u)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}},dE=(()=>{let t=class t extends ba{constructor(i){super(i)}supports(i){return!0}addEventListener(i,r,s){return i.addEventListener(r,s,!1),()=>this.removeEventListener(i,r,s)}removeEventListener(i,r,s){return i.removeEventListener(r,s)}};t.\u0275fac=function(r){return new(r||t)(x(Z))},t.\u0275prov=L({token:t,factory:t.\u0275fac});let n=t;return n})(),l_=["alt","control","meta","shift"],hE={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},fE={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},mE=(()=>{let t=class t extends ba{constructor(i){super(i)}supports(i){return t.parseEventName(i)!=null}addEventListener(i,r,s){let o=t.parseEventName(r),c=t.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>nu().onAndCancel(i,o.domEventName,c))}static parseEventName(i){let r=i.toLowerCase().split("."),s=r.shift();if(r.length===0||!(s==="keydown"||s==="keyup"))return null;let o=t._normalizeKey(r.pop()),c="",l=r.indexOf("code");if(l>-1&&(r.splice(l,1),c="code."),l_.forEach(f=>{let p=r.indexOf(f);p>-1&&(r.splice(p,1),c+=f+".")}),c+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=s,u.fullKey=c,u}static matchEventFullKeyCode(i,r){let s=hE[i.key]||i.key,o="";return r.indexOf("code.")>-1&&(s=i.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),l_.forEach(c=>{if(c!==s){let l=fE[c];l(i)&&(o+=c+".")}}),o+=s,o===r)}static eventCallback(i,r,s){return o=>{t.matchEventFullKeyCode(o,i)&&s.runGuarded(()=>r(o))}}static _normalizeKey(i){return i==="esc"?"escape":i}};t.\u0275fac=function(r){return new(r||t)(x(Z))},t.\u0275prov=L({token:t,factory:t.\u0275fac});let n=t;return n})();function cO(n,t){return Gg(M({rootComponent:n},pE(t)))}function pE(n){return{appProviders:[...yE,...n?.providers??[]],platformProviders:vE}}function gE(){gu.makeCurrent()}function _E(){return new Jl}function bE(){return Sg(document),document}var vE=[{provide:Je,useValue:Xg},{provide:Cg,useValue:gE,multi:!0},{provide:Z,useFactory:bE,deps:[]}];var yE=[{provide:Tg,useValue:"root"},{provide:Jl,useFactory:_E,deps:[]},{provide:_u,useClass:dE,multi:!0,deps:[Z,G,Je]},{provide:_u,useClass:mE,multi:!0,deps:[Z]},a_,d_,u_,{provide:Lg,useExisting:a_},{provide:Zg,useClass:rE,deps:[]},[]];var m_=(()=>{let t=class t{constructor(i){this._doc=i}getTitle(){return this._doc.title}setTitle(i){this._doc.title=i||""}};t.\u0275fac=function(r){return new(r||t)(x(Z))},t.\u0275prov=L({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var wE=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=L({token:t,factory:function(r){let s=null;return r?s=new(r||t):s=x(IE),s},providedIn:"root"});let n=t;return n})(),IE=(()=>{let t=class t extends wE{constructor(i){super(),this._doc=i}sanitize(i,r){if(r==null)return null;switch(i){case Zn.NONE:return r;case Zn.HTML:return $i(r,"HTML")?zi(r):Mg(this._doc,String(r)).toString();case Zn.STYLE:return $i(r,"Style")?zi(r):r;case Zn.SCRIPT:if($i(r,"Script"))return zi(r);throw new Tt(5200,!1);case Zn.URL:return $i(r,"URL")?zi(r):Ng(String(r));case Zn.RESOURCE_URL:if($i(r,"ResourceURL"))return zi(r);throw new Tt(5201,!1);default:throw new Tt(5202,!1)}}bypassSecurityTrustHtml(i){return xg(i)}bypassSecurityTrustStyle(i){return Dg(i)}bypassSecurityTrustScript(i){return kg(i)}bypassSecurityTrustUrl(i){return Pg(i)}bypassSecurityTrustResourceUrl(i){return Og(i)}};t.\u0275fac=function(r){return new(r||t)(x(Z))},t.\u0275prov=L({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var Q="primary",qs=Symbol("RouteTitle"),Tu=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function er(n){return new Tu(n)}function TE(n,t,e){let i=e.path.split("/");if(i.length>n.length||e.pathMatch==="full"&&(t.hasChildren()||i.length<n.length))return null;let r={};for(let s=0;s<i.length;s++){let o=i[s],c=n[s];if(o.startsWith(":"))r[o.substring(1)]=c;else if(o!==c.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function AE(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!xe(n[e],t[e]))return!1;return!0}function xe(n,t){let e=n?Au(n):void 0,i=t?Au(t):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!y_(n[r],t[r]))return!1;return!0}function Au(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function y_(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;let e=[...n].sort(),i=[...t].sort();return e.every((r,s)=>i[s]===r)}else return n===t}function w_(n){return n.length>0?n[n.length-1]:null}function kn(n){return $l(n)?n:Wg(n)?fe(Promise.resolve(n)):q(n)}var RE={exact:E_,subset:T_},I_={exact:SE,subset:CE,ignored:()=>!0};function p_(n,t,e){return RE[e.paths](n.root,t.root,e.matrixParams)&&I_[e.queryParams](n.queryParams,t.queryParams)&&!(e.fragment==="exact"&&n.fragment!==t.fragment)}function SE(n,t){return xe(n,t)}function E_(n,t,e){if(!si(n.segments,t.segments)||!Ia(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(let i in t.children)if(!n.children[i]||!E_(n.children[i],t.children[i],e))return!1;return!0}function CE(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>y_(n[e],t[e]))}function T_(n,t,e){return A_(n,t,t.segments,e)}function A_(n,t,e,i){if(n.segments.length>e.length){let r=n.segments.slice(0,e.length);return!(!si(r,e)||t.hasChildren()||!Ia(r,e,i))}else if(n.segments.length===e.length){if(!si(n.segments,e)||!Ia(n.segments,e,i))return!1;for(let r in t.children)if(!n.children[r]||!T_(n.children[r],t.children[r],i))return!1;return!0}else{let r=e.slice(0,n.segments.length),s=e.slice(n.segments.length);return!si(n.segments,r)||!Ia(n.segments,r,i)||!n.children[Q]?!1:A_(n.children[Q],t,s,i)}}function Ia(n,t,e){return t.every((i,r)=>I_[e](n[r].parameters,i.parameters))}var xn=class{constructor(t=new at([],{}),e={},i=null){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap??=er(this.queryParams),this._queryParamMap}toString(){return kE.serialize(this)}},at=class{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Object.values(e).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ea(this)}},ri=class{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=er(this.parameters),this._parameterMap}toString(){return S_(this)}};function xE(n,t){return si(n,t)&&n.every((e,i)=>xe(e.parameters,t[i].parameters))}function si(n,t){return n.length!==t.length?!1:n.every((e,i)=>e.path===t[i].path)}function DE(n,t){let e=[];return Object.entries(n.children).forEach(([i,r])=>{i===Q&&(e=e.concat(t(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==Q&&(e=e.concat(t(r,i)))}),e}var Xu=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=L({token:t,factory:()=>new Aa,providedIn:"root"});let n=t;return n})(),Aa=class{parse(t){let e=new Su(t);return new xn(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${Ds(t.root,!0)}`,i=NE(t.queryParams),r=typeof t.fragment=="string"?`#${PE(t.fragment)}`:"";return`${e}${i}${r}`}},kE=new Aa;function Ea(n){return n.segments.map(t=>S_(t)).join("/")}function Ds(n,t){if(!n.hasChildren())return Ea(n);if(t){let e=n.children[Q]?Ds(n.children[Q],!1):"",i=[];return Object.entries(n.children).forEach(([r,s])=>{r!==Q&&i.push(`${r}:${Ds(s,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}else{let e=DE(n,(i,r)=>r===Q?[Ds(n.children[Q],!1)]:[`${r}:${Ds(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[Q]!=null?`${Ea(n)}/${e[0]}`:`${Ea(n)}/(${e.join("//")})`}}function R_(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ya(n){return R_(n).replace(/%3B/gi,";")}function PE(n){return encodeURI(n)}function Ru(n){return R_(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ta(n){return decodeURIComponent(n)}function g_(n){return Ta(n.replace(/\+/g,"%20"))}function S_(n){return`${Ru(n.path)}${OE(n.parameters)}`}function OE(n){return Object.entries(n).map(([t,e])=>`;${Ru(t)}=${Ru(e)}`).join("")}function NE(n){let t=Object.entries(n).map(([e,i])=>Array.isArray(i)?i.map(r=>`${ya(e)}=${ya(r)}`).join("&"):`${ya(e)}=${ya(i)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var ME=/^[^\/()?;#]+/;function yu(n){let t=n.match(ME);return t?t[0]:""}var LE=/^[^\/()?;=#]+/;function FE(n){let t=n.match(LE);return t?t[0]:""}var VE=/^[^=?&#]+/;function UE(n){let t=n.match(VE);return t?t[0]:""}var jE=/^[^&#]+/;function BE(n){let t=n.match(jE);return t?t[0]:""}var Su=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new at([],{}):new at([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[Q]=new at(t,e)),i}parseSegment(){let t=yu(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new Tt(4009,!1);return this.capture(t),new ri(Ta(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=FE(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let r=yu(this.remaining);r&&(i=r,this.capture(i))}t[Ta(e)]=Ta(i)}parseQueryParam(t){let e=UE(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let o=BE(this.remaining);o&&(i=o,this.capture(i))}let r=g_(e),s=g_(i);if(t.hasOwnProperty(r)){let o=t[r];Array.isArray(o)||(o=[o],t[r]=o),o.push(s)}else t[r]=s}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=yu(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new Tt(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=Q);let o=this.parseChildren();e[s]=Object.keys(o).length===1?o[Q]:new at([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new Tt(4011,!1)}};function C_(n){return n.segments.length>0?new at([],{[Q]:n}):n}function x_(n){let t={};for(let[i,r]of Object.entries(n.children)){let s=x_(r);if(i===Q&&s.segments.length===0&&s.hasChildren())for(let[o,c]of Object.entries(s.children))t[o]=c;else(s.segments.length>0||s.hasChildren())&&(t[i]=s)}let e=new at(n.segments,t);return zE(e)}function zE(n){if(n.numberOfChildren===1&&n.children[Q]){let t=n.children[Q];return new at(n.segments.concat(t.segments),t.children)}return n}function nr(n){return n instanceof xn}function $E(n,t,e=null,i=null){let r=D_(n);return k_(r,t,e,i)}function D_(n){let t;function e(s){let o={};for(let l of s.children){let u=e(l);o[l.outlet]=u}let c=new at(s.url,o);return s===n&&(t=c),c}let i=e(n.root),r=C_(i);return t??r}function k_(n,t,e,i){let r=n;for(;r.parent;)r=r.parent;if(t.length===0)return wu(r,r,r,e,i);let s=qE(t);if(s.toRoot())return wu(r,r,new at([],{}),e,i);let o=WE(s,r,n),c=o.processChildren?Os(o.segmentGroup,o.index,s.commands):O_(o.segmentGroup,o.index,s.commands);return wu(r,o.segmentGroup,c,e,i)}function Ra(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Ls(n){return typeof n=="object"&&n!=null&&n.outlets}function wu(n,t,e,i,r){let s={};i&&Object.entries(i).forEach(([l,u])=>{s[l]=Array.isArray(u)?u.map(f=>`${f}`):`${u}`});let o;n===t?o=e:o=P_(n,t,e);let c=C_(x_(o));return new xn(c,s,r)}function P_(n,t,e){let i={};return Object.entries(n.children).forEach(([r,s])=>{s===t?i[r]=e:i[r]=P_(s,t,e)}),new at(n.segments,i)}var Sa=class{constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&Ra(i[0]))throw new Tt(4003,!1);let r=i.find(Ls);if(r&&r!==w_(i))throw new Tt(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function qE(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Sa(!0,0,n);let t=0,e=!1,i=n.reduce((r,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let c={};return Object.entries(s.outlets).forEach(([l,u])=>{c[l]=typeof u=="string"?u.split("/"):u}),[...r,{outlets:c}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:o===0?(s.split("/").forEach((c,l)=>{l==0&&c==="."||(l==0&&c===""?e=!0:c===".."?t++:c!=""&&r.push(c))}),r):[...r,s]},[]);return new Sa(e,t,i)}var Zi=class{constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}};function WE(n,t,e){if(n.isAbsolute)return new Zi(t,!0,0);if(!e)return new Zi(t,!1,NaN);if(e.parent===null)return new Zi(e,!0,0);let i=Ra(n.commands[0])?0:1,r=e.segments.length-1+i;return HE(e,r,n.numberOfDoubleDots)}function HE(n,t,e){let i=n,r=t,s=e;for(;s>r;){if(s-=r,i=i.parent,!i)throw new Tt(4005,!1);r=i.segments.length}return new Zi(i,!1,r-s)}function GE(n){return Ls(n[0])?n[0].outlets:{[Q]:n}}function O_(n,t,e){if(n??=new at([],{}),n.segments.length===0&&n.hasChildren())return Os(n,t,e);let i=KE(n,t,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let s=new at(n.segments.slice(0,i.pathIndex),{});return s.children[Q]=new at(n.segments.slice(i.pathIndex),n.children),Os(s,0,r)}else return i.match&&r.length===0?new at(n.segments,{}):i.match&&!n.hasChildren()?Cu(n,t,e):i.match?Os(n,0,r):Cu(n,t,e)}function Os(n,t,e){if(e.length===0)return new at(n.segments,{});{let i=GE(e),r={};if(Object.keys(i).some(s=>s!==Q)&&n.children[Q]&&n.numberOfChildren===1&&n.children[Q].segments.length===0){let s=Os(n.children[Q],t,e);return new at(n.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(r[s]=O_(n.children[s],t,o))}),Object.entries(n.children).forEach(([s,o])=>{i[s]===void 0&&(r[s]=o)}),new at(n.segments,r)}}function KE(n,t,e){let i=0,r=t,s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=e.length)return s;let o=n.segments[r],c=e[i];if(Ls(c))break;let l=`${c}`,u=i<e.length-1?e[i+1]:null;if(r>0&&l===void 0)break;if(l&&u&&typeof u=="object"&&u.outlets===void 0){if(!b_(l,u,o))return s;i+=2}else{if(!b_(l,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function Cu(n,t,e){let i=n.segments.slice(0,t),r=0;for(;r<e.length;){let s=e[r];if(Ls(s)){let l=YE(s.outlets);return new at(i,l)}if(r===0&&Ra(e[0])){let l=n.segments[t];i.push(new ri(l.path,__(e[0]))),r++;continue}let o=Ls(s)?s.outlets[Q]:`${s}`,c=r<e.length-1?e[r+1]:null;o&&c&&Ra(c)?(i.push(new ri(o,__(c))),r+=2):(i.push(new ri(o,{})),r++)}return new at(i,{})}function YE(n){let t={};return Object.entries(n).forEach(([e,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(t[e]=Cu(new at([],{}),0,i))}),t}function __(n){let t={};return Object.entries(n).forEach(([e,i])=>t[e]=`${i}`),t}function b_(n,t,e){return n==e.path&&xe(t,e.parameters)}var Ns="imperative",qt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(qt||{}),_e=class{constructor(t,e){this.id=t,this.url=e}},Fs=class extends _e{constructor(t,e,i="imperative",r=null){super(t,e),this.type=qt.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},oi=class extends _e{constructor(t,e,i){super(t,e),this.urlAfterRedirects=i,this.type=qt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},ue=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(ue||{}),xu=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(xu||{}),Dn=class extends _e{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=qt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ai=class extends _e{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=qt.NavigationSkipped}},Vs=class extends _e{constructor(t,e,i,r){super(t,e),this.error=i,this.target=r,this.type=qt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ca=class extends _e{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=qt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Du=class extends _e{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=qt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ku=class extends _e{constructor(t,e,i,r,s){super(t,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=qt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Pu=class extends _e{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=qt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ou=class extends _e{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=qt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Nu=class{constructor(t){this.route=t,this.type=qt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Mu=class{constructor(t){this.route=t,this.type=qt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Lu=class{constructor(t){this.snapshot=t,this.type=qt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Fu=class{constructor(t){this.snapshot=t,this.type=qt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Vu=class{constructor(t){this.snapshot=t,this.type=qt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Uu=class{constructor(t){this.snapshot=t,this.type=qt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Us=class{},js=class{constructor(t){this.url=t}};var ju=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Na,this.attachRef=null}},Na=(()=>{let t=class t{constructor(){this.contexts=new Map}onChildOutletCreated(i,r){let s=this.getOrCreateContext(i);s.outlet=r,this.contexts.set(i,s)}onChildOutletDestroyed(i){let r=this.getContext(i);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let r=this.getContext(i);return r||(r=new ju,this.contexts.set(i,r)),r}getContext(i){return this.contexts.get(i)||null}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=L({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),xa=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=Bu(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){let e=Bu(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=zu(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return zu(t,this._root).map(e=>e.value)}};function Bu(n,t){if(n===t.value)return t;for(let e of t.children){let i=Bu(n,e);if(i)return i}return null}function zu(n,t){if(n===t.value)return[t];for(let e of t.children){let i=zu(n,e);if(i.length)return i.unshift(t),i}return[]}var le=class{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function Ji(n){let t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}var Da=class extends xa{constructor(t,e){super(t),this.snapshot=e,Zu(this,t)}toString(){return this.snapshot.toString()}};function N_(n){let t=QE(n),e=new re([new ri("",{})]),i=new re({}),r=new re({}),s=new re({}),o=new re(""),c=new ir(e,i,s,o,r,Q,n,t.root);return c.snapshot=t.root,new Da(new le(c,[]),t)}function QE(n){let t={},e={},i={},r="",s=new Bs([],t,i,r,e,Q,n,null,{});return new ka("",new le(s,[]))}var ir=class{constructor(t,e,i,r,s,o,c,l){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=c,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(nt(u=>u[qs]))??q(void 0),this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(nt(t=>er(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(nt(t=>er(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Ju(n,t,e="emptyOnly"){let i,{routeConfig:r}=n;return t!==null&&(e==="always"||r?.path===""||!t.component&&!t.routeConfig?.loadComponent)?i={params:M(M({},t.params),n.params),data:M(M({},t.data),n.data),resolve:M(M(M(M({},n.data),t.data),r?.data),n._resolvedData)}:i={params:M({},n.params),data:M({},n.data),resolve:M(M({},n.data),n._resolvedData??{})},r&&L_(r)&&(i.resolve[qs]=r.title),i}var Bs=class{get title(){return this.data?.[qs]}constructor(t,e,i,r,s,o,c,l,u){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=c,this.routeConfig=l,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=er(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=er(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(i=>i.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},ka=class extends xa{constructor(t,e){super(e),this.url=t,Zu(this,e)}toString(){return M_(this._root)}};function Zu(n,t){t.value._routerState=n,t.children.forEach(e=>Zu(n,e))}function M_(n){let t=n.children.length>0?` { ${n.children.map(M_).join(", ")} } `:"";return`${n.value}${t}`}function Iu(n){if(n.snapshot){let t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,xe(t.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),xe(t.params,e.params)||n.paramsSubject.next(e.params),AE(t.url,e.url)||n.urlSubject.next(e.url),xe(t.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function $u(n,t){let e=xe(n.params,t.params)&&xE(n.url,t.url),i=!n.parent!=!t.parent;return e&&!i&&(!n.parent||$u(n.parent,t.parent))}function L_(n){return typeof n.title=="string"||n.title===null}var XE=(()=>{let t=class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=Q,this.activateEvents=new ge,this.deactivateEvents=new ge,this.attachEvents=new ge,this.detachEvents=new ge,this.parentContexts=V(Na),this.location=V(qi),this.changeDetector=V(ii),this.environmentInjector=V(bs),this.inputBinder=V(td,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(i){if(i.name){let{firstChange:r,previousValue:s}=i.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(i){return this.parentContexts.getContext(i)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let i=this.parentContexts.getContext(this.name);i?.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Tt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Tt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Tt(4012,!1);this.location.detach();let i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,r){this.activated=i,this._activatedRoute=r,this.location.insert(i.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){let i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,r){if(this.isActivated)throw new Tt(4013,!1);this._activatedRoute=i;let s=this.location,c=i.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,u=new qu(i,l,s.injector);this.activated=s.createComponent(c,{index:s.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=$t({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[vs]});let n=t;return n})(),qu=class n{__ngOutletInjector(t){return new n(this.route,this.childContexts,t)}constructor(t,e,i){this.route=t,this.childContexts=e,this.parent=i}get(t,e){return t===ir?this.route:t===Na?this.childContexts:this.parent.get(t,e)}},td=new J("");function JE(n,t,e){let i=zs(n,t._root,e?e._root:void 0);return new Da(i,t)}function zs(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){let i=e.value;i._futureSnapshot=t.value;let r=ZE(n,t,e);return new le(i,r)}else{if(n.shouldAttach(t.value)){let s=n.retrieve(t.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(c=>zs(n,c)),o}}let i=t0(t.value),r=t.children.map(s=>zs(n,s));return new le(i,r)}}function ZE(n,t,e){return t.children.map(i=>{for(let r of e.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return zs(n,i,r);return zs(n,i)})}function t0(n){return new ir(new re(n.url),new re(n.params),new re(n.queryParams),new re(n.fragment),new re(n.data),n.outlet,n.component,n)}var F_="ngNavigationCancelingError";function V_(n,t){let{redirectTo:e,navigationBehaviorOptions:i}=nr(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=U_(!1,ue.Redirect);return r.url=e,r.navigationBehaviorOptions=i,r}function U_(n,t){let e=new Error(`NavigationCancelingError: ${n||""}`);return e[F_]=!0,e.cancellationCode=t,e}function e0(n){return j_(n)&&nr(n.url)}function j_(n){return!!n&&n[F_]}var n0=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Xe({type:t,selectors:[["ng-component"]],standalone:!0,features:[en],decls:1,vars:0,template:function(r,s){r&1&&tn(0,"router-outlet")},dependencies:[XE],encapsulation:2});let n=t;return n})();function i0(n,t){return n.providers&&!n._injector&&(n._injector=Vg(n.providers,t,`Route: ${n.path}`)),n._injector??t}function ed(n){let t=n.children&&n.children.map(ed),e=t?xt(M({},n),{children:t}):M({},n);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==Q&&(e.component=n0),e}function De(n){return n.outlet||Q}function r0(n,t){let e=n.filter(i=>De(i)===t);return e.push(...n.filter(i=>De(i)!==t)),e}function Ws(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var s0=(n,t,e,i)=>nt(r=>(new Wu(t,r.targetRouterState,r.currentRouterState,e,i).activate(n),r)),Wu=class{constructor(t,e,i,r,s){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(t){let e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),Iu(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){let r=Ji(e);t.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(t,e,i){let r=t.value,s=e?e.value:null;if(r===s)if(r.component){let o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,i);else s&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=Ji(t);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);if(i&&i.outlet){let o=i.outlet.detach(),c=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:c})}}deactivateRouteAndOutlet(t,e){let i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=Ji(t);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(t,e,i){let r=Ji(e);t.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new Uu(s.value.snapshot))}),t.children.length&&this.forwardEvent(new Fu(t.value.snapshot))}activateRoutes(t,e,i){let r=t.value,s=e?e.value:null;if(Iu(r),r===s)if(r.component){let o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,i);else if(r.component){let o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let c=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(c.contexts),o.attachRef=c.componentRef,o.route=c.route.value,o.outlet&&o.outlet.attach(c.componentRef,c.route.value),Iu(c.route.value),this.activateChildRoutes(t,null,o.children)}else{let c=Ws(r.snapshot);o.attachRef=null,o.route=r,o.injector=c,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(t,null,o.children)}}else this.activateChildRoutes(t,null,i)}},Pa=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},tr=class{constructor(t,e){this.component=t,this.route=e}};function o0(n,t,e){let i=n._root,r=t?t._root:null;return ks(i,r,e,[i.value])}function a0(n){let t=n.routeConfig?n.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:n,guards:t}}function sr(n,t){let e=Symbol(),i=t.get(n,e);return i===e?typeof n=="function"&&!Eg(n)?n:t.get(n):i}function ks(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=Ji(t);return n.children.forEach(o=>{c0(o,s[o.value.outlet],e,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,c])=>Ms(c,e.getContext(o),r)),r}function c0(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=t?t.value:null,c=e?e.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let l=l0(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new Pa(i)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?ks(n,t,c?c.children:null,i,r):ks(n,t,e,i,r),l&&c&&c.outlet&&c.outlet.isActivated&&r.canDeactivateChecks.push(new tr(c.outlet.component,o))}else o&&Ms(t,c,r),r.canActivateChecks.push(new Pa(i)),s.component?ks(n,null,c?c.children:null,i,r):ks(n,null,e,i,r);return r}function l0(n,t,e){if(typeof e=="function")return e(n,t);switch(e){case"pathParamsChange":return!si(n.url,t.url);case"pathParamsOrQueryParamsChange":return!si(n.url,t.url)||!xe(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!$u(n,t)||!xe(n.queryParams,t.queryParams);case"paramsChange":default:return!$u(n,t)}}function Ms(n,t,e){let i=Ji(n),r=n.value;Object.entries(i).forEach(([s,o])=>{r.component?t?Ms(o,t.children.getContext(s),e):Ms(o,null,e):Ms(o,t,e)}),r.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new tr(t.outlet.component,r)):e.canDeactivateChecks.push(new tr(null,r)):e.canDeactivateChecks.push(new tr(null,r))}function Hs(n){return typeof n=="function"}function u0(n){return typeof n=="boolean"}function d0(n){return n&&Hs(n.canLoad)}function h0(n){return n&&Hs(n.canActivate)}function f0(n){return n&&Hs(n.canActivateChild)}function m0(n){return n&&Hs(n.canDeactivate)}function p0(n){return n&&Hs(n.canMatch)}function B_(n){return n instanceof _g||n?.name==="EmptyError"}var wa=Symbol("INITIAL_VALUE");function rr(){return pe(n=>ms(n.map(t=>t.pipe(we(1),gs(wa)))).pipe(nt(t=>{for(let e of t)if(e!==!0){if(e===wa)return wa;if(e===!1||e instanceof xn)return e}return!0}),ce(t=>t!==wa),we(1)))}function g0(n,t){return me(e=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=e;return o.length===0&&s.length===0?q(xt(M({},e),{guardsResult:!0})):_0(o,i,r,n).pipe(me(c=>c&&u0(c)?b0(i,s,n,t):q(c)),nt(c=>xt(M({},e),{guardsResult:c})))})}function _0(n,t,e,i){return fe(n).pipe(me(r=>E0(r.component,r.route,e,t,i)),An(r=>r!==!0,!0))}function b0(n,t,e,i){return fe(t).pipe(Qn(r=>ra(y0(r.route.parent,i),v0(r.route,i),I0(n,r.path,e),w0(n,r.route,e))),An(r=>r!==!0,!0))}function v0(n,t){return n!==null&&t&&t(new Vu(n)),q(!0)}function y0(n,t){return n!==null&&t&&t(new Lu(n)),q(!0)}function w0(n,t,e){let i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||i.length===0)return q(!0);let r=i.map(s=>ql(()=>{let o=Ws(t)??e,c=sr(s,o),l=h0(c)?c.canActivate(t,n):Xn(o,()=>c(t,n));return kn(l).pipe(An())}));return q(r).pipe(rr())}function I0(n,t,e){let i=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(o=>a0(o)).filter(o=>o!==null).map(o=>ql(()=>{let c=o.guards.map(l=>{let u=Ws(o.node)??e,f=sr(l,u),p=f0(f)?f.canActivateChild(i,n):Xn(u,()=>f(i,n));return kn(p).pipe(An())});return q(c).pipe(rr())}));return q(s).pipe(rr())}function E0(n,t,e,i,r){let s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!s||s.length===0)return q(!0);let o=s.map(c=>{let l=Ws(t)??r,u=sr(c,l),f=m0(u)?u.canDeactivate(n,t,e,i):Xn(l,()=>u(n,t,e,i));return kn(f).pipe(An())});return q(o).pipe(rr())}function T0(n,t,e,i){let r=t.canLoad;if(r===void 0||r.length===0)return q(!0);let s=r.map(o=>{let c=sr(o,n),l=d0(c)?c.canLoad(t,e):Xn(n,()=>c(t,e));return kn(l)});return q(s).pipe(rr(),z_(i))}function z_(n){return mg(Dt(t=>{if(nr(t))throw V_(n,t)}),nt(t=>t===!0))}function A0(n,t,e,i){let r=t.canMatch;if(!r||r.length===0)return q(!0);let s=r.map(o=>{let c=sr(o,n),l=p0(c)?c.canMatch(t,e):Xn(n,()=>c(t,e));return kn(l)});return q(s).pipe(rr(),z_(i))}var $s=class{constructor(t){this.segmentGroup=t||null}},Oa=class extends Error{constructor(t){super(),this.urlTree=t}};function Xi(n){return fs(new $s(n))}function R0(n){return fs(new Tt(4e3,!1))}function S0(n){return fs(U_(!1,ue.GuardRejected))}var Hu=class{constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return q(i);if(r.numberOfChildren>1||!r.children[Q])return R0(t.redirectTo);r=r.children[Q]}}applyRedirectCommands(t,e,i){let r=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,i);if(e.startsWith("/"))throw new Oa(r);return r}applyRedirectCreateUrlTree(t,e,i,r){let s=this.createSegmentGroup(t,e.root,i,r);return new xn(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let i={};return Object.entries(t).forEach(([r,s])=>{if(typeof s=="string"&&s.startsWith(":")){let c=s.substring(1);i[r]=e[c]}else i[r]=s}),i}createSegmentGroup(t,e,i,r){let s=this.createSegments(t,e.segments,i,r),o={};return Object.entries(e.children).forEach(([c,l])=>{o[c]=this.createSegmentGroup(t,l,i,r)}),new at(s,o)}createSegments(t,e,i,r){return e.map(s=>s.path.startsWith(":")?this.findPosParam(t,s,r):this.findOrReturn(s,i))}findPosParam(t,e,i){let r=i[e.path.substring(1)];if(!r)throw new Tt(4001,!1);return r}findOrReturn(t,e){let i=0;for(let r of e){if(r.path===t.path)return e.splice(i),r;i++}return t}},Gu={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function C0(n,t,e,i,r){let s=nd(n,t,e);return s.matched?(i=i0(t,i),A0(i,t,e,r).pipe(nt(o=>o===!0?s:M({},Gu)))):q(s)}function nd(n,t,e){if(t.path==="**")return x0(e);if(t.path==="")return t.pathMatch==="full"&&(n.hasChildren()||e.length>0)?M({},Gu):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let r=(t.matcher||TE)(e,n,t);if(!r)return M({},Gu);let s={};Object.entries(r.posParams??{}).forEach(([c,l])=>{s[c]=l.path});let o=r.consumed.length>0?M(M({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function x0(n){return{matched:!0,parameters:n.length>0?w_(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function v_(n,t,e,i){return e.length>0&&P0(n,e,i)?{segmentGroup:new at(t,k0(i,new at(e,n.children))),slicedSegments:[]}:e.length===0&&O0(n,e,i)?{segmentGroup:new at(n.segments,D0(n,e,i,n.children)),slicedSegments:e}:{segmentGroup:new at(n.segments,n.children),slicedSegments:e}}function D0(n,t,e,i){let r={};for(let s of e)if(Ma(n,t,s)&&!i[De(s)]){let o=new at([],{});r[De(s)]=o}return M(M({},i),r)}function k0(n,t){let e={};e[Q]=t;for(let i of n)if(i.path===""&&De(i)!==Q){let r=new at([],{});e[De(i)]=r}return e}function P0(n,t,e){return e.some(i=>Ma(n,t,i)&&De(i)!==Q)}function O0(n,t,e){return e.some(i=>Ma(n,t,i))}function Ma(n,t,e){return(n.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function N0(n,t,e,i){return De(n)!==i&&(i===Q||!Ma(t,e,n))?!1:nd(t,n,e).matched}function M0(n,t,e){return t.length===0&&!n.children[e]}var Ku=class{};function L0(n,t,e,i,r,s,o="emptyOnly"){return new Yu(n,t,e,i,r,o,s).recognize()}var F0=31,Yu=class{constructor(t,e,i,r,s,o,c){this.injector=t,this.configLoader=e,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=c,this.applyRedirects=new Hu(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new Tt(4002,`'${t.segmentGroup}'`)}recognize(){let t=v_(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(nt(e=>{let i=new Bs([],Object.freeze({}),Object.freeze(M({},this.urlTree.queryParams)),this.urlTree.fragment,{},Q,this.rootComponentType,null,{}),r=new le(i,e),s=new ka("",r),o=$E(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(t){return this.processSegmentGroup(this.injector,this.config,t,Q).pipe(Bi(i=>{if(i instanceof Oa)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof $s?this.noMatchError(i):i}))}inheritParamsAndData(t,e){let i=t.value,r=Ju(i,e,this.paramsInheritanceStrategy);i.params=Object.freeze(r.params),i.data=Object.freeze(r.data),t.children.forEach(s=>this.inheritParamsAndData(s,i))}processSegmentGroup(t,e,i,r){return i.segments.length===0&&i.hasChildren()?this.processChildren(t,e,i):this.processSegment(t,e,i,i.segments,r,!0).pipe(nt(s=>s instanceof le?[s]:[]))}processChildren(t,e,i){let r=[];for(let s of Object.keys(i.children))s==="primary"?r.unshift(s):r.push(s);return fe(r).pipe(Qn(s=>{let o=i.children[s],c=r0(e,s);return this.processSegmentGroup(t,c,o,s)}),Ig((s,o)=>(s.push(...o),s)),Gl(null),wg(),me(s=>{if(s===null)return Xi(i);let o=$_(s);return V0(o),q(o)}))}processSegment(t,e,i,r,s,o){return fe(e).pipe(Qn(c=>this.processSegmentAgainstRoute(c._injector??t,e,c,i,r,s,o).pipe(Bi(l=>{if(l instanceof $s)return q(null);throw l}))),An(c=>!!c),Bi(c=>{if(B_(c))return M0(i,r,s)?q(new Ku):Xi(i);throw c}))}processSegmentAgainstRoute(t,e,i,r,s,o,c){return N0(i,r,s,o)?i.redirectTo===void 0?this.matchSegmentAgainstRoute(t,r,i,s,o):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(t,r,e,i,s,o):Xi(r):Xi(r)}expandSegmentAgainstRouteUsingRedirect(t,e,i,r,s,o){let{matched:c,consumedSegments:l,positionalParamSegments:u,remainingSegments:f}=nd(e,r,s);if(!c)return Xi(e);r.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>F0&&(this.allowRedirects=!1));let p=this.applyRedirects.applyRedirectCommands(l,r.redirectTo,u);return this.applyRedirects.lineralizeSegments(r,p).pipe(me(b=>this.processSegment(t,i,e,b.concat(f),o,!1)))}matchSegmentAgainstRoute(t,e,i,r,s){let o=C0(e,i,r,t,this.urlSerializer);return i.path==="**"&&(e.children={}),o.pipe(pe(c=>c.matched?(t=i._injector??t,this.getChildConfig(t,i,r).pipe(pe(({routes:l})=>{let u=i._loadedInjector??t,{consumedSegments:f,remainingSegments:p,parameters:b}=c,A=new Bs(f,b,Object.freeze(M({},this.urlTree.queryParams)),this.urlTree.fragment,j0(i),De(i),i.component??i._loadedComponent??null,i,B0(i)),{segmentGroup:C,slicedSegments:P}=v_(e,f,p,l);if(P.length===0&&C.hasChildren())return this.processChildren(u,l,C).pipe(nt(j=>j===null?null:new le(A,j)));if(l.length===0&&P.length===0)return q(new le(A,[]));let D=De(i)===s;return this.processSegment(u,l,C,P,D?Q:s,!0).pipe(nt(j=>new le(A,j instanceof le?[j]:[])))}))):Xi(e)))}getChildConfig(t,e,i){return e.children?q({routes:e.children,injector:t}):e.loadChildren?e._loadedRoutes!==void 0?q({routes:e._loadedRoutes,injector:e._loadedInjector}):T0(t,e,i,this.urlSerializer).pipe(me(r=>r?this.configLoader.loadChildren(t,e).pipe(Dt(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):S0(e))):q({routes:[],injector:t})}};function V0(n){n.sort((t,e)=>t.value.outlet===Q?-1:e.value.outlet===Q?1:t.value.outlet.localeCompare(e.value.outlet))}function U0(n){let t=n.value.routeConfig;return t&&t.path===""}function $_(n){let t=[],e=new Set;for(let i of n){if(!U0(i)){t.push(i);continue}let r=t.find(s=>i.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...i.children),e.add(r)):t.push(i)}for(let i of e){let r=$_(i.children);t.push(new le(i.value,r))}return t.filter(i=>!e.has(i))}function j0(n){return n.data||{}}function B0(n){return n.resolve||{}}function z0(n,t,e,i,r,s){return me(o=>L0(n,t,e,i,o.extractedUrl,r,s).pipe(nt(({state:c,tree:l})=>xt(M({},o),{targetSnapshot:c,urlAfterRedirects:l}))))}function $0(n,t){return me(e=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return q(e);let s=new Set(r.map(l=>l.route)),o=new Set;for(let l of s)if(!o.has(l))for(let u of q_(l))o.add(u);let c=0;return fe(o).pipe(Qn(l=>s.has(l)?q0(l,i,n,t):(l.data=Ju(l,l.parent,n).resolve,q(void 0))),Dt(()=>c++),Yl(1),me(l=>c===o.size?q(e):Tn))})}function q_(n){let t=n.children.map(e=>q_(e)).flat();return[n,...t]}function q0(n,t,e,i){let r=n.routeConfig,s=n._resolve;return r?.title!==void 0&&!L_(r)&&(s[qs]=r.title),W0(s,n,t,i).pipe(nt(o=>(n._resolvedData=o,n.data=Ju(n,n.parent,e).resolve,null)))}function W0(n,t,e,i){let r=Au(n);if(r.length===0)return q({});let s={};return fe(r).pipe(me(o=>H0(n[o],t,e,i).pipe(An(),Dt(c=>{s[o]=c}))),Yl(1),yg(s),Bi(o=>B_(o)?Tn:fs(o)))}function H0(n,t,e,i){let r=Ws(t)??i,s=sr(n,r),o=s.resolve?s.resolve(t,e):Xn(r,()=>s(t,e));return kn(o)}function Eu(n){return pe(t=>{let e=n(t);return e?fe(e).pipe(nt(()=>t)):q(t)})}var W_=(()=>{let t=class t{buildTitle(i){let r,s=i.root;for(;s!==void 0;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(o=>o.outlet===Q);return r}getResolvedTitleForRoute(i){return i.data[qs]}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=L({token:t,factory:()=>V(G0),providedIn:"root"});let n=t;return n})(),G0=(()=>{let t=class t extends W_{constructor(i){super(),this.title=i}updateTitle(i){let r=this.buildTitle(i);r!==void 0&&this.title.setTitle(r)}};t.\u0275fac=function(r){return new(r||t)(x(m_))},t.\u0275prov=L({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),id=new J("",{providedIn:"root",factory:()=>({})}),rd=new J(""),K0=(()=>{let t=class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=V(eu)}loadComponent(i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return q(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=kn(i.loadComponent()).pipe(nt(H_),Dt(o=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=o}),ps(()=>{this.componentLoaders.delete(i)})),s=new Ul(r,()=>new ct).pipe(Vl());return this.componentLoaders.set(i,s),s}loadChildren(i,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return q({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=Y0(r,this.compiler,i,this.onLoadEndListener).pipe(ps(()=>{this.childrenLoaders.delete(r)})),c=new Ul(o,()=>new ct).pipe(Vl());return this.childrenLoaders.set(r,c),c}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=L({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function Y0(n,t,e,i){return kn(n.loadChildren()).pipe(nt(H_),me(r=>r instanceof Fg||Array.isArray(r)?q(r):fe(t.compileModuleAsync(r))),nt(r=>{i&&i(n);let s,o,c=!1;return Array.isArray(r)?(o=r,c=!0):(s=r.create(e).injector,o=s.get(rd,[],{optional:!0,self:!0}).flat()),{routes:o.map(ed),injector:s}}))}function Q0(n){return n&&typeof n=="object"&&"default"in n}function H_(n){return Q0(n)?n.default:n}var sd=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=L({token:t,factory:()=>V(X0),providedIn:"root"});let n=t;return n})(),X0=(()=>{let t=class t{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,r){return i}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=L({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),J0=new J("");var Z0=(()=>{let t=class t{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ct,this.transitionAbortSubject=new ct,this.configLoader=V(K0),this.environmentInjector=V(bs),this.urlSerializer=V(Xu),this.rootContexts=V(Na),this.location=V(Yi),this.inputBindingEnabled=V(td,{optional:!0})!==null,this.titleStrategy=V(W_),this.options=V(id,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=V(sd),this.createViewTransition=V(J0,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>q(void 0),this.rootComponentType=null;let i=s=>this.events.next(new Nu(s)),r=s=>this.events.next(new Mu(s));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=i}complete(){this.transitions?.complete()}handleNavigationRequest(i){let r=++this.navigationId;this.transitions?.next(xt(M(M({},this.transitions.value),i),{id:r}))}setupNavigations(i,r,s){return this.transitions=new re({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Ns,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ce(o=>o.id!==0),nt(o=>xt(M({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),pe(o=>{let c=!1,l=!1;return q(o).pipe(pe(u=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",ue.SupersededByNewNavigation),Tn;this.currentTransition=o,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?xt(M({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let f=!i.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),p=u.extras.onSameUrlNavigation??i.onSameUrlNavigation;if(!f&&p!=="reload"){let b="";return this.events.next(new ai(u.id,this.urlSerializer.serialize(u.rawUrl),b,xu.IgnoredSameUrlNavigation)),u.resolve(null),Tn}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return q(u).pipe(pe(b=>{let A=this.transitions?.getValue();return this.events.next(new Fs(b.id,this.urlSerializer.serialize(b.extractedUrl),b.source,b.restoredState)),A!==this.transitions?.getValue()?Tn:Promise.resolve(b)}),z0(this.environmentInjector,this.configLoader,this.rootComponentType,i.config,this.urlSerializer,this.paramsInheritanceStrategy),Dt(b=>{o.targetSnapshot=b.targetSnapshot,o.urlAfterRedirects=b.urlAfterRedirects,this.currentNavigation=xt(M({},this.currentNavigation),{finalUrl:b.urlAfterRedirects});let A=new Ca(b.id,this.urlSerializer.serialize(b.extractedUrl),this.urlSerializer.serialize(b.urlAfterRedirects),b.targetSnapshot);this.events.next(A)}));if(f&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:b,extractedUrl:A,source:C,restoredState:P,extras:D}=u,j=new Fs(b,this.urlSerializer.serialize(A),C,P);this.events.next(j);let $=N_(this.rootComponentType).snapshot;return this.currentTransition=o=xt(M({},u),{targetSnapshot:$,urlAfterRedirects:A,extras:xt(M({},D),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=A,q(o)}else{let b="";return this.events.next(new ai(u.id,this.urlSerializer.serialize(u.extractedUrl),b,xu.IgnoredByUrlHandlingStrategy)),u.resolve(null),Tn}}),Dt(u=>{let f=new Du(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}),nt(u=>(this.currentTransition=o=xt(M({},u),{guards:o0(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),g0(this.environmentInjector,u=>this.events.next(u)),Dt(u=>{if(o.guardsResult=u.guardsResult,nr(u.guardsResult))throw V_(this.urlSerializer,u.guardsResult);let f=new ku(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(f)}),ce(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",ue.GuardRejected),!1)),Eu(u=>{if(u.guards.canActivateChecks.length)return q(u).pipe(Dt(f=>{let p=new Pu(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(p)}),pe(f=>{let p=!1;return q(f).pipe($0(this.paramsInheritanceStrategy,this.environmentInjector),Dt({next:()=>p=!0,complete:()=>{p||this.cancelNavigationTransition(f,"",ue.NoDataFromResolver)}}))}),Dt(f=>{let p=new Ou(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(p)}))}),Eu(u=>{let f=p=>{let b=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&b.push(this.configLoader.loadComponent(p.routeConfig).pipe(Dt(A=>{p.component=A}),nt(()=>{})));for(let A of p.children)b.push(...f(A));return b};return ms(f(u.targetSnapshot.root)).pipe(Gl(null),we(1))}),Eu(()=>this.afterPreactivation()),pe(()=>{let{currentSnapshot:u,targetSnapshot:f}=o,p=this.createViewTransition?.(this.environmentInjector,u.root,f.root);return p?fe(p).pipe(nt(()=>o)):q(o)}),nt(u=>{let f=JE(i.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=xt(M({},u),{targetRouterState:f}),this.currentNavigation.targetRouterState=f,o}),Dt(()=>{this.events.next(new Us)}),s0(this.rootContexts,i.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),we(1),Dt({next:u=>{c=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new oi(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{c=!0}}),Ie(this.transitionAbortSubject.pipe(Dt(u=>{throw u}))),ps(()=>{!c&&!l&&this.cancelNavigationTransition(o,"",ue.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Bi(u=>{if(l=!0,j_(u))this.events.next(new Dn(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),e0(u)?this.events.next(new js(u.url)):o.resolve(!1);else{this.events.next(new Vs(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0));try{o.resolve(i.errorHandler(u))}catch(f){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(f)}}return Tn}))}))}cancelNavigationTransition(i,r,s){let o=new Dn(i.id,this.urlSerializer.serialize(i.extractedUrl),r,s);this.events.next(o),i.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=L({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function tT(n){return n!==Ns}var eT=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=L({token:t,factory:()=>V(nT),providedIn:"root"});let n=t;return n})(),Qu=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},nT=(()=>{let t=class t extends Qu{};t.\u0275fac=(()=>{let i;return function(s){return(i||(i=oa(t)))(s||t)}})(),t.\u0275prov=L({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),G_=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=L({token:t,factory:()=>V(iT),providedIn:"root"});let n=t;return n})(),iT=(()=>{let t=class t extends G_{constructor(){super(...arguments),this.location=V(Yi),this.urlSerializer=V(Xu),this.options=V(id,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=V(sd),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new xn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=N_(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(i){return this.location.subscribe(r=>{r.type==="popstate"&&i(r.url,r.state)})}handleRouterEvent(i,r){if(i instanceof Fs)this.stateMemento=this.createStateMemento();else if(i instanceof ai)this.rawUrlTree=r.initialUrl;else if(i instanceof Ca){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(s,r)}}else i instanceof Us?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):i instanceof Dn&&(i.code===ue.GuardRejected||i.code===ue.NoDataFromResolver)?this.restoreHistory(r):i instanceof Vs?this.restoreHistory(r,!0):i instanceof oi&&(this.lastSuccessfulId=i.id,this.currentPageId=this.browserPageId)}setBrowserUrl(i,r){let s=this.urlSerializer.serialize(i);if(this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl){let o=this.browserPageId,c=M(M({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(s,"",c)}else{let o=M(M({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(i,r=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===i.finalUrl&&o===0&&(this.resetState(i),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(i,r){return this.canceledNavigationResolution==="computed"?{navigationId:i,\u0275routerPageId:r}:{navigationId:i}}};t.\u0275fac=(()=>{let i;return function(s){return(i||(i=oa(t)))(s||t)}})(),t.\u0275prov=L({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),Ps=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Ps||{});function rT(n,t){n.events.pipe(ce(e=>e instanceof oi||e instanceof Dn||e instanceof Vs||e instanceof ai),nt(e=>e instanceof oi||e instanceof ai?Ps.COMPLETE:(e instanceof Dn?e.code===ue.Redirect||e.code===ue.SupersededByNewNavigation:!1)?Ps.REDIRECTING:Ps.FAILED),ce(e=>e!==Ps.REDIRECTING),we(1)).subscribe(()=>{t()})}function sT(n){throw n}var oT={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},aT={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},or=(()=>{let t=class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=V(pa),this.stateManager=V(G_),this.options=V(id,{optional:!0})||{},this.pendingTasks=V(Ug),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=V(Z0),this.urlSerializer=V(Xu),this.location=V(Yi),this.urlHandlingStrategy=V(sd),this._events=new ct,this.errorHandler=this.options.errorHandler||sT,this.navigated=!1,this.routeReuseStrategy=V(eT),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=V(rd,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!V(td,{optional:!0}),this.eventsSubscription=new Yn,this.isNgZoneEnabled=V(G)instanceof G&&G.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:i=>{this.console.warn(i)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let i=this.navigationTransitions.events.subscribe(r=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Dn&&r.code!==ue.Redirect&&r.code!==ue.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof oi)this.navigated=!0;else if(r instanceof js){let c=this.urlHandlingStrategy.merge(r.url,s.currentRawUrl),l={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||tT(s.source)};this.scheduleNavigation(c,Ns,null,l,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}lT(r)&&this._events.next(r)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(i)}resetRootComponentType(i){this.routerState.root.component=i,this.navigationTransitions.rootComponentType=i}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ns,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((i,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(i,"popstate",r)},0)})}navigateToSyncWithBrowser(i,r,s){let o={replaceUrl:!0},c=s?.navigationId?s:null;if(s){let u=M({},s);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let l=this.parseUrl(i);this.scheduleNavigation(l,r,c,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(i){this.config=i.map(ed),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(i,r={}){let{relativeTo:s,queryParams:o,fragment:c,queryParamsHandling:l,preserveFragment:u}=r,f=u?this.currentUrlTree.fragment:c,p=null;switch(l){case"merge":p=M(M({},this.currentUrlTree.queryParams),o);break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=o||null}p!==null&&(p=this.removeEmptyProps(p));let b;try{let A=s?s.snapshot:this.routerState.snapshot.root;b=D_(A)}catch{(typeof i[0]!="string"||!i[0].startsWith("/"))&&(i=[]),b=this.currentUrlTree.root}return k_(b,i,p,f??null)}navigateByUrl(i,r={skipLocationChange:!1}){let s=nr(i)?i:this.parseUrl(i),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,Ns,null,r)}navigate(i,r={skipLocationChange:!1}){return cT(i),this.navigateByUrl(this.createUrlTree(i,r),r)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){try{return this.urlSerializer.parse(i)}catch{return this.urlSerializer.parse("/")}}isActive(i,r){let s;if(r===!0?s=M({},oT):r===!1?s=M({},aT):s=r,nr(i))return p_(this.currentUrlTree,i,s);let o=this.parseUrl(i);return p_(this.currentUrlTree,o,s)}removeEmptyProps(i){return Object.entries(i).reduce((r,[s,o])=>(o!=null&&(r[s]=o),r),{})}scheduleNavigation(i,r,s,o,c){if(this.disposed)return Promise.resolve(!1);let l,u,f;c?(l=c.resolve,u=c.reject,f=c.promise):f=new Promise((b,A)=>{l=b,u=A});let p=this.pendingTasks.add();return rT(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:i,extras:o,resolve:l,reject:u,promise:f,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),f.catch(b=>Promise.reject(b))}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=L({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function cT(n){for(let t=0;t<n.length;t++)if(n[t]==null)throw new Tt(4008,!1)}function lT(n){return!(n instanceof Us)&&!(n instanceof js)}var uT=new J("");function BO(n,...t){return Xl([{provide:rd,multi:!0,useValue:n},[],{provide:ir,useFactory:dT,deps:[or]},{provide:Hg,multi:!0,useFactory:hT},t.map(e=>e.\u0275providers)])}function dT(n){return n.routerState.root}function hT(){let n=V(Lt);return t=>{let e=n.get(As);if(t!==e.components[0])return;let i=n.get(or),r=n.get(fT);n.get(mT)===1&&i.initialNavigation(),n.get(pT,null,Ql.Optional)?.setUpPreloading(),n.get(uT,null,Ql.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var fT=new J("",{factory:()=>new ct}),mT=new J("",{providedIn:"root",factory:()=>1});var pT=new J("");var ad;try{ad=typeof Intl<"u"&&Intl.v8BreakIterator}catch{ad=!1}var vt=(()=>{let t=class t{constructor(i){this._platformId=i,this.isBrowser=this._platformId?Jg(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||ad)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};t.\u0275fac=function(r){return new(r||t)(x(Je))},t.\u0275prov=L({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var ar,K_=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function KO(){if(ar)return ar;if(typeof document!="object"||!document)return ar=new Set(K_),ar;let n=document.createElement("input");return ar=new Set(K_.filter(t=>(n.setAttribute("type",t),n.type===t))),ar}var Gs;function _T(){if(Gs==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Gs=!0}))}finally{Gs=Gs||!1}return Gs}function cr(n){return _T()?n:!!n.capture}var ci;function Y_(){if(ci==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return ci=!1,ci;if("scrollBehavior"in document.documentElement.style)ci=!0;else{let n=Element.prototype.scrollTo;n?ci=!/\{\s*\[native code\]\s*\}/.test(n.toString()):ci=!1}}return ci}var od;function bT(){if(od==null){let n=typeof document<"u"?document.head:null;od=!!(n&&(n.createShadowRoot||n.attachShadow))}return od}function Q_(n){if(bT()){let t=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function Ee(n){return n.composedPath?n.composedPath()[0]:n.target}function Ks(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function vT(n){return n!=null&&`${n}`!="false"}function lr(n){return Array.isArray(n)?n:[n]}function At(n){return n==null?"":typeof n=="string"?n:`${n}px`}function rn(n){return n instanceof Ft?n.nativeElement:n}var yT=(()=>{let t=class t{create(i){return typeof MutationObserver>"u"?null:new MutationObserver(i)}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=L({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var XO=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=ht({type:t}),t.\u0275inj=dt({providers:[yT]});let n=t;return n})();var X_=new Set,ui,wT=(()=>{let t=class t{constructor(i,r){this._platform=i,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):ET}matchMedia(i){return(this._platform.WEBKIT||this._platform.BLINK)&&IT(i,this._nonce),this._matchMedia(i)}};t.\u0275fac=function(r){return new(r||t)(x(vt),x(ys,8))},t.\u0275prov=L({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function IT(n,t){if(!X_.has(n))try{ui||(ui=document.createElement("style"),t&&ui.setAttribute("nonce",t),ui.setAttribute("type","text/css"),document.head.appendChild(ui)),ui.sheet&&(ui.sheet.insertRule(`@media ${n} {body{ }}`,0),X_.add(n))}catch(e){console.error(e)}}function ET(n){return{matches:n==="all"||n==="",media:n,addListener:()=>{},removeListener:()=>{}}}var La=(()=>{let t=class t{constructor(i,r){this._mediaMatcher=i,this._zone=r,this._queries=new Map,this._destroySubject=new ct}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(i){return J_(lr(i)).some(s=>this._registerQuery(s).mql.matches)}observe(i){let s=J_(lr(i)).map(c=>this._registerQuery(c).observable),o=ms(s);return o=ra(o.pipe(we(1)),o.pipe(sa(1),Hl(0))),o.pipe(nt(c=>{let l={matches:!1,breakpoints:{}};return c.forEach(({matches:u,query:f})=>{l.matches=l.matches||u,l.breakpoints[f]=u}),l}))}_registerQuery(i){if(this._queries.has(i))return this._queries.get(i);let r=this._mediaMatcher.matchMedia(i),o={observable:new En(c=>{let l=u=>this._zone.run(()=>c.next(u));return r.addListener(l),()=>{r.removeListener(l)}}).pipe(gs(r),nt(({matches:c})=>({query:i,matches:c})),Ie(this._destroySubject)),mql:r};return this._queries.set(i,o),o}};t.\u0275fac=function(r){return new(r||t)(x(wT),x(G))},t.\u0275prov=L({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function J_(n){return n.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}var Z_={XSmall:"(max-width: 599.98px)",Small:"(min-width: 600px) and (max-width: 959.98px)",Medium:"(min-width: 960px) and (max-width: 1279.98px)",Large:"(min-width: 1280px) and (max-width: 1919.98px)",XLarge:"(min-width: 1920px)",Handset:"(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)",Tablet:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait), (min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",Web:"(min-width: 840px) and (orientation: portrait), (min-width: 1280px) and (orientation: landscape)",HandsetPortrait:"(max-width: 599.98px) and (orientation: portrait)",TabletPortrait:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait)",WebPortrait:"(min-width: 840px) and (orientation: portrait)",HandsetLandscape:"(max-width: 959.98px) and (orientation: landscape)",TabletLandscape:"(min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",WebLandscape:"(min-width: 1280px) and (orientation: landscape)"};function ld(n){return n.buttons===0||n.detail===0}function ud(n){let t=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!!t&&t.identifier===-1&&(t.radiusX==null||t.radiusX===1)&&(t.radiusY==null||t.radiusY===1)}var AT=new J("cdk-input-modality-detector-options"),RT={ignoreKeys:[18,17,224,91,16]},nb=650,ur=cr({passive:!0,capture:!0}),ST=(()=>{let t=class t{get mostRecentModality(){return this._modality.value}constructor(i,r,s,o){this._platform=i,this._mostRecentTarget=null,this._modality=new re(null),this._lastTouchMs=0,this._onKeydown=c=>{this._options?.ignoreKeys?.some(l=>l===c.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Ee(c))},this._onMousedown=c=>{Date.now()-this._lastTouchMs<nb||(this._modality.next(ld(c)?"keyboard":"mouse"),this._mostRecentTarget=Ee(c))},this._onTouchstart=c=>{if(ud(c)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Ee(c)},this._options=M(M({},RT),o),this.modalityDetected=this._modality.pipe(sa(1)),this.modalityChanged=this.modalityDetected.pipe(Kl()),i.isBrowser&&r.runOutsideAngular(()=>{s.addEventListener("keydown",this._onKeydown,ur),s.addEventListener("mousedown",this._onMousedown,ur),s.addEventListener("touchstart",this._onTouchstart,ur)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,ur),document.removeEventListener("mousedown",this._onMousedown,ur),document.removeEventListener("touchstart",this._onTouchstart,ur))}};t.\u0275fac=function(r){return new(r||t)(x(vt),x(G),x(Z),x(AT,8))},t.\u0275prov=L({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),CT=new J("liveAnnouncerElement",{providedIn:"root",factory:xT});function xT(){return null}var DT=new J("LIVE_ANNOUNCER_DEFAULT_OPTIONS"),kT=0,ib=(()=>{let t=class t{constructor(i,r,s,o){this._ngZone=r,this._defaultOptions=o,this._document=s,this._liveElement=i||this._createLiveElement()}announce(i,...r){let s=this._defaultOptions,o,c;return r.length===1&&typeof r[0]=="number"?c=r[0]:[o,c]=r,this.clear(),clearTimeout(this._previousTimeout),o||(o=s&&s.politeness?s.politeness:"polite"),c==null&&s&&(c=s.duration),this._liveElement.setAttribute("aria-live",o),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(l=>this._currentResolve=l)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=i,typeof c=="number"&&(this._previousTimeout=setTimeout(()=>this.clear(),c)),this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){let i="cdk-live-announcer-element",r=this._document.getElementsByClassName(i),s=this._document.createElement("div");for(let o=0;o<r.length;o++)r[o].remove();return s.classList.add(i),s.classList.add("cdk-visually-hidden"),s.setAttribute("aria-atomic","true"),s.setAttribute("aria-live","polite"),s.id=`cdk-live-announcer-${kT++}`,this._document.body.appendChild(s),s}_exposeAnnouncerToModals(i){let r=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let s=0;s<r.length;s++){let o=r[s],c=o.getAttribute("aria-owns");c?c.indexOf(i)===-1&&o.setAttribute("aria-owns",c+" "+i):o.setAttribute("aria-owns",i)}}};t.\u0275fac=function(r){return new(r||t)(x(CT,8),x(G),x(Z),x(DT,8))},t.\u0275prov=L({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var Va=function(n){return n[n.IMMEDIATE=0]="IMMEDIATE",n[n.EVENTUAL=1]="EVENTUAL",n}(Va||{}),PT=new J("cdk-focus-monitor-default-options"),Fa=cr({passive:!0,capture:!0}),rb=(()=>{let t=class t{constructor(i,r,s,o,c){this._ngZone=i,this._platform=r,this._inputModalityDetector=s,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new ct,this._rootNodeFocusAndBlurListener=l=>{let u=Ee(l);for(let f=u;f;f=f.parentElement)l.type==="focus"?this._onFocus(l,f):this._onBlur(l,f)},this._document=o,this._detectionMode=c?.detectionMode||Va.IMMEDIATE}monitor(i,r=!1){let s=rn(i);if(!this._platform.isBrowser||s.nodeType!==1)return q();let o=Q_(s)||this._getDocument(),c=this._elementInfo.get(s);if(c)return r&&(c.checkChildren=!0),c.subject;let l={checkChildren:r,subject:new ct,rootNode:o};return this._elementInfo.set(s,l),this._registerGlobalListeners(l),l.subject}stopMonitoring(i){let r=rn(i),s=this._elementInfo.get(r);s&&(s.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(s))}focusVia(i,r,s){let o=rn(i),c=this._getDocument().activeElement;o===c?this._getClosestElementsInfo(o).forEach(([l,u])=>this._originChanged(l,r,u)):(this._setOrigin(r),typeof o.focus=="function"&&o.focus(s))}ngOnDestroy(){this._elementInfo.forEach((i,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(i){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(i)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:i&&this._isLastInteractionFromInputLabel(i)?"mouse":"program"}_shouldBeAttributedToTouch(i){return this._detectionMode===Va.EVENTUAL||!!i?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(i,r){i.classList.toggle("cdk-focused",!!r),i.classList.toggle("cdk-touch-focused",r==="touch"),i.classList.toggle("cdk-keyboard-focused",r==="keyboard"),i.classList.toggle("cdk-mouse-focused",r==="mouse"),i.classList.toggle("cdk-program-focused",r==="program")}_setOrigin(i,r=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=i,this._originFromTouchInteraction=i==="touch"&&r,this._detectionMode===Va.IMMEDIATE){clearTimeout(this._originTimeoutId);let s=this._originFromTouchInteraction?nb:1;this._originTimeoutId=setTimeout(()=>this._origin=null,s)}})}_onFocus(i,r){let s=this._elementInfo.get(r),o=Ee(i);!s||!s.checkChildren&&r!==o||this._originChanged(r,this._getFocusOrigin(o),s)}_onBlur(i,r){let s=this._elementInfo.get(r);!s||s.checkChildren&&i.relatedTarget instanceof Node&&r.contains(i.relatedTarget)||(this._setClasses(r),this._emitOrigin(s,null))}_emitOrigin(i,r){i.subject.observers.length&&this._ngZone.run(()=>i.subject.next(r))}_registerGlobalListeners(i){if(!this._platform.isBrowser)return;let r=i.rootNode,s=this._rootNodeFocusListenerCount.get(r)||0;s||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,Fa),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,Fa)}),this._rootNodeFocusListenerCount.set(r,s+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Ie(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(i){let r=i.rootNode;if(this._rootNodeFocusListenerCount.has(r)){let s=this._rootNodeFocusListenerCount.get(r);s>1?this._rootNodeFocusListenerCount.set(r,s-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Fa),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Fa),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(i,r,s){this._setClasses(i,r),this._emitOrigin(s,r),this._lastFocusOrigin=r}_getClosestElementsInfo(i){let r=[];return this._elementInfo.forEach((s,o)=>{(o===i||s.checkChildren&&o.contains(i))&&r.push([o,s])}),r}_isLastInteractionFromInputLabel(i){let{_mostRecentTarget:r,mostRecentModality:s}=this._inputModalityDetector;if(s!=="mouse"||!r||r===i||i.nodeName!=="INPUT"&&i.nodeName!=="TEXTAREA"||i.disabled)return!1;let o=i.labels;if(o){for(let c=0;c<o.length;c++)if(o[c].contains(r))return!0}return!1}};t.\u0275fac=function(r){return new(r||t)(x(G),x(vt),x(ST),x(Z,8),x(PT,8))},t.\u0275prov=L({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var di=function(n){return n[n.NONE=0]="NONE",n[n.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",n[n.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",n}(di||{}),tb="cdk-high-contrast-black-on-white",eb="cdk-high-contrast-white-on-black",cd="cdk-high-contrast-active",sb=(()=>{let t=class t{constructor(i,r){this._platform=i,this._document=r,this._breakpointSubscription=V(La).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return di.NONE;let i=this._document.createElement("div");i.style.backgroundColor="rgb(1,2,3)",i.style.position="absolute",this._document.body.appendChild(i);let r=this._document.defaultView||window,s=r&&r.getComputedStyle?r.getComputedStyle(i):null,o=(s&&s.backgroundColor||"").replace(/ /g,"");switch(i.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return di.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return di.BLACK_ON_WHITE}return di.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let i=this._document.body.classList;i.remove(cd,tb,eb),this._hasCheckedHighContrastMode=!0;let r=this.getHighContrastMode();r===di.BLACK_ON_WHITE?i.add(cd,tb):r===di.WHITE_ON_BLACK&&i.add(cd,eb)}}};t.\u0275fac=function(r){return new(r||t)(x(vt),x(Z))},t.\u0275prov=L({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var OT=new J("cdk-dir-doc",{providedIn:"root",factory:NT});function NT(){return V(Z)}var MT=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function LT(n){let t=n?.toLowerCase()||"";return t==="auto"&&typeof navigator<"u"&&navigator?.language?MT.test(navigator.language)?"rtl":"ltr":t==="rtl"?"rtl":"ltr"}var ab=(()=>{let t=class t{constructor(i){if(this.value="ltr",this.change=new ge,i){let r=i.body?i.body.dir:null,s=i.documentElement?i.documentElement.dir:null;this.value=LT(r||s||"ltr")}}ngOnDestroy(){this.change.complete()}};t.\u0275fac=function(r){return new(r||t)(x(OT,8))},t.\u0275prov=L({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var hd=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=ht({type:t}),t.\u0275inj=dt({});let n=t;return n})();function UT(){return!0}var jT=new J("mat-sanity-checks",{providedIn:"root",factory:UT}),Qs=(()=>{let t=class t{constructor(i,r,s){this._sanityChecks=r,this._document=s,this._hasDoneGlobalChecks=!1,i._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(i){return Ks()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[i]}};t.\u0275fac=function(r){return new(r||t)(x(sb),x(jT,8),x(Z))},t.\u0275mod=ht({type:t}),t.\u0275inj=dt({imports:[hd,hd]});let n=t;return n})();var cb=class{constructor(t,e,i,r,s){this._defaultMatcher=t,this.ngControl=e,this._parentFormGroup=i,this._parentForm=r,this._stateChanges=s,this.errorState=!1}updateErrorState(){let t=this.errorState,e=this._parentFormGroup||this._parentForm,i=this.matcher||this._defaultMatcher,r=this.ngControl?this.ngControl.control:null,s=i?.isErrorState(r,e)??!1;s!==t&&(this.errorState=s,this._stateChanges.next())}};var oM=(()=>{let t=class t{isErrorState(i,r){return!!(i&&i.invalid&&(i.touched||r&&r.submitted))}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=L({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var be=function(n){return n[n.FADING_IN=0]="FADING_IN",n[n.VISIBLE=1]="VISIBLE",n[n.FADING_OUT=2]="FADING_OUT",n[n.HIDDEN=3]="HIDDEN",n}(be||{}),pd=class{constructor(t,e,i,r=!1){this._renderer=t,this.element=e,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=be.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},lb=cr({passive:!0,capture:!0}),gd=class{constructor(){this._events=new Map,this._delegateEventHandler=t=>{let e=Ee(t);e&&this._events.get(t.type)?.forEach((i,r)=>{(r===e||r.contains(e))&&i.forEach(s=>s.handleEvent(t))})}}addHandler(t,e,i,r){let s=this._events.get(e);if(s){let o=s.get(i);o?o.add(r):s.set(i,new Set([r]))}else this._events.set(e,new Map([[i,new Set([r])]])),t.runOutsideAngular(()=>{document.addEventListener(e,this._delegateEventHandler,lb)})}removeHandler(t,e,i){let r=this._events.get(t);if(!r)return;let s=r.get(e);s&&(s.delete(i),s.size===0&&r.delete(e),r.size===0&&(this._events.delete(t),document.removeEventListener(t,this._delegateEventHandler,lb)))}},ub={enterDuration:225,exitDuration:150},BT=800,db=cr({passive:!0,capture:!0}),hb=["mousedown","touchstart"],fb=["mouseup","mouseleave","touchend","touchcancel"],Ys=class Ys{constructor(t,e,i,r){this._target=t,this._ngZone=e,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=rn(i))}fadeInRipple(t,e,i={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=M(M({},ub),i.animation);i.centered&&(t=r.left+r.width/2,e=r.top+r.height/2);let o=i.radius||zT(t,e,r),c=t-r.left,l=e-r.top,u=s.enterDuration,f=document.createElement("div");f.classList.add("mat-ripple-element"),f.style.left=`${c-o}px`,f.style.top=`${l-o}px`,f.style.height=`${o*2}px`,f.style.width=`${o*2}px`,i.color!=null&&(f.style.backgroundColor=i.color),f.style.transitionDuration=`${u}ms`,this._containerElement.appendChild(f);let p=window.getComputedStyle(f),b=p.transitionProperty,A=p.transitionDuration,C=b==="none"||A==="0s"||A==="0s, 0s"||r.width===0&&r.height===0,P=new pd(this,f,i,C);f.style.transform="scale3d(1, 1, 1)",P.state=be.FADING_IN,i.persistent||(this._mostRecentTransientRipple=P);let D=null;return!C&&(u||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let j=()=>this._finishRippleTransition(P),$=()=>this._destroyRipple(P);f.addEventListener("transitionend",j),f.addEventListener("transitioncancel",$),D={onTransitionEnd:j,onTransitionCancel:$}}),this._activeRipples.set(P,D),(C||!u)&&this._finishRippleTransition(P),P}fadeOutRipple(t){if(t.state===be.FADING_OUT||t.state===be.HIDDEN)return;let e=t.element,i=M(M({},ub),t.config.animation);e.style.transitionDuration=`${i.exitDuration}ms`,e.style.opacity="0",t.state=be.FADING_OUT,(t._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){let e=rn(t);!this._platform.isBrowser||!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,hb.forEach(i=>{Ys._eventManager.addHandler(this._ngZone,i,e,this)}))}handleEvent(t){t.type==="mousedown"?this._onMousedown(t):t.type==="touchstart"?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{fb.forEach(e=>{this._triggerElement.addEventListener(e,this,db)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){t.state===be.FADING_IN?this._startFadeOutTransition(t):t.state===be.FADING_OUT&&this._destroyRipple(t)}_startFadeOutTransition(t){let e=t===this._mostRecentTransientRipple,{persistent:i}=t.config;t.state=be.VISIBLE,!i&&(!e||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){let e=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=be.HIDDEN,e!==null&&(t.element.removeEventListener("transitionend",e.onTransitionEnd),t.element.removeEventListener("transitioncancel",e.onTransitionCancel)),t.element.remove()}_onMousedown(t){let e=ld(t),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+BT;!this._target.rippleDisabled&&!e&&!i&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!ud(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let e=t.changedTouches;if(e)for(let i=0;i<e.length;i++)this.fadeInRipple(e[i].clientX,e[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{let e=t.state===be.VISIBLE||t.config.terminateOnPointerUp&&t.state===be.FADING_IN;!t.config.persistent&&e&&t.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let t=this._triggerElement;t&&(hb.forEach(e=>Ys._eventManager.removeHandler(e,t,this)),this._pointerUpEventsRegistered&&(fb.forEach(e=>t.removeEventListener(e,this,db)),this._pointerUpEventsRegistered=!1))}};Ys._eventManager=new gd;var _d=Ys;function zT(n,t,e){let i=Math.max(Math.abs(n-e.left),Math.abs(n-e.right)),r=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(i*i+r*r)}var _b=new J("mat-ripple-global-options"),$T=(()=>{let t=class t{get disabled(){return this._disabled}set disabled(i){i&&this.fadeOutAllNonPersistent(),this._disabled=i,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(i){this._trigger=i,this._setupTriggerEventsIfEnabled()}constructor(i,r,s,o,c){this._elementRef=i,this._animationMode=c,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=o||{},this._rippleRenderer=new _d(this,r,i,s)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:M(M(M({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(i,r=0,s){return typeof i=="number"?this._rippleRenderer.fadeInRipple(i,r,M(M({},this.rippleConfig),s)):this._rippleRenderer.fadeInRipple(0,0,M(M({},this.rippleConfig),i))}};t.\u0275fac=function(r){return new(r||t)(lt(Ft),lt(G),lt(vt),lt(_b,8),lt(Jn,8))},t.\u0275dir=$t({type:t,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(r,s){r&2&&Wi("mat-ripple-unbounded",s.unbounded)},inputs:{color:[kt.None,"matRippleColor","color"],unbounded:[kt.None,"matRippleUnbounded","unbounded"],centered:[kt.None,"matRippleCentered","centered"],radius:[kt.None,"matRippleRadius","radius"],animation:[kt.None,"matRippleAnimation","animation"],disabled:[kt.None,"matRippleDisabled","disabled"],trigger:[kt.None,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0});let n=t;return n})(),bb=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=ht({type:t}),t.\u0275inj=dt({imports:[Qs,Qs]});let n=t;return n})();var mb={capture:!0},pb=["focus","click","mouseenter","touchstart"],fd="mat-ripple-loader-uninitialized",md="mat-ripple-loader-class-name",gb="mat-ripple-loader-centered",Ua="mat-ripple-loader-disabled",vb=(()=>{let t=class t{constructor(){this._document=V(Z,{optional:!0}),this._animationMode=V(Jn,{optional:!0}),this._globalRippleOptions=V(_b,{optional:!0}),this._platform=V(vt),this._ngZone=V(G),this._hosts=new Map,this._onInteraction=i=>{if(!(i.target instanceof HTMLElement))return;let s=i.target.closest(`[${fd}]`);s&&this._createRipple(s)},this._ngZone.runOutsideAngular(()=>{for(let i of pb)this._document?.addEventListener(i,this._onInteraction,mb)})}ngOnDestroy(){let i=this._hosts.keys();for(let r of i)this.destroyRipple(r);for(let r of pb)this._document?.removeEventListener(r,this._onInteraction,mb)}configureRipple(i,r){i.setAttribute(fd,""),(r.className||!i.hasAttribute(md))&&i.setAttribute(md,r.className||""),r.centered&&i.setAttribute(gb,""),r.disabled&&i.setAttribute(Ua,"")}getRipple(i){return this._hosts.get(i)||this._createRipple(i)}setDisabled(i,r){let s=this._hosts.get(i);if(s){s.disabled=r;return}r?i.setAttribute(Ua,""):i.removeAttribute(Ua)}_createRipple(i){if(!this._document)return;let r=this._hosts.get(i);if(r)return r;i.querySelector(".mat-ripple")?.remove();let s=this._document.createElement("span");s.classList.add("mat-ripple",i.getAttribute(md)),i.append(s);let o=new $T(new Ft(s),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return o._isInitialized=!0,o.trigger=i,o.centered=i.hasAttribute(gb),o.disabled=i.hasAttribute(Ua),this.attachRipple(i,o),o}attachRipple(i,r){i.removeAttribute(fd),this._hosts.set(i,r)}destroyRipple(i){let r=this._hosts.get(i);r&&(r.ngOnDestroy(),this._hosts.delete(i))}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=L({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var qT=["mat-button",""],WT=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],HT=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"];var GT=new J("MAT_BUTTON_CONFIG");var KT=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],YT=(()=>{let t=class t{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(i){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,i)}get disableRipple(){return this._disableRipple}set disableRipple(i){this._disableRipple=i,this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(i){this._disabled=i,this._updateRippleDisabled()}constructor(i,r,s,o){this._elementRef=i,this._platform=r,this._ngZone=s,this._animationMode=o,this._focusMonitor=V(rb),this._rippleLoader=V(vb),this._isFab=!1,this._disableRipple=!1,this._disabled=!1;let c=V(GT,{optional:!0}),l=i.nativeElement,u=l.classList;this.disabledInteractive=c?.disabledInteractive??!1,this._rippleLoader?.configureRipple(l,{className:"mat-mdc-button-ripple"});for(let{attribute:f,mdcClasses:p}of KT)l.hasAttribute(f)&&u.add(...p)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(i="program",r){i?this._focusMonitor.focusVia(this._elementRef.nativeElement,i,r):this._elementRef.nativeElement.focus(r)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}};t.\u0275fac=function(r){Zl()},t.\u0275dir=$t({type:t,inputs:{color:"color",disableRipple:[kt.HasDecoratorInputTransform,"disableRipple","disableRipple",nn],disabled:[kt.HasDecoratorInputTransform,"disabled","disabled",nn],ariaDisabled:[kt.HasDecoratorInputTransform,"aria-disabled","ariaDisabled",nn],disabledInteractive:[kt.HasDecoratorInputTransform,"disabledInteractive","disabledInteractive",nn]},features:[Rn]});let n=t;return n})();var yb=(()=>{let t=class t extends YT{constructor(i,r,s,o){super(i,r,s,o)}};t.\u0275fac=function(r){return new(r||t)(lt(Ft),lt(vt),lt(G),lt(Jn,8))},t.\u0275cmp=Xe({type:t,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:14,hostBindings:function(r,s){r&2&&(ni("disabled",s._getDisabledAttribute())("aria-disabled",s._getAriaDisabled()),jg(s.color?"mat-"+s.color:""),Wi("mat-mdc-button-disabled",s.disabled)("mat-mdc-button-disabled-interactive",s.disabledInteractive)("_mat-animation-noopable",s._animationMode==="NoopAnimations")("mat-unthemed",!s.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[ei,en],attrs:qT,ngContentSelectors:HT,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(r,s){r&1&&(ha(WT),tn(0,"span",0),Hi(1),Sn(2,"span",1),Hi(3,1),Ze(),Hi(4,2),tn(5,"span",2)(6,"span",3)),r&2&&Wi("mdc-button__ripple",!s._isFab)("mdc-fab__ripple",s._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px);display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{font-family:var(--mdc-text-button-label-text-font);font-size:var(--mdc-text-button-label-text-size);letter-spacing:var(--mdc-text-button-label-text-tracking);font-weight:var(--mdc-text-button-label-text-weight);text-transform:var(--mdc-text-button-label-text-transform);height:var(--mdc-text-button-container-height);border-radius:var(--mdc-text-button-container-shape);padding:0 var(--mat-text-button-horizontal-padding, 8px)}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape)}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-text-button-with-icon-horizontal-padding, 8px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color)}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color)}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-disabled-state-layer-color)}.mat-mdc-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity)}.mat-mdc-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity)}.mat-mdc-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity)}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-text-button-touch-target-display)}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-unelevated-button{font-family:var(--mdc-filled-button-label-text-font);font-size:var(--mdc-filled-button-label-text-size);letter-spacing:var(--mdc-filled-button-label-text-tracking);font-weight:var(--mdc-filled-button-label-text-weight);text-transform:var(--mdc-filled-button-label-text-transform);height:var(--mdc-filled-button-container-height);border-radius:var(--mdc-filled-button-container-shape);padding:0 var(--mat-filled-button-horizontal-padding, 16px)}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color)}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color)}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-disabled-state-layer-color)}.mat-mdc-unelevated-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity)}.mat-mdc-unelevated-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity)}.mat-mdc-unelevated-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity)}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-filled-button-touch-target-display)}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color);background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{font-family:var(--mdc-protected-button-label-text-font);font-size:var(--mdc-protected-button-label-text-size);letter-spacing:var(--mdc-protected-button-label-text-tracking);font-weight:var(--mdc-protected-button-label-text-weight);text-transform:var(--mdc-protected-button-label-text-transform);height:var(--mdc-protected-button-container-height);border-radius:var(--mdc-protected-button-container-shape);padding:0 var(--mat-protected-button-horizontal-padding, 16px);box-shadow:var(--mdc-protected-button-container-elevation-shadow)}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color)}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color)}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color)}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-disabled-state-layer-color)}.mat-mdc-raised-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity)}.mat-mdc-raised-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity)}.mat-mdc-raised-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity)}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-protected-button-touch-target-display)}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation-shadow)}.mat-mdc-raised-button:focus{box-shadow:var(--mdc-protected-button-focus-container-elevation-shadow)}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mdc-protected-button-pressed-container-elevation-shadow)}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color);background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation-shadow)}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{font-family:var(--mdc-outlined-button-label-text-font);font-size:var(--mdc-outlined-button-label-text-size);letter-spacing:var(--mdc-outlined-button-label-text-tracking);font-weight:var(--mdc-outlined-button-label-text-weight);text-transform:var(--mdc-outlined-button-label-text-transform);height:var(--mdc-outlined-button-container-height);border-radius:var(--mdc-outlined-button-container-shape);padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width);padding:0 var(--mat-outlined-button-horizontal-padding, 15px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color)}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape)}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color)}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width))}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color)}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-disabled-state-layer-color)}.mat-mdc-outlined-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity)}.mat-mdc-outlined-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity)}.mat-mdc-outlined-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity)}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-outlined-button-touch-target-display)}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color);border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button-base{text-decoration:none}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px)*-1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0});let n=t;return n})();var QT=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=ht({type:t}),t.\u0275inj=dt({imports:[Qs,bb,Qs]});let n=t;return n})();var Xs=class{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;t!=null&&(this._attachedHost=null,t.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(t){this._attachedHost=t}},dr=class extends Xs{constructor(t,e,i,r,s){super(),this.component=t,this.viewContainerRef=e,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=s}},hr=class extends Xs{constructor(t,e,i,r){super(),this.templateRef=t,this.viewContainerRef=e,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}},bd=class extends Xs{constructor(t){super(),this.element=t instanceof Ft?t.nativeElement:t}},fr=class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){if(t instanceof dr)return this._attachedPortal=t,this.attachComponentPortal(t);if(t instanceof hr)return this._attachedPortal=t,this.attachTemplatePortal(t);if(this.attachDomPortal&&t instanceof bd)return this._attachedPortal=t,this.attachDomPortal(t)}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var ja=class extends fr{constructor(t,e,i,r,s){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=o=>{this._document;let c=o.element;c.parentNode;let l=this._document.createComment("dom-portal");c.parentNode.insertBefore(l,c),this.outletElement.appendChild(c),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(c,l)})},this._document=s}attachComponentPortal(t){let i=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),r;return t.viewContainerRef?(r=t.viewContainerRef.createComponent(i,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector,t.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(t.injector||this._defaultInjector||Lt.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=t,r}attachTemplatePortal(t){let e=t.viewContainerRef,i=e.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=e.indexOf(i);r!==-1&&e.remove(r)}),this._attachedPortal=t,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}};var vd=(()=>{let t=class t extends fr{constructor(i,r,s){super(),this._componentFactoryResolver=i,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new ge,this.attachDomPortal=o=>{this._document;let c=o.element;c.parentNode;let l=this._document.createComment("dom-portal");o.setAttachedHost(this),c.parentNode.insertBefore(l,c),this._getRootNode().appendChild(c),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(c,l)})},this._document=s}get portal(){return this._attachedPortal}set portal(i){this.hasAttached()&&!i&&!this._isInitialized||(this.hasAttached()&&super.detach(),i&&super.attach(i),this._attachedPortal=i||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(i){i.setAttachedHost(this);let r=i.viewContainerRef!=null?i.viewContainerRef:this._viewContainerRef,o=(i.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(i.component),c=r.createComponent(o,r.length,i.injector||r.injector,i.projectableNodes||void 0);return r!==this._viewContainerRef&&this._getRootNode().appendChild(c.hostView.rootNodes[0]),super.setDisposeFn(()=>c.destroy()),this._attachedPortal=i,this._attachedRef=c,this.attached.emit(c),c}attachTemplatePortal(i){i.setAttachedHost(this);let r=this._viewContainerRef.createEmbeddedView(i.templateRef,i.context,{injector:i.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=i,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){let i=this._viewContainerRef.element.nativeElement;return i.nodeType===i.ELEMENT_NODE?i:i.parentNode}};t.\u0275fac=function(r){return new(r||t)(lt(ca),lt(qi),lt(Z))},t.\u0275dir=$t({type:t,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[kt.None,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],standalone:!0,features:[ei]});let n=t;return n})();var XT=20,wb=(()=>{let t=class t{constructor(i,r,s){this._ngZone=i,this._platform=r,this._scrolled=new ct,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=s}register(i){this.scrollContainers.has(i)||this.scrollContainers.set(i,i.elementScrolled().subscribe(()=>this._scrolled.next(i)))}deregister(i){let r=this.scrollContainers.get(i);r&&(r.unsubscribe(),this.scrollContainers.delete(i))}scrolled(i=XT){return this._platform.isBrowser?new En(r=>{this._globalSubscription||this._addGlobalListener();let s=i>0?this._scrolled.pipe(Wl(i)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{s.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):q()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((i,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(i,r){let s=this.getAncestorScrollContainers(i);return this.scrolled(r).pipe(ce(o=>!o||s.indexOf(o)>-1))}getAncestorScrollContainers(i){let r=[];return this.scrollContainers.forEach((s,o)=>{this._scrollableContainsElement(o,i)&&r.push(o)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(i,r){let s=rn(r),o=i.getElementRef().nativeElement;do if(s==o)return!0;while(s=s.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let i=this._getWindow();return bg(i.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}};t.\u0275fac=function(r){return new(r||t)(x(G),x(vt),x(Z,8))},t.\u0275prov=L({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var JT=20,yd=(()=>{let t=class t{constructor(i,r,s){this._platform=i,this._change=new ct,this._changeListener=o=>{this._change.next(o)},this._document=s,r.runOutsideAngular(()=>{if(i.isBrowser){let o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let i=this._getWindow();i.removeEventListener("resize",this._changeListener),i.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let i={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),i}getViewportRect(){let i=this.getViewportScrollPosition(),{width:r,height:s}=this.getViewportSize();return{top:i.top,left:i.left,bottom:i.top+s,right:i.left+r,height:s,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let i=this._document,r=this._getWindow(),s=i.documentElement,o=s.getBoundingClientRect(),c=-o.top||i.body.scrollTop||r.scrollY||s.scrollTop||0,l=-o.left||i.body.scrollLeft||r.scrollX||s.scrollLeft||0;return{top:c,left:l}}change(i=JT){return i>0?this._change.pipe(Wl(i)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let i=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:i.innerWidth,height:i.innerHeight}:{width:0,height:0}}};t.\u0275fac=function(r){return new(r||t)(x(vt),x(G),x(Z,8))},t.\u0275prov=L({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var Ib=Y_(),wd=class{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){let t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=At(-this._previousScrollPosition.left),t.style.top=At(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let t=this._document.documentElement,e=this._document.body,i=t.style,r=e.style,s=i.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),Ib&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),Ib&&(i.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let e=this._document.body,i=this._viewportRuler.getViewportSize();return e.scrollHeight>i.height||e.scrollWidth>i.width}};var Id=class{constructor(t,e,i,r){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(this._scrollSubscription)return;let t=this._scrollDispatcher.scrolled(0).pipe(ce(e=>!e||!this._overlayRef.overlayElement.contains(e.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{let e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},Ba=class{enable(){}disable(){}attach(){}};function Ed(n,t){return t.some(e=>{let i=n.bottom<e.top,r=n.top>e.bottom,s=n.right<e.left,o=n.left>e.right;return i||r||s||o})}function Eb(n,t){return t.some(e=>{let i=n.top<e.top,r=n.bottom>e.bottom,s=n.left<e.left,o=n.right>e.right;return i||r||s||o})}var Td=class{constructor(t,e,i,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(!this._scrollSubscription){let t=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(t).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();Ed(e,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},eA=(()=>{let t=class t{constructor(i,r,s,o){this._scrollDispatcher=i,this._viewportRuler=r,this._ngZone=s,this.noop=()=>new Ba,this.close=c=>new Id(this._scrollDispatcher,this._ngZone,this._viewportRuler,c),this.block=()=>new wd(this._viewportRuler,this._document),this.reposition=c=>new Td(this._scrollDispatcher,this._viewportRuler,this._ngZone,c),this._document=o}};t.\u0275fac=function(r){return new(r||t)(x(wb),x(yd),x(G),x(Z))},t.\u0275prov=L({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),Js=class{constructor(t){if(this.scrollStrategy=new Ba,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){let e=Object.keys(t);for(let i of e)t[i]!==void 0&&(this[i]=t[i])}}};var Ad=class{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}};var Cb=(()=>{let t=class t{constructor(i){this._attachedOverlays=[],this._document=i}ngOnDestroy(){this.detach()}add(i){this.remove(i),this._attachedOverlays.push(i)}remove(i){let r=this._attachedOverlays.indexOf(i);r>-1&&this._attachedOverlays.splice(r,1),this._attachedOverlays.length===0&&this.detach()}};t.\u0275fac=function(r){return new(r||t)(x(Z))},t.\u0275prov=L({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),nA=(()=>{let t=class t extends Cb{constructor(i,r){super(i),this._ngZone=r,this._keydownListener=s=>{let o=this._attachedOverlays;for(let c=o.length-1;c>-1;c--)if(o[c]._keydownEvents.observers.length>0){let l=o[c]._keydownEvents;this._ngZone?this._ngZone.run(()=>l.next(s)):l.next(s);break}}}add(i){super.add(i),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}};t.\u0275fac=function(r){return new(r||t)(x(Z),x(G,8))},t.\u0275prov=L({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),iA=(()=>{let t=class t extends Cb{constructor(i,r,s){super(i),this._platform=r,this._ngZone=s,this._cursorStyleIsSet=!1,this._pointerDownListener=o=>{this._pointerDownEventTarget=Ee(o)},this._clickListener=o=>{let c=Ee(o),l=o.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:c;this._pointerDownEventTarget=null;let u=this._attachedOverlays.slice();for(let f=u.length-1;f>-1;f--){let p=u[f];if(p._outsidePointerEvents.observers.length<1||!p.hasAttached())continue;if(p.overlayElement.contains(c)||p.overlayElement.contains(l))break;let b=p._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>b.next(o)):b.next(o)}}}add(i){if(super.add(i),!this._isAttached){let r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let i=this._document.body;i.removeEventListener("pointerdown",this._pointerDownListener,!0),i.removeEventListener("click",this._clickListener,!0),i.removeEventListener("auxclick",this._clickListener,!0),i.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(i.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(i){i.addEventListener("pointerdown",this._pointerDownListener,!0),i.addEventListener("click",this._clickListener,!0),i.addEventListener("auxclick",this._clickListener,!0),i.addEventListener("contextmenu",this._clickListener,!0)}};t.\u0275fac=function(r){return new(r||t)(x(Z),x(vt),x(G,8))},t.\u0275prov=L({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),xb=(()=>{let t=class t{constructor(i,r){this._platform=r,this._document=i}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let i="cdk-overlay-container";if(this._platform.isBrowser||Ks()){let s=this._document.querySelectorAll(`.${i}[platform="server"], .${i}[platform="test"]`);for(let o=0;o<s.length;o++)s[o].remove()}let r=this._document.createElement("div");r.classList.add(i),Ks()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}};t.\u0275fac=function(r){return new(r||t)(x(Z),x(vt))},t.\u0275prov=L({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),Rd=class{constructor(t,e,i,r,s,o,c,l,u,f=!1){this._portalOutlet=t,this._host=e,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=c,this._location=l,this._outsideClickDispatcher=u,this._animationsDisabled=f,this._backdropElement=null,this._backdropClick=new ct,this._attachments=new ct,this._detachments=new ct,this._locationChanges=Yn.EMPTY,this._backdropClickHandler=p=>this._backdropClick.next(p),this._backdropTransitionendHandler=p=>{this._disposeBackdrop(p.target)},this._keydownEvents=new ct,this._outsidePointerEvents=new ct,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(we(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof e?.onDestroy=="function"&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){let t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=M(M({},this._config),t),this._updateElementSize()}setDirection(t){this._config=xt(M({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){let t=this._config.direction;return t?typeof t=="string"?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let t=this._pane.style;t.width=At(this._config.width),t.height=At(this._config.height),t.minWidth=At(this._config.minWidth),t.minHeight=At(this._config.minHeight),t.maxWidth=At(this._config.maxWidth),t.maxHeight=At(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){let t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let t=this._backdropElement;if(t){if(this._animationsDisabled){this._disposeBackdrop(t);return}t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500))}}_toggleClasses(t,e,i){let r=lr(e||[]).filter(s=>!!s);r.length&&(i?t.classList.add(...r):t.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{let t=this._ngZone.onStable.pipe(Ie(vg(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){let t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}},Tb="cdk-overlay-connected-position-bounding-box",rA=/([A-Za-z%]+)$/,Sd=class{get positions(){return this._preferredPositions}constructor(t,e,i,r,s){this._viewportRuler=e,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new ct,this._resizeSubscription=Yn.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}attach(t){this._overlayRef&&this._overlayRef,this._validatePositions(),t.hostElement.classList.add(Tb),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let t=this._originRect,e=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[],o;for(let c of this._preferredPositions){let l=this._getOriginPoint(t,r,c),u=this._getOverlayPoint(l,e,c),f=this._getOverlayFit(u,e,i,c);if(f.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(c,l);return}if(this._canFitWithFlexibleDimensions(f,u,i)){s.push({position:c,origin:l,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(l,c)});continue}(!o||o.overlayFit.visibleArea<f.visibleArea)&&(o={overlayFit:f,overlayPoint:u,originPoint:l,position:c,overlayRect:e})}if(s.length){let c=null,l=-1;for(let u of s){let f=u.boundingBoxRect.width*u.boundingBoxRect.height*(u.position.weight||1);f>l&&(l=f,c=u)}this._isPushed=!1,this._applyPosition(c.position,c.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(o.position,o.originPoint);return}this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&hi(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Tb),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,t.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,i){let r;if(i.originX=="center")r=t.left+t.width/2;else{let o=this._isRtl()?t.right:t.left,c=this._isRtl()?t.left:t.right;r=i.originX=="start"?o:c}e.left<0&&(r-=e.left);let s;return i.originY=="center"?s=t.top+t.height/2:s=i.originY=="top"?t.top:t.bottom,e.top<0&&(s-=e.top),{x:r,y:s}}_getOverlayPoint(t,e,i){let r;i.overlayX=="center"?r=-e.width/2:i.overlayX==="start"?r=this._isRtl()?-e.width:0:r=this._isRtl()?0:-e.width;let s;return i.overlayY=="center"?s=-e.height/2:s=i.overlayY=="top"?0:-e.height,{x:t.x+r,y:t.y+s}}_getOverlayFit(t,e,i,r){let s=Rb(e),{x:o,y:c}=t,l=this._getOffset(r,"x"),u=this._getOffset(r,"y");l&&(o+=l),u&&(c+=u);let f=0-o,p=o+s.width-i.width,b=0-c,A=c+s.height-i.height,C=this._subtractOverflows(s.width,f,p),P=this._subtractOverflows(s.height,b,A),D=C*P;return{visibleArea:D,isCompletelyWithinViewport:s.width*s.height===D,fitsInViewportVertically:P===s.height,fitsInViewportHorizontally:C==s.width}}_canFitWithFlexibleDimensions(t,e,i){if(this._hasFlexibleDimensions){let r=i.bottom-e.y,s=i.right-e.x,o=Ab(this._overlayRef.getConfig().minHeight),c=Ab(this._overlayRef.getConfig().minWidth),l=t.fitsInViewportVertically||o!=null&&o<=r,u=t.fitsInViewportHorizontally||c!=null&&c<=s;return l&&u}return!1}_pushOverlayOnScreen(t,e,i){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};let r=Rb(e),s=this._viewportRect,o=Math.max(t.x+r.width-s.width,0),c=Math.max(t.y+r.height-s.height,0),l=Math.max(s.top-i.top-t.y,0),u=Math.max(s.left-i.left-t.x,0),f=0,p=0;return r.width<=s.width?f=u||-o:f=t.x<this._viewportMargin?s.left-i.left-t.x:0,r.height<=s.height?p=l||-c:p=t.y<this._viewportMargin?s.top-i.top-t.y:0,this._previousPushAmount={x:f,y:p},{x:t.x+f,y:t.y+p}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._positionChanges.observers.length){let i=this._getScrollVisibility();if(t!==this._lastPosition||!this._lastScrollVisibility||!sA(this._lastScrollVisibility,i)){let r=new Ad(t,i);this._positionChanges.next(r)}this._lastScrollVisibility=i}this._lastPosition=t,this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;let e=this._boundingBox.querySelectorAll(this._transformOriginSelector),i,r=t.overlayY;t.overlayX==="center"?i="center":this._isRtl()?i=t.overlayX==="start"?"right":"left":i=t.overlayX==="start"?"left":"right";for(let s=0;s<e.length;s++)e[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(t,e){let i=this._viewportRect,r=this._isRtl(),s,o,c;if(e.overlayY==="top")o=t.y,s=i.height-o+this._viewportMargin;else if(e.overlayY==="bottom")c=i.height-t.y+this._viewportMargin*2,s=i.height-c+this._viewportMargin;else{let A=Math.min(i.bottom-t.y+i.top,t.y),C=this._lastBoundingBoxSize.height;s=A*2,o=t.y-A,s>C&&!this._isInitialRender&&!this._growAfterOpen&&(o=t.y-C/2)}let l=e.overlayX==="start"&&!r||e.overlayX==="end"&&r,u=e.overlayX==="end"&&!r||e.overlayX==="start"&&r,f,p,b;if(u)b=i.width-t.x+this._viewportMargin*2,f=t.x-this._viewportMargin;else if(l)p=t.x,f=i.right-t.x;else{let A=Math.min(i.right-t.x+i.left,t.x),C=this._lastBoundingBoxSize.width;f=A*2,p=t.x-A,f>C&&!this._isInitialRender&&!this._growAfterOpen&&(p=t.x-C/2)}return{top:o,left:p,bottom:c,right:b,width:f,height:s}}_setBoundingBoxStyles(t,e){let i=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));let r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{let s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=At(i.height),r.top=At(i.top),r.bottom=At(i.bottom),r.width=At(i.width),r.left=At(i.left),r.right=At(i.right),e.overlayX==="center"?r.alignItems="center":r.alignItems=e.overlayX==="end"?"flex-end":"flex-start",e.overlayY==="center"?r.justifyContent="center":r.justifyContent=e.overlayY==="bottom"?"flex-end":"flex-start",s&&(r.maxHeight=At(s)),o&&(r.maxWidth=At(o))}this._lastBoundingBoxSize=i,hi(this._boundingBox.style,r)}_resetBoundingBoxStyles(){hi(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){hi(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){let i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){let f=this._viewportRuler.getViewportScrollPosition();hi(i,this._getExactOverlayY(e,t,f)),hi(i,this._getExactOverlayX(e,t,f))}else i.position="static";let c="",l=this._getOffset(e,"x"),u=this._getOffset(e,"y");l&&(c+=`translateX(${l}px) `),u&&(c+=`translateY(${u}px)`),i.transform=c.trim(),o.maxHeight&&(r?i.maxHeight=At(o.maxHeight):s&&(i.maxHeight="")),o.maxWidth&&(r?i.maxWidth=At(o.maxWidth):s&&(i.maxWidth="")),hi(this._pane.style,i)}_getExactOverlayY(t,e,i){let r={top:"",bottom:""},s=this._getOverlayPoint(e,this._overlayRect,t);if(this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),t.overlayY==="bottom"){let o=this._document.documentElement.clientHeight;r.bottom=`${o-(s.y+this._overlayRect.height)}px`}else r.top=At(s.y);return r}_getExactOverlayX(t,e,i){let r={left:"",right:""},s=this._getOverlayPoint(e,this._overlayRect,t);this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i));let o;if(this._isRtl()?o=t.overlayX==="end"?"left":"right":o=t.overlayX==="end"?"right":"left",o==="right"){let c=this._document.documentElement.clientWidth;r.right=`${c-(s.x+this._overlayRect.width)}px`}else r.left=At(s.x);return r}_getScrollVisibility(){let t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Eb(t,i),isOriginOutsideView:Ed(t,i),isOverlayClipped:Eb(e,i),isOverlayOutsideView:Ed(e,i)}}_subtractOverflows(t,...e){return e.reduce((i,r)=>i-Math.max(r,0),t)}_getNarrowedViewportRect(){let t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+t-this._viewportMargin,bottom:i.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return e==="x"?t.offsetX==null?this._offsetX:t.offsetX:t.offsetY==null?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&lr(t).forEach(e=>{e!==""&&this._appliedPanelClasses.indexOf(e)===-1&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){let t=this._origin;if(t instanceof Ft)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();let e=t.width||0,i=t.height||0;return{top:t.y,bottom:t.y+i,left:t.x,right:t.x+e,height:i,width:e}}};function hi(n,t){for(let e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function Ab(n){if(typeof n!="number"&&n!=null){let[t,e]=n.split(rA);return!e||e==="px"?parseFloat(t):null}return n||null}function Rb(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}function sA(n,t){return n===t?!0:n.isOriginClipped===t.isOriginClipped&&n.isOriginOutsideView===t.isOriginOutsideView&&n.isOverlayClipped===t.isOverlayClipped&&n.isOverlayOutsideView===t.isOverlayOutsideView}var Sb="cdk-global-overlay-wrapper",Cd=class{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(t){let e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(Sb),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:c}=i,l=(r==="100%"||r==="100vw")&&(!o||o==="100%"||o==="100vw"),u=(s==="100%"||s==="100vh")&&(!c||c==="100%"||c==="100vh"),f=this._xPosition,p=this._xOffset,b=this._overlayRef.getConfig().direction==="rtl",A="",C="",P="";l?P="flex-start":f==="center"?(P="center",b?C=p:A=p):b?f==="left"||f==="end"?(P="flex-end",A=p):(f==="right"||f==="start")&&(P="flex-start",C=p):f==="left"||f==="start"?(P="flex-start",A=p):(f==="right"||f==="end")&&(P="flex-end",C=p),t.position=this._cssPosition,t.marginLeft=l?"0":A,t.marginTop=u?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=l?"0":C,e.justifyContent=P,e.alignItems=u?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,i=e.style;e.classList.remove(Sb),i.justifyContent=i.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}},oA=(()=>{let t=class t{constructor(i,r,s,o){this._viewportRuler=i,this._document=r,this._platform=s,this._overlayContainer=o}global(){return new Cd}flexibleConnectedTo(i){return new Sd(i,this._viewportRuler,this._document,this._platform,this._overlayContainer)}};t.\u0275fac=function(r){return new(r||t)(x(yd),x(Z),x(vt),x(xb))},t.\u0275prov=L({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),aA=0,Db=(()=>{let t=class t{constructor(i,r,s,o,c,l,u,f,p,b,A,C){this.scrollStrategies=i,this._overlayContainer=r,this._componentFactoryResolver=s,this._positionBuilder=o,this._keyboardDispatcher=c,this._injector=l,this._ngZone=u,this._document=f,this._directionality=p,this._location=b,this._outsideClickDispatcher=A,this._animationsModuleType=C}create(i){let r=this._createHostElement(),s=this._createPaneElement(r),o=this._createPortalOutlet(s),c=new Js(i);return c.direction=c.direction||this._directionality.value,new Rd(o,r,s,c,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations")}position(){return this._positionBuilder}_createPaneElement(i){let r=this._document.createElement("div");return r.id=`cdk-overlay-${aA++}`,r.classList.add("cdk-overlay-pane"),i.appendChild(r),r}_createHostElement(){let i=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalOutlet(i){return this._appRef||(this._appRef=this._injector.get(As)),new ja(i,this._componentFactoryResolver,this._appRef,this._injector,this._document)}};t.\u0275fac=function(r){return new(r||t)(x(eA),x(xb),x(ca),x(oA),x(nA),x(Lt),x(G),x(Z),x(ab),x(Yi),x(iA),x(Jn,8))},t.\u0275prov=L({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function lA(n,t){if(n&1){let e=Bg();Sn(0,"div",1)(1,"button",2),ua("click",function(){Ag(e);let r=da();return Rg(r.action())}),fa(2),Ze()()}if(n&2){let e=da();ti(2),ma(" ",e.data.action," ")}}var uA=["label"];function dA(n,t){}var hA=Math.pow(2,31)-1,Zs=class{constructor(t,e){this._overlayRef=e,this._afterDismissed=new ct,this._afterOpened=new ct,this._onAction=new ct,this._dismissedByAction=!1,this.containerInstance=t,t._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(t){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(t,hA))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}},kb=new J("MatSnackBarData"),mr=class{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}},fA=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=$t({type:t,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"],standalone:!0});let n=t;return n})(),mA=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=$t({type:t,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"],standalone:!0});let n=t;return n})(),pA=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=$t({type:t,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"],standalone:!0});let n=t;return n})(),gA=(()=>{let t=class t{constructor(i,r){this.snackBarRef=i,this.data=r}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}};t.\u0275fac=function(r){return new(r||t)(lt(Zs),lt(kb))},t.\u0275cmp=Xe({type:t,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],standalone:!0,features:[en],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions",""],["mat-button","","matSnackBarAction","",3,"click"]],template:function(r,s){r&1&&(Sn(0,"div",0),fa(1),Ze(),la(2,lA,3,1,"div",1)),r&2&&(ti(),ma(" ",s.data.message,`
`),ti(),tu(2,s.hasAction?2:-1))},dependencies:[yb,fA,mA,pA],styles:[".mat-mdc-simple-snack-bar{display:flex}"],encapsulation:2,changeDetection:0});let n=t;return n})(),_A={snackBarState:t_("state",[su("void, hidden",ga({transform:"scale(0.8)",opacity:0})),su("visible",ga({transform:"scale(1)",opacity:1})),ou("* => visible",ru("150ms cubic-bezier(0, 0, 0.2, 1)")),ou("* => void, * => hidden",ru("75ms cubic-bezier(0.4, 0.0, 1, 1)",ga({opacity:0})))])},bA=0,vA=(()=>{let t=class t extends fr{constructor(i,r,s,o,c){super(),this._ngZone=i,this._elementRef=r,this._changeDetectorRef=s,this._platform=o,this.snackBarConfig=c,this._document=V(Z),this._trackedModals=new Set,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new ct,this._onExit=new ct,this._onEnter=new ct,this._animationState="void",this._liveElementId=`mat-snack-bar-container-live-${bA++}`,this.attachDomPortal=l=>{this._assertNotAttached();let u=this._portalOutlet.attachDomPortal(l);return this._afterPortalAttached(),u},c.politeness==="assertive"&&!c.announcementMessage?this._live="assertive":c.politeness==="off"?this._live="off":this._live="polite",this._platform.FIREFOX&&(this._live==="polite"&&(this._role="status"),this._live==="assertive"&&(this._role="alert"))}attachComponentPortal(i){this._assertNotAttached();let r=this._portalOutlet.attachComponentPortal(i);return this._afterPortalAttached(),r}attachTemplatePortal(i){this._assertNotAttached();let r=this._portalOutlet.attachTemplatePortal(i);return this._afterPortalAttached(),r}onAnimationEnd(i){let{fromState:r,toState:s}=i;if((s==="void"&&r!=="void"||s==="hidden")&&this._completeExit(),s==="visible"){let o=this._onEnter;this._ngZone.run(()=>{o.next(),o.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.markForCheck(),this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._changeDetectorRef.markForCheck(),this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._clearFromModals(),this._completeExit()}_completeExit(){queueMicrotask(()=>{this._onExit.next(),this._onExit.complete()})}_afterPortalAttached(){let i=this._elementRef.nativeElement,r=this.snackBarConfig.panelClass;r&&(Array.isArray(r)?r.forEach(c=>i.classList.add(c)):i.classList.add(r)),this._exposeToModals();let s=this._label.nativeElement,o="mdc-snackbar__label";s.classList.toggle(o,!s.querySelector(`.${o}`))}_exposeToModals(){let i=this._liveElementId,r=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let s=0;s<r.length;s++){let o=r[s],c=o.getAttribute("aria-owns");this._trackedModals.add(o),c?c.indexOf(i)===-1&&o.setAttribute("aria-owns",c+" "+i):o.setAttribute("aria-owns",i)}}_clearFromModals(){this._trackedModals.forEach(i=>{let r=i.getAttribute("aria-owns");if(r){let s=r.replace(this._liveElementId,"").trim();s.length>0?i.setAttribute("aria-owns",s):i.removeAttribute("aria-owns")}}),this._trackedModals.clear()}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{let i=this._elementRef.nativeElement.querySelector("[aria-hidden]"),r=this._elementRef.nativeElement.querySelector("[aria-live]");if(i&&r){let s=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&i.contains(document.activeElement)&&(s=document.activeElement),i.removeAttribute("aria-hidden"),r.appendChild(i),s?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}};t.\u0275fac=function(r){return new(r||t)(lt(G),lt(Ft),lt(ii),lt(vt),lt(mr))},t.\u0275cmp=Xe({type:t,selectors:[["mat-snack-bar-container"]],viewQuery:function(r,s){if(r&1&&(Es(vd,7),Es(uA,7)),r&2){let o;Gi(o=Ki())&&(s._portalOutlet=o.first),Gi(o=Ki())&&(s._label=o.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container","mdc-snackbar--open"],hostVars:1,hostBindings:function(r,s){r&1&&$g("@state.done",function(c){return s.onAnimationEnd(c)}),r&2&&zg("@state",s._animationState)},standalone:!0,features:[ei,en],decls:6,vars:3,consts:[["label",""],[1,"mdc-snackbar__surface"],[1,"mat-mdc-snack-bar-label"],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(r,s){r&1&&(Sn(0,"div",1)(1,"div",2,0)(3,"div",3),la(4,dA,0,0,"ng-template",4),Ze(),tn(5,"div"),Ze()()),r&2&&(ti(5),ni("aria-live",s._live)("role",s._role)("id",s._liveElementId))},dependencies:[vd],styles:['.mdc-snackbar{display:none;position:fixed;right:0;bottom:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;pointer-events:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mdc-snackbar--opening,.mdc-snackbar--open,.mdc-snackbar--closing{display:flex}.mdc-snackbar--open .mdc-snackbar__label,.mdc-snackbar--open .mdc-snackbar__actions{visibility:visible}.mdc-snackbar__surface{padding-left:0;padding-right:8px;display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;transform:scale(0.8);opacity:0}.mdc-snackbar__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-snackbar__surface::before{border-color:CanvasText}}[dir=rtl] .mdc-snackbar__surface,.mdc-snackbar__surface[dir=rtl]{padding-left:8px;padding-right:0}.mdc-snackbar--open .mdc-snackbar__surface{transform:scale(1);opacity:1;pointer-events:auto}.mdc-snackbar--closing .mdc-snackbar__surface{transform:scale(1)}.mdc-snackbar__label{padding-left:16px;padding-right:8px;width:100%;flex-grow:1;box-sizing:border-box;margin:0;visibility:hidden;padding-top:14px;padding-bottom:14px}[dir=rtl] .mdc-snackbar__label,.mdc-snackbar__label[dir=rtl]{padding-left:8px;padding-right:16px}.mdc-snackbar__label::before{display:inline;content:attr(data-mdc-snackbar-label-text)}.mdc-snackbar__actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box;visibility:hidden}.mdc-snackbar__action+.mdc-snackbar__dismiss{margin-left:8px;margin-right:0}[dir=rtl] .mdc-snackbar__action+.mdc-snackbar__dismiss,.mdc-snackbar__action+.mdc-snackbar__dismiss[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-snack-bar-container{margin:8px;position:static}.mat-mdc-snack-bar-container .mdc-snackbar__surface{min-width:344px}@media(max-width: 480px),(max-width: 344px){.mat-mdc-snack-bar-container .mdc-snackbar__surface{min-width:100%}}@media(max-width: 480px),(max-width: 344px){.mat-mdc-snack-bar-container{width:100vw}}.mat-mdc-snack-bar-container .mdc-snackbar__surface{max-width:672px}.mat-mdc-snack-bar-container .mdc-snackbar__surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12)}.mat-mdc-snack-bar-container .mdc-snackbar__surface{background-color:var(--mdc-snackbar-container-color)}.mat-mdc-snack-bar-container .mdc-snackbar__surface{border-radius:var(--mdc-snackbar-container-shape)}.mat-mdc-snack-bar-container .mdc-snackbar__label{color:var(--mdc-snackbar-supporting-text-color)}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-size:var(--mdc-snackbar-supporting-text-size);font-family:var(--mdc-snackbar-supporting-text-font);font-weight:var(--mdc-snackbar-supporting-text-weight);line-height:var(--mdc-snackbar-supporting-text-line-height)}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){color:var(--mat-snack-bar-button-color);--mat-text-button-state-layer-color:currentColor;--mat-text-button-ripple-color:currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{opacity:.1}.mat-mdc-snack-bar-container .mdc-snackbar__label::before{display:none}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-handset .mdc-snackbar__surface{width:100%}'],encapsulation:2,data:{animation:[_A.snackBarState]}});let n=t;return n})();function yA(){return new mr}var wA=new J("mat-snack-bar-default-options",{providedIn:"root",factory:yA}),Pb=(()=>{let t=class t{get _openedSnackBarRef(){let i=this._parentSnackBar;return i?i._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(i){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=i:this._snackBarRefAtThisLevel=i}constructor(i,r,s,o,c,l){this._overlay=i,this._live=r,this._injector=s,this._breakpointObserver=o,this._parentSnackBar=c,this._defaultConfig=l,this._snackBarRefAtThisLevel=null,this.simpleSnackBarComponent=gA,this.snackBarContainerComponent=vA,this.handsetCssClass="mat-mdc-snack-bar-handset"}openFromComponent(i,r){return this._attach(i,r)}openFromTemplate(i,r){return this._attach(i,r)}open(i,r="",s){let o=M(M({},this._defaultConfig),s);return o.data={message:i,action:r},o.announcementMessage===i&&(o.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,o)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(i,r){let s=r&&r.viewContainerRef&&r.viewContainerRef.injector,o=Lt.create({parent:s||this._injector,providers:[{provide:mr,useValue:r}]}),c=new dr(this.snackBarContainerComponent,r.viewContainerRef,o),l=i.attach(c);return l.instance.snackBarConfig=r,l.instance}_attach(i,r){let s=M(M(M({},new mr),this._defaultConfig),r),o=this._createOverlay(s),c=this._attachSnackBarContainer(o,s),l=new Zs(c,o);if(i instanceof Is){let u=new hr(i,null,{$implicit:s.data,snackBarRef:l});l.instance=c.attachTemplatePortal(u)}else{let u=this._createInjector(s,l),f=new dr(i,void 0,u),p=c.attachComponentPortal(f);l.instance=p.instance}return this._breakpointObserver.observe(Z_.HandsetPortrait).pipe(Ie(o.detachments())).subscribe(u=>{o.overlayElement.classList.toggle(this.handsetCssClass,u.matches)}),s.announcementMessage&&c._onAnnounce.subscribe(()=>{this._live.announce(s.announcementMessage,s.politeness)}),this._animateSnackBar(l,s),this._openedSnackBarRef=l,this._openedSnackBarRef}_animateSnackBar(i,r){i.afterDismissed().subscribe(()=>{this._openedSnackBarRef==i&&(this._openedSnackBarRef=null),r.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{i.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):i.containerInstance.enter(),r.duration&&r.duration>0&&i.afterOpened().subscribe(()=>i._dismissAfter(r.duration))}_createOverlay(i){let r=new Js;r.direction=i.direction;let s=this._overlay.position().global(),o=i.direction==="rtl",c=i.horizontalPosition==="left"||i.horizontalPosition==="start"&&!o||i.horizontalPosition==="end"&&o,l=!c&&i.horizontalPosition!=="center";return c?s.left("0"):l?s.right("0"):s.centerHorizontally(),i.verticalPosition==="top"?s.top("0"):s.bottom("0"),r.positionStrategy=s,this._overlay.create(r)}_createInjector(i,r){let s=i&&i.viewContainerRef&&i.viewContainerRef.injector;return Lt.create({parent:s||this._injector,providers:[{provide:Zs,useValue:r},{provide:kb,useValue:i.data}]})}};t.\u0275fac=function(r){return new(r||t)(x(Db),x(ib),x(Lt),x(La),x(t,12),x(wA))},t.\u0275prov=L({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var Ob=(()=>{let t=class t{constructor(i){this.snackBar=i,this.router=V(or)}routerLink(i){return this.router.navigateByUrl(i)}saveInLocalStorage(i,r){return localStorage.setItem(i,JSON.stringify(r))}showSuccess(i){this.snackBar.open(i,"Cerrar",{duration:7e3,panelClass:["success-snackbar"]})}showError(i){this.snackBar.open(i,"Cerrar",{duration:5e3,panelClass:["error-snackbar"]})}showWarning(i){this.snackBar.open(i,"Cerrar",{duration:5e3,panelClass:["warning-snackbar"]})}};t.\u0275fac=function(r){return new(r||t)(x(Pb))},t.\u0275prov=L({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var Mb=function(n){let t=[],e=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?t[e++]=r:r<2048?(t[e++]=r>>6|192,t[e++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),t[e++]=r>>18|240,t[e++]=r>>12&63|128,t[e++]=r>>6&63|128,t[e++]=r&63|128):(t[e++]=r>>12|224,t[e++]=r>>6&63|128,t[e++]=r&63|128)}return t},EA=function(n){let t=[],e=0,i=0;for(;e<n.length;){let r=n[e++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){let s=n[e++];t[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){let s=n[e++],o=n[e++],c=n[e++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|c&63)-65536;t[i++]=String.fromCharCode(55296+(l>>10)),t[i++]=String.fromCharCode(56320+(l&1023))}else{let s=n[e++],o=n[e++];t[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return t.join("")},Lb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){let s=n[r],o=r+1<n.length,c=o?n[r+1]:0,l=r+2<n.length,u=l?n[r+2]:0,f=s>>2,p=(s&3)<<4|c>>4,b=(c&15)<<2|u>>6,A=u&63;l||(A=64,o||(b=64)),i.push(e[f],e[p],e[b],e[A])}return i.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(Mb(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):EA(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();let e=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){let s=e[n.charAt(r++)],c=r<n.length?e[n.charAt(r)]:0;++r;let u=r<n.length?e[n.charAt(r)]:64;++r;let p=r<n.length?e[n.charAt(r)]:64;if(++r,s==null||c==null||u==null||p==null)throw new Dd;let b=s<<2|c>>4;if(i.push(b),u!==64){let A=c<<4&240|u>>2;if(i.push(A),p!==64){let C=u<<6&192|p;i.push(C)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Dd=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},TA=function(n){let t=Mb(n);return Lb.encodeByteArray(t,!0)},to=function(n){return TA(n).replace(/\./g,"")},Pd=function(n){try{return Lb.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function AA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var RA=()=>AA().__FIREBASE_DEFAULTS__,SA=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},CA=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let t=n&&Pd(n[1]);return t&&JSON.parse(t)},$a=()=>{try{return RA()||SA()||CA()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Od=n=>{var t,e;return(e=(t=$a())===null||t===void 0?void 0:t.emulatorHosts)===null||e===void 0?void 0:e[n]},qa=n=>{let t=Od(n);if(!t)return;let e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);let i=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),i]:[t.substring(0,e),i]},Nd=()=>{var n;return(n=$a())===null||n===void 0?void 0:n.config},Md=n=>{var t;return(t=$a())===null||t===void 0?void 0:t[`_${n}`]};var za=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,i)=>{e?this.reject(e):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,i))}}};function Wa(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let e={alg:"none",type:"JWT"},i=t||"demo-project",r=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[to(JSON.stringify(e)),to(JSON.stringify(o)),""].join(".")}function Vt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Fb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Vt())}function xA(){var n;let t=(n=$a())===null||n===void 0?void 0:n.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Vb(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Ub(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function jb(){let n=Vt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Bb(){return!xA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ld(){try{return typeof indexedDB=="object"}catch{return!1}}function zb(){return new Promise((n,t)=>{try{let e=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),e||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{e=!1},r.onerror=()=>{var s;t(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(e){t(e)}})}var DA="FirebaseError",ne=class n extends Error{constructor(t,e,i){super(e),this.code=t,this.customData=i,this.name=DA,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,sn.prototype.create)}},sn=class{constructor(t,e,i){this.service=t,this.serviceName=e,this.errors=i}create(t,...e){let i=e[0]||{},r=`${this.service}/${t}`,s=this.errors[t],o=s?kA(s,i):"Error",c=`${this.serviceName}: ${o} (${r}).`;return new ne(r,c,i)}};function kA(n,t){return n.replace(PA,(e,i)=>{let r=t[i];return r!=null?String(r):`<${i}?>`})}var PA=/\{\$([^}]+)}/g;function $b(n){for(let t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}function fi(n,t){if(n===t)return!0;let e=Object.keys(n),i=Object.keys(t);for(let r of e){if(!i.includes(r))return!1;let s=n[r],o=t[r];if(Nb(s)&&Nb(o)){if(!fi(s,o))return!1}else if(s!==o)return!1}for(let r of i)if(!e.includes(r))return!1;return!0}function Nb(n){return n!==null&&typeof n=="object"}function eo(n){let t=[];for(let[e,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(r))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function pr(n){let t={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){let[r,s]=i.split("=");t[decodeURIComponent(r)]=decodeURIComponent(s)}}),t}function gr(n){let t=n.indexOf("?");if(!t)return"";let e=n.indexOf("#",t);return n.substring(t,e>0?e:void 0)}function qb(n,t){let e=new kd(n,t);return e.subscribe.bind(e)}var kd=class{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,i){let r;if(t===void 0&&e===void 0&&i===void 0)throw new Error("Missing Observer.");OA(t,["next","error","complete"])?r=t:r={next:t,error:e,complete:i},r.next===void 0&&(r.next=xd),r.error===void 0&&(r.error=xd),r.complete===void 0&&(r.complete=xd);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function OA(n,t){if(typeof n!="object"||n===null)return!1;for(let e of t)if(e in n&&typeof n[e]=="function")return!0;return!1}function xd(){}var C1=4*60*60*1e3;function gt(n){return n&&n._delegate?n._delegate:n}var se=class{constructor(t,e,i){this.name=t,this.instanceFactory=e,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}};var mi="[DEFAULT]";var Fd=class{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){let e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){let i=new za;if(this.instancesDeferred.set(e,i),this.isInitialized(e)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:e});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;let i=this.normalizeInstanceIdentifier(t?.identifier),r=(e=t?.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(MA(t))try{this.getOrInitializeService({instanceIdentifier:mi})}catch{}for(let[e,i]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(e);try{let s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(t=mi){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}delete(){return g(this,null,function*(){let t=Array.from(this.instances.values());yield Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])})}isComponentSet(){return this.component!=null}isInitialized(t=mi){return this.instances.has(t)}getOptions(t=mi){return this.instancesOptions.get(t)||{}}initialize(t={}){let{options:e={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:i,options:e});for(let[s,o]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(s);i===c&&o.resolve(r)}return r}onInit(t,e){var i;let r=this.normalizeInstanceIdentifier(e),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(t),this.onInitCallbacks.set(r,s);let o=this.instances.get(r);return o&&t(o,r),()=>{s.delete(t)}}invokeOnInitCallbacks(t,e){let i=this.onInitCallbacks.get(e);if(i)for(let r of i)try{r(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:NA(t),options:e}),this.instances.set(t,i),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=mi){return this.component?this.component.multipleInstances?t:mi:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function NA(n){return n===mi?void 0:n}function MA(n){return n.instantiationMode==="EAGER"}var Ha=class{constructor(t){this.name=t,this.providers=new Map}addComponent(t){let e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);let e=new Fd(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}};var LA=[],tt=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(tt||{}),FA={debug:tt.DEBUG,verbose:tt.VERBOSE,info:tt.INFO,warn:tt.WARN,error:tt.ERROR,silent:tt.SILENT},VA=tt.INFO,UA={[tt.DEBUG]:"log",[tt.VERBOSE]:"log",[tt.INFO]:"info",[tt.WARN]:"warn",[tt.ERROR]:"error"},jA=(n,t,...e)=>{if(t<n.logLevel)return;let i=new Date().toISOString(),r=UA[t];if(r)console[r](`[${i}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)},Pn=class{constructor(t){this.name=t,this._logLevel=VA,this._logHandler=jA,this._userLogHandler=null,LA.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in tt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?FA[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,tt.DEBUG,...t),this._logHandler(this,tt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,tt.VERBOSE,...t),this._logHandler(this,tt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,tt.INFO,...t),this._logHandler(this,tt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,tt.WARN,...t),this._logHandler(this,tt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,tt.ERROR,...t),this._logHandler(this,tt.ERROR,...t)}};var BA=(n,t)=>t.some(e=>n instanceof e),Wb,Hb;function zA(){return Wb||(Wb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $A(){return Hb||(Hb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Gb=new WeakMap,Ud=new WeakMap,Kb=new WeakMap,Vd=new WeakMap,Bd=new WeakMap;function qA(n){let t=new Promise((e,i)=>{let r=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{e(ke(n.result)),r()},o=()=>{i(n.error),r()};n.addEventListener("success",s),n.addEventListener("error",o)});return t.then(e=>{e instanceof IDBCursor&&Gb.set(e,n)}).catch(()=>{}),Bd.set(t,n),t}function WA(n){if(Ud.has(n))return;let t=new Promise((e,i)=>{let r=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{e(),r()},o=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});Ud.set(n,t)}var jd={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return Ud.get(n);if(t==="objectStoreNames")return n.objectStoreNames||Kb.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return ke(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function Yb(n){jd=n(jd)}function HA(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){let i=n.call(Ga(this),t,...e);return Kb.set(i,t.sort?t.sort():[t]),ke(i)}:$A().includes(n)?function(...t){return n.apply(Ga(this),t),ke(Gb.get(this))}:function(...t){return ke(n.apply(Ga(this),t))}}function GA(n){return typeof n=="function"?HA(n):(n instanceof IDBTransaction&&WA(n),BA(n,zA())?new Proxy(n,jd):n)}function ke(n){if(n instanceof IDBRequest)return qA(n);if(Vd.has(n))return Vd.get(n);let t=GA(n);return t!==n&&(Vd.set(n,t),Bd.set(t,n)),t}var Ga=n=>Bd.get(n);function Xb(n,t,{blocked:e,upgrade:i,blocking:r,terminated:s}={}){let o=indexedDB.open(n,t),c=ke(o);return i&&o.addEventListener("upgradeneeded",l=>{i(ke(o.result),l.oldVersion,l.newVersion,ke(o.transaction),l)}),e&&o.addEventListener("blocked",l=>e(l.oldVersion,l.newVersion,l)),c.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",u=>r(u.oldVersion,u.newVersion,u))}).catch(()=>{}),c}var KA=["get","getKey","getAll","getAllKeys","count"],YA=["put","add","delete","clear"],zd=new Map;function Qb(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(zd.get(t))return zd.get(t);let e=t.replace(/FromIndex$/,""),i=t!==e,r=YA.includes(e);if(!(e in(i?IDBIndex:IDBObjectStore).prototype)||!(r||KA.includes(e)))return;let s=function(o,...c){return g(this,null,function*(){let l=this.transaction(o,r?"readwrite":"readonly"),u=l.store;return i&&(u=u.index(c.shift())),(yield Promise.all([u[e](...c),r&&l.done]))[0]})};return zd.set(t,s),s}Yb(n=>xt(M({},n),{get:(t,e,i)=>Qb(t,e)||n.get(t,e,i),has:(t,e)=>!!Qb(t,e)||n.has(t,e)}));var qd=class{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(QA(e)){let i=e.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(e=>e).join(" ")}};function QA(n){let t=n.getComponent();return t?.type==="VERSION"}var Wd="@firebase/app",Jb="0.10.5";var pi=new Pn("@firebase/app"),XA="@firebase/app-compat",JA="@firebase/analytics-compat",ZA="@firebase/analytics",tR="@firebase/app-check-compat",eR="@firebase/app-check",nR="@firebase/auth",iR="@firebase/auth-compat",rR="@firebase/database",sR="@firebase/database-compat",oR="@firebase/functions",aR="@firebase/functions-compat",cR="@firebase/installations",lR="@firebase/installations-compat",uR="@firebase/messaging",dR="@firebase/messaging-compat",hR="@firebase/performance",fR="@firebase/performance-compat",mR="@firebase/remote-config",pR="@firebase/remote-config-compat",gR="@firebase/storage",_R="@firebase/storage-compat",bR="@firebase/firestore",vR="@firebase/vertexai-preview",yR="@firebase/firestore-compat",wR="firebase",IR="10.12.2";var Hd="[DEFAULT]",ER={[Wd]:"fire-core",[XA]:"fire-core-compat",[ZA]:"fire-analytics",[JA]:"fire-analytics-compat",[eR]:"fire-app-check",[tR]:"fire-app-check-compat",[nR]:"fire-auth",[iR]:"fire-auth-compat",[rR]:"fire-rtdb",[sR]:"fire-rtdb-compat",[oR]:"fire-fn",[aR]:"fire-fn-compat",[cR]:"fire-iid",[lR]:"fire-iid-compat",[uR]:"fire-fcm",[dR]:"fire-fcm-compat",[hR]:"fire-perf",[fR]:"fire-perf-compat",[mR]:"fire-rc",[pR]:"fire-rc-compat",[gR]:"fire-gcs",[_R]:"fire-gcs-compat",[bR]:"fire-fst",[yR]:"fire-fst-compat",[vR]:"fire-vertex","fire-js":"fire-js",[wR]:"fire-js-all"};var no=new Map,TR=new Map,Gd=new Map;function Zb(n,t){try{n.container.addComponent(t)}catch(e){pi.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function Pe(n){let t=n.name;if(Gd.has(t))return pi.debug(`There were multiple attempts to register component ${t}.`),!1;Gd.set(t,n);for(let e of no.values())Zb(e,n);for(let e of TR.values())Zb(e,n);return!0}function gi(n,t){let e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function Te(n){return n.settings!==void 0}var AR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},On=new sn("app","Firebase",AR);var Kd=class{constructor(t,e,i){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new se("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw On.create("app-deleted",{appName:this._name})}};var Oe=IR;function Xd(n,t={}){let e=n;typeof t!="object"&&(t={name:t});let i=Object.assign({name:Hd,automaticDataCollectionEnabled:!1},t),r=i.name;if(typeof r!="string"||!r)throw On.create("bad-app-name",{appName:String(r)});if(e||(e=Nd()),!e)throw On.create("no-options");let s=no.get(r);if(s){if(fi(e,s.options)&&fi(i,s.config))return s;throw On.create("duplicate-app",{appName:r})}let o=new Ha(r);for(let l of Gd.values())o.addComponent(l);let c=new Kd(e,i,o);return no.set(r,c),c}function Nn(n=Hd){let t=no.get(n);if(!t&&n===Hd&&Nd())return Xd();if(!t)throw On.create("no-app",{appName:n});return t}function Ka(){return Array.from(no.values())}function _t(n,t,e){var i;let r=(i=ER[n])!==null&&i!==void 0?i:n;e&&(r+=`-${e}`);let s=r.match(/\s|\//),o=t.match(/\s|\//);if(s||o){let c=[`Unable to register library "${r}" with version "${t}":`];s&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${t}" contains illegal characters (whitespace or "/")`),pi.warn(c.join(" "));return}Pe(new se(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}var RR="firebase-heartbeat-database",SR=1,io="firebase-heartbeat-store",$d=null;function iv(){return $d||($d=Xb(RR,SR,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(io)}catch(e){console.warn(e)}}}}).catch(n=>{throw On.create("idb-open",{originalErrorMessage:n.message})})),$d}function CR(n){return g(this,null,function*(){try{let e=(yield iv()).transaction(io),i=yield e.objectStore(io).get(rv(n));return yield e.done,i}catch(t){if(t instanceof ne)pi.warn(t.message);else{let e=On.create("idb-get",{originalErrorMessage:t?.message});pi.warn(e.message)}}})}function tv(n,t){return g(this,null,function*(){try{let i=(yield iv()).transaction(io,"readwrite");yield i.objectStore(io).put(t,rv(n)),yield i.done}catch(e){if(e instanceof ne)pi.warn(e.message);else{let i=On.create("idb-set",{originalErrorMessage:e?.message});pi.warn(i.message)}}})}function rv(n){return`${n.name}!${n.options.appId}`}var xR=1024,DR=30*24*60*60*1e3,Yd=class{constructor(t){this.container=t,this._heartbeatsCache=null;let e=this.container.getProvider("app").getImmediate();this._storage=new Qd(e),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){return g(this,null,function*(){var t,e;let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=ev();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let c=new Date(o.date).valueOf();return Date.now()-c<=DR}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return g(this,null,function*(){var t;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=ev(),{heartbeatsToSend:i,unsentEntries:r}=kR(this._heartbeatsCache.heartbeats),s=to(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function ev(){return new Date().toISOString().substring(0,10)}function kR(n,t=xR){let e=[],i=n.slice();for(let r of n){let s=e.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),nv(e)>t){s.dates.pop();break}}else if(e.push({agent:r.agent,dates:[r.date]}),nv(e)>t){e.pop();break}i=i.slice(1)}return{heartbeatsToSend:e,unsentEntries:i}}var Qd=class{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return g(this,null,function*(){return Ld()?zb().then(()=>!0).catch(()=>!1):!1})}read(){return g(this,null,function*(){if(yield this._canUseIndexedDBPromise){let e=yield CR(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(t){return g(this,null,function*(){var e;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return tv(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return})}add(t){return g(this,null,function*(){var e;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return tv(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return})}};function nv(n){return to(JSON.stringify({version:2,heartbeats:n})).length}function PR(n){Pe(new se("platform-logger",t=>new qd(t),"PRIVATE")),Pe(new se("heartbeat",t=>new Yd(t),"PRIVATE")),_t(Wd,Jb,n),_t(Wd,Jb,"esm2017"),_t("fire-js","")}PR("");var OR="firebase",NR="10.12.2";_t(OR,NR,"app");var on=new Ts("ANGULARFIRE2_VERSION");function br(n,t,e){if(t){if(t.length===1)return t[0];let s=t.filter(o=>o.app===e);if(s.length===1)return s[0]}return e.container.getProvider(n).getImmediate({optional:!0})}var bi=(n,t)=>{let e=t?[t]:Ka(),i=[];return e.forEach(r=>{r.container.getProvider(n).instances.forEach(o=>{i.includes(o)||i.push(o)})}),i},Mn=class{constructor(){return bi(MR)}},MR="app-check";function _r(){}var Ya=class{zone;delegate;constructor(t,e=gg){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,i){let r=this.zone,s=function(o){r.runGuarded(()=>{t.apply(this,[o])})};return this.delegate.schedule(s,e,i)}},Jd=class{zone;task=null;constructor(t){this.zone=t}call(t,e){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",_r,{},_r,_r)),e.pipe(Dt({next:i,complete:i,error:i})).subscribe(t).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Ln=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(e){this.ngZone=e,this.outsideAngular=e.runOutsideAngular(()=>new Ya(Zone.current)),this.insideAngular=e.run(()=>new Ya(Zone.current,pg)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||n)(x(G))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Qa(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function LR(n){return Qa().ngZone.runOutsideAngular(()=>n())}function _i(n){return Qa().ngZone.run(()=>n())}function FR(n){return VR(Qa())(n)}function VR(n){return function(e){return e=e.lift(new Jd(n.ngZone)),e.pipe(zl(n.outsideAngular),Bl(n.insideAngular))}}var UR=(n,t)=>function(){let i=arguments;return t&&setTimeout(()=>{t.state==="scheduled"&&t.invoke()},10),_i(()=>n.apply(void 0,i))},Ut=(n,t)=>function(){let e,i=arguments;for(let s=0;s<arguments.length;s++)typeof i[s]=="function"&&(t&&(e||=_i(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",_r,{},_r,_r))),i[s]=UR(i[s],e));let r=LR(()=>n.apply(this,i));if(!t)if(r instanceof En){let s=Qa();return r.pipe(zl(s.outsideAngular),Bl(s.insideAngular))}else return _i(()=>r);return r instanceof En?r.pipe(FR):r instanceof Promise?_i(()=>new Promise((s,o)=>r.then(c=>_i(()=>s(c)),c=>_i(()=>o(c))))):typeof r=="function"&&e?function(){return setTimeout(()=>{e&&e.state==="scheduled"&&e.invoke()},10),r.apply(this,arguments)}:_i(()=>r)};var Ae=class{constructor(t){return t}},an=class{constructor(){return Ka()}};function jR(n){return n&&n.length===1?n[0]:new Ae(Nn())}var Zd=new J("angularfire2._apps"),BR={provide:Ae,useFactory:jR,deps:[[new Mt,Zd]]},zR={provide:an,deps:[[new Mt,Zd]]};function $R(n){return(t,e)=>{let i=t.runOutsideAngular(()=>n(e));return new Ae(i)}}var qR=(()=>{class n{constructor(e){_t("angularfire",on.full,"core"),_t("angularfire",on.full,"app"),_t("angular",qg.full,e.toString())}static \u0275fac=function(i){return new(i||n)(x(Je))};static \u0275mod=ht({type:n});static \u0275inj=dt({providers:[BR,zR]})}return n})();function hL(n,...t){return{ngModule:qR,providers:[{provide:Zd,useFactory:$R(n),multi:!0,deps:[G,Lt,Ln,...t]}]}}var fL=Ut(Xd,!0);function wv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var Iv=wv,Ev=new sn("auth","Firebase",wv());var nc=new Pn("@firebase/auth");function WR(n,...t){nc.logLevel<=tt.WARN&&nc.warn(`Auth (${Oe}): ${n}`,...t)}function Ja(n,...t){nc.logLevel<=tt.ERROR&&nc.error(`Auth (${Oe}): ${n}`,...t)}function Me(n,...t){throw Ih(n,...t)}function vi(n,...t){return Ih(n,...t)}function Tv(n,t,e){let i=Object.assign(Object.assign({},Iv()),{[t]:e});return new sn("auth","Firebase",i).create(t,{appName:n.name})}function un(n){return Tv(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ih(n,...t){if(typeof n!="string"){let e=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(e,...i)}return Ev.create(n,...t)}function B(n,t,...e){if(!n)throw Ih(t,...e)}function cn(n){let t="INTERNAL ASSERTION FAILED: "+n;throw Ja(t),new Error(t)}function Vn(n,t){n||cn(t)}function ih(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function HR(){return sv()==="http:"||sv()==="https:"}function sv(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function GR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(HR()||Vb()||"connection"in navigator)?navigator.onLine:!0}function KR(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var yi=class{constructor(t,e){this.shortDelay=t,this.longDelay=e,Vn(e>t,"Short delay should be less than long delay!"),this.isMobile=Fb()||Ub()}get(){return GR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Eh(n,t){Vn(n.emulator,"Emulator should always be set here");let{url:e}=n.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}var ic=class{static initialize(t,e,i){this.fetchImpl=t,e&&(this.headersImpl=e),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;cn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;cn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;cn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var YR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var QR=new yi(3e4,6e4);function dn(n,t){return n.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:n.tenantId}):t}function hn(s,o,c,l){return g(this,arguments,function*(n,t,e,i,r={}){return Av(n,r,()=>g(this,null,function*(){let u={},f={};i&&(t==="GET"?f=i:u={body:JSON.stringify(i)});let p=eo(Object.assign({key:n.config.apiKey},f)).slice(1),b=yield n._getAdditionalHeaders();return b["Content-Type"]="application/json",n.languageCode&&(b["X-Firebase-Locale"]=n.languageCode),ic.fetch()(Rv(n,n.config.apiHost,e,p),Object.assign({method:t,headers:b,referrerPolicy:"no-referrer"},u))}))})}function Av(n,t,e){return g(this,null,function*(){n._canInitEmulator=!1;let i=Object.assign(Object.assign({},YR),t);try{let r=new rh(n),s=yield Promise.race([e(),r.promise]);r.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Xa(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let c=s.ok?o.errorMessage:o.error.message,[l,u]=c.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Xa(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Xa(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw Xa(n,"user-disabled",o);let f=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Tv(n,f,u);Me(n,f)}}catch(r){if(r instanceof ne)throw r;Me(n,"network-request-failed",{message:String(r)})}})}function ho(s,o,c,l){return g(this,arguments,function*(n,t,e,i,r={}){let u=yield hn(n,t,e,i,r);return"mfaPendingCredential"in u&&Me(n,"multi-factor-auth-required",{_serverResponse:u}),u})}function Rv(n,t,e,i){let r=`${t}${e}?${i}`;return n.config.emulator?Eh(n.config,r):`${n.config.apiScheme}://${r}`}function XR(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var rh=class{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,i)=>{this.timer=setTimeout(()=>i(vi(this.auth,"network-request-failed")),QR.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Xa(n,t,e){let i={appName:n.name};e.email&&(i.email=e.email),e.phoneNumber&&(i.phoneNumber=e.phoneNumber);let r=vi(n,t,i);return r.customData._tokenResponse=e,r}function ov(n){return n!==void 0&&n.enterprise!==void 0}var sh=class{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return XR(e.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}};function JR(n,t){return g(this,null,function*(){return hn(n,"GET","/v2/recaptchaConfig",dn(n,t))})}function ZR(n,t){return g(this,null,function*(){return hn(n,"POST","/v1/accounts:delete",t)})}function Sv(n,t){return g(this,null,function*(){return hn(n,"POST","/v1/accounts:lookup",t)})}function ro(n){if(n)try{let t=new Date(Number(n));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}function Th(n,t=!1){return g(this,null,function*(){let e=gt(n),i=yield e.getIdToken(t),r=Ah(i);B(r&&r.exp&&r.auth_time&&r.iat,e.auth,"internal-error");let s=typeof r.firebase=="object"?r.firebase:void 0,o=s?.sign_in_provider;return{claims:r,token:i,authTime:ro(th(r.auth_time)),issuedAtTime:ro(th(r.iat)),expirationTime:ro(th(r.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function th(n){return Number(n)*1e3}function Ah(n){let[t,e,i]=n.split(".");if(t===void 0||e===void 0||i===void 0)return Ja("JWT malformed, contained fewer than 3 sections"),null;try{let r=Pd(e);return r?JSON.parse(r):(Ja("Failed to decode base64 JWT payload"),null)}catch(r){return Ja("Caught error parsing JWT payload as JSON",r?.toString()),null}}function av(n){let t=Ah(n);return B(t,"internal-error"),B(typeof t.exp<"u","internal-error"),B(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}function oo(n,t,e=!1){return g(this,null,function*(){if(e)return t;try{return yield t}catch(i){throw i instanceof ne&&tS(i)&&n.auth.currentUser===n&&(yield n.auth.signOut()),i}})}function tS({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var oh=class{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){let i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;let r=((e=this.user.stsTokenManager.expirationTime)!==null&&e!==void 0?e:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;let e=this.getInterval(t);this.timerId=setTimeout(()=>g(this,null,function*(){yield this.iteration()}),e)}iteration(){return g(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var ao=class{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=ro(this.lastLoginAt),this.creationTime=ro(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function rc(n){return g(this,null,function*(){var t;let e=n.auth,i=yield n.getIdToken(),r=yield oo(n,Sv(e,{idToken:i}));B(r?.users.length,e,"internal-error");let s=r.users[0];n._notifyReloadListener(s);let o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?Cv(s.providerUserInfo):[],c=eS(n.providerData,o),l=n.isAnonymous,u=!(n.email&&s.passwordHash)&&!c?.length,f=l?u:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new ao(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(n,p)})}function Rh(n){return g(this,null,function*(){let t=gt(n);yield rc(t),yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)})}function eS(n,t){return[...n.filter(i=>!t.some(r=>r.providerId===i.providerId)),...t]}function Cv(n){return n.map(t=>{var{providerId:e}=t,i=jl(t,["providerId"]);return{providerId:e,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}function nS(n,t){return g(this,null,function*(){let e=yield Av(n,{},()=>g(this,null,function*(){let i=eo({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=n.config,o=Rv(n,r,"/v1/token",`key=${s}`),c=yield n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",ic.fetch()(o,{method:"POST",headers:c,body:i})}));return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}})}function iS(n,t){return g(this,null,function*(){return hn(n,"POST","/v2/accounts:revokeToken",dn(n,t))})}var so=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){B(t.idToken,"internal-error"),B(typeof t.idToken<"u","internal-error"),B(typeof t.refreshToken<"u","internal-error");let e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):av(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){B(t.length!==0,"internal-error");let e=av(t);this.updateTokensAndExpiration(t,null,e)}getToken(t,e=!1){return g(this,null,function*(){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(B(this.refreshToken,t,"user-token-expired"),this.refreshToken?(yield this.refresh(t,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(t,e){return g(this,null,function*(){let{accessToken:i,refreshToken:r,expiresIn:s}=yield nS(t,e);this.updateTokensAndExpiration(i,r,Number(s))})}updateTokensAndExpiration(t,e,i){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,e){let{refreshToken:i,accessToken:r,expirationTime:s}=e,o=new n;return i&&(B(typeof i=="string","internal-error",{appName:t}),o.refreshToken=i),r&&(B(typeof r=="string","internal-error",{appName:t}),o.accessToken=r),s&&(B(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return cn("not implemented")}};function Fn(n,t){B(typeof n=="string"||typeof n>"u","internal-error",{appName:t})}var vr=class n{constructor(t){var{uid:e,auth:i,stsTokenManager:r}=t,s=jl(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new oh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ao(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(t){return g(this,null,function*(){let e=yield oo(this,this.stsTokenManager.getToken(this.auth,t));return B(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e})}getIdTokenResult(t){return Th(this,t)}reload(){return Rh(this)}_assign(t){this!==t&&(B(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>Object.assign({},e)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){let e=new n(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return e.metadata._copy(this.metadata),e}_onReload(t){B(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(t,e=!1){return g(this,null,function*(){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),e&&(yield rc(this)),yield this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)})}delete(){return g(this,null,function*(){if(Te(this.auth.app))return Promise.reject(un(this.auth));let t=yield this.getIdToken();return yield oo(this,ZR(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var i,r,s,o,c,l,u,f;let p=(i=e.displayName)!==null&&i!==void 0?i:void 0,b=(r=e.email)!==null&&r!==void 0?r:void 0,A=(s=e.phoneNumber)!==null&&s!==void 0?s:void 0,C=(o=e.photoURL)!==null&&o!==void 0?o:void 0,P=(c=e.tenantId)!==null&&c!==void 0?c:void 0,D=(l=e._redirectEventId)!==null&&l!==void 0?l:void 0,j=(u=e.createdAt)!==null&&u!==void 0?u:void 0,$=(f=e.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:H,emailVerified:X,isAnonymous:Ct,providerData:rt,stsTokenManager:I}=e;B(H&&I,t,"internal-error");let _=so.fromJSON(this.name,I);B(typeof H=="string",t,"internal-error"),Fn(p,t.name),Fn(b,t.name),B(typeof X=="boolean",t,"internal-error"),B(typeof Ct=="boolean",t,"internal-error"),Fn(A,t.name),Fn(C,t.name),Fn(P,t.name),Fn(D,t.name),Fn(j,t.name),Fn($,t.name);let y=new n({uid:H,auth:t,email:b,emailVerified:X,displayName:p,isAnonymous:Ct,photoURL:C,phoneNumber:A,tenantId:P,stsTokenManager:_,createdAt:j,lastLoginAt:$});return rt&&Array.isArray(rt)&&(y.providerData=rt.map(w=>Object.assign({},w))),D&&(y._redirectEventId=D),y}static _fromIdTokenResponse(t,e,i=!1){return g(this,null,function*(){let r=new so;r.updateFromServerResponse(e);let s=new n({uid:e.localId,auth:t,stsTokenManager:r,isAnonymous:i});return yield rc(s),s})}static _fromGetAccountInfoResponse(t,e,i){return g(this,null,function*(){let r=e.users[0];B(r.localId!==void 0,"internal-error");let s=r.providerUserInfo!==void 0?Cv(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!s?.length,c=new so;c.updateFromIdToken(i);let l=new n({uid:r.localId,auth:t,stsTokenManager:c,isAnonymous:o}),u={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new ao(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!s?.length};return Object.assign(l,u),l})}};var cv=new Map;function ln(n){Vn(n instanceof Function,"Expected a class definition");let t=cv.get(n);return t?(Vn(t instanceof n,"Instance stored in cache mismatched with class"),t):(t=new n,cv.set(n,t),t)}var rS=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return g(this,null,function*(){return!0})}_set(e,i){return g(this,null,function*(){this.storage[e]=i})}_get(e){return g(this,null,function*(){let i=this.storage[e];return i===void 0?null:i})}_remove(e){return g(this,null,function*(){delete this.storage[e]})}_addListener(e,i){}_removeListener(e,i){}}return n.type="NONE",n})(),ah=rS;function Za(n,t,e){return`firebase:${n}:${t}:${e}`}var sc=class n{constructor(t,e,i){this.persistence=t,this.auth=e,this.userKey=i;let{config:r,name:s}=this.auth;this.fullUserKey=Za(this.userKey,r.apiKey,s),this.fullPersistenceKey=Za("persistence",r.apiKey,s),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}getCurrentUser(){return g(this,null,function*(){let t=yield this.persistence._get(this.fullUserKey);return t?vr._fromJSON(this.auth,t):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(t){return g(this,null,function*(){if(this.persistence===t)return;let e=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(t,e,i="authUser"){return g(this,null,function*(){if(!e.length)return new n(ln(ah),t,i);let r=(yield Promise.all(e.map(u=>g(this,null,function*(){if(yield u._isAvailable())return u})))).filter(u=>u),s=r[0]||ln(ah),o=Za(i,t.config.apiKey,t.name),c=null;for(let u of e)try{let f=yield u._get(o);if(f){let p=vr._fromJSON(t,f);u!==s&&(c=p),s=u;break}}catch{}let l=r.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new n(s,t,i):(s=l[0],c&&(yield s._set(o,c.toJSON())),yield Promise.all(e.map(u=>g(this,null,function*(){if(u!==s)try{yield u._remove(o)}catch{}}))),new n(s,t,i))})}};function lv(n){let t=n.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(kv(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(xv(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Ov(t))return"Blackberry";if(Nv(t))return"Webos";if(Sh(t))return"Safari";if((t.includes("chrome/")||Dv(t))&&!t.includes("edge/"))return"Chrome";if(Pv(t))return"Android";{let e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(e);if(i?.length===2)return i[1]}return"Other"}function xv(n=Vt()){return/firefox\//i.test(n)}function Sh(n=Vt()){let t=n.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Dv(n=Vt()){return/crios\//i.test(n)}function kv(n=Vt()){return/iemobile/i.test(n)}function Pv(n=Vt()){return/android/i.test(n)}function Ov(n=Vt()){return/blackberry/i.test(n)}function Nv(n=Vt()){return/webos/i.test(n)}function fc(n=Vt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function sS(n=Vt()){var t;return fc(n)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function oS(){return jb()&&document.documentMode===10}function Mv(n=Vt()){return fc(n)||Pv(n)||Nv(n)||Ov(n)||/windows phone/i.test(n)||kv(n)}function aS(){try{return!!(window&&window!==window.top)}catch{return!1}}function Lv(n,t=[]){let e;switch(n){case"Browser":e=lv(Vt());break;case"Worker":e=`${lv(Vt())}-${n}`;break;default:e=n}let i=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${Oe}/${i}`}var ch=class{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){let i=s=>new Promise((o,c)=>{try{let l=t(s);o(l)}catch(l){c(l)}});i.onAbort=e,this.queue.push(i);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(t){return g(this,null,function*(){if(this.auth.currentUser===t)return;let e=[];try{for(let i of this.queue)yield i(t),i.onAbort&&e.push(i.onAbort)}catch(i){e.reverse();for(let r of e)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})}};function cS(e){return g(this,arguments,function*(n,t={}){return hn(n,"GET","/v2/passwordPolicy",dn(n,t))})}var lS=6,lh=class{constructor(t){var e,i,r,s;let o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(e=o.minPasswordLength)!==null&&e!==void 0?e:lS,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=t.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var e,i,r,s,o,c;let l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,l),this.validatePasswordCharacterOptions(t,l),l.isValid&&(l.isValid=(e=l.meetsMinPasswordLength)!==null&&e!==void 0?e:!0),l.isValid&&(l.isValid=(i=l.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(r=l.containsLowercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(c=l.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),l}validatePasswordLengthOptions(t,e){let i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(e.meetsMinPasswordLength=t.length>=i),r&&(e.meetsMaxPasswordLength=t.length<=r)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let i;for(let r=0;r<t.length;r++)i=t.charAt(r),this.updatePasswordCharacterOptionsStatuses(e,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,e,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}};var uh=class{constructor(t,e,i,r){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new oc(this),this.idTokenSubscription=new oc(this),this.beforeStateQueue=new ch(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ev,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=ln(e)),this._initializationPromise=this.queue(()=>g(this,null,function*(){var i,r;if(!this._deleted&&(this.persistenceManager=yield sc.create(this,t),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(e),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return g(this,null,function*(){if(this._deleted)return;let t=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(t,!0)}})}initializeCurrentUserFromIdToken(t){return g(this,null,function*(){try{let e=yield Sv(this,{idToken:t}),i=yield vr._fromGetAccountInfoResponse(this,e,t);yield this.directlySetCurrentUser(i)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(t){return g(this,null,function*(){var e;if(Te(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}let i=yield this.assertedPersistence.getCurrentUser(),r=i,s=!1;if(t&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(e=this.redirectUser)===null||e===void 0?void 0:e._redirectEventId,c=r?._redirectEventId,l=yield this.tryRedirectSignIn(t);(!o||o===c)&&l?.user&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return B(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(t){return g(this,null,function*(){let e=null;try{e=yield this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{yield this._setRedirectUser(null)}return e})}reloadAndSetCurrentUserOrClear(t){return g(this,null,function*(){try{yield rc(t)}catch(e){if(e?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)})}useDeviceLanguage(){this.languageCode=KR()}_delete(){return g(this,null,function*(){this._deleted=!0})}updateCurrentUser(t){return g(this,null,function*(){if(Te(this.app))return Promise.reject(un(this));let e=t?gt(t):null;return e&&B(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))})}_updateCurrentUser(t,e=!1){return g(this,null,function*(){if(!this._deleted)return t&&B(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||(yield this.beforeStateQueue.runMiddleware(t)),this.queue(()=>g(this,null,function*(){yield this.directlySetCurrentUser(t),this.notifyAuthListeners()}))})}signOut(){return g(this,null,function*(){return Te(this.app)?Promise.reject(un(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(t){return Te(this.app)?Promise.reject(un(this)):this.queue(()=>g(this,null,function*(){yield this.assertedPersistence.setPersistence(ln(t))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(t){return g(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return g(this,null,function*(){let t=yield cS(this),e=new lh(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new sn("auth","Firebase",t())}onAuthStateChanged(t,e,i){return this.registerStateListener(this.authStateSubscription,t,e,i)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,i){return this.registerStateListener(this.idTokenSubscription,t,e,i)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{let i=this.onAuthStateChanged(()=>{i(),t()},e)}})}revokeAccessToken(t){return g(this,null,function*(){if(this.currentUser){let e=yield this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(i.tenantId=this.tenantId),yield iS(this,i)}})}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}_setRedirectUser(t,e){return g(this,null,function*(){let i=yield this.getOrInitRedirectPersistenceManager(e);return t===null?i.removeCurrentUser():i.setCurrentUser(t)})}getOrInitRedirectPersistenceManager(t){return g(this,null,function*(){if(!this.redirectPersistenceManager){let e=t&&ln(t)||this._popupRedirectResolver;B(e,this,"argument-error"),this.redirectPersistenceManager=yield sc.create(this,[ln(e._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(t){return g(this,null,function*(){var e,i;return this._isInitialized&&(yield this.queue(()=>g(this,null,function*(){}))),((e=this._currentUser)===null||e===void 0?void 0:e._redirectEventId)===t?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===t?this.redirectUser:null})}_persistUserIfCurrent(t){return g(this,null,function*(){if(t===this.currentUser)return this.queue(()=>g(this,null,function*(){return this.directlySetCurrentUser(t)}))})}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let i=(e=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&e!==void 0?e:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,i,r){if(this._deleted)return()=>{};let s=typeof e=="function"?e:e.next.bind(e),o=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(B(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof e=="function"){let l=t.addObserver(e,i,r);return()=>{o=!0,l()}}else{let l=t.addObserver(e);return()=>{o=!0,l()}}}directlySetCurrentUser(t){return g(this,null,function*(){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?yield this.assertedPersistence.setCurrentUser(t):yield this.assertedPersistence.removeCurrentUser()})}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return B(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=Lv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return g(this,null,function*(){var t;let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let i=yield(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader();i&&(e["X-Firebase-Client"]=i);let r=yield this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e})}_getAppCheckToken(){return g(this,null,function*(){var t;let e=yield(t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken();return e?.error&&WR(`Error while retrieving App Check token: ${e.error}`),e?.token})}};function Ii(n){return gt(n)}var oc=class{constructor(t){this.auth=t,this.observer=null,this.addObserver=qb(e=>this.observer=e)}get next(){return B(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var mc={loadJS(){return g(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function uS(n){mc=n}function Fv(n){return mc.loadJS(n)}function dS(){return mc.recaptchaEnterpriseScript}function hS(){return mc.gapiScript}function Vv(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var fS="recaptcha-enterprise",mS="NO_RECAPTCHA",dh=class{constructor(t){this.type=fS,this.auth=Ii(t)}verify(t="verify",e=!1){return g(this,null,function*(){function i(s){return g(this,null,function*(){if(!e){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,c)=>g(this,null,function*(){JR(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{let u=new sh(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{c(l)})}))})}function r(s,o,c){let l=window.grecaptcha;ov(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:t}).then(u=>{o(u)}).catch(()=>{o(mS)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{i(this.auth).then(c=>{if(!e&&ov(window.grecaptcha))r(c,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=dS();l.length!==0&&(l+=c),Fv(l).then(()=>{r(c,s,o)}).catch(u=>{o(u)})}}).catch(c=>{o(c)})})})}};function uv(n,t,e,i=!1){return g(this,null,function*(){let r=new dh(n),s;try{s=yield r.verify(e)}catch{s=yield r.verify(e,!0)}let o=Object.assign({},t);return i?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})}function hh(n,t,e,i){return g(this,null,function*(){var r;if(!((r=n._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield uv(n,t,e,e==="getOobCode");return i(n,s)}else return i(n,t).catch(s=>g(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${e} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=yield uv(n,t,e,e==="getOobCode");return i(n,o)}else return Promise.reject(s)}))})}function Ch(n,t){let e=gi(n,"auth");if(e.isInitialized()){let r=e.getImmediate(),s=e.getOptions();if(fi(s,t??{}))return r;Me(r,"already-initialized")}return e.initialize({options:t})}function pS(n,t){let e=t?.persistence||[],i=(Array.isArray(e)?e:[e]).map(ln);t?.errorMap&&n._updateErrorMap(t.errorMap),n._initializeWithPersistence(i,t?.popupRedirectResolver)}function xh(n,t,e){let i=Ii(n);B(i._canInitEmulator,i,"emulator-config-failed"),B(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");let r=!!e?.disableWarnings,s=Uv(t),{host:o,port:c}=gS(t),l=c===null?"":`:${c}`;i.config.emulator={url:`${s}//${o}${l}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||_S()}function Uv(n){let t=n.indexOf(":");return t<0?"":n.substr(0,t+1)}function gS(n){let t=Uv(n),e=/(\/\/)?([^?#/]+)/.exec(n.substr(t.length));if(!e)return{host:"",port:null};let i=e[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){let s=r[1];return{host:s,port:dv(i.substr(s.length+1))}}else{let[s,o]=i.split(":");return{host:s,port:dv(o)}}}function dv(n){if(!n)return null;let t=Number(n);return isNaN(t)?null:t}function _S(){function n(){let t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var co=class{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return cn("not implemented")}_getIdTokenResponse(t){return cn("not implemented")}_linkToIdToken(t,e){return cn("not implemented")}_getReauthenticationResolver(t){return cn("not implemented")}};function bS(n,t){return g(this,null,function*(){return hn(n,"POST","/v1/accounts:signUp",t)})}function vS(n,t){return g(this,null,function*(){return ho(n,"POST","/v1/accounts:signInWithPassword",dn(n,t))})}function yS(n,t){return g(this,null,function*(){return hn(n,"POST","/v1/accounts:sendOobCode",dn(n,t))})}function wS(n,t){return g(this,null,function*(){return yS(n,t)})}function IS(n,t){return g(this,null,function*(){return ho(n,"POST","/v1/accounts:signInWithEmailLink",dn(n,t))})}function ES(n,t){return g(this,null,function*(){return ho(n,"POST","/v1/accounts:signInWithEmailLink",dn(n,t))})}var lo=class n extends co{constructor(t,e,i,r=null){super("password",i),this._email=t,this._password=e,this._tenantId=r}static _fromEmailAndPassword(t,e){return new n(t,e,"password")}static _fromEmailAndCode(t,e,i=null){return new n(t,e,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){let e=typeof t=="string"?JSON.parse(t):t;if(e?.email&&e?.password){if(e.signInMethod==="password")return this._fromEmailAndPassword(e.email,e.password);if(e.signInMethod==="emailLink")return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}_getIdTokenResponse(t){return g(this,null,function*(){switch(this.signInMethod){case"password":let e={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return hh(t,e,"signInWithPassword",vS);case"emailLink":return IS(t,{email:this._email,oobCode:this._password});default:Me(t,"internal-error")}})}_linkToIdToken(t,e){return g(this,null,function*(){switch(this.signInMethod){case"password":let i={idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return hh(t,i,"signUpPassword",bS);case"emailLink":return ES(t,{idToken:e,email:this._email,oobCode:this._password});default:Me(t,"internal-error")}})}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}};function eh(n,t){return g(this,null,function*(){return ho(n,"POST","/v1/accounts:signInWithIdp",dn(n,t))})}function TS(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function AS(n){let t=pr(gr(n)).link,e=t?pr(gr(t)).deep_link_id:null,i=pr(gr(n)).deep_link_id;return(i?pr(gr(i)).link:null)||i||e||t||n}var ac=class n{constructor(t){var e,i,r,s,o,c;let l=pr(gr(t)),u=(e=l.apiKey)!==null&&e!==void 0?e:null,f=(i=l.oobCode)!==null&&i!==void 0?i:null,p=TS((r=l.mode)!==null&&r!==void 0?r:null);B(u&&f&&p,"argument-error"),this.apiKey=u,this.operation=p,this.code=f,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(c=l.tenantId)!==null&&c!==void 0?c:null}static parseLink(t){let e=AS(t);try{return new n(e)}catch{return null}}};var jv=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(e,i){return lo._fromEmailAndPassword(e,i)}static credentialWithLink(e,i){let r=ac.parseLink(i);return B(r,"argument-error"),lo._fromEmailAndCode(e,r.code,r.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),cc=class{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}};var fh=class extends cc{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}};function RS(n,t){return g(this,null,function*(){return ho(n,"POST","/v1/accounts:signUp",dn(n,t))})}var yr=class n{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static _fromIdTokenResponse(t,e,i,r=!1){return g(this,null,function*(){let s=yield vr._fromIdTokenResponse(t,i,r),o=hv(i);return new n({user:s,providerId:o,_tokenResponse:i,operationType:e})})}static _forOperation(t,e,i){return g(this,null,function*(){yield t._updateTokensIfNecessary(i,!0);let r=hv(i);return new n({user:t,providerId:r,_tokenResponse:i,operationType:e})})}};function hv(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var mh=class n extends ne{constructor(t,e,i,r){var s;super(e.code,e.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,n.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:e.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,e,i,r){return new n(t,e,i,r)}};function Bv(n,t,e,i){return(t==="reauthenticate"?e._getReauthenticationResolver(n):e._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?mh._fromErrorAndOperation(n,s,t,i):s})}function SS(n,t,e=!1){return g(this,null,function*(){let i=yield oo(n,t._linkToIdToken(n.auth,yield n.getIdToken()),e);return yr._forOperation(n,"link",i)})}function CS(n,t,e=!1){return g(this,null,function*(){let{auth:i}=n;if(Te(i.app))return Promise.reject(un(i));let r="reauthenticate";try{let s=yield oo(n,Bv(i,r,t,n),e);B(s.idToken,i,"internal-error");let o=Ah(s.idToken);B(o,i,"internal-error");let{sub:c}=o;return B(n.uid===c,i,"user-mismatch"),yr._forOperation(n,r,s)}catch(s){throw s?.code==="auth/user-not-found"&&Me(i,"user-mismatch"),s}})}function zv(n,t,e=!1){return g(this,null,function*(){if(Te(n.app))return Promise.reject(un(n));let i="signIn",r=yield Bv(n,i,t),s=yield yr._fromIdTokenResponse(n,i,r);return e||(yield n._updateCurrentUser(s.user)),s})}function Dh(n,t){return g(this,null,function*(){return zv(Ii(n),t)})}function xS(n,t,e){var i;B(((i=e.url)===null||i===void 0?void 0:i.length)>0,n,"invalid-continue-uri"),B(typeof e.dynamicLinkDomain>"u"||e.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),t.continueUrl=e.url,t.dynamicLinkDomain=e.dynamicLinkDomain,t.canHandleCodeInApp=e.handleCodeInApp,e.iOS&&(B(e.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),t.iOSBundleId=e.iOS.bundleId),e.android&&(B(e.android.packageName.length>0,n,"missing-android-pkg-name"),t.androidInstallApp=e.android.installApp,t.androidMinimumVersionCode=e.android.minimumVersion,t.androidPackageName=e.android.packageName)}function $v(n){return g(this,null,function*(){let t=Ii(n);t._getPasswordPolicyInternal()&&(yield t._updatePasswordPolicy())})}function kh(n,t,e){return g(this,null,function*(){if(Te(n.app))return Promise.reject(un(n));let i=Ii(n),o=yield hh(i,{returnSecureToken:!0,email:t,password:e,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",RS).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&$v(n),l}),c=yield yr._fromIdTokenResponse(i,"signIn",o);return yield i._updateCurrentUser(c.user),c})}function Ph(n,t,e){return Te(n.app)?Promise.reject(un(n)):Dh(gt(n),jv.credential(t,e)).catch(i=>g(this,null,function*(){throw i.code==="auth/password-does-not-meet-requirements"&&$v(n),i}))}function Oh(n,t){return g(this,null,function*(){let e=gt(n),r={requestType:"VERIFY_EMAIL",idToken:yield n.getIdToken()};t&&xS(e.auth,r,t);let{email:s}=yield wS(e.auth,r);s!==n.email&&(yield n.reload())})}function Nh(n,t,e,i){return gt(n).onIdTokenChanged(t,e,i)}function Mh(n,t,e){return gt(n).beforeAuthStateChanged(t,e)}function Lh(n){return gt(n).signOut()}var lc="__sak";var uc=class{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(lc,"1"),this.storage.removeItem(lc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){let e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}};function DS(){let n=Vt();return Sh(n)||fc(n)}var kS=1e3,PS=10,OS=(()=>{class n extends uc{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,i)=>this.onStorageEvent(e,i),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=DS()&&aS(),this.fallbackToPolling=Mv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(let i of Object.keys(this.listeners)){let r=this.storage.getItem(i),s=this.localCache[i];r!==s&&e(i,s,r)}}onStorageEvent(e,i=!1){if(!e.key){this.forAllChangedKeys((c,l,u)=>{this.notifyListeners(c,u)});return}let r=e.key;if(i?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let c=this.storage.getItem(r);if(e.newValue!==c)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!i)return}let s=()=>{let c=this.storage.getItem(r);!i&&this.localCache[r]===c||this.notifyListeners(r,c)},o=this.storage.getItem(r);oS()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,PS):s()}notifyListeners(e,i){this.localCache[e]=i;let r=this.listeners[e];if(r)for(let s of Array.from(r))s(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:i,newValue:r}),!0)})},kS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(i)}_removeListener(e,i){this.listeners[e]&&(this.listeners[e].delete(i),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(e,i){return g(this,null,function*(){yield In(n.prototype,this,"_set").call(this,e,i),this.localCache[e]=JSON.stringify(i)})}_get(e){return g(this,null,function*(){let i=yield In(n.prototype,this,"_get").call(this,e);return this.localCache[e]=JSON.stringify(i),i})}_remove(e){return g(this,null,function*(){yield In(n.prototype,this,"_remove").call(this,e),delete this.localCache[e]})}}return n.type="LOCAL",n})(),qv=OS;var NS=(()=>{class n extends uc{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,i){}_removeListener(e,i){}}return n.type="SESSION",n})(),Fh=NS;function MS(n){return Promise.all(n.map(t=>g(this,null,function*(){try{return{fulfilled:!0,value:yield t}}catch(e){return{fulfilled:!1,reason:e}}})))}var LS=(()=>{class n{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){let i=this.receivers.find(s=>s.isListeningto(e));if(i)return i;let r=new n(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}handleEvent(e){return g(this,null,function*(){let i=e,{eventId:r,eventType:s,data:o}=i.data,c=this.handlersMap[s];if(!c?.size)return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:s});let l=Array.from(c).map(f=>g(this,null,function*(){return f(i.origin,o)})),u=yield MS(l);i.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})})}_subscribe(e,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(i)}_unsubscribe(e,i){this.handlersMap[e]&&i&&this.handlersMap[e].delete(i),(!i||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function Wv(n="",t=10){let e="";for(let i=0;i<t;i++)e+=Math.floor(Math.random()*10);return n+e}var ph=class{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}_send(t,e,i=50){return g(this,null,function*(){let r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((c,l)=>{let u=Wv("",20);r.port1.start();let f=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(p){let b=p;if(b.data.eventId===u)switch(b.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(b.data.response);break;default:clearTimeout(f),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:u,data:e},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function Ne(){return window}function FS(n){Ne().location.href=n}function Hv(){return typeof Ne().WorkerGlobalScope<"u"&&typeof Ne().importScripts=="function"}function VS(){return g(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function US(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function jS(){return Hv()?self:null}var Gv="firebaseLocalStorageDb",BS=1,dc="firebaseLocalStorage",Kv="fbase_key",wi=class{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}};function pc(n,t){return n.transaction([dc],t?"readwrite":"readonly").objectStore(dc)}function zS(){let n=indexedDB.deleteDatabase(Gv);return new wi(n).toPromise()}function gh(){let n=indexedDB.open(Gv,BS);return new Promise((t,e)=>{n.addEventListener("error",()=>{e(n.error)}),n.addEventListener("upgradeneeded",()=>{let i=n.result;try{i.createObjectStore(dc,{keyPath:Kv})}catch(r){e(r)}}),n.addEventListener("success",()=>g(this,null,function*(){let i=n.result;i.objectStoreNames.contains(dc)?t(i):(i.close(),yield zS(),t(yield gh()))}))})}function fv(n,t,e){return g(this,null,function*(){let i=pc(n,!0).put({[Kv]:t,value:e});return new wi(i).toPromise()})}function $S(n,t){return g(this,null,function*(){let e=pc(n,!1).get(t),i=yield new wi(e).toPromise();return i===void 0?null:i.value})}function mv(n,t){let e=pc(n,!0).delete(t);return new wi(e).toPromise()}var qS=800,WS=3,HS=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return g(this,null,function*(){return this.db?this.db:(this.db=yield gh(),this.db)})}_withRetries(e){return g(this,null,function*(){let i=0;for(;;)try{let r=yield this._openDb();return yield e(r)}catch(r){if(i++>WS)throw r;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return g(this,null,function*(){return Hv()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return g(this,null,function*(){this.receiver=LS._getInstance(jS()),this.receiver._subscribe("keyChanged",(e,i)=>g(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(i.key)}})),this.receiver._subscribe("ping",(e,i)=>g(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return g(this,null,function*(){var e,i;if(this.activeServiceWorker=yield VS(),!this.activeServiceWorker)return;this.sender=new ph(this.activeServiceWorker);let r=yield this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((i=r[0])===null||i===void 0)&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(e){return g(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||US()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return g(this,null,function*(){try{if(!indexedDB)return!1;let e=yield gh();return yield fv(e,lc,"1"),yield mv(e,lc),!0}catch{}return!1})}_withPendingWrite(e){return g(this,null,function*(){this.pendingWrites++;try{yield e()}finally{this.pendingWrites--}})}_set(e,i){return g(this,null,function*(){return this._withPendingWrite(()=>g(this,null,function*(){return yield this._withRetries(r=>fv(r,e,i)),this.localCache[e]=i,this.notifyServiceWorker(e)}))})}_get(e){return g(this,null,function*(){let i=yield this._withRetries(r=>$S(r,e));return this.localCache[e]=i,i})}_remove(e){return g(this,null,function*(){return this._withPendingWrite(()=>g(this,null,function*(){return yield this._withRetries(i=>mv(i,e)),delete this.localCache[e],this.notifyServiceWorker(e)}))})}_poll(){return g(this,null,function*(){let e=yield this._withRetries(s=>{let o=pc(s,!1).getAll();return new wi(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];let i=[],r=new Set;if(e.length!==0)for(let{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),i.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),i.push(s));return i})}notifyListeners(e,i){this.localCache[e]=i;let r=this.listeners[e];if(r)for(let s of Array.from(r))s(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>g(this,null,function*(){return this._poll()}),qS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(i)}_removeListener(e,i){this.listeners[e]&&(this.listeners[e].delete(i),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),Yv=HS;var wL=Vv("rcb"),IL=new yi(3e4,6e4);function GS(n,t){return t?ln(t):(B(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var uo=class extends co{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return eh(t,this._buildIdpRequest())}_linkToIdToken(t,e){return eh(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return eh(t,this._buildIdpRequest())}_buildIdpRequest(t){let e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}};function KS(n){return zv(n.auth,new uo(n),n.bypassAuthState)}function YS(n){let{auth:t,user:e}=n;return B(e,t,"internal-error"),CS(e,new uo(n),n.bypassAuthState)}function QS(n){return g(this,null,function*(){let{auth:t,user:e}=n;return B(e,t,"internal-error"),SS(e,new uo(n),n.bypassAuthState)})}var _h=class{constructor(t,e,i,r,s=!1){this.auth=t,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise((t,e)=>g(this,null,function*(){this.pendingPromise={resolve:t,reject:e};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}}))}onAuthEvent(t){return g(this,null,function*(){let{urlResponse:e,sessionId:i,postBody:r,tenantId:s,error:o,type:c}=t;if(o){this.reject(o);return}let l={auth:this.auth,requestUri:e,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(l))}catch(u){this.reject(u)}})}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return KS;case"linkViaPopup":case"linkViaRedirect":return QS;case"reauthViaPopup":case"reauthViaRedirect":return YS;default:Me(this.auth,"internal-error")}}resolve(t){Vn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Vn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var EL=new yi(2e3,1e4);var XS="pendingRedirect",tc=new Map,bh=class n extends _h{constructor(t,e,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,i),this.eventId=null}execute(){return g(this,null,function*(){let t=tc.get(this.auth._key());if(!t){try{let i=(yield JS(this.resolver,this.auth))?yield In(n.prototype,this,"execute").call(this):null;t=()=>Promise.resolve(i)}catch(e){t=()=>Promise.reject(e)}tc.set(this.auth._key(),t)}return this.bypassAuthState||tc.set(this.auth._key(),()=>Promise.resolve(null)),t()})}onAuthEvent(t){return g(this,null,function*(){if(t.type==="signInViaRedirect")return In(n.prototype,this,"onAuthEvent").call(this,t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){let e=yield this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,In(n.prototype,this,"onAuthEvent").call(this,t);this.resolve(null)}})}onExecution(){return g(this,null,function*(){})}cleanUp(){}};function JS(n,t){return g(this,null,function*(){let e=eC(t),i=tC(n);if(!(yield i._isAvailable()))return!1;let r=(yield i._get(e))==="true";return yield i._remove(e),r})}function ZS(n,t){tc.set(n._key(),t)}function tC(n){return ln(n._redirectPersistence)}function eC(n){return Za(XS,n.config.apiKey,n.name)}function nC(n,t,e=!1){return g(this,null,function*(){if(Te(n.app))return Promise.reject(un(n));let i=Ii(n),r=GS(i,t),o=yield new bh(i,r,e).execute();return o&&!e&&(delete o.user._redirectEventId,yield i._persistUserIfCurrent(o.user),yield i._setRedirectUser(null,t)),o})}var iC=10*60*1e3,vh=class{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(e=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!rC(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var i;if(t.error&&!Qv(t)){let r=((i=t.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";e.onError(vi(this.auth,r))}else e.onAuthEvent(t)}isEventForConsumer(t,e){let i=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=iC&&this.cachedEventUids.clear(),this.cachedEventUids.has(pv(t))}saveEventToCache(t){this.cachedEventUids.add(pv(t)),this.lastProcessedEventTime=Date.now()}};function pv(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(t=>t).join("-")}function Qv({type:n,error:t}){return n==="unknown"&&t?.code==="auth/no-auth-event"}function rC(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Qv(n);default:return!1}}function sC(e){return g(this,arguments,function*(n,t={}){return hn(n,"GET","/v1/projects",t)})}var oC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,aC=/^https?/;function cC(n){return g(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:t}=yield sC(n);for(let e of t)try{if(lC(e))return}catch{}Me(n,"unauthorized-domain")})}function lC(n){let t=ih(),{protocol:e,hostname:i}=new URL(t);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&i===""?e==="chrome-extension:"&&n.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&o.hostname===i}if(!aC.test(e))return!1;if(oC.test(n))return i===n;let r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}var uC=new yi(3e4,6e4);function gv(){let n=Ne().___jsl;if(n?.H){for(let t of Object.keys(n.H))if(n.H[t].r=n.H[t].r||[],n.H[t].L=n.H[t].L||[],n.H[t].r=[...n.H[t].L],n.CP)for(let e=0;e<n.CP.length;e++)n.CP[e]=null}}function dC(n){return new Promise((t,e)=>{var i,r,s;function o(){gv(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{gv(),e(vi(n,"network-request-failed"))},timeout:uC.get()})}if(!((r=(i=Ne().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)t(gapi.iframes.getContext());else if(!((s=Ne().gapi)===null||s===void 0)&&s.load)o();else{let c=Vv("iframefcb");return Ne()[c]=()=>{gapi.load?o():e(vi(n,"network-request-failed"))},Fv(`${hS()}?onload=${c}`).catch(l=>e(l))}}).catch(t=>{throw ec=null,t})}var ec=null;function hC(n){return ec=ec||dC(n),ec}var fC=new yi(5e3,15e3),mC="__/auth/iframe",pC="emulator/auth/iframe",gC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_C=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function bC(n){let t=n.config;B(t.authDomain,n,"auth-domain-config-required");let e=t.emulator?Eh(t,pC):`https://${n.config.authDomain}/${mC}`,i={apiKey:t.apiKey,appName:n.name,v:Oe},r=_C.get(n.config.apiHost);r&&(i.eid=r);let s=n._getFrameworks();return s.length&&(i.fw=s.join(",")),`${e}?${eo(i).slice(1)}`}function vC(n){return g(this,null,function*(){let t=yield hC(n),e=Ne().gapi;return B(e,n,"internal-error"),t.open({where:document.body,url:bC(n),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gC,dontclear:!0},i=>new Promise((r,s)=>g(this,null,function*(){yield i.restyle({setHideOnLeave:!1});let o=vi(n,"network-request-failed"),c=Ne().setTimeout(()=>{s(o)},fC.get());function l(){Ne().clearTimeout(c),r(i)}i.ping(l).then(l,()=>{s(o)})})))})}var yC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},wC=500,IC=600,EC="_blank",TC="http://localhost",hc=class{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function AC(n,t,e,i=wC,r=IC){let s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString(),c="",l=Object.assign(Object.assign({},yC),{width:i.toString(),height:r.toString(),top:s,left:o}),u=Vt().toLowerCase();e&&(c=Dv(u)?EC:e),xv(u)&&(t=t||TC,l.scrollbars="yes");let f=Object.entries(l).reduce((b,[A,C])=>`${b}${A}=${C},`,"");if(sS(u)&&c!=="_self")return RC(t||"",c),new hc(null);let p=window.open(t||"",c,f);B(p,n,"popup-blocked");try{p.focus()}catch{}return new hc(p)}function RC(n,t){let e=document.createElement("a");e.href=n,e.target=t;let i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(i)}var SC="__/auth/handler",CC="emulator/auth/handler",xC=encodeURIComponent("fac");function _v(n,t,e,i,r,s){return g(this,null,function*(){B(n.config.authDomain,n,"auth-domain-config-required"),B(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:e,redirectUrl:i,v:Oe,eventId:r};if(t instanceof cc){t.setDefaultLanguage(n.languageCode),o.providerId=t.providerId||"",$b(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(let[f,p]of Object.entries(s||{}))o[f]=p}if(t instanceof fh){let f=t.getScopes().filter(p=>p!=="");f.length>0&&(o.scopes=f.join(","))}n.tenantId&&(o.tid=n.tenantId);let c=o;for(let f of Object.keys(c))c[f]===void 0&&delete c[f];let l=yield n._getAppCheckToken(),u=l?`#${xC}=${encodeURIComponent(l)}`:"";return`${DC(n)}?${eo(c).slice(1)}${u}`})}function DC({config:n}){return n.emulator?Eh(n,CC):`https://${n.authDomain}/${SC}`}var nh="webStorageSupport",yh=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Fh,this._completeRedirectFn=nC,this._overrideRedirectResult=ZS}_openPopup(t,e,i,r){return g(this,null,function*(){var s;Vn((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield _v(t,e,i,ih(),r);return AC(t,o,Wv())})}_openRedirect(t,e,i,r){return g(this,null,function*(){yield this._originValidation(t);let s=yield _v(t,e,i,ih(),r);return FS(s),new Promise(()=>{})})}_initialize(t){let e=t._key();if(this.eventManagers[e]){let{manager:r,promise:s}=this.eventManagers[e];return r?Promise.resolve(r):(Vn(s,"If manager is not set, promise should be"),s)}let i=this.initAndGetManager(t);return this.eventManagers[e]={promise:i},i.catch(()=>{delete this.eventManagers[e]}),i}initAndGetManager(t){return g(this,null,function*(){let e=yield vC(t),i=new vh(t);return e.register("authEvent",r=>(B(r?.authEvent,t,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=e,i})}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(nh,{type:nh},r=>{var s;let o=(s=r?.[0])===null||s===void 0?void 0:s[nh];o!==void 0&&e(!!o),Me(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){let e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=cC(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return Mv()||Sh()||fc()}},Xv=yh;var bv="@firebase/auth",vv="1.7.4";var wh=class{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}getToken(t){return g(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(t)}:null})}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;let e=this.auth.onIdTokenChanged(i=>{t(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();let e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){B(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function kC(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function PC(n){Pe(new se("auth",(t,{options:e})=>{let i=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=i.options;B(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});let l={apiKey:o,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Lv(n)},u=new uh(i,r,s,l);return pS(u,e),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,i)=>{t.getProvider("auth-internal").initialize()})),Pe(new se("auth-internal",t=>{let e=Ii(t.getProvider("auth").getImmediate());return(i=>new wh(i))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),_t(bv,vv,kC(n)),_t(bv,vv,"esm2017")}var OC=5*60,NC=Md("authIdTokenMaxAge")||OC,yv=null,MC=n=>t=>g(void 0,null,function*(){let e=t&&(yield t.getIdTokenResult()),i=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(i&&i>NC)return;let r=e?.token;yv!==r&&(yv=r,yield fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});function Vh(n=Nn()){let t=gi(n,"auth");if(t.isInitialized())return t.getImmediate();let e=Ch(n,{popupRedirectResolver:Xv,persistence:[Yv,qv,Fh]}),i=Md("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(i,location.origin);if(location.origin===s.origin){let o=MC(s.toString());Mh(e,o,()=>o(e.currentUser)),Nh(e,c=>o(c))}}let r=Od("auth");return r&&xh(e,`http://${r}`),e}function LC(){var n,t;return(t=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&t!==void 0?t:document}uS({loadJS(n){return new Promise((t,e)=>{let i=document.createElement("script");i.setAttribute("src",n),i.onload=t,i.onerror=r=>{let s=vi("internal-error");s.customData=r,e(s)},i.type="text/javascript",i.charset="UTF-8",LC().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});PC("Browser");var Jv="auth",Ei=class{constructor(t){return t}},Ti=class{constructor(){return bi(Jv)}};var Uh=new J("angularfire2.auth-instances");function Ax(n,t){let e=br(Jv,n,t);return e&&new Ei(e)}function Rx(n){return(t,e)=>{let i=t.runOutsideAngular(()=>n(e));return new Ei(i)}}var Sx={provide:Ti,deps:[[new Mt,Uh]]},Cx={provide:Ei,useFactory:Ax,deps:[[new Mt,Uh],Ae]},xx=(()=>{class n{constructor(){_t("angularfire",on.full,"auth")}static \u0275fac=function(i){return new(i||n)};static \u0275mod=ht({type:n});static \u0275inj=dt({providers:[Cx,Sx]})}return n})();function oF(n,...t){return{ngModule:xx,providers:[{provide:Uh,useFactory:Rx(n),multi:!0,deps:[G,Lt,Ln,an,[new Mt,Mn],...t]}]}}var Zv=Ut(kh,!0);var fo=Ut(Vh,!0);var ty=Ut(Oh,!0);var ey=Ut(Ph,!0);var mo=Ut(Lh,!0);var cy="firebasestorage.googleapis.com",ly="storageBucket",Dx=2*60*1e3,kx=10*60*1e3;var yt=class n extends ne{constructor(t,e,i=0){super(jh(t),`Firebase Storage: ${e} (${jh(t)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return jh(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},Rt=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(Rt||{});function jh(n){return"storage/"+n}function Hh(){let n="An unknown error occurred, please check the error payload for server response.";return new yt(Rt.UNKNOWN,n)}function Px(n){return new yt(Rt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function Ox(n){return new yt(Rt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Nx(){let n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new yt(Rt.UNAUTHENTICATED,n)}function Mx(){return new yt(Rt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Lx(n){return new yt(Rt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function Fx(){return new yt(Rt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Vx(){return new yt(Rt.CANCELED,"User canceled the upload/download.")}function Ux(n){return new yt(Rt.INVALID_URL,"Invalid URL '"+n+"'.")}function jx(n){return new yt(Rt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function Bx(){return new yt(Rt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+ly+"' property when initializing the app?")}function zx(){return new yt(Rt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function $x(){return new yt(Rt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function qx(n){return new yt(Rt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Bh(n){return new yt(Rt.INVALID_ARGUMENT,n)}function uy(){return new yt(Rt.APP_DELETED,"The Firebase app was deleted.")}function Wx(n){return new yt(Rt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function go(n,t){return new yt(Rt.INVALID_FORMAT,"String does not match format '"+n+"': "+t)}function po(n){throw new yt(Rt.INTERNAL_ERROR,"Internal error: "+n)}var Re=class n{constructor(t,e){this.bucket=t,this.path_=e}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,e){let i;try{i=n.makeFromUrl(t,e)}catch{return new n(t,"")}if(i.path==="")return i;throw jx(t)}static makeFromUrl(t,e){let i=null,r="([A-Za-z0-9.\\-_]+)";function s(X){X.path.charAt(X.path.length-1)==="/"&&(X.path_=X.path_.slice(0,-1))}let o="(/(.*))?$",c=new RegExp("^gs://"+r+o,"i"),l={bucket:1,path:3};function u(X){X.path_=decodeURIComponent(X.path)}let f="v[A-Za-z0-9_]+",p=e.replace(/[.]/g,"\\."),b="(/([^?#]*).*)?$",A=new RegExp(`^https?://${p}/${f}/b/${r}/o${b}`,"i"),C={bucket:1,path:3},P=e===cy?"(?:storage.googleapis.com|storage.cloud.google.com)":e,D="([^?#]*)",j=new RegExp(`^https?://${P}/${r}/${D}`,"i"),H=[{regex:c,indices:l,postModify:s},{regex:A,indices:C,postModify:u},{regex:j,indices:{bucket:1,path:2},postModify:u}];for(let X=0;X<H.length;X++){let Ct=H[X],rt=Ct.regex.exec(t);if(rt){let I=rt[Ct.indices.bucket],_=rt[Ct.indices.path];_||(_=""),i=new n(I,_),Ct.postModify(i);break}}if(i==null)throw Ux(t);return i}},zh=class{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}};function Hx(n,t,e){let i=1,r=null,s=null,o=!1,c=0;function l(){return c===2}let u=!1;function f(...D){u||(u=!0,t.apply(null,D))}function p(D){r=setTimeout(()=>{r=null,n(A,l())},D)}function b(){s&&clearTimeout(s)}function A(D,...j){if(u){b();return}if(D){b(),f.call(null,D,...j);return}if(l()||o){b(),f.call(null,D,...j);return}i<64&&(i*=2);let H;c===1?(c=2,H=0):H=(i+Math.random())*1e3,p(H)}let C=!1;function P(D){C||(C=!0,b(),!u&&(r!==null?(D||(c=2),clearTimeout(r),p(0)):D||(c=1)))}return p(0),s=setTimeout(()=>{o=!0,P(!0)},e),P}function Gx(n){n(!1)}function Kx(n){return n!==void 0}function Yx(n){return typeof n=="object"&&!Array.isArray(n)}function Gh(n){return typeof n=="string"||n instanceof String}function ny(n){return Kh()&&n instanceof Blob}function Kh(){return typeof Blob<"u"}function iy(n,t,e,i){if(i<t)throw Bh(`Invalid value for '${n}'. Expected ${t} or greater.`);if(i>e)throw Bh(`Invalid value for '${n}'. Expected ${e} or less.`)}function Yh(n,t,e){let i=t;return e==null&&(i=`https://${t}`),`${e}://${i}/v0${n}`}function dy(n){let t=encodeURIComponent,e="?";for(let i in n)if(n.hasOwnProperty(i)){let r=t(i)+"="+t(n[i]);e=e+r+"&"}return e=e.slice(0,-1),e}var Ir=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(Ir||{});function Qx(n,t){let e=n>=500&&n<600,r=[408,429].indexOf(n)!==-1,s=t.indexOf(n)!==-1;return e||r||s}var $h=class{constructor(t,e,i,r,s,o,c,l,u,f,p,b=!0){this.url_=t,this.method_=e,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=c,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=f,this.connectionFactory_=p,this.retry=b,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((A,C)=>{this.resolve_=A,this.reject_=C,this.start_()})}start_(){let t=(i,r)=>{if(r){i(!1,new wr(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let o=c=>{let l=c.loaded,u=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;let c=s.getErrorCode()===Ir.NO_ERROR,l=s.getStatus();if(!c||Qx(l,this.additionalRetryCodes_)&&this.retry){let f=s.getErrorCode()===Ir.ABORT;i(!1,new wr(!1,null,f));return}let u=this.successCodes_.indexOf(l)!==-1;i(!0,new wr(u,s))})},e=(i,r)=>{let s=this.resolve_,o=this.reject_,c=r.connection;if(r.wasSuccessCode)try{let l=this.callback_(c,c.getResponse());Kx(l)?s(l):s()}catch(l){o(l)}else if(c!==null){let l=Hh();l.serverResponse=c.getErrorText(),this.errorCallback_?o(this.errorCallback_(c,l)):o(l)}else if(r.canceled){let l=this.appDelete_?uy():Vx();o(l)}else{let l=Fx();o(l)}};this.canceled_?e(!1,new wr(!1,null,!0)):this.backoffId_=Hx(t,e,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&Gx(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},wr=class{constructor(t,e,i){this.wasSuccessCode=t,this.connection=e,this.canceled=!!i}};function Xx(n,t){t!==null&&t.length>0&&(n.Authorization="Firebase "+t)}function Jx(n,t){n["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function Zx(n,t){t&&(n["X-Firebase-GMPID"]=t)}function tD(n,t){t!==null&&(n["X-Firebase-AppCheck"]=t)}function eD(n,t,e,i,r,s,o=!0){let c=dy(n.urlParams),l=n.url+c,u=Object.assign({},n.headers);return Zx(u,t),Xx(u,e),Jx(u,s),tD(u,i),new $h(l,n.method,u,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,r,o)}function nD(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function iD(...n){let t=nD();if(t!==void 0){let e=new t;for(let i=0;i<n.length;i++)e.append(n[i]);return e.getBlob()}else{if(Kh())return new Blob(n);throw new yt(Rt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function rD(n,t,e){return n.webkitSlice?n.webkitSlice(t,e):n.mozSlice?n.mozSlice(t,e):n.slice?n.slice(t,e):null}function sD(n){if(typeof atob>"u")throw qx("base-64");return atob(n)}var Le={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},_o=class{constructor(t,e){this.data=t,this.contentType=e||null}};function oD(n,t){switch(n){case Le.RAW:return new _o(hy(t));case Le.BASE64:case Le.BASE64URL:return new _o(fy(n,t));case Le.DATA_URL:return new _o(cD(t),lD(t))}throw Hh()}function hy(n){let t=[];for(let e=0;e<n.length;e++){let i=n.charCodeAt(e);if(i<=127)t.push(i);else if(i<=2047)t.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(e<n.length-1&&(n.charCodeAt(e+1)&64512)===56320))t.push(239,191,189);else{let s=i,o=n.charCodeAt(++e);i=65536|(s&1023)<<10|o&1023,t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?t.push(239,191,189):t.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(t)}function aD(n){let t;try{t=decodeURIComponent(n)}catch{throw go(Le.DATA_URL,"Malformed data URL.")}return hy(t)}function fy(n,t){switch(n){case Le.BASE64:{let r=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(r||s)throw go(n,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case Le.BASE64URL:{let r=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(r||s)throw go(n,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let e;try{e=sD(t)}catch(r){throw r.message.includes("polyfill")?r:go(n,"Invalid character found")}let i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i}var _c=class{constructor(t){this.base64=!1,this.contentType=null;let e=t.match(/^data:([^,]+)?,/);if(e===null)throw go(Le.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let i=e[1]||null;i!=null&&(this.base64=uD(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=t.substring(t.indexOf(",")+1)}};function cD(n){let t=new _c(n);return t.base64?fy(Le.BASE64,t.rest):aD(t.rest)}function lD(n){return new _c(n).contentType}function uD(n,t){return n.length>=t.length?n.substring(n.length-t.length)===t:!1}var bc=class n{constructor(t,e){let i=0,r="";ny(t)?(this.data_=t,i=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),i=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),i=t.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(t,e){if(ny(this.data_)){let i=this.data_,r=rD(i,t,e);return r===null?null:new n(r)}else{let i=new Uint8Array(this.data_.buffer,t,e-t);return new n(i,!0)}}static getBlob(...t){if(Kh()){let e=t.map(i=>i instanceof n?i.data_:i);return new n(iD.apply(null,e))}else{let e=t.map(o=>Gh(o)?oD(Le.RAW,o).data:o.data_),i=0;e.forEach(o=>{i+=o.byteLength});let r=new Uint8Array(i),s=0;return e.forEach(o=>{for(let c=0;c<o.length;c++)r[s++]=o[c]}),new n(r,!0)}}uploadData(){return this.data_}};function my(n){let t;try{t=JSON.parse(n)}catch{return null}return Yx(t)?t:null}function dD(n){if(n.length===0)return null;let t=n.lastIndexOf("/");return t===-1?"":n.slice(0,t)}function hD(n,t){let e=t.split("/").filter(i=>i.length>0).join("/");return n.length===0?e:n+"/"+e}function py(n){let t=n.lastIndexOf("/",n.length-2);return t===-1?n:n.slice(t+1)}function fD(n,t){return t}var Wt=class{constructor(t,e,i,r){this.server=t,this.local=e||t,this.writable=!!i,this.xform=r||fD}},gc=null;function mD(n){return!Gh(n)||n.length<2?n:py(n)}function gy(){if(gc)return gc;let n=[];n.push(new Wt("bucket")),n.push(new Wt("generation")),n.push(new Wt("metageneration")),n.push(new Wt("name","fullPath",!0));function t(s,o){return mD(o)}let e=new Wt("name");e.xform=t,n.push(e);function i(s,o){return o!==void 0?Number(o):o}let r=new Wt("size");return r.xform=i,n.push(r),n.push(new Wt("timeCreated")),n.push(new Wt("updated")),n.push(new Wt("md5Hash",null,!0)),n.push(new Wt("cacheControl",null,!0)),n.push(new Wt("contentDisposition",null,!0)),n.push(new Wt("contentEncoding",null,!0)),n.push(new Wt("contentLanguage",null,!0)),n.push(new Wt("contentType",null,!0)),n.push(new Wt("metadata","customMetadata",!0)),gc=n,gc}function pD(n,t){function e(){let i=n.bucket,r=n.fullPath,s=new Re(i,r);return t._makeStorageReference(s)}Object.defineProperty(n,"ref",{get:e})}function gD(n,t,e){let i={};i.type="file";let r=e.length;for(let s=0;s<r;s++){let o=e[s];i[o.local]=o.xform(i,t[o.server])}return pD(i,n),i}function _y(n,t,e){let i=my(t);return i===null?null:gD(n,i,e)}function _D(n,t,e,i){let r=my(t);if(r===null||!Gh(r.downloadTokens))return null;let s=r.downloadTokens;if(s.length===0)return null;let o=encodeURIComponent;return s.split(",").map(u=>{let f=n.bucket,p=n.fullPath,b="/b/"+o(f)+"/o/"+o(p),A=Yh(b,e,i),C=dy({alt:"media",token:u});return A+C})[0]}function bD(n,t){let e={},i=t.length;for(let r=0;r<i;r++){let s=t[r];s.writable&&(e[s.server]=n[s.local])}return JSON.stringify(e)}var vc=class{constructor(t,e,i,r){this.url=t,this.method=e,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function by(n){if(!n)throw Hh()}function vD(n,t){function e(i,r){let s=_y(n,r,t);return by(s!==null),s}return e}function yD(n,t){function e(i,r){let s=_y(n,r,t);return by(s!==null),_D(s,r,n.host,n._protocol)}return e}function vy(n){function t(e,i){let r;return e.getStatus()===401?e.getErrorText().includes("Firebase App Check token is invalid")?r=Mx():r=Nx():e.getStatus()===402?r=Ox(n.bucket):e.getStatus()===403?r=Lx(n.path):r=i,r.status=e.getStatus(),r.serverResponse=i.serverResponse,r}return t}function wD(n){let t=vy(n);function e(i,r){let s=t(i,r);return i.getStatus()===404&&(s=Px(n.path)),s.serverResponse=r.serverResponse,s}return e}function ID(n,t,e){let i=t.fullServerUrl(),r=Yh(i,n.host,n._protocol),s="GET",o=n.maxOperationRetryTime,c=new vc(r,s,yD(n,e),o);return c.errorHandler=wD(t),c}function ED(n,t){return n&&n.contentType||t&&t.type()||"application/octet-stream"}function TD(n,t,e){let i=Object.assign({},e);return i.fullPath=n.path,i.size=t.size(),i.contentType||(i.contentType=ED(null,t)),i}function AD(n,t,e,i,r){let s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function c(){let H="";for(let X=0;X<2;X++)H=H+Math.random().toString().slice(2);return H}let l=c();o["Content-Type"]="multipart/related; boundary="+l;let u=TD(t,i,r),f=bD(u,e),p="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,b=`\r
--`+l+"--",A=bc.getBlob(p,i,b);if(A===null)throw zx();let C={name:u.fullPath},P=Yh(s,n.host,n._protocol),D="POST",j=n.maxUploadRetryTime,$=new vc(P,D,vD(n,e),j);return $.urlParams=C,$.headers=o,$.body=A.uploadData(),$.errorHandler=vy(t),$}var hF=256*1024;var ry=null,qh=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ir.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ir.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ir.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,e,i,r){if(this.sent_)throw po("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),r!==void 0)for(let s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw po("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw po("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw po("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw po("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}},Wh=class extends qh{initXhr(){this.xhr_.responseType="text"}};function yy(){return ry?ry():new Wh}var Er=class n{constructor(t,e){this._service=t,e instanceof Re?this._location=e:this._location=Re.makeFromUrl(e,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,e){return new n(t,e)}get root(){let t=new Re(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return py(this._location.path)}get storage(){return this._service}get parent(){let t=dD(this._location.path);if(t===null)return null;let e=new Re(this._location.bucket,t);return new n(this._service,e)}_throwIfRoot(t){if(this._location.path==="")throw Wx(t)}};function RD(n,t,e){n._throwIfRoot("uploadBytes");let i=AD(n.storage,n._location,gy(),new bc(t,!0),e);return n.storage.makeRequestWithTokens(i,yy).then(r=>({metadata:r,ref:n}))}function SD(n){n._throwIfRoot("getDownloadURL");let t=ID(n.storage,n._location,gy());return n.storage.makeRequestWithTokens(t,yy).then(e=>{if(e===null)throw $x();return e})}function CD(n,t){let e=hD(n._location.path,t),i=new Re(n._location.bucket,e);return new Er(n.storage,i)}function xD(n){return/^[A-Za-z]+:\/\//.test(n)}function DD(n,t){return new Er(n,t)}function wy(n,t){if(n instanceof bo){let e=n;if(e._bucket==null)throw Bx();let i=new Er(e,e._bucket);return t!=null?wy(i,t):i}else return t!==void 0?CD(n,t):n}function kD(n,t){if(t&&xD(t)){if(n instanceof bo)return DD(n,t);throw Bh("To use ref(service, url), the first argument must be a Storage instance.")}else return wy(n,t)}function sy(n,t){let e=t?.[ly];return e==null?null:Re.makeFromBucketSpec(e,n)}function PD(n,t,e,i={}){n.host=`${t}:${e}`,n._protocol="http";let{mockUserToken:r}=i;r&&(n._overrideAuthToken=typeof r=="string"?r:Wa(r,n.app.options.projectId))}var bo=class{constructor(t,e,i,r,s){this.app=t,this._authProvider=e,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=cy,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Dx,this._maxUploadRetryTime=kx,this._requests=new Set,r!=null?this._bucket=Re.makeFromBucketSpec(r,this._host):this._bucket=sy(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Re.makeFromBucketSpec(this._url,t):this._bucket=sy(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){iy("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){iy("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}_getAuthToken(){return g(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let t=this._authProvider.getImmediate({optional:!0});if(t){let e=yield t.getToken();if(e!==null)return e.accessToken}return null})}_getAppCheckToken(){return g(this,null,function*(){let t=this._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Er(this,t)}_makeRequest(t,e,i,r,s=!0){if(this._deleted)return new zh(uy());{let o=eD(t,this._appId,i,r,e,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(t,e){return g(this,null,function*(){let[i,r]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,e,i,r).getPromise()})}},oy="@firebase/storage",ay="0.12.5";var Iy="storage";function Ey(n,t,e){return n=gt(n),RD(n,t,e)}function Ty(n){return n=gt(n),SD(n)}function Ay(n,t){return n=gt(n),kD(n,t)}function Ry(n=Nn(),t){n=gt(n);let i=gi(n,Iy).getImmediate({identifier:t}),r=qa("storage");return r&&Sy(i,...r),i}function Sy(n,t,e,i={}){PD(n,t,e,i)}function OD(n,{instanceIdentifier:t}){let e=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),r=n.getProvider("app-check-internal");return new bo(e,i,r,t,Oe)}function ND(){Pe(new se(Iy,OD,"PUBLIC").setMultipleInstances(!0)),_t(oy,ay,""),_t(oy,ay,"esm2017")}ND();var Ai=class{constructor(t){return t}},Cy="storage",Qh=class{constructor(){return bi(Cy)}};var Xh=new J("angularfire2.storage-instances");function MD(n,t){let e=br(Cy,n,t);return e&&new Ai(e)}function LD(n){return(t,e)=>{let i=t.runOutsideAngular(()=>n(e));return new Ai(i)}}var FD={provide:Qh,deps:[[new Mt,Xh]]},VD={provide:Ai,useFactory:MD,deps:[[new Mt,Xh],Ae]},UD=(()=>{class n{constructor(){_t("angularfire",on.full,"gcs")}static \u0275fac=function(i){return new(i||n)};static \u0275mod=ht({type:n});static \u0275inj=dt({providers:[VD,FD]})}return n})();function NF(n,...t){return{ngModule:UD,providers:[{provide:Xh,useFactory:LD(n),multi:!0,deps:[G,Lt,Ln,an,[new Mt,Ti],[new Mt,Mn],...t]}]}}var Jh=Ut(Ty,!0);var MF=Ut(Ry,!0);var Zh=Ut(Ay,!0);var xy=Ut(Ey,!0);var Dy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ky={};var Un,tf;(function(){var n;function t(I,_){function y(){}y.prototype=_.prototype,I.D=_.prototype,I.prototype=new y,I.prototype.constructor=I,I.C=function(w,E,R){for(var v=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)v[Ke-2]=arguments[Ke];return _.prototype[E].apply(w,v)}}function e(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,e),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(I,_,y){y||(y=0);var w=Array(16);if(typeof _=="string")for(var E=0;16>E;++E)w[E]=_.charCodeAt(y++)|_.charCodeAt(y++)<<8|_.charCodeAt(y++)<<16|_.charCodeAt(y++)<<24;else for(E=0;16>E;++E)w[E]=_[y++]|_[y++]<<8|_[y++]<<16|_[y++]<<24;_=I.g[0],y=I.g[1],E=I.g[2];var R=I.g[3],v=_+(R^y&(E^R))+w[0]+3614090360&4294967295;_=y+(v<<7&4294967295|v>>>25),v=R+(E^_&(y^E))+w[1]+3905402710&4294967295,R=_+(v<<12&4294967295|v>>>20),v=E+(y^R&(_^y))+w[2]+606105819&4294967295,E=R+(v<<17&4294967295|v>>>15),v=y+(_^E&(R^_))+w[3]+3250441966&4294967295,y=E+(v<<22&4294967295|v>>>10),v=_+(R^y&(E^R))+w[4]+4118548399&4294967295,_=y+(v<<7&4294967295|v>>>25),v=R+(E^_&(y^E))+w[5]+1200080426&4294967295,R=_+(v<<12&4294967295|v>>>20),v=E+(y^R&(_^y))+w[6]+2821735955&4294967295,E=R+(v<<17&4294967295|v>>>15),v=y+(_^E&(R^_))+w[7]+4249261313&4294967295,y=E+(v<<22&4294967295|v>>>10),v=_+(R^y&(E^R))+w[8]+1770035416&4294967295,_=y+(v<<7&4294967295|v>>>25),v=R+(E^_&(y^E))+w[9]+2336552879&4294967295,R=_+(v<<12&4294967295|v>>>20),v=E+(y^R&(_^y))+w[10]+4294925233&4294967295,E=R+(v<<17&4294967295|v>>>15),v=y+(_^E&(R^_))+w[11]+2304563134&4294967295,y=E+(v<<22&4294967295|v>>>10),v=_+(R^y&(E^R))+w[12]+1804603682&4294967295,_=y+(v<<7&4294967295|v>>>25),v=R+(E^_&(y^E))+w[13]+4254626195&4294967295,R=_+(v<<12&4294967295|v>>>20),v=E+(y^R&(_^y))+w[14]+2792965006&4294967295,E=R+(v<<17&4294967295|v>>>15),v=y+(_^E&(R^_))+w[15]+1236535329&4294967295,y=E+(v<<22&4294967295|v>>>10),v=_+(E^R&(y^E))+w[1]+4129170786&4294967295,_=y+(v<<5&4294967295|v>>>27),v=R+(y^E&(_^y))+w[6]+3225465664&4294967295,R=_+(v<<9&4294967295|v>>>23),v=E+(_^y&(R^_))+w[11]+643717713&4294967295,E=R+(v<<14&4294967295|v>>>18),v=y+(R^_&(E^R))+w[0]+3921069994&4294967295,y=E+(v<<20&4294967295|v>>>12),v=_+(E^R&(y^E))+w[5]+3593408605&4294967295,_=y+(v<<5&4294967295|v>>>27),v=R+(y^E&(_^y))+w[10]+38016083&4294967295,R=_+(v<<9&4294967295|v>>>23),v=E+(_^y&(R^_))+w[15]+3634488961&4294967295,E=R+(v<<14&4294967295|v>>>18),v=y+(R^_&(E^R))+w[4]+3889429448&4294967295,y=E+(v<<20&4294967295|v>>>12),v=_+(E^R&(y^E))+w[9]+568446438&4294967295,_=y+(v<<5&4294967295|v>>>27),v=R+(y^E&(_^y))+w[14]+3275163606&4294967295,R=_+(v<<9&4294967295|v>>>23),v=E+(_^y&(R^_))+w[3]+4107603335&4294967295,E=R+(v<<14&4294967295|v>>>18),v=y+(R^_&(E^R))+w[8]+1163531501&4294967295,y=E+(v<<20&4294967295|v>>>12),v=_+(E^R&(y^E))+w[13]+2850285829&4294967295,_=y+(v<<5&4294967295|v>>>27),v=R+(y^E&(_^y))+w[2]+4243563512&4294967295,R=_+(v<<9&4294967295|v>>>23),v=E+(_^y&(R^_))+w[7]+1735328473&4294967295,E=R+(v<<14&4294967295|v>>>18),v=y+(R^_&(E^R))+w[12]+2368359562&4294967295,y=E+(v<<20&4294967295|v>>>12),v=_+(y^E^R)+w[5]+4294588738&4294967295,_=y+(v<<4&4294967295|v>>>28),v=R+(_^y^E)+w[8]+2272392833&4294967295,R=_+(v<<11&4294967295|v>>>21),v=E+(R^_^y)+w[11]+1839030562&4294967295,E=R+(v<<16&4294967295|v>>>16),v=y+(E^R^_)+w[14]+4259657740&4294967295,y=E+(v<<23&4294967295|v>>>9),v=_+(y^E^R)+w[1]+2763975236&4294967295,_=y+(v<<4&4294967295|v>>>28),v=R+(_^y^E)+w[4]+1272893353&4294967295,R=_+(v<<11&4294967295|v>>>21),v=E+(R^_^y)+w[7]+4139469664&4294967295,E=R+(v<<16&4294967295|v>>>16),v=y+(E^R^_)+w[10]+3200236656&4294967295,y=E+(v<<23&4294967295|v>>>9),v=_+(y^E^R)+w[13]+681279174&4294967295,_=y+(v<<4&4294967295|v>>>28),v=R+(_^y^E)+w[0]+3936430074&4294967295,R=_+(v<<11&4294967295|v>>>21),v=E+(R^_^y)+w[3]+3572445317&4294967295,E=R+(v<<16&4294967295|v>>>16),v=y+(E^R^_)+w[6]+76029189&4294967295,y=E+(v<<23&4294967295|v>>>9),v=_+(y^E^R)+w[9]+3654602809&4294967295,_=y+(v<<4&4294967295|v>>>28),v=R+(_^y^E)+w[12]+3873151461&4294967295,R=_+(v<<11&4294967295|v>>>21),v=E+(R^_^y)+w[15]+530742520&4294967295,E=R+(v<<16&4294967295|v>>>16),v=y+(E^R^_)+w[2]+3299628645&4294967295,y=E+(v<<23&4294967295|v>>>9),v=_+(E^(y|~R))+w[0]+4096336452&4294967295,_=y+(v<<6&4294967295|v>>>26),v=R+(y^(_|~E))+w[7]+1126891415&4294967295,R=_+(v<<10&4294967295|v>>>22),v=E+(_^(R|~y))+w[14]+2878612391&4294967295,E=R+(v<<15&4294967295|v>>>17),v=y+(R^(E|~_))+w[5]+4237533241&4294967295,y=E+(v<<21&4294967295|v>>>11),v=_+(E^(y|~R))+w[12]+1700485571&4294967295,_=y+(v<<6&4294967295|v>>>26),v=R+(y^(_|~E))+w[3]+2399980690&4294967295,R=_+(v<<10&4294967295|v>>>22),v=E+(_^(R|~y))+w[10]+4293915773&4294967295,E=R+(v<<15&4294967295|v>>>17),v=y+(R^(E|~_))+w[1]+2240044497&4294967295,y=E+(v<<21&4294967295|v>>>11),v=_+(E^(y|~R))+w[8]+1873313359&4294967295,_=y+(v<<6&4294967295|v>>>26),v=R+(y^(_|~E))+w[15]+4264355552&4294967295,R=_+(v<<10&4294967295|v>>>22),v=E+(_^(R|~y))+w[6]+2734768916&4294967295,E=R+(v<<15&4294967295|v>>>17),v=y+(R^(E|~_))+w[13]+1309151649&4294967295,y=E+(v<<21&4294967295|v>>>11),v=_+(E^(y|~R))+w[4]+4149444226&4294967295,_=y+(v<<6&4294967295|v>>>26),v=R+(y^(_|~E))+w[11]+3174756917&4294967295,R=_+(v<<10&4294967295|v>>>22),v=E+(_^(R|~y))+w[2]+718787259&4294967295,E=R+(v<<15&4294967295|v>>>17),v=y+(R^(E|~_))+w[9]+3951481745&4294967295,I.g[0]=I.g[0]+_&4294967295,I.g[1]=I.g[1]+(E+(v<<21&4294967295|v>>>11))&4294967295,I.g[2]=I.g[2]+E&4294967295,I.g[3]=I.g[3]+R&4294967295}i.prototype.u=function(I,_){_===void 0&&(_=I.length);for(var y=_-this.blockSize,w=this.B,E=this.h,R=0;R<_;){if(E==0)for(;R<=y;)r(this,I,R),R+=this.blockSize;if(typeof I=="string"){for(;R<_;)if(w[E++]=I.charCodeAt(R++),E==this.blockSize){r(this,w),E=0;break}}else for(;R<_;)if(w[E++]=I[R++],E==this.blockSize){r(this,w),E=0;break}}this.h=E,this.o+=_},i.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var _=1;_<I.length-8;++_)I[_]=0;var y=8*this.o;for(_=I.length-8;_<I.length;++_)I[_]=y&255,y/=256;for(this.u(I),I=Array(16),_=y=0;4>_;++_)for(var w=0;32>w;w+=8)I[y++]=this.g[_]>>>w&255;return I};function s(I,_){var y=c;return Object.prototype.hasOwnProperty.call(y,I)?y[I]:y[I]=_(I)}function o(I,_){this.h=_;for(var y=[],w=!0,E=I.length-1;0<=E;E--){var R=I[E]|0;w&&R==_||(y[E]=R,w=!1)}this.g=y}var c={};function l(I){return-128<=I&&128>I?s(I,function(_){return new o([_|0],0>_?-1:0)}):new o([I|0],0>I?-1:0)}function u(I){if(isNaN(I)||!isFinite(I))return p;if(0>I)return D(u(-I));for(var _=[],y=1,w=0;I>=y;w++)_[w]=I/y|0,y*=4294967296;return new o(_,0)}function f(I,_){if(I.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(I.charAt(0)=="-")return D(f(I.substring(1),_));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=u(Math.pow(_,8)),w=p,E=0;E<I.length;E+=8){var R=Math.min(8,I.length-E),v=parseInt(I.substring(E,E+R),_);8>R?(R=u(Math.pow(_,R)),w=w.j(R).add(u(v))):(w=w.j(y),w=w.add(u(v)))}return w}var p=l(0),b=l(1),A=l(16777216);n=o.prototype,n.m=function(){if(P(this))return-D(this).m();for(var I=0,_=1,y=0;y<this.g.length;y++){var w=this.i(y);I+=(0<=w?w:4294967296+w)*_,_*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(C(this))return"0";if(P(this))return"-"+D(this).toString(I);for(var _=u(Math.pow(I,6)),y=this,w="";;){var E=X(y,_).g;y=j(y,E.j(_));var R=((0<y.g.length?y.g[0]:y.h)>>>0).toString(I);if(y=E,C(y))return R+w;for(;6>R.length;)R="0"+R;w=R+w}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function C(I){if(I.h!=0)return!1;for(var _=0;_<I.g.length;_++)if(I.g[_]!=0)return!1;return!0}function P(I){return I.h==-1}n.l=function(I){return I=j(this,I),P(I)?-1:C(I)?0:1};function D(I){for(var _=I.g.length,y=[],w=0;w<_;w++)y[w]=~I.g[w];return new o(y,~I.h).add(b)}n.abs=function(){return P(this)?D(this):this},n.add=function(I){for(var _=Math.max(this.g.length,I.g.length),y=[],w=0,E=0;E<=_;E++){var R=w+(this.i(E)&65535)+(I.i(E)&65535),v=(R>>>16)+(this.i(E)>>>16)+(I.i(E)>>>16);w=v>>>16,R&=65535,v&=65535,y[E]=v<<16|R}return new o(y,y[y.length-1]&-2147483648?-1:0)};function j(I,_){return I.add(D(_))}n.j=function(I){if(C(this)||C(I))return p;if(P(this))return P(I)?D(this).j(D(I)):D(D(this).j(I));if(P(I))return D(this.j(D(I)));if(0>this.l(A)&&0>I.l(A))return u(this.m()*I.m());for(var _=this.g.length+I.g.length,y=[],w=0;w<2*_;w++)y[w]=0;for(w=0;w<this.g.length;w++)for(var E=0;E<I.g.length;E++){var R=this.i(w)>>>16,v=this.i(w)&65535,Ke=I.i(E)>>>16,Kr=I.i(E)&65535;y[2*w+2*E]+=v*Kr,$(y,2*w+2*E),y[2*w+2*E+1]+=R*Kr,$(y,2*w+2*E+1),y[2*w+2*E+1]+=v*Ke,$(y,2*w+2*E+1),y[2*w+2*E+2]+=R*Ke,$(y,2*w+2*E+2)}for(w=0;w<_;w++)y[w]=y[2*w+1]<<16|y[2*w];for(w=_;w<2*_;w++)y[w]=0;return new o(y,0)};function $(I,_){for(;(I[_]&65535)!=I[_];)I[_+1]+=I[_]>>>16,I[_]&=65535,_++}function H(I,_){this.g=I,this.h=_}function X(I,_){if(C(_))throw Error("division by zero");if(C(I))return new H(p,p);if(P(I))return _=X(D(I),_),new H(D(_.g),D(_.h));if(P(_))return _=X(I,D(_)),new H(D(_.g),_.h);if(30<I.g.length){if(P(I)||P(_))throw Error("slowDivide_ only works with positive integers.");for(var y=b,w=_;0>=w.l(I);)y=Ct(y),w=Ct(w);var E=rt(y,1),R=rt(w,1);for(w=rt(w,2),y=rt(y,2);!C(w);){var v=R.add(w);0>=v.l(I)&&(E=E.add(y),R=v),w=rt(w,1),y=rt(y,1)}return _=j(I,E.j(_)),new H(E,_)}for(E=p;0<=I.l(_);){for(y=Math.max(1,Math.floor(I.m()/_.m())),w=Math.ceil(Math.log(y)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),R=u(y),v=R.j(_);P(v)||0<v.l(I);)y-=w,R=u(y),v=R.j(_);C(R)&&(R=b),E=E.add(R),I=j(I,v)}return new H(E,I)}n.A=function(I){return X(this,I).h},n.and=function(I){for(var _=Math.max(this.g.length,I.g.length),y=[],w=0;w<_;w++)y[w]=this.i(w)&I.i(w);return new o(y,this.h&I.h)},n.or=function(I){for(var _=Math.max(this.g.length,I.g.length),y=[],w=0;w<_;w++)y[w]=this.i(w)|I.i(w);return new o(y,this.h|I.h)},n.xor=function(I){for(var _=Math.max(this.g.length,I.g.length),y=[],w=0;w<_;w++)y[w]=this.i(w)^I.i(w);return new o(y,this.h^I.h)};function Ct(I){for(var _=I.g.length+1,y=[],w=0;w<_;w++)y[w]=I.i(w)<<1|I.i(w-1)>>>31;return new o(y,I.h)}function rt(I,_){var y=_>>5;_%=32;for(var w=I.g.length-y,E=[],R=0;R<w;R++)E[R]=0<_?I.i(R+y)>>>_|I.i(R+y+1)<<32-_:I.i(R+y);return new o(E,I.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,tf=ky.Md5=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=f,Un=ky.Integer=o}).apply(typeof Dy<"u"?Dy:typeof self<"u"?self:typeof window<"u"?window:{});var yc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},fn={};var ef,nf,Tr,rf,vo,wc,sf,of,af;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,h){return a==Array.prototype||a==Object.prototype||(a[d]=h.value),a};function e(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof yc=="object"&&yc];for(var d=0;d<a.length;++d){var h=a[d];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var i=e(this);function r(a,d){if(d)t:{var h=i;a=a.split(".");for(var m=0;m<a.length-1;m++){var T=a[m];if(!(T in h))break t;h=h[T]}a=a[a.length-1],m=h[a],d=d(m),d!=m&&d!=null&&t(h,a,{configurable:!0,writable:!0,value:d})}}function s(a,d){a instanceof String&&(a+="");var h=0,m=!1,T={next:function(){if(!m&&h<a.length){var S=h++;return{value:d(S,a[S]),done:!1}}return m=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}r("Array.prototype.values",function(a){return a||function(){return s(this,function(d,h){return h})}});var o=o||{},c=this||self;function l(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function u(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function f(a,d,h){return a.call.apply(a.bind,arguments)}function p(a,d,h){if(!a)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var T=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(T,m),a.apply(d,T)}}return function(){return a.apply(d,arguments)}}function b(a,d,h){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,b.apply(null,arguments)}function A(a,d){var h=Array.prototype.slice.call(arguments,1);return function(){var m=h.slice();return m.push.apply(m,arguments),a.apply(this,m)}}function C(a,d){function h(){}h.prototype=d.prototype,a.aa=d.prototype,a.prototype=new h,a.prototype.constructor=a,a.Qb=function(m,T,S){for(var N=Array(arguments.length-2),ut=2;ut<arguments.length;ut++)N[ut-2]=arguments[ut];return d.prototype[T].apply(m,N)}}function P(a){let d=a.length;if(0<d){let h=Array(d);for(let m=0;m<d;m++)h[m]=a[m];return h}return[]}function D(a,d){for(let h=1;h<arguments.length;h++){let m=arguments[h];if(l(m)){let T=a.length||0,S=m.length||0;a.length=T+S;for(let N=0;N<S;N++)a[T+N]=m[N]}else a.push(m)}}class j{constructor(d,h){this.i=d,this.j=h,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function $(a){return/^[\s\xa0]*$/.test(a)}function H(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function X(a){return X[" "](a),a}X[" "]=function(){};var Ct=H().indexOf("Gecko")!=-1&&!(H().toLowerCase().indexOf("webkit")!=-1&&H().indexOf("Edge")==-1)&&!(H().indexOf("Trident")!=-1||H().indexOf("MSIE")!=-1)&&H().indexOf("Edge")==-1;function rt(a,d,h){for(let m in a)d.call(h,a[m],m,a)}function I(a,d){for(let h in a)d.call(void 0,a[h],h,a)}function _(a){let d={};for(let h in a)d[h]=a[h];return d}let y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(a,d){let h,m;for(let T=1;T<arguments.length;T++){m=arguments[T];for(h in m)a[h]=m[h];for(let S=0;S<y.length;S++)h=y[S],Object.prototype.hasOwnProperty.call(m,h)&&(a[h]=m[h])}}function E(a){var d=1;a=a.split(":");let h=[];for(;0<d&&a.length;)h.push(a.shift()),d--;return a.length&&h.push(a.join(":")),h}function R(a){c.setTimeout(()=>{throw a},0)}function v(){var a=fl;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class Ke{constructor(){this.h=this.g=null}add(d,h){let m=Kr.get();m.set(d,h),this.h?this.h.next=m:this.g=m,this.h=m}}var Kr=new j(()=>new gI,a=>a.reset());class gI{constructor(){this.next=this.g=this.h=null}set(d,h){this.h=d,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let Yr,Qr=!1,fl=new Ke,fp=()=>{let a=c.Promise.resolve(void 0);Yr=()=>{a.then(_I)}};var _I=()=>{for(var a;a=v();){try{a.h.call(a.g)}catch(h){R(h)}var d=Kr;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}Qr=!1};function bn(){this.s=this.s,this.C=this.C}bn.prototype.s=!1,bn.prototype.ma=function(){this.s||(this.s=!0,this.N())},bn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Kt(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}Kt.prototype.h=function(){this.defaultPrevented=!0};var bI=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let h=()=>{};c.addEventListener("test",h,d),c.removeEventListener("test",h,d)}catch{}return a}();function Xr(a,d){if(Kt.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var h=this.type=a.type,m=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(Ct){t:{try{X(d.nodeName);var T=!0;break t}catch{}T=!1}T||(d=null)}}else h=="mouseover"?d=a.fromElement:h=="mouseout"&&(d=a.toElement);this.relatedTarget=d,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:vI[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Xr.aa.h.call(this)}}C(Xr,Kt);var vI={2:"touch",3:"pen",4:"mouse"};Xr.prototype.h=function(){Xr.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Jr="closure_listenable_"+(1e6*Math.random()|0),yI=0;function wI(a,d,h,m,T){this.listener=a,this.proxy=null,this.src=d,this.type=h,this.capture=!!m,this.ha=T,this.key=++yI,this.da=this.fa=!1}function Bo(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function zo(a){this.src=a,this.g={},this.h=0}zo.prototype.add=function(a,d,h,m,T){var S=a.toString();a=this.g[S],a||(a=this.g[S]=[],this.h++);var N=pl(a,d,m,T);return-1<N?(d=a[N],h||(d.fa=!1)):(d=new wI(d,this.src,S,!!m,T),d.fa=h,a.push(d)),d};function ml(a,d){var h=d.type;if(h in a.g){var m=a.g[h],T=Array.prototype.indexOf.call(m,d,void 0),S;(S=0<=T)&&Array.prototype.splice.call(m,T,1),S&&(Bo(d),a.g[h].length==0&&(delete a.g[h],a.h--))}}function pl(a,d,h,m){for(var T=0;T<a.length;++T){var S=a[T];if(!S.da&&S.listener==d&&S.capture==!!h&&S.ha==m)return T}return-1}var gl="closure_lm_"+(1e6*Math.random()|0),_l={};function mp(a,d,h,m,T){if(m&&m.once)return gp(a,d,h,m,T);if(Array.isArray(d)){for(var S=0;S<d.length;S++)mp(a,d[S],h,m,T);return null}return h=wl(h),a&&a[Jr]?a.K(d,h,u(m)?!!m.capture:!!m,T):pp(a,d,h,!1,m,T)}function pp(a,d,h,m,T,S){if(!d)throw Error("Invalid event type");var N=u(T)?!!T.capture:!!T,ut=vl(a);if(ut||(a[gl]=ut=new zo(a)),h=ut.add(d,h,m,N,S),h.proxy)return h;if(m=II(),h.proxy=m,m.src=a,m.listener=h,a.addEventListener)bI||(T=N),T===void 0&&(T=!1),a.addEventListener(d.toString(),m,T);else if(a.attachEvent)a.attachEvent(bp(d.toString()),m);else if(a.addListener&&a.removeListener)a.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return h}function II(){function a(h){return d.call(a.src,a.listener,h)}let d=EI;return a}function gp(a,d,h,m,T){if(Array.isArray(d)){for(var S=0;S<d.length;S++)gp(a,d[S],h,m,T);return null}return h=wl(h),a&&a[Jr]?a.L(d,h,u(m)?!!m.capture:!!m,T):pp(a,d,h,!0,m,T)}function _p(a,d,h,m,T){if(Array.isArray(d))for(var S=0;S<d.length;S++)_p(a,d[S],h,m,T);else m=u(m)?!!m.capture:!!m,h=wl(h),a&&a[Jr]?(a=a.i,d=String(d).toString(),d in a.g&&(S=a.g[d],h=pl(S,h,m,T),-1<h&&(Bo(S[h]),Array.prototype.splice.call(S,h,1),S.length==0&&(delete a.g[d],a.h--)))):a&&(a=vl(a))&&(d=a.g[d.toString()],a=-1,d&&(a=pl(d,h,m,T)),(h=-1<a?d[a]:null)&&bl(h))}function bl(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[Jr])ml(d.i,a);else{var h=a.type,m=a.proxy;d.removeEventListener?d.removeEventListener(h,m,a.capture):d.detachEvent?d.detachEvent(bp(h),m):d.addListener&&d.removeListener&&d.removeListener(m),(h=vl(d))?(ml(h,a),h.h==0&&(h.src=null,d[gl]=null)):Bo(a)}}}function bp(a){return a in _l?_l[a]:_l[a]="on"+a}function EI(a,d){if(a.da)a=!0;else{d=new Xr(d,this);var h=a.listener,m=a.ha||a.src;a.fa&&bl(a),a=h.call(m,d)}return a}function vl(a){return a=a[gl],a instanceof zo?a:null}var yl="__closure_events_fn_"+(1e9*Math.random()>>>0);function wl(a){return typeof a=="function"?a:(a[yl]||(a[yl]=function(d){return a.handleEvent(d)}),a[yl])}function Yt(){bn.call(this),this.i=new zo(this),this.M=this,this.F=null}C(Yt,bn),Yt.prototype[Jr]=!0,Yt.prototype.removeEventListener=function(a,d,h,m){_p(this,a,d,h,m)};function te(a,d){var h,m=a.F;if(m)for(h=[];m;m=m.F)h.push(m);if(a=a.M,m=d.type||d,typeof d=="string")d=new Kt(d,a);else if(d instanceof Kt)d.target=d.target||a;else{var T=d;d=new Kt(m,a),w(d,T)}if(T=!0,h)for(var S=h.length-1;0<=S;S--){var N=d.g=h[S];T=$o(N,m,!0,d)&&T}if(N=d.g=a,T=$o(N,m,!0,d)&&T,T=$o(N,m,!1,d)&&T,h)for(S=0;S<h.length;S++)N=d.g=h[S],T=$o(N,m,!1,d)&&T}Yt.prototype.N=function(){if(Yt.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var h=a.g[d],m=0;m<h.length;m++)Bo(h[m]);delete a.g[d],a.h--}}this.F=null},Yt.prototype.K=function(a,d,h,m){return this.i.add(String(a),d,!1,h,m)},Yt.prototype.L=function(a,d,h,m){return this.i.add(String(a),d,!0,h,m)};function $o(a,d,h,m){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var T=!0,S=0;S<d.length;++S){var N=d[S];if(N&&!N.da&&N.capture==h){var ut=N.listener,zt=N.ha||N.src;N.fa&&ml(a.i,N),T=ut.call(zt,m)!==!1&&T}}return T&&!m.defaultPrevented}function vp(a,d,h){if(typeof a=="function")h&&(a=b(a,h));else if(a&&typeof a.handleEvent=="function")a=b(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:c.setTimeout(a,d||0)}function yp(a){a.g=vp(()=>{a.g=null,a.i&&(a.i=!1,yp(a))},a.l);let d=a.h;a.h=null,a.m.apply(null,d)}class TI extends bn{constructor(d,h){super(),this.m=d,this.l=h,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:yp(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zr(a){bn.call(this),this.h=a,this.g={}}C(Zr,bn);var wp=[];function Ip(a){rt(a.g,function(d,h){this.g.hasOwnProperty(h)&&bl(d)},a),a.g={}}Zr.prototype.N=function(){Zr.aa.N.call(this),Ip(this)},Zr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Il=c.JSON.stringify,AI=c.JSON.parse,RI=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function El(){}El.prototype.h=null;function Ep(a){return a.h||(a.h=a.i())}function Tp(){}var ts={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Tl(){Kt.call(this,"d")}C(Tl,Kt);function Al(){Kt.call(this,"c")}C(Al,Kt);var Wn={},Ap=null;function qo(){return Ap=Ap||new Yt}Wn.La="serverreachability";function Rp(a){Kt.call(this,Wn.La,a)}C(Rp,Kt);function es(a){let d=qo();te(d,new Rp(d))}Wn.STAT_EVENT="statevent";function Sp(a,d){Kt.call(this,Wn.STAT_EVENT,a),this.stat=d}C(Sp,Kt);function ee(a){let d=qo();te(d,new Sp(d,a))}Wn.Ma="timingevent";function Cp(a,d){Kt.call(this,Wn.Ma,a),this.size=d}C(Cp,Kt);function ns(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},d)}function is(){this.g=!0}is.prototype.xa=function(){this.g=!1};function SI(a,d,h,m,T,S){a.info(function(){if(a.g)if(S)for(var N="",ut=S.split("&"),zt=0;zt<ut.length;zt++){var st=ut[zt].split("=");if(1<st.length){var Qt=st[0];st=st[1];var Xt=Qt.split("_");N=2<=Xt.length&&Xt[1]=="type"?N+(Qt+"="+st+"&"):N+(Qt+"=redacted&")}}else N=null;else N=S;return"XMLHTTP REQ ("+m+") [attempt "+T+"]: "+d+`
`+h+`
`+N})}function CI(a,d,h,m,T,S,N){a.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+T+"]: "+d+`
`+h+`
`+S+" "+N})}function Fi(a,d,h,m){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+DI(a,h)+(m?" "+m:"")})}function xI(a,d){a.info(function(){return"TIMEOUT: "+d})}is.prototype.info=function(){};function DI(a,d){if(!a.g)return d;if(!d)return null;try{var h=JSON.parse(d);if(h){for(a=0;a<h.length;a++)if(Array.isArray(h[a])){var m=h[a];if(!(2>m.length)){var T=m[1];if(Array.isArray(T)&&!(1>T.length)){var S=T[0];if(S!="noop"&&S!="stop"&&S!="close")for(var N=1;N<T.length;N++)T[N]=""}}}}return Il(h)}catch{return d}}var Wo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},xp={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Rl;function Ho(){}C(Ho,El),Ho.prototype.g=function(){return new XMLHttpRequest},Ho.prototype.i=function(){return{}},Rl=new Ho;function vn(a,d,h,m){this.j=a,this.i=d,this.l=h,this.R=m||1,this.U=new Zr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Dp}function Dp(){this.i=null,this.g="",this.h=!1}var kp={},Sl={};function Cl(a,d,h){a.L=1,a.v=Qo(Ye(d)),a.m=h,a.P=!0,Pp(a,null)}function Pp(a,d){a.F=Date.now(),Go(a),a.A=Ye(a.v);var h=a.A,m=a.R;Array.isArray(m)||(m=[String(m)]),Hp(h.i,"t",m),a.C=0,h=a.j.J,a.h=new Dp,a.g=ug(a.j,h?d:null,!a.m),0<a.O&&(a.M=new TI(b(a.Y,a,a.g),a.O)),d=a.U,h=a.g,m=a.ca;var T="readystatechange";Array.isArray(T)||(T&&(wp[0]=T.toString()),T=wp);for(var S=0;S<T.length;S++){var N=mp(h,T[S],m||d.handleEvent,!1,d.h||d);if(!N)break;d.g[N.key]=N}d=a.H?_(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),es(),SI(a.i,a.u,a.A,a.l,a.R,a.m)}vn.prototype.ca=function(a){a=a.target;let d=this.M;d&&Qe(a)==3?d.j():this.Y(a)},vn.prototype.Y=function(a){try{if(a==this.g)t:{let Xt=Qe(this.g);var d=this.g.Ba();let ji=this.g.Z();if(!(3>Xt)&&(Xt!=3||this.g&&(this.h.h||this.g.oa()||Zp(this.g)))){this.J||Xt!=4||d==7||(d==8||0>=ji?es(3):es(2)),xl(this);var h=this.g.Z();this.X=h;e:if(Op(this)){var m=Zp(this.g);a="";var T=m.length,S=Qe(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Hn(this),rs(this);var N="";break e}this.h.i=new c.TextDecoder}for(d=0;d<T;d++)this.h.h=!0,a+=this.h.i.decode(m[d],{stream:!(S&&d==T-1)});m.length=0,this.h.g+=a,this.C=0,N=this.h.g}else N=this.g.oa();if(this.o=h==200,CI(this.i,this.u,this.A,this.l,this.R,Xt,h),this.o){if(this.T&&!this.K){e:{if(this.g){var ut,zt=this.g;if((ut=zt.g?zt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$(ut)){var st=ut;break e}}st=null}if(h=st)Fi(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Dl(this,h);else{this.o=!1,this.s=3,ee(12),Hn(this),rs(this);break t}}if(this.P){h=!0;let ye;for(;!this.J&&this.C<N.length;)if(ye=kI(this,N),ye==Sl){Xt==4&&(this.s=4,ee(14),h=!1),Fi(this.i,this.l,null,"[Incomplete Response]");break}else if(ye==kp){this.s=4,ee(15),Fi(this.i,this.l,N,"[Invalid Chunk]"),h=!1;break}else Fi(this.i,this.l,ye,null),Dl(this,ye);if(Op(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Xt!=4||N.length!=0||this.h.h||(this.s=1,ee(16),h=!1),this.o=this.o&&h,!h)Fi(this.i,this.l,N,"[Invalid Chunked Response]"),Hn(this),rs(this);else if(0<N.length&&!this.W){this.W=!0;var Qt=this.j;Qt.g==this&&Qt.ba&&!Qt.M&&(Qt.j.info("Great, no buffering proxy detected. Bytes received: "+N.length),Ll(Qt),Qt.M=!0,ee(11))}}else Fi(this.i,this.l,N,null),Dl(this,N);Xt==4&&Hn(this),this.o&&!this.J&&(Xt==4?og(this.j,this):(this.o=!1,Go(this)))}else KI(this.g),h==400&&0<N.indexOf("Unknown SID")?(this.s=3,ee(12)):(this.s=0,ee(13)),Hn(this),rs(this)}}}catch{}finally{}};function Op(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function kI(a,d){var h=a.C,m=d.indexOf(`
`,h);return m==-1?Sl:(h=Number(d.substring(h,m)),isNaN(h)?kp:(m+=1,m+h>d.length?Sl:(d=d.slice(m,m+h),a.C=m+h,d)))}vn.prototype.cancel=function(){this.J=!0,Hn(this)};function Go(a){a.S=Date.now()+a.I,Np(a,a.I)}function Np(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=ns(b(a.ba,a),d)}function xl(a){a.B&&(c.clearTimeout(a.B),a.B=null)}vn.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(xI(this.i,this.A),this.L!=2&&(es(),ee(17)),Hn(this),this.s=2,rs(this)):Np(this,this.S-a)};function rs(a){a.j.G==0||a.J||og(a.j,a)}function Hn(a){xl(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,Ip(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function Dl(a,d){try{var h=a.j;if(h.G!=0&&(h.g==a||kl(h.h,a))){if(!a.K&&kl(h.h,a)&&h.G==3){try{var m=h.Da.g.parse(d)}catch{m=null}if(Array.isArray(m)&&m.length==3){var T=m;if(T[0]==0){t:if(!h.u){if(h.g)if(h.g.F+3e3<a.F)ea(h),Zo(h);else break t;Ml(h),ee(18)}}else h.za=T[1],0<h.za-h.T&&37500>T[2]&&h.F&&h.v==0&&!h.C&&(h.C=ns(b(h.Za,h),6e3));if(1>=Fp(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else Kn(h,11)}else if((a.K||h.g==a)&&ea(h),!$(d))for(T=h.Da.g.parse(d),d=0;d<T.length;d++){let st=T[d];if(h.T=st[0],st=st[1],h.G==2)if(st[0]=="c"){h.K=st[1],h.ia=st[2];let Qt=st[3];Qt!=null&&(h.la=Qt,h.j.info("VER="+h.la));let Xt=st[4];Xt!=null&&(h.Aa=Xt,h.j.info("SVER="+h.Aa));let ji=st[5];ji!=null&&typeof ji=="number"&&0<ji&&(m=1.5*ji,h.L=m,h.j.info("backChannelRequestTimeoutMs_="+m)),m=h;let ye=a.g;if(ye){let ia=ye.g?ye.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ia){var S=m.h;S.g||ia.indexOf("spdy")==-1&&ia.indexOf("quic")==-1&&ia.indexOf("h2")==-1||(S.j=S.l,S.g=new Set,S.h&&(Pl(S,S.h),S.h=null))}if(m.D){let Fl=ye.g?ye.g.getResponseHeader("X-HTTP-Session-Id"):null;Fl&&(m.ya=Fl,pt(m.I,m.D,Fl))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-a.F,h.j.info("Handshake RTT: "+h.R+"ms")),m=h;var N=a;if(m.qa=lg(m,m.J?m.ia:null,m.W),N.K){Vp(m.h,N);var ut=N,zt=m.L;zt&&(ut.I=zt),ut.B&&(xl(ut),Go(ut)),m.g=N}else rg(m);0<h.i.length&&ta(h)}else st[0]!="stop"&&st[0]!="close"||Kn(h,7);else h.G==3&&(st[0]=="stop"||st[0]=="close"?st[0]=="stop"?Kn(h,7):Nl(h):st[0]!="noop"&&h.l&&h.l.ta(st),h.v=0)}}es(4)}catch{}}var PI=class{constructor(a,d){this.g=a,this.map=d}};function Mp(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Lp(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Fp(a){return a.h?1:a.g?a.g.size:0}function kl(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function Pl(a,d){a.g?a.g.add(d):a.h=d}function Vp(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}Mp.prototype.cancel=function(){if(this.i=Up(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function Up(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(let h of a.g.values())d=d.concat(h.D);return d}return P(a.i)}function OI(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(l(a)){for(var d=[],h=a.length,m=0;m<h;m++)d.push(a[m]);return d}d=[],h=0;for(m in a)d[h++]=a[m];return d}function NI(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(l(a)||typeof a=="string"){var d=[];a=a.length;for(var h=0;h<a;h++)d.push(h);return d}d=[],h=0;for(let m in a)d[h++]=m;return d}}}function jp(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(l(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var h=NI(a),m=OI(a),T=m.length,S=0;S<T;S++)d.call(void 0,m[S],h&&h[S],a)}var Bp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function MI(a,d){if(a){a=a.split("&");for(var h=0;h<a.length;h++){var m=a[h].indexOf("="),T=null;if(0<=m){var S=a[h].substring(0,m);T=a[h].substring(m+1)}else S=a[h];d(S,T?decodeURIComponent(T.replace(/\+/g," ")):"")}}}function Gn(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Gn){this.h=a.h,Ko(this,a.j),this.o=a.o,this.g=a.g,Yo(this,a.s),this.l=a.l;var d=a.i,h=new as;h.i=d.i,d.g&&(h.g=new Map(d.g),h.h=d.h),zp(this,h),this.m=a.m}else a&&(d=String(a).match(Bp))?(this.h=!1,Ko(this,d[1]||"",!0),this.o=ss(d[2]||""),this.g=ss(d[3]||"",!0),Yo(this,d[4]),this.l=ss(d[5]||"",!0),zp(this,d[6]||"",!0),this.m=ss(d[7]||"")):(this.h=!1,this.i=new as(null,this.h))}Gn.prototype.toString=function(){var a=[],d=this.j;d&&a.push(os(d,$p,!0),":");var h=this.g;return(h||d=="file")&&(a.push("//"),(d=this.o)&&a.push(os(d,$p,!0),"@"),a.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&a.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&a.push("/"),a.push(os(h,h.charAt(0)=="/"?VI:FI,!0))),(h=this.i.toString())&&a.push("?",h),(h=this.m)&&a.push("#",os(h,jI)),a.join("")};function Ye(a){return new Gn(a)}function Ko(a,d,h){a.j=h?ss(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function Yo(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function zp(a,d,h){d instanceof as?(a.i=d,BI(a.i,a.h)):(h||(d=os(d,UI)),a.i=new as(d,a.h))}function pt(a,d,h){a.i.set(d,h)}function Qo(a){return pt(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function ss(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function os(a,d,h){return typeof a=="string"?(a=encodeURI(a).replace(d,LI),h&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function LI(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var $p=/[#\/\?@]/g,FI=/[#\?:]/g,VI=/[#\?]/g,UI=/[#\?@]/g,jI=/#/g;function as(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function yn(a){a.g||(a.g=new Map,a.h=0,a.i&&MI(a.i,function(d,h){a.add(decodeURIComponent(d.replace(/\+/g," ")),h)}))}n=as.prototype,n.add=function(a,d){yn(this),this.i=null,a=Vi(this,a);var h=this.g.get(a);return h||this.g.set(a,h=[]),h.push(d),this.h+=1,this};function qp(a,d){yn(a),d=Vi(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function Wp(a,d){return yn(a),d=Vi(a,d),a.g.has(d)}n.forEach=function(a,d){yn(this),this.g.forEach(function(h,m){h.forEach(function(T){a.call(d,T,m,this)},this)},this)},n.na=function(){yn(this);let a=Array.from(this.g.values()),d=Array.from(this.g.keys()),h=[];for(let m=0;m<d.length;m++){let T=a[m];for(let S=0;S<T.length;S++)h.push(d[m])}return h},n.V=function(a){yn(this);let d=[];if(typeof a=="string")Wp(this,a)&&(d=d.concat(this.g.get(Vi(this,a))));else{a=Array.from(this.g.values());for(let h=0;h<a.length;h++)d=d.concat(a[h])}return d},n.set=function(a,d){return yn(this),this.i=null,a=Vi(this,a),Wp(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},n.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function Hp(a,d,h){qp(a,d),0<h.length&&(a.i=null,a.g.set(Vi(a,d),P(h)),a.h+=h.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],d=Array.from(this.g.keys());for(var h=0;h<d.length;h++){var m=d[h];let S=encodeURIComponent(String(m)),N=this.V(m);for(m=0;m<N.length;m++){var T=S;N[m]!==""&&(T+="="+encodeURIComponent(String(N[m]))),a.push(T)}}return this.i=a.join("&")};function Vi(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function BI(a,d){d&&!a.j&&(yn(a),a.i=null,a.g.forEach(function(h,m){var T=m.toLowerCase();m!=T&&(qp(this,m),Hp(this,T,h))},a)),a.j=d}function zI(a,d){let h=new is;if(c.Image){let m=new Image;m.onload=A(wn,h,"TestLoadImage: loaded",!0,d,m),m.onerror=A(wn,h,"TestLoadImage: error",!1,d,m),m.onabort=A(wn,h,"TestLoadImage: abort",!1,d,m),m.ontimeout=A(wn,h,"TestLoadImage: timeout",!1,d,m),c.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=a}else d(!1)}function $I(a,d){let h=new is,m=new AbortController,T=setTimeout(()=>{m.abort(),wn(h,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:m.signal}).then(S=>{clearTimeout(T),S.ok?wn(h,"TestPingServer: ok",!0,d):wn(h,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(T),wn(h,"TestPingServer: error",!1,d)})}function wn(a,d,h,m,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),m(h)}catch{}}function qI(){this.g=new RI}function WI(a,d,h){let m=h||"";try{jp(a,function(T,S){let N=T;u(T)&&(N=Il(T)),d.push(m+S+"="+encodeURIComponent(N))})}catch(T){throw d.push(m+"type="+encodeURIComponent("_badmap")),T}}function cs(a){this.l=a.Ub||null,this.j=a.eb||!1}C(cs,El),cs.prototype.g=function(){return new Xo(this.l,this.j)},cs.prototype.i=function(a){return function(){return a}}({});function Xo(a,d){Yt.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(Xo,Yt),n=Xo.prototype,n.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,us(this)},n.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||c).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ls(this)),this.readyState=0},n.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,us(this)),this.g&&(this.readyState=3,us(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Gp(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Gp(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}n.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?ls(this):us(this),this.readyState==3&&Gp(this)}},n.Ra=function(a){this.g&&(this.response=this.responseText=a,ls(this))},n.Qa=function(a){this.g&&(this.response=a,ls(this))},n.ga=function(){this.g&&ls(this)};function ls(a){a.readyState=4,a.l=null,a.j=null,a.v=null,us(a)}n.setRequestHeader=function(a,d){this.u.append(a,d)},n.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],d=this.h.entries();for(var h=d.next();!h.done;)h=h.value,a.push(h[0]+": "+h[1]),h=d.next();return a.join(`\r
`)};function us(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Xo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Kp(a){let d="";return rt(a,function(h,m){d+=m,d+=":",d+=h,d+=`\r
`}),d}function Ol(a,d,h){t:{for(m in h){var m=!1;break t}m=!0}m||(h=Kp(h),typeof a=="string"?h!=null&&encodeURIComponent(String(h)):pt(a,d,h))}function bt(a){Yt.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(bt,Yt);var HI=/^https?$/i,GI=["POST","PUT"];n=bt.prototype,n.Ha=function(a){this.J=a},n.ea=function(a,d,h,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Rl.g(),this.v=this.o?Ep(this.o):Ep(Rl),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(S){Yp(this,S);return}if(a=h||"",h=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var T in m)h.set(T,m[T]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let S of m.keys())h.set(S,m.get(S));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(h.keys()).find(S=>S.toLowerCase()=="content-type"),T=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(GI,d,void 0))||m||T||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[S,N]of h)this.g.setRequestHeader(S,N);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Jp(this),this.u=!0,this.g.send(a),this.u=!1}catch(S){Yp(this,S)}};function Yp(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,Qp(a),Jo(a)}function Qp(a){a.A||(a.A=!0,te(a,"complete"),te(a,"error"))}n.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,te(this,"complete"),te(this,"abort"),Jo(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Jo(this,!0)),bt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Xp(this):this.bb())},n.bb=function(){Xp(this)};function Xp(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Qe(a)!=4||a.Z()!=2)){if(a.u&&Qe(a)==4)vp(a.Ea,0,a);else if(te(a,"readystatechange"),Qe(a)==4){a.h=!1;try{let N=a.Z();t:switch(N){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break t;default:d=!1}var h;if(!(h=d)){var m;if(m=N===0){var T=String(a.D).match(Bp)[1]||null;!T&&c.self&&c.self.location&&(T=c.self.location.protocol.slice(0,-1)),m=!HI.test(T?T.toLowerCase():"")}h=m}if(h)te(a,"complete"),te(a,"success");else{a.m=6;try{var S=2<Qe(a)?a.g.statusText:""}catch{S=""}a.l=S+" ["+a.Z()+"]",Qp(a)}}finally{Jo(a)}}}}function Jo(a,d){if(a.g){Jp(a);let h=a.g,m=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||te(a,"ready");try{h.onreadystatechange=m}catch{}}}function Jp(a){a.I&&(c.clearTimeout(a.I),a.I=null)}n.isActive=function(){return!!this.g};function Qe(a){return a.g?a.g.readyState:0}n.Z=function(){try{return 2<Qe(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),AI(d)}};function Zp(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function KI(a){let d={};a=(a.g&&2<=Qe(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<a.length;m++){if($(a[m]))continue;var h=E(a[m]);let T=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let S=d[T]||[];d[T]=S,S.push(h)}I(d,function(m){return m.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ds(a,d,h){return h&&h.internalChannelParams&&h.internalChannelParams[a]||d}function tg(a){this.Aa=0,this.i=[],this.j=new is,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ds("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ds("baseRetryDelayMs",5e3,a),this.cb=ds("retryDelaySeedMs",1e4,a),this.Wa=ds("forwardChannelMaxRetries",2,a),this.wa=ds("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Mp(a&&a.concurrentRequestLimit),this.Da=new qI,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=tg.prototype,n.la=8,n.G=1,n.connect=function(a,d,h,m){ee(0),this.W=a,this.H=d||{},h&&m!==void 0&&(this.H.OSID=h,this.H.OAID=m),this.F=this.X,this.I=lg(this,null,this.W),ta(this)};function Nl(a){if(eg(a),a.G==3){var d=a.U++,h=Ye(a.I);if(pt(h,"SID",a.K),pt(h,"RID",d),pt(h,"TYPE","terminate"),hs(a,h),d=new vn(a,a.j,d),d.L=2,d.v=Qo(Ye(h)),h=!1,c.navigator&&c.navigator.sendBeacon)try{h=c.navigator.sendBeacon(d.v.toString(),"")}catch{}!h&&c.Image&&(new Image().src=d.v,h=!0),h||(d.g=ug(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Go(d)}cg(a)}function Zo(a){a.g&&(Ll(a),a.g.cancel(),a.g=null)}function eg(a){Zo(a),a.u&&(c.clearTimeout(a.u),a.u=null),ea(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function ta(a){if(!Lp(a.h)&&!a.s){a.s=!0;var d=a.Ga;Yr||fp(),Qr||(Yr(),Qr=!0),fl.add(d,a),a.B=0}}function YI(a,d){return Fp(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=ns(b(a.Ga,a,d),ag(a,a.B)),a.B++,!0)}n.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let T=new vn(this,this.j,a),S=this.o;if(this.S&&(S?(S=_(S),w(S,this.S)):S=this.S),this.m!==null||this.O||(T.H=S,S=null),this.P)t:{for(var d=0,h=0;h<this.i.length;h++){e:{var m=this.i[h];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break e}m=void 0}if(m===void 0)break;if(d+=m,4096<d){d=h;break t}if(d===4096||h===this.i.length-1){d=h+1;break t}}d=1e3}else d=1e3;d=ig(this,T,d),h=Ye(this.I),pt(h,"RID",a),pt(h,"CVER",22),this.D&&pt(h,"X-HTTP-Session-Id",this.D),hs(this,h),S&&(this.O?d="headers="+encodeURIComponent(String(Kp(S)))+"&"+d:this.m&&Ol(h,this.m,S)),Pl(this.h,T),this.Ua&&pt(h,"TYPE","init"),this.P?(pt(h,"$req",d),pt(h,"SID","null"),T.T=!0,Cl(T,h,null)):Cl(T,h,d),this.G=2}}else this.G==3&&(a?ng(this,a):this.i.length==0||Lp(this.h)||ng(this))};function ng(a,d){var h;d?h=d.l:h=a.U++;let m=Ye(a.I);pt(m,"SID",a.K),pt(m,"RID",h),pt(m,"AID",a.T),hs(a,m),a.m&&a.o&&Ol(m,a.m,a.o),h=new vn(a,a.j,h,a.B+1),a.m===null&&(h.H=a.o),d&&(a.i=d.D.concat(a.i)),d=ig(a,h,1e3),h.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Pl(a.h,h),Cl(h,m,d)}function hs(a,d){a.H&&rt(a.H,function(h,m){pt(d,m,h)}),a.l&&jp({},function(h,m){pt(d,m,h)})}function ig(a,d,h){h=Math.min(a.i.length,h);var m=a.l?b(a.l.Na,a.l,a):null;t:{var T=a.i;let S=-1;for(;;){let N=["count="+h];S==-1?0<h?(S=T[0].g,N.push("ofs="+S)):S=0:N.push("ofs="+S);let ut=!0;for(let zt=0;zt<h;zt++){let st=T[zt].g,Qt=T[zt].map;if(st-=S,0>st)S=Math.max(0,T[zt].g-100),ut=!1;else try{WI(Qt,N,"req"+st+"_")}catch{m&&m(Qt)}}if(ut){m=N.join("&");break t}}}return a=a.i.splice(0,h),d.D=a,m}function rg(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;Yr||fp(),Qr||(Yr(),Qr=!0),fl.add(d,a),a.v=0}}function Ml(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=ns(b(a.Fa,a),ag(a,a.v)),a.v++,!0)}n.Fa=function(){if(this.u=null,sg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=ns(b(this.ab,this),a)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ee(10),Zo(this),sg(this))};function Ll(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function sg(a){a.g=new vn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=Ye(a.qa);pt(d,"RID","rpc"),pt(d,"SID",a.K),pt(d,"AID",a.T),pt(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&pt(d,"TO",a.ja),pt(d,"TYPE","xmlhttp"),hs(a,d),a.m&&a.o&&Ol(d,a.m,a.o),a.L&&(a.g.I=a.L);var h=a.g;a=a.ia,h.L=1,h.v=Qo(Ye(d)),h.m=null,h.P=!0,Pp(h,a)}n.Za=function(){this.C!=null&&(this.C=null,Zo(this),Ml(this),ee(19))};function ea(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function og(a,d){var h=null;if(a.g==d){ea(a),Ll(a),a.g=null;var m=2}else if(kl(a.h,d))h=d.D,Vp(a.h,d),m=1;else return;if(a.G!=0){if(d.o)if(m==1){h=d.m?d.m.length:0,d=Date.now()-d.F;var T=a.B;m=qo(),te(m,new Cp(m,h)),ta(a)}else rg(a);else if(T=d.s,T==3||T==0&&0<d.X||!(m==1&&YI(a,d)||m==2&&Ml(a)))switch(h&&0<h.length&&(d=a.h,d.i=d.i.concat(h)),T){case 1:Kn(a,5);break;case 4:Kn(a,10);break;case 3:Kn(a,6);break;default:Kn(a,2)}}}function ag(a,d){let h=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(h*=2),h*d}function Kn(a,d){if(a.j.info("Error code "+d),d==2){var h=b(a.fb,a),m=a.Xa;let T=!m;m=new Gn(m||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ko(m,"https"),Qo(m),T?zI(m.toString(),h):$I(m.toString(),h)}else ee(2);a.G=0,a.l&&a.l.sa(d),cg(a),eg(a)}n.fb=function(a){a?(this.j.info("Successfully pinged google.com"),ee(2)):(this.j.info("Failed to ping google.com"),ee(1))};function cg(a){if(a.G=0,a.ka=[],a.l){let d=Up(a.h);(d.length!=0||a.i.length!=0)&&(D(a.ka,d),D(a.ka,a.i),a.h.i.length=0,P(a.i),a.i.length=0),a.l.ra()}}function lg(a,d,h){var m=h instanceof Gn?Ye(h):new Gn(h);if(m.g!="")d&&(m.g=d+"."+m.g),Yo(m,m.s);else{var T=c.location;m=T.protocol,d=d?d+"."+T.hostname:T.hostname,T=+T.port;var S=new Gn(null);m&&Ko(S,m),d&&(S.g=d),T&&Yo(S,T),h&&(S.l=h),m=S}return h=a.D,d=a.ya,h&&d&&pt(m,h,d),pt(m,"VER",a.la),hs(a,m),m}function ug(a,d,h){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new bt(new cs({eb:h})):new bt(a.pa),d.Ha(a.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function dg(){}n=dg.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function na(){}na.prototype.g=function(a,d){return new ae(a,d)};function ae(a,d){Yt.call(this),this.g=new tg(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!$(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!$(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new Ui(this)}C(ae,Yt),ae.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ae.prototype.close=function(){Nl(this.g)},ae.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var h={};h.__data__=a,a=h}else this.u&&(h={},h.__data__=Il(a),a=h);d.i.push(new PI(d.Ya++,a)),d.G==3&&ta(d)},ae.prototype.N=function(){this.g.l=null,delete this.j,Nl(this.g),delete this.g,ae.aa.N.call(this)};function hg(a){Tl.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){t:{for(let h in d){a=h;break t}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}C(hg,Tl);function fg(){Al.call(this),this.status=1}C(fg,Al);function Ui(a){this.g=a}C(Ui,dg),Ui.prototype.ua=function(){te(this.g,"a")},Ui.prototype.ta=function(a){te(this.g,new hg(a))},Ui.prototype.sa=function(a){te(this.g,new fg)},Ui.prototype.ra=function(){te(this.g,"b")},na.prototype.createWebChannel=na.prototype.g,ae.prototype.send=ae.prototype.o,ae.prototype.open=ae.prototype.m,ae.prototype.close=ae.prototype.close,af=fn.createWebChannelTransport=function(){return new na},of=fn.getStatEventTarget=function(){return qo()},sf=fn.Event=Wn,wc=fn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Wo.NO_ERROR=0,Wo.TIMEOUT=8,Wo.HTTP_ERROR=6,vo=fn.ErrorCode=Wo,xp.COMPLETE="complete",rf=fn.EventType=xp,Tp.EventType=ts,ts.OPEN="a",ts.CLOSE="b",ts.ERROR="c",ts.MESSAGE="d",Yt.prototype.listen=Yt.prototype.K,Tr=fn.WebChannel=Tp,nf=fn.FetchXmlHttpFactory=cs,bt.prototype.listenOnce=bt.prototype.L,bt.prototype.getLastError=bt.prototype.Ka,bt.prototype.getLastErrorCode=bt.prototype.Ba,bt.prototype.getStatus=bt.prototype.Z,bt.prototype.getResponseJson=bt.prototype.Oa,bt.prototype.getResponseText=bt.prototype.oa,bt.prototype.send=bt.prototype.ea,bt.prototype.setWithCredentials=bt.prototype.Ha,ef=fn.XhrIo=bt}).apply(typeof yc<"u"?yc:typeof self<"u"?self:typeof window<"u"?window:{});var Py="@firebase/firestore";var Bt=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};Bt.UNAUTHENTICATED=new Bt(null),Bt.GOOGLE_CREDENTIALS=new Bt("google-credentials-uid"),Bt.FIRST_PARTY=new Bt("first-party-uid"),Bt.MOCK_USER=new Bt("mock-user");var Wr="10.12.1";var xi=new Pn("@firebase/firestore");function yo(){return xi.logLevel}function F(n,...t){if(xi.logLevel<=tt.DEBUG){let e=t.map(zm);xi.debug(`Firestore (${Wr}): ${n}`,...e)}}function pn(n,...t){if(xi.logLevel<=tt.ERROR){let e=t.map(zm);xi.error(`Firestore (${Wr}): ${n}`,...e)}}function kr(n,...t){if(xi.logLevel<=tt.WARN){let e=t.map(zm);xi.warn(`Firestore (${Wr}): ${n}`,...e)}}function zm(n){if(typeof n=="string")return n;try{return function(e){return JSON.stringify(e)}(n)}catch{return n}}function W(n="Unexpected state"){let t=`FIRESTORE (${Wr}) INTERNAL ASSERTION FAILED: `+n;throw pn(t),new Error(t)}function mt(n,t){n||W()}function K(n,t){return n}var k={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},U=class extends ne{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Se=class{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}};var Rc=class{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}},hf=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(Bt.UNAUTHENTICATED))}shutdown(){}},ff=class{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}},mf=class{constructor(t){this.t=t,this.currentUser=Bt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let i=this.i,r=l=>this.i!==i?(i=this.i,e(l)):Promise.resolve(),s=new Se;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Se,t.enqueueRetryable(()=>r(this.currentUser))};let o=()=>{let l=s;t.enqueueRetryable(()=>g(this,null,function*(){yield l.promise,yield r(this.currentUser)}))},c=l=>{F("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>c(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?c(l):(F("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Se)}},0),o()}getToken(){let t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(F("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(mt(typeof i.accessToken=="string"),new Rc(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let t=this.auth&&this.auth.getUid();return mt(t===null||typeof t=="string"),new Bt(t)}},pf=class{constructor(t,e,i){this.l=t,this.h=e,this.P=i,this.type="FirstParty",this.user=Bt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},gf=class{constructor(t,e,i){this.l=t,this.h=e,this.P=i}getToken(){return Promise.resolve(new pf(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable(()=>e(Bt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},_f=class{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},bf=class{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){let i=s=>{s.error!=null&&F("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,F("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?e(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};let r=s=>{F("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?r(s):F("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(mt(typeof e.token=="string"),this.R=e.token,new _f(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function BD(n){let t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}var Sc=class{static newId(){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,i="";for(;i.length<20;){let r=BD(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<e&&(i+=t.charAt(r[s]%t.length))}return i}};function ot(n,t){return n<t?-1:n>t?1:0}function Pr(n,t,e){return n.length===t.length&&n.every((i,r)=>e(i,t[r]))}var Ht=class n{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new U(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new U(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new U(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new U(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return n.fromMillis(Date.now())}static fromDate(t){return n.fromMillis(t.getTime())}static fromMillis(t){let e=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*e));return new n(e,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?ot(this.nanoseconds,t.nanoseconds):ot(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var Y=class n{constructor(t){this.timestamp=t}static fromTimestamp(t){return new n(t)}static min(){return new n(new Ht(0,0))}static max(){return new n(new Ht(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Cc=class n{constructor(t,e,i){e===void 0?e=0:e>t.length&&W(),i===void 0?i=t.length-e:i>t.length-e&&W(),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return n.comparator(this,t)===0}child(t){let e=this.segments.slice(this.offset,this.limit());return t instanceof n?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){let i=Math.min(t.length,e.length);for(let r=0;r<i;r++){let s=t.get(r),o=e.get(r);if(s<o)return-1;if(s>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0}},It=class n extends Cc{construct(t,e,i){return new n(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){let e=[];for(let i of t){if(i.indexOf("//")>=0)throw new U(k.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(r=>r.length>0))}return new n(e)}static emptyPath(){return new n([])}},zD=/^[_a-zA-Z][_a-zA-Z0-9]*$/,he=class n extends Cc{construct(t,e,i){return new n(t,e,i)}static isValidIdentifier(t){return zD.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(t){let e=[],i="",r=0,s=()=>{if(i.length===0)throw new U(k.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""},o=!1;for(;r<t.length;){let c=t[r];if(c==="\\"){if(r+1===t.length)throw new U(k.INVALID_ARGUMENT,"Path has trailing escape character: "+t);let l=t[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new U(k.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=l,r+=2}else c==="`"?(o=!o,r++):c!=="."||o?(i+=c,r++):(s(),r++)}if(s(),o)throw new U(k.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new n(e)}static emptyPath(){return new n([])}};var z=class n{constructor(t){this.path=t}static fromPath(t){return new n(It.fromString(t))}static fromName(t){return new n(It.fromString(t).popFirst(5))}static empty(){return new n(It.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&It.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return It.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new n(new It(t.slice()))}};var vf=class{constructor(t,e,i,r){this.indexId=t,this.collectionGroup=e,this.fields=i,this.indexState=r}};vf.UNKNOWN_ID=-1;function $D(n,t){let e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Y.fromTimestamp(i===1e9?new Ht(e+1,0):new Ht(e,i));return new Di(r,z.empty(),t)}function qD(n){return new Di(n.readTime,n.key,-1)}var Di=class n{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new n(Y.min(),z.empty(),-1)}static max(){return new n(Y.max(),z.empty(),-1)}};function WD(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=z.comparator(n.documentKey,t.documentKey),e!==0?e:ot(n.largestBatchId,t.largestBatchId))}var HD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",yf=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}};function Lo(n){return g(this,null,function*(){if(n.code!==k.FAILED_PRECONDITION||n.message!==HD)throw n;F("LocalStore","Unexpectedly lost primary lease")})}var O=class n{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&W(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new n((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(e,s).next(i,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{let e=t();return e instanceof n?e:n.resolve(e)}catch(e){return n.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):n.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):n.reject(e)}static resolve(t){return new n((e,i)=>{e(t)})}static reject(t){return new n((e,i)=>{i(t)})}static waitFor(t){return new n((e,i)=>{let r=0,s=0,o=!1;t.forEach(c=>{++r,c.next(()=>{++s,o&&s===r&&e()},l=>i(l))}),o=!0,s===r&&e()})}static or(t){let e=n.resolve(!1);for(let i of t)e=e.next(r=>r?n.resolve(r):i());return e}static forEach(t,e){let i=[];return t.forEach((r,s)=>{i.push(e.call(this,r,s))}),this.waitFor(i)}static mapArray(t,e){return new n((i,r)=>{let s=t.length,o=new Array(s),c=0;for(let l=0;l<s;l++){let u=l;e(t[u]).next(f=>{o[u]=f,++c,c===s&&i(o)},f=>r(f))}})}static doWhile(t,e){return new n((i,r)=>{let s=()=>{t()===!0?e().next(()=>{s()},r):i()};s()})}};function GD(n){let t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function Fo(n){return n.name==="IndexedDbTransactionError"}var ow=(()=>{class n{constructor(e,i){this.previousValue=e,i&&(i.sequenceNumberHandler=r=>this.ie(r),this.se=r=>i.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.se&&this.se(e),e}}return n.oe=-1,n})();function ol(n){return n==null}function Ro(n){return n===0&&1/n==-1/0}function KD(n){return typeof n=="number"&&Number.isInteger(n)&&!Ro(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var YD=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],KF=[...YD,"documentOverlays"],QD=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],XD=QD,YF=[...XD,"indexConfiguration","indexState","indexEntries"];function Oy(n){let t=0;for(let e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function Mi(n,t){for(let e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function aw(n){for(let t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}var Et=class n{constructor(t,e){this.comparator=t,this.root=e||Ve.EMPTY}insert(t,e){return new n(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Ve.BLACK,null,null))}remove(t){return new n(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ve.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){let i=this.comparator(t,e.key);if(i===0)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(t,i.key);if(r===0)return e+i.left.size;r<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){let t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Cr(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Cr(this.root,t,this.comparator,!1)}getReverseIterator(){return new Cr(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Cr(this.root,t,this.comparator,!0)}},Cr=class{constructor(t,e,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?i(t.key,e):1,e&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}},Ve=class n{constructor(t,e,i,r,s){this.key=t,this.value=e,this.color=i??n.RED,this.left=r??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,r,s){return new n(t??this.key,e??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let r=this,s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,e,i),null):s===0?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),e(t,r.key)===0){if(r.right.isEmpty())return n.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){let t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){let t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){let t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){let t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw W();let t=this.left.check();if(t!==this.right.check())throw W();return t+(this.isRed()?0:1)}};Ve.EMPTY=null,Ve.RED=!0,Ve.BLACK=!1;Ve.EMPTY=new class{constructor(){this.size=0}get key(){throw W()}get value(){throw W()}get color(){throw W()}get left(){throw W()}get right(){throw W()}copy(t,e,i,r,s){return this}insert(t,e,i){return new Ve(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Zt=class n{constructor(t){this.comparator=t,this.data=new Et(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){let i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let i;for(i=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){let e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new xc(this.data.getIterator())}getIteratorFrom(t){return new xc(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof n)||this.size!==t.size)return!1;let e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){let r=e.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){let t=[];return this.forEach(e=>{t.push(e)}),t}toString(){let t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){let e=new n(this.comparator);return e.data=t,e}},xc=class{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var ve=class n{constructor(t){this.fields=t,t.sort(he.comparator)}static empty(){return new n([])}unionWith(t){let e=new Zt(he.comparator);for(let i of this.fields)e=e.add(i);for(let i of t)e=e.add(i);return new n(e.toArray())}covers(t){for(let e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Pr(this.fields,t.fields,(e,i)=>e.isEqual(i))}};var Dc=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var ie=class n{constructor(t){this.binaryString=t}static fromBase64String(t){let e=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Dc("Invalid base64 string: "+s):s}}(t);return new n(e)}static fromUint8Array(t){let e=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(t);return new n(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){let i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return ot(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}};ie.EMPTY_BYTE_STRING=new ie("");var JD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gn(n){if(mt(!!n),typeof n=="string"){let t=0,e=JD.exec(n);if(mt(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}let i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:wt(n.seconds),nanos:wt(n.nanos)}}function wt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Bn(n){return typeof n=="string"?ie.fromBase64String(n):ie.fromUint8Array(n)}function $m(n){var t,e;return((e=(((t=n?.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||e===void 0?void 0:e.stringValue)==="server_timestamp"}function qm(n){let t=n.mapValue.fields.__previous_value__;return $m(t)?qm(t):t}function So(n){let t=gn(n.mapValue.fields.__local_write_time__.timestampValue);return new Ht(t.seconds,t.nanos)}var wf=class{constructor(t,e,i,r,s,o,c,l,u){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=u}},kc=class n{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof n&&t.projectId===this.projectId&&t.database===this.database}};var Ic={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ki(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?$m(n)?4:cw(n)?9007199254740991:10:W()}function Be(n,t){if(n===t)return!0;let e=ki(n);if(e!==ki(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return So(n).isEqual(So(t));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;let o=gn(r.timestampValue),c=gn(s.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(r,s){return Bn(r.bytesValue).isEqual(Bn(s.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(r,s){return wt(r.geoPointValue.latitude)===wt(s.geoPointValue.latitude)&&wt(r.geoPointValue.longitude)===wt(s.geoPointValue.longitude)}(n,t);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return wt(r.integerValue)===wt(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){let o=wt(r.doubleValue),c=wt(s.doubleValue);return o===c?Ro(o)===Ro(c):isNaN(o)&&isNaN(c)}return!1}(n,t);case 9:return Pr(n.arrayValue.values||[],t.arrayValue.values||[],Be);case 10:return function(r,s){let o=r.mapValue.fields||{},c=s.mapValue.fields||{};if(Oy(o)!==Oy(c))return!1;for(let l in o)if(o.hasOwnProperty(l)&&(c[l]===void 0||!Be(o[l],c[l])))return!1;return!0}(n,t);default:return W()}}function Co(n,t){return(n.values||[]).find(e=>Be(e,t))!==void 0}function Or(n,t){if(n===t)return 0;let e=ki(n),i=ki(t);if(e!==i)return ot(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return ot(n.booleanValue,t.booleanValue);case 2:return function(s,o){let c=wt(s.integerValue||s.doubleValue),l=wt(o.integerValue||o.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1}(n,t);case 3:return Ny(n.timestampValue,t.timestampValue);case 4:return Ny(So(n),So(t));case 5:return ot(n.stringValue,t.stringValue);case 6:return function(s,o){let c=Bn(s),l=Bn(o);return c.compareTo(l)}(n.bytesValue,t.bytesValue);case 7:return function(s,o){let c=s.split("/"),l=o.split("/");for(let u=0;u<c.length&&u<l.length;u++){let f=ot(c[u],l[u]);if(f!==0)return f}return ot(c.length,l.length)}(n.referenceValue,t.referenceValue);case 8:return function(s,o){let c=ot(wt(s.latitude),wt(o.latitude));return c!==0?c:ot(wt(s.longitude),wt(o.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return function(s,o){let c=s.values||[],l=o.values||[];for(let u=0;u<c.length&&u<l.length;++u){let f=Or(c[u],l[u]);if(f)return f}return ot(c.length,l.length)}(n.arrayValue,t.arrayValue);case 10:return function(s,o){if(s===Ic.mapValue&&o===Ic.mapValue)return 0;if(s===Ic.mapValue)return 1;if(o===Ic.mapValue)return-1;let c=s.fields||{},l=Object.keys(c),u=o.fields||{},f=Object.keys(u);l.sort(),f.sort();for(let p=0;p<l.length&&p<f.length;++p){let b=ot(l[p],f[p]);if(b!==0)return b;let A=Or(c[l[p]],u[f[p]]);if(A!==0)return A}return ot(l.length,f.length)}(n.mapValue,t.mapValue);default:throw W()}}function Ny(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return ot(n,t);let e=gn(n),i=gn(t),r=ot(e.seconds,i.seconds);return r!==0?r:ot(e.nanos,i.nanos)}function Nr(n){return If(n)}function If(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(e){let i=gn(e);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(e){return Bn(e).toBase64()}(n.bytesValue):"referenceValue"in n?function(e){return z.fromName(e).toString()}(n.referenceValue):"geoPointValue"in n?function(e){return`geo(${e.latitude},${e.longitude})`}(n.geoPointValue):"arrayValue"in n?function(e){let i="[",r=!0;for(let s of e.values||[])r?r=!1:i+=",",i+=If(s);return i+"]"}(n.arrayValue):"mapValue"in n?function(e){let i=Object.keys(e.fields||{}).sort(),r="{",s=!0;for(let o of i)s?s=!1:r+=",",r+=`${o}:${If(e.fields[o])}`;return r+"}"}(n.mapValue):W()}function Ef(n){return!!n&&"integerValue"in n}function Wm(n){return!!n&&"arrayValue"in n}function My(n){return!!n&&"nullValue"in n}function Ly(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Tc(n){return!!n&&"mapValue"in n}function Io(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let t={mapValue:{fields:{}}};return Mi(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=Io(i)),t}if(n.arrayValue){let t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Io(n.arrayValue.values[e]);return t}return Object.assign({},n)}function cw(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var de=class n{constructor(t){this.value=t}static empty(){return new n({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!Tc(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Io(e)}setAll(t){let e=he.emptyPath(),i={},r=[];t.forEach((o,c)=>{if(!e.isImmediateParentOf(c)){let l=this.getFieldsMap(e);this.applyChanges(l,i,r),i={},r=[],e=c.popLast()}o?i[c.lastSegment()]=Io(o):r.push(c.lastSegment())});let s=this.getFieldsMap(e);this.applyChanges(s,i,r)}delete(t){let e=this.field(t.popLast());Tc(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Be(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=e.mapValue.fields[t.get(i)];Tc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,i){Mi(e,(r,s)=>t[r]=s);for(let r of i)delete t[r]}clone(){return new n(Io(this.value))}};function lw(n){let t=[];return Mi(n.fields,(e,i)=>{let r=new he([e]);if(Tc(i)){let s=lw(i.mapValue).fields;if(s.length===0)t.push(r);else for(let o of s)t.push(r.child(o))}else t.push(r)}),new ve(t)}var Ce=class n{constructor(t,e,i,r,s,o,c){this.key=t,this.documentType=e,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=c}static newInvalidDocument(t){return new n(t,0,Y.min(),Y.min(),Y.min(),de.empty(),0)}static newFoundDocument(t,e,i,r){return new n(t,1,e,Y.min(),i,r,0)}static newNoDocument(t,e){return new n(t,2,e,Y.min(),Y.min(),de.empty(),0)}static newUnknownDocument(t,e){return new n(t,3,e,Y.min(),Y.min(),de.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Y.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=de.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=de.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Y.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof n&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Mr=class{constructor(t,e){this.position=t,this.inclusive=e}};function Fy(n,t,e){let i=0;for(let r=0;r<n.position.length;r++){let s=t[r],o=n.position[r];if(s.field.isKeyField()?i=z.comparator(z.fromName(o.referenceValue),e.key):i=Or(o,e.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function Vy(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!Be(n.position[e],t.position[e]))return!1;return!0}var Lr=class{constructor(t,e="asc"){this.field=t,this.dir=e}};function ZD(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}var Pc=class{},jt=class n extends Pc{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,i):new Af(t,e,i):e==="array-contains"?new Cf(t,i):e==="in"?new xf(t,i):e==="not-in"?new Df(t,i):e==="array-contains-any"?new kf(t,i):new n(t,e,i)}static createKeyFieldInFilter(t,e,i){return e==="in"?new Rf(t,i):new Sf(t,i)}matches(t){let e=t.data.field(this.field);return this.op==="!="?e!==null&&this.matchesComparison(Or(e,this.value)):e!==null&&ki(this.value)===ki(e)&&this.matchesComparison(Or(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return W()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},ze=class n extends Pc{constructor(t,e){super(),this.filters=t,this.op=e,this.ae=null}static create(t,e){return new n(t,e)}matches(t){return uw(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function uw(n){return n.op==="and"}function dw(n){return tk(n)&&uw(n)}function tk(n){for(let t of n.filters)if(t instanceof ze)return!1;return!0}function Tf(n){if(n instanceof jt)return n.field.canonicalString()+n.op.toString()+Nr(n.value);if(dw(n))return n.filters.map(t=>Tf(t)).join(",");{let t=n.filters.map(e=>Tf(e)).join(",");return`${n.op}(${t})`}}function hw(n,t){return n instanceof jt?function(i,r){return r instanceof jt&&i.op===r.op&&i.field.isEqual(r.field)&&Be(i.value,r.value)}(n,t):n instanceof ze?function(i,r){return r instanceof ze&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,c)=>s&&hw(o,r.filters[c]),!0):!1}(n,t):void W()}function fw(n){return n instanceof jt?function(e){return`${e.field.canonicalString()} ${e.op} ${Nr(e.value)}`}(n):n instanceof ze?function(e){return e.op.toString()+" {"+e.getFilters().map(fw).join(" ,")+"}"}(n):"Filter"}var Af=class extends jt{constructor(t,e,i){super(t,e,i),this.key=z.fromName(i.referenceValue)}matches(t){let e=z.comparator(t.key,this.key);return this.matchesComparison(e)}},Rf=class extends jt{constructor(t,e){super(t,"in",e),this.keys=mw("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}},Sf=class extends jt{constructor(t,e){super(t,"not-in",e),this.keys=mw("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}};function mw(n,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(i=>z.fromName(i.referenceValue))}var Cf=class extends jt{constructor(t,e){super(t,"array-contains",e)}matches(t){let e=t.data.field(this.field);return Wm(e)&&Co(e.arrayValue,this.value)}},xf=class extends jt{constructor(t,e){super(t,"in",e)}matches(t){let e=t.data.field(this.field);return e!==null&&Co(this.value.arrayValue,e)}},Df=class extends jt{constructor(t,e){super(t,"not-in",e)}matches(t){if(Co(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let e=t.data.field(this.field);return e!==null&&!Co(this.value.arrayValue,e)}},kf=class extends jt{constructor(t,e){super(t,"array-contains-any",e)}matches(t){let e=t.data.field(this.field);return!(!Wm(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>Co(this.value.arrayValue,i))}};var Pf=class{constructor(t,e=null,i=[],r=[],s=null,o=null,c=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=c,this.ue=null}};function Uy(n,t=null,e=[],i=[],r=null,s=null,o=null){return new Pf(n,t,e,i,r,s,o)}function Hm(n){let t=K(n);if(t.ue===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>Tf(i)).join(","),e+="|ob:",e+=t.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),ol(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>Nr(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>Nr(i)).join(",")),t.ue=e}return t.ue}function Gm(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!ZD(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!hw(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!Vy(n.startAt,t.startAt)&&Vy(n.endAt,t.endAt)}function Of(n){return z.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Fr=class{constructor(t,e=null,i=[],r=[],s=null,o="F",c=null,l=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=c,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function ek(n,t,e,i,r,s,o,c){return new Fr(n,t,e,i,r,s,o,c)}function Km(n){return new Fr(n)}function jy(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function nk(n){return n.collectionGroup!==null}function Eo(n){let t=K(n);if(t.ce===null){t.ce=[];let e=new Set;for(let s of t.explicitOrderBy)t.ce.push(s),e.add(s.field.canonicalString());let i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Zt(he.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(c=c.add(u.field))})}),c})(t).forEach(s=>{e.has(s.canonicalString())||s.isKeyField()||t.ce.push(new Lr(s,i))}),e.has(he.keyField().canonicalString())||t.ce.push(new Lr(he.keyField(),i))}return t.ce}function Ue(n){let t=K(n);return t.le||(t.le=ik(t,Eo(n))),t.le}function ik(n,t){if(n.limitType==="F")return Uy(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(r=>{let s=r.dir==="desc"?"asc":"desc";return new Lr(r.field,s)});let e=n.endAt?new Mr(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Mr(n.startAt.position,n.startAt.inclusive):null;return Uy(n.path,n.collectionGroup,t,n.filters,n.limit,e,i)}}function Nf(n,t,e){return new Fr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function al(n,t){return Gm(Ue(n),Ue(t))&&n.limitType===t.limitType}function pw(n){return`${Hm(Ue(n))}|lt:${n.limitType}`}function Ar(n){return`Query(target=${function(e){let i=e.path.canonicalString();return e.collectionGroup!==null&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map(r=>fw(r)).join(", ")}]`),ol(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map(r=>Nr(r)).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map(r=>Nr(r)).join(",")),`Target(${i})`}(Ue(n))}; limitType=${n.limitType})`}function cl(n,t){return t.isFoundDocument()&&function(i,r){let s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):z.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(n,t)&&function(i,r){for(let s of Eo(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(n,t)&&function(i,r){for(let s of i.filters)if(!s.matches(r))return!1;return!0}(n,t)&&function(i,r){return!(i.startAt&&!function(o,c,l){let u=Fy(o,c,l);return o.inclusive?u<=0:u<0}(i.startAt,Eo(i),r)||i.endAt&&!function(o,c,l){let u=Fy(o,c,l);return o.inclusive?u>=0:u>0}(i.endAt,Eo(i),r))}(n,t)}function rk(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function gw(n){return(t,e)=>{let i=!1;for(let r of Eo(n)){let s=sk(r,t,e);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function sk(n,t,e){let i=n.field.isKeyField()?z.comparator(t.key,e.key):function(s,o,c){let l=o.data.field(s),u=c.data.field(s);return l!==null&&u!==null?Or(l,u):W()}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return W()}}var zn=class{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){let e=this.mapKeyFn(t),i=this.inner[e];if(i!==void 0){for(let[r,s]of i)if(this.equalsFn(r,t))return s}}has(t){return this.get(t)!==void 0}set(t,e){let i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return this.inner[i]=[[t,e]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){let e=this.mapKeyFn(t),i=this.inner[e];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[e]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Mi(this.inner,(e,i)=>{for(let[r,s]of i)t(r,s)})}isEmpty(){return aw(this.inner)}size(){return this.innerSize}};var ok=new Et(z.comparator);function _n(){return ok}var _w=new Et(z.comparator);function wo(...n){let t=_w;for(let e of n)t=t.insert(e.key,e);return t}function bw(n){let t=_w;return n.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function Ri(){return To()}function vw(){return To()}function To(){return new zn(n=>n.toString(),(n,t)=>n.isEqual(t))}var ak=new Et(z.comparator),ck=new Zt(z.comparator);function et(...n){let t=ck;for(let e of n)t=t.add(e);return t}var lk=new Zt(ot);function uk(){return lk}function yw(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ro(t)?"-0":t}}function ww(n){return{integerValue:""+n}}function dk(n,t){return KD(t)?ww(t):yw(n,t)}var Vr=class{constructor(){this._=void 0}};function hk(n,t,e){return n instanceof Ur?function(r,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&$m(s)&&(s=qm(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(e,t):n instanceof Pi?Ew(n,t):n instanceof Oi?Tw(n,t):function(r,s){let o=Iw(r,s),c=By(o)+By(r.Pe);return Ef(o)&&Ef(r.Pe)?ww(c):yw(r.serializer,c)}(n,t)}function fk(n,t,e){return n instanceof Pi?Ew(n,t):n instanceof Oi?Tw(n,t):e}function Iw(n,t){return n instanceof jr?function(i){return Ef(i)||function(s){return!!s&&"doubleValue"in s}(i)}(t)?t:{integerValue:0}:null}var Ur=class extends Vr{},Pi=class extends Vr{constructor(t){super(),this.elements=t}};function Ew(n,t){let e=Aw(t);for(let i of n.elements)e.some(r=>Be(r,i))||e.push(i);return{arrayValue:{values:e}}}var Oi=class extends Vr{constructor(t){super(),this.elements=t}};function Tw(n,t){let e=Aw(t);for(let i of n.elements)e=e.filter(r=>!Be(r,i));return{arrayValue:{values:e}}}var jr=class extends Vr{constructor(t,e){super(),this.serializer=t,this.Pe=e}};function By(n){return wt(n.integerValue||n.doubleValue)}function Aw(n){return Wm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function mk(n,t){return n.field.isEqual(t.field)&&function(i,r){return i instanceof Pi&&r instanceof Pi||i instanceof Oi&&r instanceof Oi?Pr(i.elements,r.elements,Be):i instanceof jr&&r instanceof jr?Be(i.Pe,r.Pe):i instanceof Ur&&r instanceof Ur}(n.transform,t.transform)}var Mf=class{constructor(t,e){this.version=t,this.transformResults=e}},mn=class n{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new n}static exists(t){return new n(void 0,t)}static updateTime(t){return new n(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}};function Ac(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}var Br=class{};function Rw(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new Oc(n.key,mn.none()):new Ni(n.key,n.data,mn.none());{let e=n.data,i=de.empty(),r=new Zt(he.comparator);for(let s of t.fields)if(!r.has(s)){let o=e.field(s);o===null&&s.length>1&&(s=s.popLast(),o=e.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new $e(n.key,i,new ve(r.toArray()),mn.none())}}function pk(n,t,e){n instanceof Ni?function(r,s,o){let c=r.value.clone(),l=$y(r.fieldTransforms,s,o.transformResults);c.setAll(l),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,t,e):n instanceof $e?function(r,s,o){if(!Ac(r.precondition,s))return void s.convertToUnknownDocument(o.version);let c=$y(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(Sw(r)),l.setAll(c),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,t,e):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,e)}function Ao(n,t,e,i){return n instanceof Ni?function(s,o,c,l){if(!Ac(s.precondition,o))return c;let u=s.value.clone(),f=qy(s.fieldTransforms,l,o);return u.setAll(f),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(n,t,e,i):n instanceof $e?function(s,o,c,l){if(!Ac(s.precondition,o))return c;let u=qy(s.fieldTransforms,l,o),f=o.data;return f.setAll(Sw(s)),f.setAll(u),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(n,t,e,i):function(s,o,c){return Ac(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(n,t,e)}function gk(n,t){let e=null;for(let i of n.fieldTransforms){let r=t.data.field(i.field),s=Iw(i.transform,r||null);s!=null&&(e===null&&(e=de.empty()),e.set(i.field,s))}return e||null}function zy(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Pr(i,r,(s,o)=>mk(s,o))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}var Ni=class extends Br{constructor(t,e,i,r=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},$e=class extends Br{constructor(t,e,i,r,s=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function Sw(n){let t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){let i=n.data.field(e);t.set(e,i)}}),t}function $y(n,t,e){let i=new Map;mt(n.length===e.length);for(let r=0;r<e.length;r++){let s=n[r],o=s.transform,c=t.data.field(s.field);i.set(s.field,fk(o,c,e[r]))}return i}function qy(n,t,e){let i=new Map;for(let r of n){let s=r.transform,o=e.data.field(r.field);i.set(r.field,hk(s,o,t))}return i}var Oc=class extends Br{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Lf=class extends Br{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Ff=class{constructor(t,e,i,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,e){let i=e.mutationResults;for(let r=0;r<this.mutations.length;r++){let s=this.mutations[r];s.key.isEqual(t.key)&&pk(s,t,i[r])}}applyToLocalView(t,e){for(let i of this.baseMutations)i.key.isEqual(t.key)&&(e=Ao(i,t,e,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(t.key)&&(e=Ao(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){let i=vw();return this.mutations.forEach(r=>{let s=t.get(r.key),o=s.overlayedDocument,c=this.applyToLocalView(o,s.mutatedFields);c=e.has(r.key)?null:c;let l=Rw(o,c);l!==null&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(Y.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),et())}isEqual(t){return this.batchId===t.batchId&&Pr(this.mutations,t.mutations,(e,i)=>zy(e,i))&&Pr(this.baseMutations,t.baseMutations,(e,i)=>zy(e,i))}},Vf=class n{constructor(t,e,i,r){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=r}static from(t,e,i){mt(t.mutations.length===i.length);let r=function(){return ak}(),s=t.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new n(t,e,i,r)}};var Uf=class{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var jf=class{constructor(t,e){this.count=t,this.unchangedNames=e}};var Ot,it;function _k(n){switch(n){default:return W();case k.CANCELLED:case k.UNKNOWN:case k.DEADLINE_EXCEEDED:case k.RESOURCE_EXHAUSTED:case k.INTERNAL:case k.UNAVAILABLE:case k.UNAUTHENTICATED:return!1;case k.INVALID_ARGUMENT:case k.NOT_FOUND:case k.ALREADY_EXISTS:case k.PERMISSION_DENIED:case k.FAILED_PRECONDITION:case k.ABORTED:case k.OUT_OF_RANGE:case k.UNIMPLEMENTED:case k.DATA_LOSS:return!0}}function Cw(n){if(n===void 0)return pn("GRPC error has no .code"),k.UNKNOWN;switch(n){case Ot.OK:return k.OK;case Ot.CANCELLED:return k.CANCELLED;case Ot.UNKNOWN:return k.UNKNOWN;case Ot.DEADLINE_EXCEEDED:return k.DEADLINE_EXCEEDED;case Ot.RESOURCE_EXHAUSTED:return k.RESOURCE_EXHAUSTED;case Ot.INTERNAL:return k.INTERNAL;case Ot.UNAVAILABLE:return k.UNAVAILABLE;case Ot.UNAUTHENTICATED:return k.UNAUTHENTICATED;case Ot.INVALID_ARGUMENT:return k.INVALID_ARGUMENT;case Ot.NOT_FOUND:return k.NOT_FOUND;case Ot.ALREADY_EXISTS:return k.ALREADY_EXISTS;case Ot.PERMISSION_DENIED:return k.PERMISSION_DENIED;case Ot.FAILED_PRECONDITION:return k.FAILED_PRECONDITION;case Ot.ABORTED:return k.ABORTED;case Ot.OUT_OF_RANGE:return k.OUT_OF_RANGE;case Ot.UNIMPLEMENTED:return k.UNIMPLEMENTED;case Ot.DATA_LOSS:return k.DATA_LOSS;default:return W()}}(it=Ot||(Ot={}))[it.OK=0]="OK",it[it.CANCELLED=1]="CANCELLED",it[it.UNKNOWN=2]="UNKNOWN",it[it.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",it[it.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",it[it.NOT_FOUND=5]="NOT_FOUND",it[it.ALREADY_EXISTS=6]="ALREADY_EXISTS",it[it.PERMISSION_DENIED=7]="PERMISSION_DENIED",it[it.UNAUTHENTICATED=16]="UNAUTHENTICATED",it[it.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",it[it.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",it[it.ABORTED=10]="ABORTED",it[it.OUT_OF_RANGE=11]="OUT_OF_RANGE",it[it.UNIMPLEMENTED=12]="UNIMPLEMENTED",it[it.INTERNAL=13]="INTERNAL",it[it.UNAVAILABLE=14]="UNAVAILABLE",it[it.DATA_LOSS=15]="DATA_LOSS";var Wy=null;function bk(){return new TextEncoder}var vk=new Un([4294967295,4294967295],0);function Hy(n){let t=bk().encode(n),e=new tf;return e.update(t),new Uint8Array(e.digest())}function Gy(n){let t=new DataView(n.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Un([e,i],0),new Un([r,s],0)]}var Bf=class n{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new Si(`Invalid padding: ${e}`);if(i<0)throw new Si(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new Si(`Invalid hash count: ${i}`);if(t.length===0&&e!==0)throw new Si(`Invalid padding when bitmap length is 0: ${e}`);this.Ie=8*t.length-e,this.Te=Un.fromNumber(this.Ie)}Ee(t,e,i){let r=t.add(e.multiply(Un.fromNumber(i)));return r.compare(vk)===1&&(r=new Un([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;let e=Hy(t),[i,r]=Gy(e);for(let s=0;s<this.hashCount;s++){let o=this.Ee(i,r,s);if(!this.de(o))return!1}return!0}static create(t,e,i){let r=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new n(s,r,e);return i.forEach(c=>o.insert(c)),o}insert(t){if(this.Ie===0)return;let e=Hy(t),[i,r]=Gy(e);for(let s=0;s<this.hashCount;s++){let o=this.Ee(i,r,s);this.Ae(o)}}Ae(t){let e=Math.floor(t/8),i=t%8;this.bitmap[e]|=1<<i}},Si=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Nc=class n{constructor(t,e,i,r,s){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,e,i){let r=new Map;return r.set(t,xo.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new n(Y.min(),r,new Et(ot),_n(),et())}},xo=class n{constructor(t,e,i,r,s){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new n(i,e,et(),et(),et())}};var xr=class{constructor(t,e,i,r){this.Re=t,this.removedTargetIds=e,this.key=i,this.Ve=r}},Mc=class{constructor(t,e){this.targetId=t,this.me=e}},Lc=class{constructor(t,e,i=ie.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=r}},Fc=class{constructor(){this.fe=0,this.ge=Yy(),this.pe=ie.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}Ce(){let t=et(),e=et(),i=et();return this.ge.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:i=i.add(r);break;default:W()}}),new xo(this.pe,this.ye,t,e,i)}ve(){this.we=!1,this.ge=Yy()}Fe(t,e){this.we=!0,this.ge=this.ge.insert(t,e)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,mt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},zf=class{constructor(t){this.Le=t,this.Be=new Map,this.ke=_n(),this.qe=Ky(),this.Qe=new Et(ot)}Ke(t){for(let e of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(e,t.Ve):this.Ue(e,t.key,t.Ve);for(let e of t.removedTargetIds)this.Ue(e,t.key,t.Ve)}We(t){this.forEachTarget(t,e=>{let i=this.Ge(e);switch(t.state){case 0:this.ze(e)&&i.De(t.resumeToken);break;case 1:i.Oe(),i.Se||i.ve(),i.De(t.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(e);break;case 3:this.ze(e)&&(i.Ne(),i.De(t.resumeToken));break;case 4:this.ze(e)&&(this.je(e),i.De(t.resumeToken));break;default:W()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Be.forEach((i,r)=>{this.ze(r)&&e(r)})}He(t){let e=t.targetId,i=t.me.count,r=this.Je(e);if(r){let s=r.target;if(Of(s))if(i===0){let o=new z(s.path);this.Ue(e,o,Ce.newNoDocument(o,Y.min()))}else mt(i===1);else{let o=this.Ye(e);if(o!==i){let c=this.Ze(t),l=c?this.Xe(c,t,o):1;if(l!==0){this.je(e);let u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(e,u)}Wy?.et(function(f,p,b,A,C){var P,D,j,$,H,X;let Ct={localCacheCount:f,existenceFilterCount:p.count,databaseId:b.database,projectId:b.projectId},rt=p.unchangedNames;return rt&&(Ct.bloomFilter={applied:C===0,hashCount:(P=rt?.hashCount)!==null&&P!==void 0?P:0,bitmapLength:($=(j=(D=rt?.bits)===null||D===void 0?void 0:D.bitmap)===null||j===void 0?void 0:j.length)!==null&&$!==void 0?$:0,padding:(X=(H=rt?.bits)===null||H===void 0?void 0:H.padding)!==null&&X!==void 0?X:0,mightContain:I=>{var _;return(_=A?.mightContain(I))!==null&&_!==void 0&&_}}),Ct}(o,t.me,this.Le.tt(),c,l))}}}}Ze(t){let e=t.me.unchangedNames;if(!e||!e.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=e,o,c;try{o=Bn(i).toUint8Array()}catch(l){if(l instanceof Dc)return kr("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{c=new Bf(o,r,s)}catch(l){return kr(l instanceof Si?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return c.Ie===0?null:c}Xe(t,e,i){return e.me.count===i-this.nt(t,e.targetId)?0:2}nt(t,e){let i=this.Le.getRemoteKeysForTarget(e),r=0;return i.forEach(s=>{let o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(c)||(this.Ue(e,s,null),r++)}),r}rt(t){let e=new Map;this.Be.forEach((s,o)=>{let c=this.Je(o);if(c){if(s.current&&Of(c.target)){let l=new z(c.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Ce.newNoDocument(l,t))}s.be&&(e.set(o,s.Ce()),s.ve())}});let i=et();this.qe.forEach((s,o)=>{let c=!0;o.forEachWhile(l=>{let u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(i=i.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));let r=new Nc(t,e,this.Qe,this.ke,i);return this.ke=_n(),this.qe=Ky(),this.Qe=new Et(ot),r}$e(t,e){if(!this.ze(t))return;let i=this.it(t,e.key)?2:0;this.Ge(t).Fe(e.key,i),this.ke=this.ke.insert(e.key,e),this.qe=this.qe.insert(e.key,this.st(e.key).add(t))}Ue(t,e,i){if(!this.ze(t))return;let r=this.Ge(t);this.it(t,e)?r.Fe(e,1):r.Me(e),this.qe=this.qe.insert(e,this.st(e).delete(t)),i&&(this.ke=this.ke.insert(e,i))}removeTarget(t){this.Be.delete(t)}Ye(t){let e=this.Ge(t).Ce();return this.Le.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let e=this.Be.get(t);return e||(e=new Fc,this.Be.set(t,e)),e}st(t){let e=this.qe.get(t);return e||(e=new Zt(ot),this.qe=this.qe.insert(t,e)),e}ze(t){let e=this.Je(t)!==null;return e||F("WatchChangeAggregator","Detected inactive target",t),e}Je(t){let e=this.Be.get(t);return e&&e.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new Fc),this.Le.getRemoteKeysForTarget(t).forEach(e=>{this.Ue(t,e,null)})}it(t,e){return this.Le.getRemoteKeysForTarget(t).has(e)}};function Ky(){return new Et(z.comparator)}function Yy(){return new Et(z.comparator)}var yk={asc:"ASCENDING",desc:"DESCENDING"},wk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ik={and:"AND",or:"OR"},$f=class{constructor(t,e){this.databaseId=t,this.useProto3Json=e}};function qf(n,t){return n.useProto3Json||ol(t)?t:{value:t}}function Vc(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function xw(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function Ek(n,t){return Vc(n,t.toTimestamp())}function je(n){return mt(!!n),Y.fromTimestamp(function(e){let i=gn(e);return new Ht(i.seconds,i.nanos)}(n))}function Ym(n,t){return Wf(n,t).canonicalString()}function Wf(n,t){let e=function(r){return new It(["projects",r.projectId,"databases",r.database])}(n).child("documents");return t===void 0?e:e.child(t)}function Dw(n){let t=It.fromString(n);return mt(Mw(t)),t}function Hf(n,t){return Ym(n.databaseId,t.path)}function cf(n,t){let e=Dw(t);if(e.get(1)!==n.databaseId.projectId)throw new U(k.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new U(k.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new z(Pw(e))}function kw(n,t){return Ym(n.databaseId,t)}function Tk(n){let t=Dw(n);return t.length===4?It.emptyPath():Pw(t)}function Gf(n){return new It(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Pw(n){return mt(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function Qy(n,t,e){return{name:Hf(n,t),fields:e.value.mapValue.fields}}function Ak(n,t){let e;if("targetChange"in t){t.targetChange;let i=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:W()}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],s=function(u,f){return u.useProto3Json?(mt(f===void 0||typeof f=="string"),ie.fromBase64String(f||"")):(mt(f===void 0||f instanceof Buffer||f instanceof Uint8Array),ie.fromUint8Array(f||new Uint8Array))}(n,t.targetChange.resumeToken),o=t.targetChange.cause,c=o&&function(u){let f=u.code===void 0?k.UNKNOWN:Cw(u.code);return new U(f,u.message||"")}(o);e=new Lc(i,r,s,c||null)}else if("documentChange"in t){t.documentChange;let i=t.documentChange;i.document,i.document.name,i.document.updateTime;let r=cf(n,i.document.name),s=je(i.document.updateTime),o=i.document.createTime?je(i.document.createTime):Y.min(),c=new de({mapValue:{fields:i.document.fields}}),l=Ce.newFoundDocument(r,s,o,c),u=i.targetIds||[],f=i.removedTargetIds||[];e=new xr(u,f,l.key,l)}else if("documentDelete"in t){t.documentDelete;let i=t.documentDelete;i.document;let r=cf(n,i.document),s=i.readTime?je(i.readTime):Y.min(),o=Ce.newNoDocument(r,s),c=i.removedTargetIds||[];e=new xr([],c,o.key,o)}else if("documentRemove"in t){t.documentRemove;let i=t.documentRemove;i.document;let r=cf(n,i.document),s=i.removedTargetIds||[];e=new xr([],s,r,null)}else{if(!("filter"in t))return W();{t.filter;let i=t.filter;i.targetId;let{count:r=0,unchangedNames:s}=i,o=new jf(r,s),c=i.targetId;e=new Mc(c,o)}}return e}function Rk(n,t){let e;if(t instanceof Ni)e={update:Qy(n,t.key,t.value)};else if(t instanceof Oc)e={delete:Hf(n,t.key)};else if(t instanceof $e)e={update:Qy(n,t.key,t.data),updateMask:Mk(t.fieldMask)};else{if(!(t instanceof Lf))return W();e={verify:Hf(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(s,o){let c=o.transform;if(c instanceof Ur)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Pi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Oi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof jr)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw W()}(0,i))),t.precondition.isNone||(e.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:Ek(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:W()}(n,t.precondition)),e}function Sk(n,t){return n&&n.length>0?(mt(t!==void 0),n.map(e=>function(r,s){let o=r.updateTime?je(r.updateTime):je(s);return o.isEqual(Y.min())&&(o=je(s)),new Mf(o,r.transformResults||[])}(e,t))):[]}function Ck(n,t){return{documents:[kw(n,t.path)]}}function xk(n,t){let e={structuredQuery:{}},i=t.path,r;t.collectionGroup!==null?(r=i,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),e.structuredQuery.from=[{collectionId:i.lastSegment()}]),e.parent=kw(n,r);let s=function(u){if(u.length!==0)return Nw(ze.create(u,"and"))}(t.filters);s&&(e.structuredQuery.where=s);let o=function(u){if(u.length!==0)return u.map(f=>function(b){return{field:Rr(b.field),direction:Pk(b.dir)}}(f))}(t.orderBy);o&&(e.structuredQuery.orderBy=o);let c=qf(n,t.limit);return c!==null&&(e.structuredQuery.limit=c),t.startAt&&(e.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(t.endAt)),{_t:e,parent:r}}function Dk(n){let t=Tk(n.parent),e=n.structuredQuery,i=e.from?e.from.length:0,r=null;if(i>0){mt(i===1);let f=e.from[0];f.allDescendants?r=f.collectionId:t=t.child(f.collectionId)}let s=[];e.where&&(s=function(p){let b=Ow(p);return b instanceof ze&&dw(b)?b.getFilters():[b]}(e.where));let o=[];e.orderBy&&(o=function(p){return p.map(b=>function(C){return new Lr(Sr(C.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(b))}(e.orderBy));let c=null;e.limit&&(c=function(p){let b;return b=typeof p=="object"?p.value:p,ol(b)?null:b}(e.limit));let l=null;e.startAt&&(l=function(p){let b=!!p.before,A=p.values||[];return new Mr(A,b)}(e.startAt));let u=null;return e.endAt&&(u=function(p){let b=!p.before,A=p.values||[];return new Mr(A,b)}(e.endAt)),ek(t,r,o,s,c,"F",l,u)}function kk(n,t){let e=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return W()}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function Ow(n){return n.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":let i=Sr(e.unaryFilter.field);return jt.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=Sr(e.unaryFilter.field);return jt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Sr(e.unaryFilter.field);return jt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Sr(e.unaryFilter.field);return jt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return W()}}(n):n.fieldFilter!==void 0?function(e){return jt.create(Sr(e.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return W()}}(e.fieldFilter.op),e.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(e){return ze.create(e.compositeFilter.filters.map(i=>Ow(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return W()}}(e.compositeFilter.op))}(n):W()}function Pk(n){return yk[n]}function Ok(n){return wk[n]}function Nk(n){return Ik[n]}function Rr(n){return{fieldPath:n.canonicalString()}}function Sr(n){return he.fromServerFormat(n.fieldPath)}function Nw(n){return n instanceof jt?function(e){if(e.op==="=="){if(Ly(e.value))return{unaryFilter:{field:Rr(e.field),op:"IS_NAN"}};if(My(e.value))return{unaryFilter:{field:Rr(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(Ly(e.value))return{unaryFilter:{field:Rr(e.field),op:"IS_NOT_NAN"}};if(My(e.value))return{unaryFilter:{field:Rr(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Rr(e.field),op:Ok(e.op),value:e.value}}}(n):n instanceof ze?function(e){let i=e.getFilters().map(r=>Nw(r));return i.length===1?i[0]:{compositeFilter:{op:Nk(e.op),filters:i}}}(n):W()}function Mk(n){let t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Mw(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Do=class n{constructor(t,e,i,r,s=Y.min(),o=Y.min(),c=ie.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=l}withSequenceNumber(t){return new n(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}};var Kf=class{constructor(t){this.ct=t}};function Lk(n){let t=Dk({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Nf(t,t.limit,"L"):t}var Uc=class{constructor(){}Pt(t,e){this.It(t,e),e.Tt()}It(t,e){if("nullValue"in t)this.Et(e,5);else if("booleanValue"in t)this.Et(e,10),e.dt(t.booleanValue?1:0);else if("integerValue"in t)this.Et(e,15),e.dt(wt(t.integerValue));else if("doubleValue"in t){let i=wt(t.doubleValue);isNaN(i)?this.Et(e,13):(this.Et(e,15),Ro(i)?e.dt(0):e.dt(i))}else if("timestampValue"in t){let i=t.timestampValue;this.Et(e,20),typeof i=="string"&&(i=gn(i)),e.At(`${i.seconds||""}`),e.dt(i.nanos||0)}else if("stringValue"in t)this.Rt(t.stringValue,e),this.Vt(e);else if("bytesValue"in t)this.Et(e,30),e.ft(Bn(t.bytesValue)),this.Vt(e);else if("referenceValue"in t)this.gt(t.referenceValue,e);else if("geoPointValue"in t){let i=t.geoPointValue;this.Et(e,45),e.dt(i.latitude||0),e.dt(i.longitude||0)}else"mapValue"in t?cw(t)?this.Et(e,Number.MAX_SAFE_INTEGER):(this.yt(t.mapValue,e),this.Vt(e)):"arrayValue"in t?(this.wt(t.arrayValue,e),this.Vt(e)):W()}Rt(t,e){this.Et(e,25),this.St(t,e)}St(t,e){e.At(t)}yt(t,e){let i=t.fields||{};this.Et(e,55);for(let r of Object.keys(i))this.Rt(r,e),this.It(i[r],e)}wt(t,e){let i=t.values||[];this.Et(e,50);for(let r of i)this.It(r,e)}gt(t,e){this.Et(e,37),z.fromName(t).path.forEach(i=>{this.Et(e,60),this.St(i,e)})}Et(t,e){t.dt(e)}Vt(t){t.dt(2)}};Uc.bt=new Uc;var Yf=class{constructor(){this._n=new Qf}addToCollectionParentIndex(t,e){return this._n.add(e),O.resolve()}getCollectionParents(t,e){return O.resolve(this._n.getEntries(e))}addFieldIndex(t,e){return O.resolve()}deleteFieldIndex(t,e){return O.resolve()}deleteAllFieldIndexes(t){return O.resolve()}createTargetIndexes(t,e){return O.resolve()}getDocumentsMatchingTarget(t,e){return O.resolve(null)}getIndexType(t,e){return O.resolve(0)}getFieldIndexes(t,e){return O.resolve([])}getNextCollectionGroupToUpdate(t){return O.resolve(null)}getMinOffset(t,e){return O.resolve(Di.min())}getMinOffsetFromCollectionGroup(t,e){return O.resolve(Di.min())}updateCollectionGroup(t,e,i){return O.resolve()}updateIndexEntries(t,e){return O.resolve()}},Qf=class{constructor(){this.index={}}add(t){let e=t.lastSegment(),i=t.popLast(),r=this.index[e]||new Zt(It.comparator),s=!r.has(i);return this.index[e]=r.add(i),s}has(t){let e=t.lastSegment(),i=t.popLast(),r=this.index[e];return r&&r.has(i)}getEntries(t){return(this.index[t]||new Zt(It.comparator)).toArray()}};var XF=new Uint8Array(0);var Fe=class n{constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}static withCacheSize(t){return new n(t,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Fe.DEFAULT_COLLECTION_PERCENTILE=10,Fe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fe.DEFAULT=new Fe(41943040,Fe.DEFAULT_COLLECTION_PERCENTILE,Fe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fe.DISABLED=new Fe(-1,0,0);var ko=class n{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new n(0)}static Ln(){return new n(-1)}};var Xf=class{constructor(){this.changes=new zn(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Ce.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();let i=this.changes.get(e);return i!==void 0?O.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}};var Jf=class{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}};var Zf=class{constructor(t,e,i,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,e))).next(r=>(i!==null&&Ao(i.mutation,r,ve.empty(),Ht.now()),r))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,et()).next(()=>i))}getLocalViewOfDocuments(t,e,i=et()){let r=Ri();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,i).next(s=>{let o=wo();return s.forEach((c,l)=>{o=o.insert(c,l.overlayedDocument)}),o}))}getOverlayedDocuments(t,e){let i=Ri();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,et()))}populateOverlays(t,e,i){let r=[];return i.forEach(s=>{e.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((o,c)=>{e.set(o,c)})})}computeViews(t,e,i,r){let s=_n(),o=To(),c=function(){return To()}();return e.forEach((l,u)=>{let f=i.get(u.key);r.has(u.key)&&(f===void 0||f.mutation instanceof $e)?s=s.insert(u.key,u):f!==void 0?(o.set(u.key,f.mutation.getFieldMask()),Ao(f.mutation,u,f.mutation.getFieldMask(),Ht.now())):o.set(u.key,ve.empty())}),this.recalculateAndSaveOverlays(t,s).next(l=>(l.forEach((u,f)=>o.set(u,f)),e.forEach((u,f)=>{var p;return c.set(u,new Jf(f,(p=o.get(u))!==null&&p!==void 0?p:null))}),c))}recalculateAndSaveOverlays(t,e){let i=To(),r=new Et((o,c)=>o-c),s=et();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(o=>{for(let c of o)c.keys().forEach(l=>{let u=e.get(l);if(u===null)return;let f=i.get(l)||ve.empty();f=c.applyToLocalView(u,f),i.set(l,f);let p=(r.get(c.batchId)||et()).add(l);r=r.insert(c.batchId,p)})}).next(()=>{let o=[],c=r.getReverseIterator();for(;c.hasNext();){let l=c.getNext(),u=l.key,f=l.value,p=vw();f.forEach(b=>{if(!s.has(b)){let A=Rw(e.get(b),i.get(b));A!==null&&p.set(b,A),s=s.add(b)}}),o.push(this.documentOverlayCache.saveOverlays(t,u,p))}return O.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i,r){return function(o){return z.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):nk(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i,r):this.getDocumentsMatchingCollectionQuery(t,e,i,r)}getNextDocuments(t,e,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,r).next(s=>{let o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,r-s.size):O.resolve(Ri()),c=-1,l=s;return o.next(u=>O.forEach(u,(f,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),s.get(f)?O.resolve():this.remoteDocumentCache.getEntry(t,f).next(b=>{l=l.insert(f,b)}))).next(()=>this.populateOverlays(t,u,s)).next(()=>this.computeViews(t,l,u,et())).next(f=>({batchId:c,changes:bw(f)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new z(e)).next(i=>{let r=wo();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,e,i,r){let s=e.collectionGroup,o=wo();return this.indexManager.getCollectionParents(t,s).next(c=>O.forEach(c,l=>{let u=function(p,b){return new Fr(b,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(e,l.child(s));return this.getDocumentsMatchingCollectionQuery(t,u,i,r).next(f=>{f.forEach((p,b)=>{o=o.insert(p,b)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,e,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,s,r))).next(o=>{s.forEach((l,u)=>{let f=u.getKey();o.get(f)===null&&(o=o.insert(f,Ce.newInvalidDocument(f)))});let c=wo();return o.forEach((l,u)=>{let f=s.get(l);f!==void 0&&Ao(f.mutation,u,ve.empty(),Ht.now()),cl(e,u)&&(c=c.insert(l,u))}),c})}};var tm=class{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,e){return O.resolve(this.cr.get(e))}saveBundleMetadata(t,e){return this.cr.set(e.id,function(r){return{id:r.id,version:r.version,createTime:je(r.createTime)}}(e)),O.resolve()}getNamedQuery(t,e){return O.resolve(this.lr.get(e))}saveNamedQuery(t,e){return this.lr.set(e.name,function(r){return{name:r.name,query:Lk(r.bundledQuery),readTime:je(r.readTime)}}(e)),O.resolve()}};var em=class{constructor(){this.overlays=new Et(z.comparator),this.hr=new Map}getOverlay(t,e){return O.resolve(this.overlays.get(e))}getOverlays(t,e){let i=Ri();return O.forEach(e,r=>this.getOverlay(t,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((r,s)=>{this.ht(t,e,s)}),O.resolve()}removeOverlaysForBatchId(t,e,i){let r=this.hr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(i)),O.resolve()}getOverlaysForCollection(t,e,i){let r=Ri(),s=e.length+1,o=new z(e.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){let l=c.getNext().value,u=l.getKey();if(!e.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return O.resolve(r)}getOverlaysForCollectionGroup(t,e,i,r){let s=new Et((u,f)=>u-f),o=this.overlays.getIterator();for(;o.hasNext();){let u=o.getNext().value;if(u.getKey().getCollectionGroup()===e&&u.largestBatchId>i){let f=s.get(u.largestBatchId);f===null&&(f=Ri(),s=s.insert(u.largestBatchId,f)),f.set(u.getKey(),u)}}let c=Ri(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,f)=>c.set(u,f)),!(c.size()>=r)););return O.resolve(c)}ht(t,e,i){let r=this.overlays.get(i.key);if(r!==null){let o=this.hr.get(r.largestBatchId).delete(i.key);this.hr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new Uf(e,i));let s=this.hr.get(e);s===void 0&&(s=et(),this.hr.set(e,s)),this.hr.set(e,s.add(i.key))}};var Po=class{constructor(){this.Pr=new Zt(Nt.Ir),this.Tr=new Zt(Nt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,e){let i=new Nt(t,e);this.Pr=this.Pr.add(i),this.Tr=this.Tr.add(i)}dr(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.Ar(new Nt(t,e))}Rr(t,e){t.forEach(i=>this.removeReference(i,e))}Vr(t){let e=new z(new It([])),i=new Nt(e,t),r=new Nt(e,t+1),s=[];return this.Tr.forEachInRange([i,r],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){let e=new z(new It([])),i=new Nt(e,t),r=new Nt(e,t+1),s=et();return this.Tr.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(t){let e=new Nt(t,0),i=this.Pr.firstAfterOrEqual(e);return i!==null&&t.isEqual(i.key)}},Nt=class{constructor(t,e){this.key=t,this.pr=e}static Ir(t,e){return z.comparator(t.key,e.key)||ot(t.pr,e.pr)}static Er(t,e){return ot(t.pr,e.pr)||z.comparator(t.key,e.key)}};var nm=class{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.yr=1,this.wr=new Zt(Nt.Ir)}checkEmpty(t){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,i,r){let s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Ff(s,e,i,r);this.mutationQueue.push(o);for(let c of r)this.wr=this.wr.add(new Nt(c.key,s)),this.indexManager.addToCollectionParentIndex(t,c.key.path.popLast());return O.resolve(o)}lookupMutationBatch(t,e){return O.resolve(this.Sr(e))}getNextMutationBatchAfterBatchId(t,e){let i=e+1,r=this.br(i),s=r<0?0:r;return O.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){let i=new Nt(e,0),r=new Nt(e,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([i,r],o=>{let c=this.Sr(o.pr);s.push(c)}),O.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new Zt(ot);return e.forEach(r=>{let s=new Nt(r,0),o=new Nt(r,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],c=>{i=i.add(c.pr)})}),O.resolve(this.Dr(i))}getAllMutationBatchesAffectingQuery(t,e){let i=e.path,r=i.length+1,s=i;z.isDocumentKey(s)||(s=s.child(""));let o=new Nt(new z(s),0),c=new Zt(ot);return this.wr.forEachWhile(l=>{let u=l.key.path;return!!i.isPrefixOf(u)&&(u.length===r&&(c=c.add(l.pr)),!0)},o),O.resolve(this.Dr(c))}Dr(t){let e=[];return t.forEach(i=>{let r=this.Sr(i);r!==null&&e.push(r)}),e}removeMutationBatch(t,e){mt(this.Cr(e.batchId,"removed")===0),this.mutationQueue.shift();let i=this.wr;return O.forEach(e.mutations,r=>{let s=new Nt(r.key,e.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.wr=i})}Mn(t){}containsKey(t,e){let i=new Nt(e,0),r=this.wr.firstAfterOrEqual(i);return O.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,O.resolve()}Cr(t,e){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){let e=this.br(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}};var im=class{constructor(t){this.vr=t,this.docs=function(){return new Et(z.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){let i=e.key,r=this.docs.get(i),s=r?r.size:0,o=this.vr(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){let e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){let i=this.docs.get(e);return O.resolve(i?i.document.mutableCopy():Ce.newInvalidDocument(e))}getEntries(t,e){let i=_n();return e.forEach(r=>{let s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Ce.newInvalidDocument(r))}),O.resolve(i)}getDocumentsMatchingQuery(t,e,i,r){let s=_n(),o=e.path,c=new z(o.child("")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){let{key:u,value:{document:f}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||WD(qD(f),i)<=0||(r.has(f.key)||cl(e,f))&&(s=s.insert(f.key,f.mutableCopy()))}return O.resolve(s)}getAllFromCollectionGroup(t,e,i,r){W()}Fr(t,e){return O.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new rm(this)}getSize(t){return O.resolve(this.size)}},rm=class extends Xf{constructor(t){super(),this.ar=t}applyChanges(t){let e=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?e.push(this.ar.addEntry(t,r)):this.ar.removeEntry(i)}),O.waitFor(e)}getFromCache(t,e){return this.ar.getEntry(t,e)}getAllFromCache(t,e){return this.ar.getEntries(t,e)}};var sm=class{constructor(t){this.persistence=t,this.Mr=new zn(e=>Hm(e),Gm),this.lastRemoteSnapshotVersion=Y.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Po,this.targetCount=0,this.Lr=ko.Nn()}forEachTarget(t,e){return this.Mr.forEach((i,r)=>e(r)),O.resolve()}getLastRemoteSnapshotVersion(t){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return O.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.Or&&(this.Or=e),O.resolve()}qn(t){this.Mr.set(t.target,t);let e=t.targetId;e>this.highestTargetId&&(this.Lr=new ko(e),this.highestTargetId=e),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,e){return this.qn(e),this.targetCount+=1,O.resolve()}updateTargetData(t,e){return this.qn(e),O.resolve()}removeTargetData(t,e){return this.Mr.delete(e.target),this.Nr.Vr(e.targetId),this.targetCount-=1,O.resolve()}removeTargets(t,e,i){let r=0,s=[];return this.Mr.forEach((o,c)=>{c.sequenceNumber<=e&&i.get(c.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,c.targetId)),r++)}),O.waitFor(s).next(()=>r)}getTargetCount(t){return O.resolve(this.targetCount)}getTargetData(t,e){let i=this.Mr.get(e)||null;return O.resolve(i)}addMatchingKeys(t,e,i){return this.Nr.dr(e,i),O.resolve()}removeMatchingKeys(t,e,i){this.Nr.Rr(e,i);let r=this.persistence.referenceDelegate,s=[];return r&&e.forEach(o=>{s.push(r.markPotentiallyOrphaned(t,o))}),O.waitFor(s)}removeMatchingKeysForTargetId(t,e){return this.Nr.Vr(e),O.resolve()}getMatchingKeysForTargetId(t,e){let i=this.Nr.gr(e);return O.resolve(i)}containsKey(t,e){return O.resolve(this.Nr.containsKey(e))}};var om=class{constructor(t,e){this.Br={},this.overlays={},this.kr=new ow(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new sm(this),this.indexManager=new Yf,this.remoteDocumentCache=function(r){return new im(r)}(i=>this.referenceDelegate.Kr(i)),this.serializer=new Kf(e),this.$r=new tm(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new em,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.Br[t.toKey()];return i||(i=new nm(e,this.referenceDelegate),this.Br[t.toKey()]=i),i}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,e,i){F("MemoryPersistence","Starting transaction:",t);let r=new am(this.kr.next());return this.referenceDelegate.Ur(),i(r).next(s=>this.referenceDelegate.Wr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Gr(t,e){return O.or(Object.values(this.Br).map(i=>()=>i.containsKey(t,e)))}},am=class extends yf{constructor(t){super(),this.currentSequenceNumber=t}},cm=class n{constructor(t){this.persistence=t,this.zr=new Po,this.jr=null}static Hr(t){return new n(t)}get Jr(){if(this.jr)return this.jr;throw W()}addReference(t,e,i){return this.zr.addReference(i,e),this.Jr.delete(i.toString()),O.resolve()}removeReference(t,e,i){return this.zr.removeReference(i,e),this.Jr.add(i.toString()),O.resolve()}markPotentiallyOrphaned(t,e){return this.Jr.add(e.toString()),O.resolve()}removeTarget(t,e){this.zr.Vr(e.targetId).forEach(r=>this.Jr.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(s=>this.Jr.add(s.toString()))}).next(()=>i.removeTargetData(t,e))}Ur(){this.jr=new Set}Wr(t){let e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.Jr,i=>{let r=z.fromPath(i);return this.Yr(t,r).next(s=>{s||e.removeEntry(r,Y.min())})}).next(()=>(this.jr=null,e.apply(t)))}updateLimboDocument(t,e){return this.Yr(t,e).next(i=>{i?this.Jr.delete(e.toString()):this.Jr.add(e.toString())})}Kr(t){return 0}Yr(t,e){return O.or([()=>O.resolve(this.zr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Gr(t,e)])}};var lm=class n{constructor(t,e,i,r){this.targetId=t,this.fromCache=e,this.qi=i,this.Qi=r}static Ki(t,e){let i=et(),r=et();for(let s of e.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new n(t,e.fromCache,i,r)}};var um=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}};var dm=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return Bb()?8:GD(Vt())>0?6:4}()}initialize(t,e){this.zi=t,this.indexManager=e,this.$i=!0}getDocumentsMatchingQuery(t,e,i,r){let s={result:null};return this.ji(t,e).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(t,e,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new um;return this.Ji(t,e,o).next(c=>{if(s.result=c,this.Ui)return this.Yi(t,e,o,c.size)})}).next(()=>s.result)}Yi(t,e,i,r){return i.documentReadCount<this.Wi?(yo()<=tt.DEBUG&&F("QueryEngine","SDK will not create cache indexes for query:",Ar(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),O.resolve()):(yo()<=tt.DEBUG&&F("QueryEngine","Query:",Ar(e),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Gi*r?(yo()<=tt.DEBUG&&F("QueryEngine","The SDK decides to create cache indexes for query:",Ar(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Ue(e))):O.resolve())}ji(t,e){if(jy(e))return O.resolve(null);let i=Ue(e);return this.indexManager.getIndexType(t,i).next(r=>r===0?null:(e.limit!==null&&r===1&&(e=Nf(e,null,"F"),i=Ue(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(s=>{let o=et(...s);return this.zi.getDocuments(t,o).next(c=>this.indexManager.getMinOffset(t,i).next(l=>{let u=this.Zi(e,c);return this.Xi(e,u,o,l.readTime)?this.ji(t,Nf(e,null,"F")):this.es(t,u,e,l)}))})))}Hi(t,e,i,r){return jy(e)||r.isEqual(Y.min())?O.resolve(null):this.zi.getDocuments(t,i).next(s=>{let o=this.Zi(e,s);return this.Xi(e,o,i,r)?O.resolve(null):(yo()<=tt.DEBUG&&F("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ar(e)),this.es(t,o,e,$D(r,-1)).next(c=>c))})}Zi(t,e){let i=new Zt(gw(t));return e.forEach((r,s)=>{cl(t,s)&&(i=i.add(s))}),i}Xi(t,e,i,r){if(t.limit===null)return!1;if(i.size!==e.size)return!0;let s=t.limitType==="F"?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ji(t,e,i){return yo()<=tt.DEBUG&&F("QueryEngine","Using full collection scan to execute query:",Ar(e)),this.zi.getDocumentsMatchingQuery(t,e,Di.min(),i)}es(t,e,i,r){return this.zi.getDocumentsMatchingQuery(t,i,r).next(s=>(e.forEach(o=>{s=s.insert(o.key,o)}),s))}};var hm=class{constructor(t,e,i,r){this.persistence=t,this.ts=e,this.serializer=r,this.ns=new Et(ot),this.rs=new zn(s=>Hm(s),Gm),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(i)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Zf(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.ns))}};function Fk(n,t,e,i){return new hm(n,t,e,i)}function Lw(n,t){return g(this,null,function*(){let e=K(n);return yield e.persistence.runTransaction("Handle user change","readonly",i=>{let r;return e.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,e._s(t),e.mutationQueue.getAllMutationBatches(i))).next(s=>{let o=[],c=[],l=et();for(let u of r){o.push(u.batchId);for(let f of u.mutations)l=l.add(f.key)}for(let u of s){c.push(u.batchId);for(let f of u.mutations)l=l.add(f.key)}return e.localDocuments.getDocuments(i,l).next(u=>({us:u,removedBatchIds:o,addedBatchIds:c}))})})})}function Vk(n,t){let e=K(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=t.batch.keys(),s=e.os.newChangeBuffer({trackRemovals:!0});return function(c,l,u,f){let p=u.batch,b=p.keys(),A=O.resolve();return b.forEach(C=>{A=A.next(()=>f.getEntry(l,C)).next(P=>{let D=u.docVersions.get(C);mt(D!==null),P.version.compareTo(D)<0&&(p.applyToRemoteDocument(P,u),P.isValidDocument()&&(P.setReadTime(u.commitVersion),f.addEntry(P)))})}),A.next(()=>c.mutationQueue.removeMutationBatch(l,p))}(e,i,t,s).next(()=>s.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(c){let l=et();for(let u=0;u<c.mutationResults.length;++u)c.mutationResults[u].transformResults.length>0&&(l=l.add(c.batch.mutations[u].key));return l}(t))).next(()=>e.localDocuments.getDocuments(i,r))})}function Fw(n){let t=K(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Qr.getLastRemoteSnapshotVersion(e))}function Uk(n,t){let e=K(n),i=t.snapshotVersion,r=e.ns;return e.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=e.os.newChangeBuffer({trackRemovals:!0});r=e.ns;let c=[];t.targetChanges.forEach((f,p)=>{let b=r.get(p);if(!b)return;c.push(e.Qr.removeMatchingKeys(s,f.removedDocuments,p).next(()=>e.Qr.addMatchingKeys(s,f.addedDocuments,p)));let A=b.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(p)!==null?A=A.withResumeToken(ie.EMPTY_BYTE_STRING,Y.min()).withLastLimboFreeSnapshotVersion(Y.min()):f.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(f.resumeToken,i)),r=r.insert(p,A),function(P,D,j){return P.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0}(b,A,f)&&c.push(e.Qr.updateTargetData(s,A))});let l=_n(),u=et();if(t.documentUpdates.forEach(f=>{t.resolvedLimboDocuments.has(f)&&c.push(e.persistence.referenceDelegate.updateLimboDocument(s,f))}),c.push(jk(s,o,t.documentUpdates).next(f=>{l=f.cs,u=f.ls})),!i.isEqual(Y.min())){let f=e.Qr.getLastRemoteSnapshotVersion(s).next(p=>e.Qr.setTargetsMetadata(s,s.currentSequenceNumber,i));c.push(f)}return O.waitFor(c).next(()=>o.apply(s)).next(()=>e.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(e.ns=r,s))}function jk(n,t,e){let i=et(),r=et();return e.forEach(s=>i=i.add(s)),t.getEntries(n,i).next(s=>{let o=_n();return e.forEach((c,l)=>{let u=s.get(c);l.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(c)),l.isNoDocument()&&l.version.isEqual(Y.min())?(t.removeEntry(c,l.readTime),o=o.insert(c,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(t.addEntry(l),o=o.insert(c,l)):F("LocalStore","Ignoring outdated watch update for ",c,". Current version:",u.version," Watch version:",l.version)}),{cs:o,ls:r}})}function Bk(n,t){let e=K(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function zk(n,t){let e=K(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return e.Qr.getTargetData(i,t).next(s=>s?(r=s,O.resolve(r)):e.Qr.allocateTargetId(i).next(o=>(r=new Do(t,o,"TargetPurposeListen",i.currentSequenceNumber),e.Qr.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=e.ns.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.ns=e.ns.insert(i.targetId,i),e.rs.set(t,i.targetId)),i})}function fm(n,t,e){return g(this,null,function*(){let i=K(n),r=i.ns.get(t),s=e?"readwrite":"readwrite-primary";try{e||(yield i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!Fo(o))throw o;F("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}i.ns=i.ns.remove(t),i.rs.delete(r.target)})}function Xy(n,t,e){let i=K(n),r=Y.min(),s=et();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,f){let p=K(l),b=p.rs.get(f);return b!==void 0?O.resolve(p.ns.get(b)):p.Qr.getTargetData(u,f)}(i,o,Ue(t)).next(c=>{if(c)return r=c.lastLimboFreeSnapshotVersion,i.Qr.getMatchingKeysForTargetId(o,c.targetId).next(l=>{s=l})}).next(()=>i.ts.getDocumentsMatchingQuery(o,t,e?r:Y.min(),e?s:et())).next(c=>($k(i,rk(t),c),{documents:c,hs:s})))}function $k(n,t,e){let i=n.ss.get(t)||Y.min();e.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.ss.set(t,i)}var jc=class{constructor(){this.activeTargetIds=uk()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){let t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}};var mm=class{constructor(){this.no=new jc,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,e,i){this.ro[t]=e}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new jc,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}};var pm=class{io(t){}shutdown(){}};var Bc=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){F("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let t of this.uo)t(0)}ao(){F("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Ec=null;function lf(){return Ec===null?Ec=function(){return 268435456+Math.round(2147483648*Math.random())}():Ec++,"0x"+Ec.toString(16)}var qk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var gm=class{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}Ao(t){this.Ro=t}onMessage(t){this.Vo=t}close(){this.ho()}send(t){this.lo(t)}mo(){this.Io()}fo(){this.Eo()}po(t){this.Ro(t)}yo(t){this.Vo(t)}};var Jt="WebChannelConnection",_m=class extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let i=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=i+"://"+e.host,this.So=`projects/${r}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get Do(){return!1}Co(e,i,r,s,o){let c=lf(),l=this.vo(e,i.toUriEncodedString());F("RestConnection",`Sending RPC '${e}' ${c}:`,l,r);let u={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(u,s,o),this.Mo(e,l,u,r).then(f=>(F("RestConnection",`Received RPC '${e}' ${c}: `,f),f),f=>{throw kr("RestConnection",`RPC '${e}' ${c} failed with error: `,f,"url: ",l,"request:",r),f})}xo(e,i,r,s,o,c){return this.Co(e,i,r,s,o)}Fo(e,i,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Wr}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>e[o]=s),r&&r.headers.forEach((s,o)=>e[o]=s)}vo(e,i){let r=qk[e];return`${this.wo}/v1/${i}:${r}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Mo(t,e,i,r){let s=lf();return new Promise((o,c)=>{let l=new ef;l.setWithCredentials(!0),l.listenOnce(rf.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case vo.NO_ERROR:let f=l.getResponseJson();F(Jt,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(f)),o(f);break;case vo.TIMEOUT:F(Jt,`RPC '${t}' ${s} timed out`),c(new U(k.DEADLINE_EXCEEDED,"Request time out"));break;case vo.HTTP_ERROR:let p=l.getStatus();if(F(Jt,`RPC '${t}' ${s} failed with status:`,p,"response text:",l.getResponseText()),p>0){let b=l.getResponseJson();Array.isArray(b)&&(b=b[0]);let A=b?.error;if(A&&A.status&&A.message){let C=function(D){let j=D.toLowerCase().replace(/_/g,"-");return Object.values(k).indexOf(j)>=0?j:k.UNKNOWN}(A.status);c(new U(C,A.message))}else c(new U(k.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new U(k.UNAVAILABLE,"Connection failed."));break;default:W()}}finally{F(Jt,`RPC '${t}' ${s} completed.`)}});let u=JSON.stringify(r);F(Jt,`RPC '${t}' ${s} sending request:`,r),l.send(e,"POST",u,i,15)})}Oo(t,e,i){let r=lf(),s=[this.wo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=af(),c=of(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.xmlHttpFactory=new nf({})),this.Fo(l.initMessageHeaders,e,i),l.encodeInitMessageHeaders=!0;let f=s.join("");F(Jt,`Creating RPC '${t}' stream ${r}: ${f}`,l);let p=o.createWebChannel(f,l),b=!1,A=!1,C=new gm({lo:D=>{A?F(Jt,`Not sending because RPC '${t}' stream ${r} is closed:`,D):(b||(F(Jt,`Opening RPC '${t}' stream ${r} transport.`),p.open(),b=!0),F(Jt,`RPC '${t}' stream ${r} sending:`,D),p.send(D))},ho:()=>p.close()}),P=(D,j,$)=>{D.listen(j,H=>{try{$(H)}catch(X){setTimeout(()=>{throw X},0)}})};return P(p,Tr.EventType.OPEN,()=>{A||(F(Jt,`RPC '${t}' stream ${r} transport opened.`),C.mo())}),P(p,Tr.EventType.CLOSE,()=>{A||(A=!0,F(Jt,`RPC '${t}' stream ${r} transport closed`),C.po())}),P(p,Tr.EventType.ERROR,D=>{A||(A=!0,kr(Jt,`RPC '${t}' stream ${r} transport errored:`,D),C.po(new U(k.UNAVAILABLE,"The operation could not be completed")))}),P(p,Tr.EventType.MESSAGE,D=>{var j;if(!A){let $=D.data[0];mt(!!$);let H=$,X=H.error||((j=H[0])===null||j===void 0?void 0:j.error);if(X){F(Jt,`RPC '${t}' stream ${r} received error:`,X);let Ct=X.status,rt=function(y){let w=Ot[y];if(w!==void 0)return Cw(w)}(Ct),I=X.message;rt===void 0&&(rt=k.INTERNAL,I="Unknown error status: "+Ct+" with message "+X.message),A=!0,C.po(new U(rt,I)),p.close()}else F(Jt,`RPC '${t}' stream ${r} received:`,$),C.yo($)}}),P(c,sf.STAT_EVENT,D=>{D.stat===wc.PROXY?F(Jt,`RPC '${t}' stream ${r} detected buffering proxy`):D.stat===wc.NOPROXY&&F(Jt,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{C.fo()},0),C}};function uf(){return typeof document<"u"?document:null}function ll(n){return new $f(n,!0)}var zc=class{constructor(t,e,i=1e3,r=1.5,s=6e4){this.oi=t,this.timerId=e,this.No=i,this.Lo=r,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(t){this.cancel();let e=Math.floor(this.ko+this.Uo()),i=Math.max(0,Date.now()-this.Qo),r=Math.max(0,e-i);r>0&&F("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.ko} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,r,()=>(this.Qo=Date.now(),t())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}};var $c=class{constructor(t,e,i,r,s,o,c,l){this.oi=t,this.Go=i,this.zo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new zc(t,e)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}stop(){return g(this,null,function*(){this.Zo()&&(yield this.close(0))})}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(t){this.s_(),this.stream.send(t)}r_(){return g(this,null,function*(){if(this.Xo())return this.close(0)})}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(t,e){return g(this,null,function*(){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,t!==4?this.Yo.reset():e&&e.code===k.RESOURCE_EXHAUSTED?(pn(e.toString()),pn("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):e&&e.code===k.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=t,yield this.listener.Ao(e)})}__(){}auth(){this.state=1;let t=this.a_(this.jo),e=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.jo===e&&this.u_(i,r)},i=>{t(()=>{let r=new U(k.UNKNOWN,"Fetching auth token failed: "+i.message);return this.c_(r)})})}u_(t,e){let i=this.a_(this.jo);this.stream=this.l_(t,e),this.stream.Po(()=>{i(()=>this.listener.Po())}),this.stream.To(()=>{i(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(r=>{i(()=>this.c_(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}e_(){this.state=5,this.Yo.$o(()=>g(this,null,function*(){this.state=0,this.start()}))}c_(t){return F("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}a_(t){return e=>{this.oi.enqueueAndForget(()=>this.jo===t?e():(F("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},bm=class extends $c{constructor(t,e,i,r,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,r,o),this.serializer=s}l_(t,e){return this.connection.Oo("Listen",t,e)}onMessage(t){this.Yo.reset();let e=Ak(this.serializer,t),i=function(s){if(!("targetChange"in s))return Y.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?Y.min():o.readTime?je(o.readTime):Y.min()}(t);return this.listener.h_(e,i)}P_(t){let e={};e.database=Gf(this.serializer),e.addTarget=function(s,o){let c,l=o.target;if(c=Of(l)?{documents:Ck(s,l)}:{query:xk(s,l)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=xw(s,o.resumeToken);let u=qf(s,o.expectedCount);u!==null&&(c.expectedCount=u)}else if(o.snapshotVersion.compareTo(Y.min())>0){c.readTime=Vc(s,o.snapshotVersion.toTimestamp());let u=qf(s,o.expectedCount);u!==null&&(c.expectedCount=u)}return c}(this.serializer,t);let i=kk(this.serializer,t);i&&(e.labels=i),this.i_(e)}I_(t){let e={};e.database=Gf(this.serializer),e.removeTarget=t,this.i_(e)}},vm=class extends $c{constructor(t,e,i,r,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,r,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(t,e){return this.connection.Oo("Write",t,e)}onMessage(t){if(mt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.T_){this.Yo.reset();let e=Sk(t.writeResults,t.commitTime),i=je(t.commitTime);return this.listener.A_(i,e)}return mt(!t.writeResults||t.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){let t={};t.database=Gf(this.serializer),this.i_(t)}d_(t){let e={streamToken:this.lastStreamToken,writes:t.map(i=>Rk(this.serializer,i))};this.i_(e)}};var ym=class extends class{}{constructor(t,e,i,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=r,this.m_=!1}f_(){if(this.m_)throw new U(k.FAILED_PRECONDITION,"The client has already been terminated.")}Co(t,e,i,r){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(t,Wf(e,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new U(k.UNKNOWN,s.toString())})}xo(t,e,i,r,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.xo(t,Wf(e,i),r,o,c,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new U(k.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}},wm=class{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(t){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.S_("Offline")))}set(t){this.C_(),this.g_=0,t==="Online"&&(this.y_=!1),this.S_(t)}S_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}b_(t){let e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(pn(e),this.y_=!1):F("OnlineStateTracker",e)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}};var Im=class{constructor(t,e,i,r,s){this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{i.enqueueAndForget(()=>g(this,null,function*(){Li(this)&&(F("RemoteStore","Restarting streams for network reachability change."),yield function(l){return g(this,null,function*(){let u=K(l);u.M_.add(4),yield Vo(u),u.N_.set("Unknown"),u.M_.delete(4),yield ul(u)})}(this))}))}),this.N_=new wm(i,r)}};function ul(n){return g(this,null,function*(){if(Li(n))for(let t of n.x_)yield t(!0)})}function Vo(n){return g(this,null,function*(){for(let t of n.x_)yield t(!1)})}function Vw(n,t){let e=K(n);e.F_.has(t.targetId)||(e.F_.set(t.targetId,t),Zm(e)?Jm(e):Hr(e).Xo()&&Xm(e,t))}function Qm(n,t){let e=K(n),i=Hr(e);e.F_.delete(t),i.Xo()&&Uw(e,t),e.F_.size===0&&(i.Xo()?i.n_():Li(e)&&e.N_.set("Unknown"))}function Xm(n,t){if(n.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Y.min())>0){let e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}Hr(n).P_(t)}function Uw(n,t){n.L_.xe(t),Hr(n).I_(t)}function Jm(n){n.L_=new zf({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>n.F_.get(t)||null,tt:()=>n.datastore.serializer.databaseId}),Hr(n).start(),n.N_.w_()}function Zm(n){return Li(n)&&!Hr(n).Zo()&&n.F_.size>0}function Li(n){return K(n).M_.size===0}function jw(n){n.L_=void 0}function Wk(n){return g(this,null,function*(){n.N_.set("Online")})}function Hk(n){return g(this,null,function*(){n.F_.forEach((t,e)=>{Xm(n,t)})})}function Gk(n,t){return g(this,null,function*(){jw(n),Zm(n)?(n.N_.D_(t),Jm(n)):n.N_.set("Unknown")})}function Kk(n,t,e){return g(this,null,function*(){if(n.N_.set("Online"),t instanceof Lc&&t.state===2&&t.cause)try{yield function(r,s){return g(this,null,function*(){let o=s.cause;for(let c of s.targetIds)r.F_.has(c)&&(yield r.remoteSyncer.rejectListen(c,o),r.F_.delete(c),r.L_.removeTarget(c))})}(n,t)}catch(i){F("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),yield qc(n,i)}else if(t instanceof xr?n.L_.Ke(t):t instanceof Mc?n.L_.He(t):n.L_.We(t),!e.isEqual(Y.min()))try{let i=yield Fw(n.localStore);e.compareTo(i)>=0&&(yield function(s,o){let c=s.L_.rt(o);return c.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){let f=s.F_.get(u);f&&s.F_.set(u,f.withResumeToken(l.resumeToken,o))}}),c.targetMismatches.forEach((l,u)=>{let f=s.F_.get(l);if(!f)return;s.F_.set(l,f.withResumeToken(ie.EMPTY_BYTE_STRING,f.snapshotVersion)),Uw(s,l);let p=new Do(f.target,l,u,f.sequenceNumber);Xm(s,p)}),s.remoteSyncer.applyRemoteEvent(c)}(n,e))}catch(i){F("RemoteStore","Failed to raise snapshot:",i),yield qc(n,i)}})}function qc(n,t,e){return g(this,null,function*(){if(!Fo(t))throw t;n.M_.add(1),yield Vo(n),n.N_.set("Offline"),e||(e=()=>Fw(n.localStore)),n.asyncQueue.enqueueRetryable(()=>g(this,null,function*(){F("RemoteStore","Retrying IndexedDB access"),yield e(),n.M_.delete(1),yield ul(n)}))})}function Bw(n,t){return t().catch(e=>qc(n,e,t))}function dl(n){return g(this,null,function*(){let t=K(n),e=$n(t),i=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;Yk(t);)try{let r=yield Bk(t.localStore,i);if(r===null){t.v_.length===0&&e.n_();break}i=r.batchId,Qk(t,r)}catch(r){yield qc(t,r)}zw(t)&&$w(t)})}function Yk(n){return Li(n)&&n.v_.length<10}function Qk(n,t){n.v_.push(t);let e=$n(n);e.Xo()&&e.E_&&e.d_(t.mutations)}function zw(n){return Li(n)&&!$n(n).Zo()&&n.v_.length>0}function $w(n){$n(n).start()}function Xk(n){return g(this,null,function*(){$n(n).V_()})}function Jk(n){return g(this,null,function*(){let t=$n(n);for(let e of n.v_)t.d_(e.mutations)})}function Zk(n,t,e){return g(this,null,function*(){let i=n.v_.shift(),r=Vf.from(i,t,e);yield Bw(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield dl(n)})}function tP(n,t){return g(this,null,function*(){t&&$n(n).E_&&(yield function(i,r){return g(this,null,function*(){if(function(o){return _k(o)&&o!==k.ABORTED}(r.code)){let s=i.v_.shift();$n(i).t_(),yield Bw(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),yield dl(i)}})}(n,t)),zw(n)&&$w(n)})}function Jy(n,t){return g(this,null,function*(){let e=K(n);e.asyncQueue.verifyOperationInProgress(),F("RemoteStore","RemoteStore received new credentials");let i=Li(e);e.M_.add(3),yield Vo(e),i&&e.N_.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e.M_.delete(3),yield ul(e)})}function eP(n,t){return g(this,null,function*(){let e=K(n);t?(e.M_.delete(2),yield ul(e)):t||(e.M_.add(2),yield Vo(e),e.N_.set("Unknown"))})}function Hr(n){return n.B_||(n.B_=function(e,i,r){let s=K(e);return s.f_(),new bm(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{Po:Wk.bind(null,n),To:Hk.bind(null,n),Ao:Gk.bind(null,n),h_:Kk.bind(null,n)}),n.x_.push(t=>g(this,null,function*(){t?(n.B_.t_(),Zm(n)?Jm(n):n.N_.set("Unknown")):(yield n.B_.stop(),jw(n))}))),n.B_}function $n(n){return n.k_||(n.k_=function(e,i,r){let s=K(e);return s.f_(),new vm(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{Po:()=>Promise.resolve(),To:Xk.bind(null,n),Ao:tP.bind(null,n),R_:Jk.bind(null,n),A_:Zk.bind(null,n)}),n.x_.push(t=>g(this,null,function*(){t?(n.k_.t_(),yield dl(n)):(yield n.k_.stop(),n.v_.length>0&&(F("RemoteStore",`Stopping write stream with ${n.v_.length} pending writes`),n.v_=[]))}))),n.k_}var Em=class n{constructor(t,e,i,r,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Se,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,i,r,s){let o=Date.now()+i,c=new n(t,e,o,r,s);return c.start(i),c}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new U(k.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function tp(n,t){if(pn("AsyncQueue",`${t}: ${n}`),Fo(n))return new U(k.UNAVAILABLE,`${t}: ${n}`);throw n}var Wc=class n{constructor(t){this.comparator=t?(e,i)=>t(e,i)||z.comparator(e.key,i.key):(e,i)=>z.comparator(e.key,i.key),this.keyedMap=wo(),this.sortedSet=new Et(this.comparator)}static emptySet(t){return new n(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){let e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){let e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){let e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof n)||this.size!==t.size)return!1;let e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){let r=e.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){let t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){let i=new n;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}};var Hc=class{constructor(){this.q_=new Et(z.comparator)}track(t){let e=t.doc.key,i=this.q_.get(e);i?t.type!==0&&i.type===3?this.q_=this.q_.insert(e,t):t.type===3&&i.type!==1?this.q_=this.q_.insert(e,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.q_=this.q_.insert(e,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.q_=this.q_.insert(e,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.q_=this.q_.remove(e):t.type===1&&i.type===2?this.q_=this.q_.insert(e,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.q_=this.q_.insert(e,{type:2,doc:t.doc}):W():this.q_=this.q_.insert(e,t)}Q_(){let t=[];return this.q_.inorderTraversal((e,i)=>{t.push(i)}),t}},zr=class n{constructor(t,e,i,r,s,o,c,l,u){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(t,e,i,r,s){let o=[];return e.forEach(c=>{o.push({type:0,doc:c})}),new n(t,e,Wc.emptySet(e),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&al(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;let e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==i[r].type||!e[r].doc.isEqual(i[r].doc))return!1;return!0}};var Tm=class{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(t=>t.G_())}},Am=class{constructor(){this.queries=new zn(t=>pw(t),al),this.onlineState="Unknown",this.z_=new Set}};function qw(n,t){return g(this,null,function*(){let e=K(n),i=3,r=t.query,s=e.queries.get(r);s?!s.W_()&&t.G_()&&(i=2):(s=new Tm,i=t.G_()?0:1);try{switch(i){case 0:s.K_=yield e.onListen(r,!0);break;case 1:s.K_=yield e.onListen(r,!1);break;case 2:yield e.onFirstRemoteStoreListen(r)}}catch(o){let c=tp(o,`Initialization of query '${Ar(t.query)}' failed`);return void t.onError(c)}e.queries.set(r,s),s.U_.push(t),t.j_(e.onlineState),s.K_&&t.H_(s.K_)&&ep(e)})}function Ww(n,t){return g(this,null,function*(){let e=K(n),i=t.query,r=3,s=e.queries.get(i);if(s){let o=s.U_.indexOf(t);o>=0&&(s.U_.splice(o,1),s.U_.length===0?r=t.G_()?0:1:!s.W_()&&t.G_()&&(r=2))}switch(r){case 0:return e.queries.delete(i),e.onUnlisten(i,!0);case 1:return e.queries.delete(i),e.onUnlisten(i,!1);case 2:return e.onLastRemoteStoreUnlisten(i);default:return}})}function nP(n,t){let e=K(n),i=!1;for(let r of t){let s=r.query,o=e.queries.get(s);if(o){for(let c of o.U_)c.H_(r)&&(i=!0);o.K_=r}}i&&ep(e)}function iP(n,t,e){let i=K(n),r=i.queries.get(t);if(r)for(let s of r.U_)s.onError(e);i.queries.delete(t)}function ep(n){n.z_.forEach(t=>{t.next()})}var Rm,Zy;(Zy=Rm||(Rm={})).J_="default",Zy.Cache="cache";var Gc=class{constructor(t,e,i){this.query=t,this.Y_=e,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=i||{}}H_(t){if(!this.options.includeMetadataChanges){let i=[];for(let r of t.docChanges)r.type!==3&&i.push(r);t=new zr(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Z_?this.ea(t)&&(this.Y_.next(t),e=!0):this.ta(t,this.onlineState)&&(this.na(t),e=!0),this.X_=t,e}onError(t){this.Y_.error(t)}j_(t){this.onlineState=t;let e=!1;return this.X_&&!this.Z_&&this.ta(this.X_,t)&&(this.na(this.X_),e=!0),e}ta(t,e){if(!t.fromCache||!this.G_())return!0;let i=e!=="Offline";return(!this.options.ra||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}ea(t){if(t.docChanges.length>0)return!0;let e=this.X_&&this.X_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}na(t){t=zr.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Z_=!0,this.Y_.next(t)}G_(){return this.options.source!==Rm.Cache}};var Kc=class{constructor(t){this.key=t}},Yc=class{constructor(t){this.key=t}},Sm=class{constructor(t,e){this.query=t,this.la=e,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=et(),this.mutatedKeys=et(),this.Ia=gw(t),this.Ta=new Wc(this.Ia)}get Ea(){return this.la}da(t,e){let i=e?e.Aa:new Hc,r=e?e.Ta:this.Ta,s=e?e.mutatedKeys:this.mutatedKeys,o=r,c=!1,l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((f,p)=>{let b=r.get(f),A=cl(this.query,p)?p:null,C=!!b&&this.mutatedKeys.has(b.key),P=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations),D=!1;b&&A?b.data.isEqual(A.data)?C!==P&&(i.track({type:3,doc:A}),D=!0):this.Ra(b,A)||(i.track({type:2,doc:A}),D=!0,(l&&this.Ia(A,l)>0||u&&this.Ia(A,u)<0)&&(c=!0)):!b&&A?(i.track({type:0,doc:A}),D=!0):b&&!A&&(i.track({type:1,doc:b}),D=!0,(l||u)&&(c=!0)),D&&(A?(o=o.add(A),s=P?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),i.track({type:1,doc:f})}return{Ta:o,Aa:i,Xi:c,mutatedKeys:s}}Ra(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i,r){let s=this.Ta;this.Ta=t.Ta,this.mutatedKeys=t.mutatedKeys;let o=t.Aa.Q_();o.sort((f,p)=>function(A,C){let P=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return W()}};return P(A)-P(C)}(f.type,p.type)||this.Ia(f.doc,p.doc)),this.Va(i),r=r!=null&&r;let c=e&&!r?this.ma():[],l=this.Pa.size===0&&this.current&&!r?1:0,u=l!==this.ha;return this.ha=l,o.length!==0||u?{snapshot:new zr(this.query,t.Ta,s,o,t.mutatedKeys,l===0,u,!1,!!i&&i.resumeToken.approximateByteSize()>0),fa:c}:{fa:c}}j_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Hc,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(t){return!this.la.has(t)&&!!this.Ta.has(t)&&!this.Ta.get(t).hasLocalMutations}Va(t){t&&(t.addedDocuments.forEach(e=>this.la=this.la.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.la=this.la.delete(e)),this.current=t.current)}ma(){if(!this.current)return[];let t=this.Pa;this.Pa=et(),this.Ta.forEach(i=>{this.ga(i.key)&&(this.Pa=this.Pa.add(i.key))});let e=[];return t.forEach(i=>{this.Pa.has(i)||e.push(new Yc(i))}),this.Pa.forEach(i=>{t.has(i)||e.push(new Kc(i))}),e}pa(t){this.la=t.hs,this.Pa=et();let e=this.da(t.documents);return this.applyChanges(e,!0)}ya(){return zr.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}},Cm=class{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}},xm=class{constructor(t){this.key=t,this.wa=!1}},Dm=class{constructor(t,e,i,r,s,o){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new zn(c=>pw(c),al),this.Da=new Map,this.Ca=new Set,this.va=new Et(z.comparator),this.Fa=new Map,this.Ma=new Po,this.xa={},this.Oa=new Map,this.Na=ko.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}};function rP(n,t,e=!0){return g(this,null,function*(){let i=Xw(n),r,s=i.ba.get(t);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.ya()):r=yield Hw(i,t,e,!0),r})}function sP(n,t){return g(this,null,function*(){let e=Xw(n);yield Hw(e,t,!0,!1)})}function Hw(n,t,e,i){return g(this,null,function*(){let r=yield zk(n.localStore,Ue(t)),s=r.targetId,o=e?n.sharedClientState.addLocalQueryTarget(s):"not-current",c;return i&&(c=yield oP(n,t,s,o==="current",r.resumeToken)),n.isPrimaryClient&&e&&Vw(n.remoteStore,r),c})}function oP(n,t,e,i,r){return g(this,null,function*(){n.Ba=(p,b,A)=>function(P,D,j,$){return g(this,null,function*(){let H=D.view.da(j);H.Xi&&(H=yield Xy(P.localStore,D.query,!1).then(({documents:I})=>D.view.da(I,H)));let X=$&&$.targetChanges.get(D.targetId),Ct=$&&$.targetMismatches.get(D.targetId)!=null,rt=D.view.applyChanges(H,P.isPrimaryClient,X,Ct);return ew(P,D.targetId,rt.fa),rt.snapshot})}(n,p,b,A);let s=yield Xy(n.localStore,t,!0),o=new Sm(t,s.hs),c=o.da(s.documents),l=xo.createSynthesizedTargetChangeForCurrentChange(e,i&&n.onlineState!=="Offline",r),u=o.applyChanges(c,n.isPrimaryClient,l);ew(n,e,u.fa);let f=new Cm(t,e,o);return n.ba.set(t,f),n.Da.has(e)?n.Da.get(e).push(t):n.Da.set(e,[t]),u.snapshot})}function aP(n,t,e){return g(this,null,function*(){let i=K(n),r=i.ba.get(t),s=i.Da.get(r.targetId);if(s.length>1)return i.Da.set(r.targetId,s.filter(o=>!al(o,t))),void i.ba.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield fm(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),e&&Qm(i.remoteStore,r.targetId),km(i,r.targetId)}).catch(Lo))):(km(i,r.targetId),yield fm(i.localStore,r.targetId,!0))})}function cP(n,t){return g(this,null,function*(){let e=K(n),i=e.ba.get(t),r=e.Da.get(i.targetId);e.isPrimaryClient&&r.length===1&&(e.sharedClientState.removeLocalQueryTarget(i.targetId),Qm(e.remoteStore,i.targetId))})}function lP(n,t,e){return g(this,null,function*(){let i=gP(n);try{let r=yield function(o,c){let l=K(o),u=Ht.now(),f=c.reduce((A,C)=>A.add(C.key),et()),p,b;return l.persistence.runTransaction("Locally write mutations","readwrite",A=>{let C=_n(),P=et();return l.os.getEntries(A,f).next(D=>{C=D,C.forEach((j,$)=>{$.isValidDocument()||(P=P.add(j))})}).next(()=>l.localDocuments.getOverlayedDocuments(A,C)).next(D=>{p=D;let j=[];for(let $ of c){let H=gk($,p.get($.key).overlayedDocument);H!=null&&j.push(new $e($.key,H,lw(H.value.mapValue),mn.exists(!0)))}return l.mutationQueue.addMutationBatch(A,u,j,c)}).next(D=>{b=D;let j=D.applyToLocalDocumentSet(p,P);return l.documentOverlayCache.saveOverlays(A,D.batchId,j)})}).then(()=>({batchId:b.batchId,changes:bw(p)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(o,c,l){let u=o.xa[o.currentUser.toKey()];u||(u=new Et(ot)),u=u.insert(c,l),o.xa[o.currentUser.toKey()]=u}(i,r.batchId,e),yield Uo(i,r.changes),yield dl(i.remoteStore)}catch(r){let s=tp(r,"Failed to persist write");e.reject(s)}})}function Gw(n,t){return g(this,null,function*(){let e=K(n);try{let i=yield Uk(e.localStore,t);t.targetChanges.forEach((r,s)=>{let o=e.Fa.get(s);o&&(mt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.wa=!0:r.modifiedDocuments.size>0?mt(o.wa):r.removedDocuments.size>0&&(mt(o.wa),o.wa=!1))}),yield Uo(e,i,t)}catch(i){yield Lo(i)}})}function tw(n,t,e){let i=K(n);if(i.isPrimaryClient&&e===0||!i.isPrimaryClient&&e===1){let r=[];i.ba.forEach((s,o)=>{let c=o.view.j_(t);c.snapshot&&r.push(c.snapshot)}),function(o,c){let l=K(o);l.onlineState=c;let u=!1;l.queries.forEach((f,p)=>{for(let b of p.U_)b.j_(c)&&(u=!0)}),u&&ep(l)}(i.eventManager,t),r.length&&i.Sa.h_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}function uP(n,t,e){return g(this,null,function*(){let i=K(n);i.sharedClientState.updateQueryState(t,"rejected",e);let r=i.Fa.get(t),s=r&&r.key;if(s){let o=new Et(z.comparator);o=o.insert(s,Ce.newNoDocument(s,Y.min()));let c=et().add(s),l=new Nc(Y.min(),new Map,new Et(ot),o,c);yield Gw(i,l),i.va=i.va.remove(s),i.Fa.delete(t),np(i)}else yield fm(i.localStore,t,!1).then(()=>km(i,t,e)).catch(Lo)})}function dP(n,t){return g(this,null,function*(){let e=K(n),i=t.batch.batchId;try{let r=yield Vk(e.localStore,t);Yw(e,i,null),Kw(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),yield Uo(e,r)}catch(r){yield Lo(r)}})}function hP(n,t,e){return g(this,null,function*(){let i=K(n);try{let r=yield function(o,c){let l=K(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let f;return l.mutationQueue.lookupMutationBatch(u,c).next(p=>(mt(p!==null),f=p.keys(),l.mutationQueue.removeMutationBatch(u,p))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,f,c)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,f)).next(()=>l.localDocuments.getDocuments(u,f))})}(i.localStore,t);Yw(i,t,e),Kw(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),yield Uo(i,r)}catch(r){yield Lo(r)}})}function Kw(n,t){(n.Oa.get(t)||[]).forEach(e=>{e.resolve()}),n.Oa.delete(t)}function Yw(n,t,e){let i=K(n),r=i.xa[i.currentUser.toKey()];if(r){let s=r.get(t);s&&(e?s.reject(e):s.resolve(),r=r.remove(t)),i.xa[i.currentUser.toKey()]=r}}function km(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(let i of n.Da.get(t))n.ba.delete(i),e&&n.Sa.ka(i,e);n.Da.delete(t),n.isPrimaryClient&&n.Ma.Vr(t).forEach(i=>{n.Ma.containsKey(i)||Qw(n,i)})}function Qw(n,t){n.Ca.delete(t.path.canonicalString());let e=n.va.get(t);e!==null&&(Qm(n.remoteStore,e),n.va=n.va.remove(t),n.Fa.delete(e),np(n))}function ew(n,t,e){for(let i of e)i instanceof Kc?(n.Ma.addReference(i.key,t),fP(n,i)):i instanceof Yc?(F("SyncEngine","Document no longer in limbo: "+i.key),n.Ma.removeReference(i.key,t),n.Ma.containsKey(i.key)||Qw(n,i.key)):W()}function fP(n,t){let e=t.key,i=e.path.canonicalString();n.va.get(e)||n.Ca.has(i)||(F("SyncEngine","New document in limbo: "+e),n.Ca.add(i),np(n))}function np(n){for(;n.Ca.size>0&&n.va.size<n.maxConcurrentLimboResolutions;){let t=n.Ca.values().next().value;n.Ca.delete(t);let e=new z(It.fromString(t)),i=n.Na.next();n.Fa.set(i,new xm(e)),n.va=n.va.insert(e,i),Vw(n.remoteStore,new Do(Ue(Km(e.path)),i,"TargetPurposeLimboResolution",ow.oe))}}function Uo(n,t,e){return g(this,null,function*(){let i=K(n),r=[],s=[],o=[];i.ba.isEmpty()||(i.ba.forEach((c,l)=>{o.push(i.Ba(l,t,e).then(u=>{if((u||e)&&i.isPrimaryClient){let f=u&&!u.fromCache;i.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(u){r.push(u);let f=lm.Ki(l.targetId,u);s.push(f)}}))}),yield Promise.all(o),i.Sa.h_(r),yield function(l,u){return g(this,null,function*(){let f=K(l);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>O.forEach(u,b=>O.forEach(b.qi,A=>f.persistence.referenceDelegate.addReference(p,b.targetId,A)).next(()=>O.forEach(b.Qi,A=>f.persistence.referenceDelegate.removeReference(p,b.targetId,A)))))}catch(p){if(!Fo(p))throw p;F("LocalStore","Failed to update sequence numbers: "+p)}for(let p of u){let b=p.targetId;if(!p.fromCache){let A=f.ns.get(b),C=A.snapshotVersion,P=A.withLastLimboFreeSnapshotVersion(C);f.ns=f.ns.insert(b,P)}}})}(i.localStore,s))})}function mP(n,t){return g(this,null,function*(){let e=K(n);if(!e.currentUser.isEqual(t)){F("SyncEngine","User change. New user:",t.toKey());let i=yield Lw(e.localStore,t);e.currentUser=t,function(s,o){s.Oa.forEach(c=>{c.forEach(l=>{l.reject(new U(k.CANCELLED,o))})}),s.Oa.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),yield Uo(e,i.us)}})}function pP(n,t){let e=K(n),i=e.Fa.get(t);if(i&&i.wa)return et().add(i.key);{let r=et(),s=e.Da.get(t);if(!s)return r;for(let o of s){let c=e.ba.get(o);r=r.unionWith(c.view.Ea)}return r}}function Xw(n){let t=K(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=Gw.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=pP.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=uP.bind(null,t),t.Sa.h_=nP.bind(null,t.eventManager),t.Sa.ka=iP.bind(null,t.eventManager),t}function gP(n){let t=K(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=dP.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=hP.bind(null,t),t}var Qc=class{constructor(){this.synchronizeTabs=!1}initialize(t){return g(this,null,function*(){this.serializer=ll(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),yield this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)})}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return Fk(this.persistence,new dm,t.initialUser,this.serializer)}createPersistence(t){return new om(cm.Hr,this.serializer)}createSharedClientState(t){return new mm}terminate(){return g(this,null,function*(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Pm=class{initialize(t,e){return g(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>tw(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=mP.bind(null,this.syncEngine),yield eP(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new Am}()}createDatastore(t){let e=ll(t.databaseInfo.databaseId),i=function(s){return new _m(s)}(t.databaseInfo);return function(s,o,c,l){return new ym(s,o,c,l)}(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return function(i,r,s,o,c){return new Im(i,r,s,o,c)}(this.localStore,this.datastore,t.asyncQueue,e=>tw(this.syncEngine,e,0),function(){return Bc.D()?new Bc:new pm}())}createSyncEngine(t,e){return function(r,s,o,c,l,u,f){let p=new Dm(r,s,o,c,l,u);return f&&(p.La=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return g(this,null,function*(){var t;yield function(i){return g(this,null,function*(){let r=K(i);F("RemoteStore","RemoteStore shutting down."),r.M_.add(5),yield Vo(r),r.O_.shutdown(),r.N_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()})}};var Xc=class{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ka(this.observer.next,t)}error(t){this.observer.error?this.Ka(this.observer.error,t):pn("Uncaught Error in snapshot listener:",t.toString())}$a(){this.muted=!0}Ka(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}};var Om=class{constructor(t,e,i,r){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=r,this.user=Bt.UNAUTHENTICATED,this.clientId=Sc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,s=>g(this,null,function*(){F("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(i,s=>(F("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new U(k.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let t=new Se;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>g(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){let i=tp(e,"Failed to shutdown persistence");t.reject(i)}})),t.promise}};function df(n,t){return g(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),F("FirestoreClient","Initializing OfflineComponentProvider");let e=n.configuration;yield t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(r=>g(this,null,function*(){i.isEqual(r)||(yield Lw(t.localStore,r),i=r)})),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t})}function nw(n,t){return g(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let e=yield bP(n);F("FirestoreClient","Initializing OnlineComponentProvider"),yield t.initialize(e,n.configuration),n.setCredentialChangeListener(i=>Jy(t.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>Jy(t.remoteStore,r)),n._onlineComponents=t})}function _P(n){return n.name==="FirebaseError"?n.code===k.FAILED_PRECONDITION||n.code===k.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}function bP(n){return g(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){F("FirestoreClient","Using user provided OfflineComponentProvider");try{yield df(n,n._uninitializedComponentsProvider._offline)}catch(t){let e=t;if(!_P(e))throw e;kr("Error using user provided cache. Falling back to memory cache: "+e),yield df(n,new Qc)}}else F("FirestoreClient","Using default OfflineComponentProvider"),yield df(n,new Qc);return n._offlineComponents})}function Jw(n){return g(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(F("FirestoreClient","Using user provided OnlineComponentProvider"),yield nw(n,n._uninitializedComponentsProvider._online)):(F("FirestoreClient","Using default OnlineComponentProvider"),yield nw(n,new Pm))),n._onlineComponents})}function vP(n){return Jw(n).then(t=>t.syncEngine)}function Zw(n){return g(this,null,function*(){let t=yield Jw(n),e=t.eventManager;return e.onListen=rP.bind(null,t.syncEngine),e.onUnlisten=aP.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=sP.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=cP.bind(null,t.syncEngine),e})}function yP(n,t,e={}){let i=new Se;return n.asyncQueue.enqueueAndForget(()=>g(this,null,function*(){return function(s,o,c,l,u){let f=new Xc({next:b=>{o.enqueueAndForget(()=>Ww(s,p));let A=b.docs.has(c);!A&&b.fromCache?u.reject(new U(k.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&b.fromCache&&l&&l.source==="server"?u.reject(new U(k.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(b)},error:b=>u.reject(b)}),p=new Gc(Km(c.path),f,{includeMetadataChanges:!0,ra:!0});return qw(s,p)}(yield Zw(n),n.asyncQueue,t,e,i)})),i.promise}function wP(n,t,e={}){let i=new Se;return n.asyncQueue.enqueueAndForget(()=>g(this,null,function*(){return function(s,o,c,l,u){let f=new Xc({next:b=>{o.enqueueAndForget(()=>Ww(s,p)),b.fromCache&&l.source==="server"?u.reject(new U(k.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(b)},error:b=>u.reject(b)}),p=new Gc(c,f,{includeMetadataChanges:!0,ra:!0});return qw(s,p)}(yield Zw(n),n.asyncQueue,t,e,i)})),i.promise}function tI(n){let t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}var iw=new Map;function eI(n,t,e){if(!e)throw new U(k.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function IP(n,t,e,i){if(t===!0&&i===!0)throw new U(k.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function rw(n){if(!z.isDocumentKey(n))throw new U(k.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function sw(n){if(z.isDocumentKey(n))throw new U(k.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ip(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let t=function(i){return i.constructor?i.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":W()}function qe(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new U(k.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let e=ip(n);throw new U(k.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}var Jc=class{constructor(t){var e,i;if(t.host===void 0){if(t.ssl!==void 0)throw new U(k.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(e=t.ssl)===null||e===void 0||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new U(k.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}IP("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=tI((i=t.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new U(k.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new U(k.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new U(k.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}},$r=class{constructor(t,e,i,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jc({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new U(k.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new U(k.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jc(t),t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new hf;switch(i.type){case"firstParty":return new gf(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new U(k.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){let i=iw.get(e);i&&(F("ComponentProvider","Removing Datastore"),iw.delete(e),i.terminate())}(this),Promise.resolve()}};function nI(n,t,e,i={}){var r;let s=(n=qe(n,$r))._getSettings(),o=`${t}:${e}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&kr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let c,l;if(typeof i.mockUserToken=="string")c=i.mockUserToken,l=Bt.MOCK_USER;else{c=Wa(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);let u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new U(k.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Bt(u)}n._authCredentials=new ff(new Rc(c,l))}}var Zc=class n{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new n(this.firestore,t,this._query)}},oe=class n{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new jn(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new n(this.firestore,t,this._key)}},jn=class n extends Zc{constructor(t,e,i){super(t,e,Km(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let t=this._path.popLast();return t.isEmpty()?null:new oe(this.firestore,null,new z(t))}withConverter(t){return new n(this.firestore,t,this._path)}};function iI(n,t,...e){if(n=gt(n),eI("collection","path",t),n instanceof $r){let i=It.fromString(t,...e);return sw(i),new jn(n,null,i)}{if(!(n instanceof oe||n instanceof jn))throw new U(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(It.fromString(t,...e));return sw(i),new jn(n.firestore,null,i)}}function rp(n,t,...e){if(n=gt(n),arguments.length===1&&(t=Sc.newId()),eI("doc","path",t),n instanceof $r){let i=It.fromString(t,...e);return rw(i),new oe(n,null,new z(i))}{if(!(n instanceof oe||n instanceof jn))throw new U(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(It.fromString(t,...e));return rw(i),new oe(n.firestore,n instanceof jn?n.converter:null,new z(i))}}var Nm=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new zc(this,"async_queue_retry"),this.hu=()=>{let e=uf();e&&F("AsyncQueue","Visibility state changed to "+e.visibilityState),this.Yo.Wo()};let t=uf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pu(),this.Iu(t)}enterRestrictedMode(t){if(!this.ou){this.ou=!0,this.cu=t||!1;let e=uf();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.hu)}}enqueue(t){if(this.Pu(),this.ou)return new Promise(()=>{});let e=new Se;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.su.push(t),this.Tu()))}Tu(){return g(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Yo.reset()}catch(t){if(!Fo(t))throw t;F("AsyncQueue","Operation failed with retryable error: "+t)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}})}Iu(t){let e=this.iu.then(()=>(this.uu=!0,t().catch(i=>{this.au=i,this.uu=!1;let r=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(i);throw pn("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.uu=!1,i))));return this.iu=e,e}enqueueAfterDelay(t,e,i){this.Pu(),this.lu.indexOf(t)>-1&&(e=0);let r=Em.createAndSchedule(this,t,e,i,s=>this.Eu(s));return this._u.push(r),r}Pu(){this.au&&W()}verifyOperationInProgress(){}du(){return g(this,null,function*(){let t;do t=this.iu,yield t;while(t!==this.iu)})}Au(t){for(let e of this._u)if(e.timerId===t)return!0;return!1}Ru(t){return this.du().then(()=>{this._u.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(let e of this._u)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.du()})}Vu(t){this.lu.push(t)}Eu(t){let e=this._u.indexOf(t);this._u.splice(e,1)}};var qn=class extends $r{constructor(t,e,i,r){super(t,e,i,r),this.type="firestore",this._queue=function(){return new Nm}(),this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||sI(this),this._firestoreClient.terminate()}};function rI(n,t){let e=typeof n=="object"?n:Nn(),i=typeof n=="string"?n:t||"(default)",r=gi(e,"firestore").getImmediate({identifier:i});if(!r._initialized){let s=qa("firestore");s&&nI(r,...s)}return r}function sp(n){return n._firestoreClient||sI(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function sI(n){var t,e,i;let r=n._freezeSettings(),s=function(c,l,u,f){return new wf(c,l,u,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,tI(f.experimentalLongPollingOptions),f.useFetchStreams)}(n._databaseId,((t=n._app)===null||t===void 0?void 0:t.options.appId)||"",n._persistenceKey,r);n._firestoreClient=new Om(n._authCredentials,n._appCheckCredentials,n._queue,s),!((e=r.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}var Oo=class n{constructor(t){this._byteString=t}static fromBase64String(t){try{return new n(ie.fromBase64String(t))}catch(e){throw new U(k.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new n(ie.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}};var qr=class{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new U(k.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new he(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}};var No=class{constructor(t){this._methodName=t}};var Mo=class{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new U(k.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new U(k.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return ot(this._lat,t._lat)||ot(this._long,t._long)}};var EP=/^__.*__$/,Mm=class{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return this.fieldMask!==null?new $e(t,this.data,this.fieldMask,e,this.fieldTransforms):new Ni(t,this.data,e,this.fieldTransforms)}},tl=class{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new $e(t,this.data,this.fieldMask,e,this.fieldTransforms)}};function oI(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw W()}}var Lm=class n{constructor(t,e,i,r,s,o){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(t){return new n(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(t){var e;let i=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.gu({path:i,yu:!1});return r.wu(t),r}Su(t){var e;let i=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.gu({path:i,yu:!1});return r.mu(),r}bu(t){return this.gu({path:void 0,yu:!0})}Du(t){return nl(t,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}mu(){if(this.path)for(let t=0;t<this.path.length;t++)this.wu(this.path.get(t))}wu(t){if(t.length===0)throw this.Du("Document fields must not be empty");if(oI(this.fu)&&EP.test(t))throw this.Du('Document fields cannot begin and end with "__"')}},Fm=class{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||ll(t)}Fu(t,e,i,r=!1){return new Lm({fu:t,methodName:e,vu:i,path:he.emptyPath(),yu:!1,Cu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function op(n){let t=n._freezeSettings(),e=ll(n._databaseId);return new Fm(n._databaseId,!!t.ignoreUndefinedProperties,e)}function aI(n,t,e,i,r,s={}){let o=n.Fu(s.merge||s.mergeFields?2:0,t,e,r);ap("Data must be an object, but it was:",o,i);let c=cI(i,o),l,u;if(s.merge)l=new ve(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){let f=[];for(let p of s.mergeFields){let b=Vm(t,p,e);if(!o.contains(b))throw new U(k.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);uI(f,b)||f.push(b)}l=new ve(f),u=o.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,u=o.fieldTransforms;return new Mm(new de(c),l,u)}var el=class n extends No{_toFieldTransform(t){if(t.fu!==2)throw t.fu===1?t.Du(`${this._methodName}() can only appear at the top level of your update data`):t.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof n}};function TP(n,t,e,i){let r=n.Fu(1,t,e);ap("Data must be an object, but it was:",r,i);let s=[],o=de.empty();Mi(i,(l,u)=>{let f=cp(t,l,e);u=gt(u);let p=r.Su(f);if(u instanceof el)s.push(f);else{let b=hl(u,p);b!=null&&(s.push(f),o.set(f,b))}});let c=new ve(s);return new tl(o,c,r.fieldTransforms)}function AP(n,t,e,i,r,s){let o=n.Fu(1,t,e),c=[Vm(t,i,e)],l=[r];if(s.length%2!=0)throw new U(k.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<s.length;b+=2)c.push(Vm(t,s[b])),l.push(s[b+1]);let u=[],f=de.empty();for(let b=c.length-1;b>=0;--b)if(!uI(u,c[b])){let A=c[b],C=l[b];C=gt(C);let P=o.Su(A);if(C instanceof el)u.push(A);else{let D=hl(C,P);D!=null&&(u.push(A),f.set(A,D))}}let p=new ve(u);return new tl(f,p,o.fieldTransforms)}function hl(n,t){if(lI(n=gt(n)))return ap("Unsupported field value:",t,n),cI(n,t);if(n instanceof No)return function(i,r){if(!oI(r.fu))throw r.Du(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Du(`${i._methodName}() is not currently supported inside arrays`);let s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.yu&&t.fu!==4)throw t.Du("Nested arrays are not supported");return function(i,r){let s=[],o=0;for(let c of i){let l=hl(c,r.bu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,t)}return function(i,r){if((i=gt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return dk(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let s=Ht.fromDate(i);return{timestampValue:Vc(r.serializer,s)}}if(i instanceof Ht){let s=new Ht(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Vc(r.serializer,s)}}if(i instanceof Mo)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Oo)return{bytesValue:xw(r.serializer,i._byteString)};if(i instanceof oe){let s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Ym(i.firestore._databaseId||r.databaseId,i._key.path)}}throw r.Du(`Unsupported field value: ${ip(i)}`)}(n,t)}function cI(n,t){let e={};return aw(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Mi(n,(i,r)=>{let s=hl(r,t.pu(i));s!=null&&(e[i]=s)}),{mapValue:{fields:e}}}function lI(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ht||n instanceof Mo||n instanceof Oo||n instanceof oe||n instanceof No)}function ap(n,t,e){if(!lI(e)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(e)){let i=ip(e);throw i==="an object"?t.Du(n+" a custom object"):t.Du(n+" "+i)}}function Vm(n,t,e){if((t=gt(t))instanceof qr)return t._internalPath;if(typeof t=="string")return cp(n,t);throw nl("Field path arguments must be of type string or ",n,!1,void 0,e)}var RP=new RegExp("[~\\*/\\[\\]]");function cp(n,t,e){if(t.search(RP)>=0)throw nl(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new qr(...t.split("."))._internalPath}catch{throw nl(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function nl(n,t,e,i,r){let s=i&&!i.isEmpty(),o=r!==void 0,c=`Function ${t}() called with invalid data`;e&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new U(k.INVALID_ARGUMENT,c+n+l)}function uI(n,t){return n.some(e=>e.isEqual(t))}var il=class{constructor(t,e,i,r,s){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new oe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let t=new Um(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){let e=this._document.data.field(dI("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}},Um=class extends il{data(){return super.data()}};function dI(n,t){return typeof t=="string"?cp(n,t):t instanceof qr?t._internalPath:t._delegate._internalPath}function SP(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new U(k.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var jm=class{convertValue(t,e="none"){switch(ki(t)){case 0:return null;case 1:return t.booleanValue;case 2:return wt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Bn(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw W()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){let i={};return Mi(t,(r,s)=>{i[r]=this.convertValue(s,e)}),i}convertGeoPoint(t){return new Mo(wt(t.latitude),wt(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":let i=qm(t);return i==null?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(So(t));default:return null}}convertTimestamp(t){let e=gn(t);return new Ht(e.seconds,e.nanos)}convertDocumentKey(t,e){let i=It.fromString(t);mt(Mw(i));let r=new kc(i.get(1),i.get(3)),s=new z(i.popFirst(5));return r.isEqual(e)||pn(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}};function hI(n,t,e){let i;return i=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,i}var Ci=class{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}},rl=class extends il{constructor(t,e,i,r,s,o){super(t,e,i,r,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){let e=new Dr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){let i=this._document.data.field(dI("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}},Dr=class extends rl{data(t={}){return super.data(t)}},Bm=class{constructor(t,e,i,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Ci(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new Dr(this._firestore,this._userDataWriter,i.key,i,new Ci(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){let e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new U(k.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(c=>{let l=new Dr(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Ci(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{let l=new Dr(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Ci(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),u=-1,f=-1;return c.type!==0&&(u=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:CP(c.type),doc:l,oldIndex:u,newIndex:f}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}};function CP(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return W()}}function fI(n){n=qe(n,oe);let t=qe(n.firestore,qn);return yP(sp(t),n._key).then(e=>xP(t,n,e))}var sl=class extends jm{constructor(t){super(),this.firestore=t}convertBytes(t){return new Oo(t)}convertReference(t){let e=this.convertDocumentKey(t,this.firestore._databaseId);return new oe(this.firestore,null,e)}};function We(n){n=qe(n,Zc);let t=qe(n.firestore,qn),e=sp(t),i=new sl(t);return SP(n._query),wP(e,n._query).then(r=>new Bm(t,i,n,r))}function mI(n,t,e){n=qe(n,oe);let i=qe(n.firestore,qn),r=hI(n.converter,t,e);return up(i,[aI(op(i),"setDoc",n._key,r,n.converter!==null,e).toMutation(n._key,mn.none())])}function He(n,t,e,...i){n=qe(n,oe);let r=qe(n.firestore,qn),s=op(r),o;return o=typeof(t=gt(t))=="string"||t instanceof qr?AP(s,"updateDoc",n._key,t,e,i):TP(s,"updateDoc",n._key,t),up(r,[o.toMutation(n._key,mn.exists(!0))])}function lp(n,t){let e=qe(n.firestore,qn),i=rp(n),r=hI(n.converter,t);return up(e,[aI(op(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,mn.exists(!1))]).then(()=>i)}function up(n,t){return function(i,r){let s=new Se;return i.asyncQueue.enqueueAndForget(()=>g(this,null,function*(){return lP(yield vP(i),r,s)})),s.promise}(sp(n),t)}function xP(n,t,e){let i=e.docs.get(t._key),r=new sl(n);return new rl(n,r,t._key,i,new Ci(e.hasPendingWrites,e.fromCache),t.converter)}(function(t,e=!0){(function(r){Wr=r})(Oe),Pe(new se("firestore",(i,{instanceIdentifier:r,options:s})=>{let o=i.getProvider("app").getImmediate(),c=new qn(new mf(i.getProvider("auth-internal")),new bf(i.getProvider("app-check-internal")),function(u,f){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new U(k.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new kc(u.options.projectId,f)}(o,r),o);return s=Object.assign({useFetchStreams:e},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),_t(Py,"4.6.3",t),_t(Py,"4.6.3","esm2017")})();var jo=class{constructor(t){return t}},pI="firestore",dp=class{constructor(){return bi(pI)}};var hp=new J("angularfire2.firestore-instances");function DP(n,t){let e=br(pI,n,t);return e&&new jo(e)}function kP(n){return(t,e)=>{let i=t.runOutsideAngular(()=>n(e));return new jo(i)}}var PP={provide:dp,deps:[[new Mt,hp]]},OP={provide:jo,useFactory:DP,deps:[[new Mt,hp],Ae]},NP=(()=>{class n{constructor(){_t("angularfire",on.full,"fst")}static \u0275fac=function(i){return new(i||n)};static \u0275mod=ht({type:n});static \u0275inj=dt({providers:[OP,PP]})}return n})();function gU(n,...t){return{ngModule:NP,providers:[{provide:hp,useFactory:kP(n),multi:!0,deps:[G,Lt,Ln,an,[new Mt,Ti],[new Mt,Mn],...t]}]}}var Ge=Ut(iI,!0);var ft=Ut(rp,!0);var St=Ut(fI,!0);var Gt=Ut(rI,!0);var Gr=Ut(mI,!0);var RU=(()=>{let t=class t{constructor(i,r){this.storage=i,this.router=r,this.auth=V(Ei),this.utilsSvc=V(Ob),this.firestore=Gt()}getAuth(){return fo()}sigIn(i,r){return g(this,null,function*(){let s=fo(),o=Gt();try{let l=(yield ey(s,i,r)).user;if(!l.emailVerified)throw yield mo(s),this.utilsSvc.showWarning("Por favor, confirma tu correo electr\xF3nico antes de iniciar sesi\xF3n."),new Error("Correo no verificado.");let u=null,f;if(f=yield St(ft(o,"especialistas",l.uid)),f.exists()?(u="especialista",console.log("especialista")):(f=yield St(ft(o,"administradores",l.uid)),f.exists()?(u="administrador",console.log("administrador")):(f=yield St(ft(o,"pacientes",l.uid)),f.exists()&&(u="paciente",console.log("paciente")))),!u)throw yield mo(s),this.utilsSvc.showError("Usuario no autorizado."),new Error("Usuario no autorizado.");if(u==="especialista"&&!f.data()?.activated)throw yield mo(s),this.utilsSvc.showError("Tu cuenta est\xE1 desactivada, contacta con el administrador."),new Error("Tu cuenta est\xE1 desactivada, contacta con el administrador.");localStorage.setItem("user",JSON.stringify({uid:l.uid,role:u,email:l.email})),this.utilsSvc.showSuccess("Inicio de sesi\xF3n exitoso")}catch(c){throw c instanceof Error?this.utilsSvc.showError("Error al iniciar sesi\xF3n: "+c.message):this.utilsSvc.showError("Error desconocido al iniciar sesi\xF3n."),c}})}signUp(i,r){return g(this,null,function*(){let s=fo(),o=s.currentUser;return Zv(s,i,r).then(c=>{let l=c.user;return ty(l).then(()=>(this.utilsSvc.showSuccess("Usuario registrado. Revisa tu correo para confirmar."),o?s.updateCurrentUser(o).then(()=>(this.router.navigate(["./users"]),c)):mo(s).then(()=>c)))}).catch(c=>{let l=c.code==="auth/email-already-in-use"?"Este correo electr\xF3nico ya est\xE1 en uso. Por favor, utiliza otro correo.":`Error al registrar el usuario: ${c.message}`;throw this.utilsSvc.showError(l),c})})}signOut(){return g(this,null,function*(){fo().signOut(),localStorage.removeItem("user"),this.utilsSvc.routerLink("home"),this.utilsSvc.showSuccess("Se cerr\xF3 sesi\xF3n con \xE9xito.")})}isUserLoggedIn(){let i=localStorage.getItem("user");return this.auth.currentUser!==null||i!==null}uploadImage(i,r){return g(this,null,function*(){let s=Zh(this.storage,r);return xy(s,i).then(()=>Jh(s))})}saveUserDataAsPatient(i){return g(this,null,function*(){let r=ft(this.firestore,`pacientes/${i.uid}`);return Gr(r,i)})}saveUserDataAsAdministrator(i){return g(this,null,function*(){let r=ft(this.firestore,`administradores/${i.uid}`);return Gr(r,i)})}saveUserDataAsSpecialist(i){return g(this,null,function*(){let r=ft(this.firestore,`especialistas/${i.uid}`);return Gr(r,i)})}updateSpecialistActivation(i,r){return g(this,null,function*(){let s=ft(this.firestore,"especialistas",i);return He(s,{activated:r}).then(()=>{console.log("Estado de activaci\xF3n actualizado exitosamente")}).catch(o=>{console.error("Error al actualizar el estado de activaci\xF3n:",o)})})}getPatientData(i){return g(this,null,function*(){let r=ft(this.firestore,`pacientes/${i}`);return St(r)})}getPatientProfilePic(i){return g(this,null,function*(){try{let r=ft(this.firestore,`pacientes/${i}`),s=yield St(r);return s.exists()?s.data()?.profilePic||null:(console.error("No se encontr\xF3 al paciente con el UID proporcionado."),null)}catch(r){throw console.error("Error al obtener la foto de perfil:",r),r}})}getAdminProfilePic(i){return g(this,null,function*(){try{let r=ft(this.firestore,`administradores/${i}`),s=yield St(r);return s.exists()?s.data()?.profilePic||null:(console.error("No se encontr\xF3 al paciente con el UID proporcionado."),null)}catch(r){throw console.error("Error al obtener la foto de perfil:",r),r}})}getEspecialistas(){return g(this,null,function*(){try{let i=Ge(this.firestore,"especialistas");return(yield We(i)).docs.map(o=>o.data())}catch(i){return console.error("Error al obtener los especialistas",i),[]}})}getPacientes(){return g(this,null,function*(){try{let i=Ge(this.firestore,"pacientes");return(yield We(i)).docs.map(o=>o.data())}catch(i){return console.error("Error al obtener los pacientes",i),[]}})}getSpecialistsProfilePic(i){return g(this,null,function*(){try{let r=ft(this.firestore,`especialistas/${i}`),s=yield St(r);return s.exists()?s.data()?.profilePic||null:(console.error("No se encontr\xF3 al paciente con el UID proporcionado."),null)}catch(r){throw console.error("Error al obtener la foto de perfil:",r),r}})}getAllPatients(){return g(this,null,function*(){try{let i=Gt(),r=Ge(i,"pacientes");return(yield We(r)).docs.map(c=>c.data())}catch(i){throw console.error("Error al obtener los pacientes: ",i),i}})}getUserData(){return g(this,null,function*(){try{let i=localStorage.getItem("user");if(!i)throw new Error("Usuario no encontrado en localStorage");let r=JSON.parse(i),{role:s,uid:o}=r;if(!s||!o)throw new Error("Rol o UID no encontrados en localStorage");let l={administrador:"administradores",especialista:"especialistas",paciente:"pacientes"}[s];if(!l)throw new Error("Rol no v\xE1lido");let u=ft(this.firestore,`${l}/${o}`),f=yield St(u);if(!f.exists())throw new Error("El documento no existe");return f.data()}catch(i){throw console.error("Error al obtener datos del usuario:",i),i}})}getAllSpecialists(){return g(this,null,function*(){try{let i=Gt(),r=Ge(i,"especialistas");return(yield We(r)).docs.map(c=>c.data())}catch(i){throw console.error("Error al obtener los especialistas: ",i),i}})}getAllAdmins(){return g(this,null,function*(){try{let i=Gt(),r=Ge(i,"administradores");return(yield We(r)).docs.map(c=>c.data())}catch(i){throw console.error("Error al obtener los especialistas: ",i),i}})}getProfilePicUrl(i,r,s){return g(this,null,function*(){let o=`profilePics/${i}_${r}_${s}`,c=Zh(this.storage,o);return Jh(c)})}getSpecialties(){return g(this,null,function*(){let i=Ge(this.firestore,"especialidades");return(yield We(i)).docs.map(s=>s.data())})}addSpecialty(i){return g(this,null,function*(){let r=Ge(this.firestore,"especialidades");if((yield this.getSpecialties()).some(c=>c.nombre.toLowerCase()===i.nombre.toLowerCase())){console.log("La especialidad ya existe en la base de datos.");return}yield lp(r,i),console.log("Especialidad agregada exitosamente.")})}getUserType(i){return g(this,null,function*(){return new Promise(r=>{let s=localStorage.getItem("user");if(s){let o=JSON.parse(s);if(o.uid===i){r(o.role);return}}r(null)})})}formatTime(i){let r=i.getHours().toString().padStart(2,"0"),s=i.getMinutes().toString().padStart(2,"0");return`${r}:${s}`}generateHourlyBlocks(i,r){let s=[],o=this.parseTime(i),c=this.parseTime(r),l=new Date(o);for(;l.getTime()<c.getTime();){let u=new Date(l);if(u.setHours(l.getHours()+1),u.getTime()>c.getTime())break;s.push({start:this.formatTime(l),end:this.formatTime(u)}),l=u}return s}saveEspecialistaHorarios(i,r){return g(this,null,function*(){try{let s=yield this.getEspecialistaHorarios(i),o=[...s],c=s.map(l=>({date:l.date,start:l.start,end:l.end}));r.forEach(l=>{this.generateHourlyBlocks(l.timeRange.start,l.timeRange.end).forEach(f=>{if(c.some(b=>b.date===l.date&&b.start===f.start&&b.end===f.end))throw this.utilsSvc.showWarning(`El horario para el d\xEDa ${l.date} de ${f.start} a ${f.end} ya est\xE1 ocupado.`),new Error(`El horario para el d\xEDa ${l.date} de ${f.start} a ${f.end} ya est\xE1 ocupado.`);o.push({date:l.date,start:f.start,end:f.end,status:"disponible",pacienteId:null,rese\u00F1a:"",comentarios:"",encuesta:"",calificacion:"",fechaCreacion:new Date})})}),yield Gr(ft(this.firestore,`turnos/${i}`),{horarios:o},{merge:!0}),this.utilsSvc.showSuccess("Horarios guardados con \xE9xito")}catch(s){this.utilsSvc.showError("Error al guardar horarios, una o m\xE1s horas se solapan."),console.error(s)}})}parseTime(i){let[r,s]=i.split(":").map(Number),o=new Date;return o.setHours(r,s,0,0),o}getEspecialistaHorarios(i){return g(this,null,function*(){try{let r=ft(this.firestore,`turnos/${i}`),s=yield St(r);return s.exists()?s.data()?.horarios||[]:(console.log("No se encontraron horarios para este especialista"),[])}catch(r){throw console.error("Error al obtener horarios",r),new Error("Error al obtener los horarios")}})}getAdminHorarios(){return g(this,null,function*(){try{let i=Gt(),r=Ge(i,"turnos"),s=yield We(r),o=[];for(let c of s.docs)(c.data()?.horarios||[]).forEach(f=>{f.status!="disponible"&&(f.especialistaId=c.id,o.push(f))});return o.length>0?o:(console.log("No se encontraron horarios para este paciente"),[])}catch(i){throw console.error("Error al obtener los horarios",i),new Error("Error al obtener los horarios")}})}getPacienteHorarios(i){return g(this,null,function*(){try{let r=Gt(),s=Ge(r,"turnos"),o=yield We(s),c=[];for(let l of o.docs)(l.data()?.horarios||[]).forEach(p=>{p.pacienteId===i&&(p.especialistaId=l.id,c.push(p))});return c.length>0?c:(console.log("No se encontraron horarios para este paciente"),[])}catch(r){throw console.error("Error al obtener los horarios",r),new Error("Error al obtener los horarios")}})}getHorariosDisponibles(i){return g(this,null,function*(){let r=Gt(),s=ft(r,`turnos/${i}`),o=yield St(s);return o.exists()?(o.data()?.horarios||[]).filter(l=>l.status==="disponible"):[]})}reservarHorario(i,r,s,o){return g(this,null,function*(){let c=Gt(),l=ft(c,`turnos/${i}`),u=yield St(l);if(u.exists()){let f=u.data()?.horarios||[],p=f.findIndex(b=>b.date===r.date&&b.start===r.start);p!==-1&&(f[p].status="pendiente",f[p].especialidad=o,f[p].pacienteId=s,yield He(l,{horarios:f}))}})}rechazarHorario(i,r,s){return g(this,null,function*(){let o=Gt(),c=ft(o,`turnos/${i}`),l=yield St(c);if(l.exists()){let u=l.data()?.horarios||[],f=u.findIndex(p=>p.date===r.date&&p.start===r.start);f!==-1&&(u[f].status="rechazado",u[f].comentario=s,yield He(c,{horarios:u}))}})}cancelarHorario(i,r,s){return g(this,null,function*(){let o=Gt(),c=ft(o,`turnos/${i}`),l=yield St(c);if(l.exists()){let u=l.data()?.horarios||[],f=u.findIndex(p=>p.date===r.date&&p.start===r.start);f!==-1&&(u[f].status="cancelado",u[f].comentario=s,yield He(c,{horarios:u}))}})}completarEncuestaHorario(i,r,s){return g(this,null,function*(){let o=Gt(),c=ft(o,`turnos/${i}`),l=yield St(c);if(l.exists()){let u=l.data()?.horarios||[],f=u.findIndex(p=>p.date===r.date&&p.start===r.start);f!==-1&&(u[f].encuesta=s,yield He(c,{horarios:u}))}})}completarCalificacionHorario(i,r,s){return g(this,null,function*(){let o=Gt(),c=ft(o,`turnos/${i}`),l=yield St(c);if(l.exists()){let u=l.data()?.horarios||[],f=u.findIndex(p=>p.date===r.date&&p.start===r.start);f!==-1&&(u[f].calificacion=s,yield He(c,{horarios:u}))}})}aceptarHorario(i,r){return g(this,null,function*(){let s=Gt(),o=ft(s,`turnos/${i}`),c=yield St(o);if(c.exists()){let l=c.data()?.horarios||[],u=l.findIndex(f=>f.date===r.date&&f.start===r.start);u!==-1&&(l[u].status="aceptado",yield He(o,{horarios:l}))}})}finalizarHorario(i,r,s,o){return g(this,null,function*(){let c=Gt();r.rese\u00F1a=s,r.especialistaId=i;let l=ft(c,`turnos/${i}`),u=yield St(l);if(u.exists()){let f=u.data()?.horarios||[],p=f.findIndex(b=>b.date===r.date&&b.start===r.start);if(p!==-1){f[p].status="finalizado",f[p].rese\u00F1a=s,yield He(l,{horarios:f});let A=`${r.date.replace(/\//g,"_")}_${r.start}_${r.end}`,C=ft(c,`historiasclinicas/${r.pacienteId}`);yield Gr(C,{[A]:{horarioData:r,historiaClinicaData:o}},{merge:!0})}}})}getPacienteNombre(i){return g(this,null,function*(){try{let r=ft(this.firestore,`pacientes/${i}`),s=yield St(r);if(s.exists()){let o=s.data();return`${o?.name||""} ${o?.lastName||""} ${o?.dni||""}`.trim()}else return console.log("No se encontr\xF3 el paciente con UID:",i),null}catch(r){return console.error("Error al obtener el nombre del paciente:",r),null}})}getEspecialistaNombre(i){return g(this,null,function*(){try{let r=ft(this.firestore,`especialistas/${i}`),s=yield St(r);if(s.exists()){let o=s.data();return`${o?.name||""} ${o?.lastName||""}`.trim()}else return console.log("No se encontr\xF3 el especialista con UID:",i),null}catch(r){return console.error("Error al obtener el nombre del especialista:",r),null}})}getHistoriaClinica(i){return g(this,null,function*(){let r=Gt(),s=ft(r,`historiasclinicas/${i}`);try{let o=yield St(s);if(o.exists())return o.data();throw new Error("No se encontr\xF3 la historia cl\xEDnica para este paciente.")}catch(o){throw o instanceof Error?new Error(`Error al obtener la historia cl\xEDnica: ${o.message}`):new Error("Error desconocido al obtener la historia cl\xEDnica.")}})}};t.\u0275fac=function(r){return new(r||t)(x(Ai),x(or))},t.\u0275prov=L({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();export{VP as a,a_ as b,cO as c,wE as d,XE as e,or as f,BO as g,hL as h,fL as i,oF as j,fo as k,vt as l,KO as m,cr as n,vT as o,rn as p,XO as q,ab as r,Qs as s,cb as t,oM as u,yb as v,QT as w,Ob as x,NF as y,MF as z,gU as A,Gt as B,RU as C};
