import{$ as su,$a as Cn,$b as uu,A as ue,Aa as tn,Ab as Cs,B as tu,Ba as ni,Bb as Xi,Bc as wa,C as Hi,Ca as As,Cb as Ji,Cc as mu,D as ti,Da as Wi,Dc as pu,E as eu,Ea as Gi,Eb as ba,F as nu,Fa as jg,G as ve,Ga as Bg,Gb as va,H as kg,Ha as zg,I as iu,Ia as $g,J as ys,Ja as qg,K as Sn,Ka as Hg,L as ru,La as Wg,M as Pg,Ma as ii,N as Og,Nb as rn,Oa as Rs,Pa as ri,Q as ua,Qa as dt,R as ws,Ra as cu,S as ye,Sa as Ss,T as Se,U as Ot,Ua as fa,V as Dt,Va as Gg,Vb as Ds,Wb as e_,X as U,Xb as ya,Y as mt,Ya as K,Yb as n_,Z as Ng,Za as Ki,Zb as i_,_ as tt,_a as si,_b as xs,a as Zn,aa as k,ab as Kg,ac as ai,b as Ag,ba as B,bb as Yg,bc as r_,c as An,ca as Ut,cb as Qg,cc as sn,d as Gl,da as Es,db as ma,dc as du,e as Kl,ea as Nt,eb as oi,ec as s_,f as ut,fa as Ze,fc as o_,g as ae,ga as pt,gc as J,h as Rg,ha as Ht,hb as Yi,hc as Zi,i as Sg,ib as Xg,ic as a_,j as Rn,ja as ou,jb as lu,k as Yl,kb as Dn,l as Ql,la as Mg,lb as en,m as Xl,ma as Is,mb as nn,n as _e,na as ei,o as W,oa as Ts,p as bs,pa as Lg,pb as Jg,q as Jl,qa as Fg,r as Cg,ra as da,rb as Zg,s as it,sb as pa,sc as c_,t as vs,ta as jt,tb as t_,tc as l_,u as be,ua as au,ub as ga,uc as hu,v as la,va as Bt,vb as _a,vc as u_,w as Zl,wa as we,wb as Qi,xa as Vg,y as Dg,ya as ha,yc as d_,z as xg,za as Ug,zc as fu}from"./chunk-HTI5VKZI.js";import{a as N,b as vt,f as Tn,g}from"./chunk-5G567QLT.js";var _u=class{};var tr=class n{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(e=>{let i=e.indexOf(":");if(i>0){let r=e.slice(0,i),s=r.toLowerCase(),o=e.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,i)=>{this.setHeaderEntries(i,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,i])=>{this.setHeaderEntries(e,i)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){let e=new n;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){let e=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(t.name,e);let r=(t.op==="a"?this.headers.get(e):void 0)||[];r.push(...i),this.headers.set(e,r);break;case"d":let s=t.value;if(!s)this.headers.delete(e),this.normalizedNames.delete(e);else{let o=this.headers.get(e);if(!o)return;o=o.filter(c=>s.indexOf(c)===-1),o.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,o)}break}}setHeaderEntries(t,e){let i=(Array.isArray(e)?e:[e]).map(s=>s.toString()),r=t.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(t,r)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}};var bu=class{encodeKey(t){return h_(t)}encodeValue(t){return h_(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function fI(n,t){let e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{let s=r.indexOf("="),[o,c]=s==-1?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,s)),t.decodeValue(r.slice(s+1))],l=e.get(o)||[];l.push(c),e.set(o,l)}),e}var mI=/%(\d[a-f0-9])/gi,pI={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function h_(n){return encodeURIComponent(n).replace(mI,(t,e)=>pI[e]??t)}function Ea(n){return`${n}`}var xn=class n{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new bu,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=fI(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{let i=t.fromObject[e],r=Array.isArray(i)?i.map(Ea):[Ea(i)];this.map.set(e,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){let e=[];return Object.keys(t).forEach(i=>{let r=t[i];Array.isArray(r)?r.forEach(s=>{e.push({param:i,value:s,op:"a"})}):e.push({param:i,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let e=this.encoder.encodeKey(t);return this.map.get(t).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let e=new n({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let e=(t.op==="a"?this.map.get(t.param):void 0)||[];e.push(Ea(t.value)),this.map.set(t.param,e);break;case"d":if(t.value!==void 0){let i=this.map.get(t.param)||[],r=i.indexOf(Ea(t.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var vu=class{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function gI(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function f_(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function m_(n){return typeof Blob<"u"&&n instanceof Blob}function p_(n){return typeof FormData<"u"&&n instanceof FormData}function _I(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var ks=class n{constructor(t,e,i,r){this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase();let s;if(gI(this.method)||r?(this.body=i!==void 0?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new tr,this.context??=new vu,!this.params)this.params=new xn,this.urlWithParams=e;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=e;else{let c=e.indexOf("?"),l=c===-1?"?":c<e.length-1?"&":"";this.urlWithParams=e+l+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||f_(this.body)||m_(this.body)||p_(this.body)||_I(this.body)?this.body:this.body instanceof xn?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||p_(this.body)?null:m_(this.body)?this.body.type||null:f_(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof xn?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(t={}){let e=t.method||this.method,i=t.url||this.url,r=t.responseType||this.responseType,s=t.transferCache??this.transferCache,o=t.body!==void 0?t.body:this.body,c=t.withCredentials??this.withCredentials,l=t.reportProgress??this.reportProgress,u=t.headers||this.headers,f=t.params||this.params,p=t.context??this.context;return t.setHeaders!==void 0&&(u=Object.keys(t.setHeaders).reduce((_,E)=>_.set(E,t.setHeaders[E]),u)),t.setParams&&(f=Object.keys(t.setParams).reduce((_,E)=>_.set(E,t.setParams[E]),f)),new n(e,i,o,{params:f,headers:u,context:p,reportProgress:l,responseType:r,withCredentials:c,transferCache:s})}},g_=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(g_||{}),yu=class{constructor(t,e=__.Ok,i="OK"){this.headers=t.headers||new tr,this.status=t.status!==void 0?t.status:e,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}};var wu=class n extends yu{constructor(t={}){super(t),this.type=g_.Response,this.body=t.body!==void 0?t.body:null}clone(t={}){return new n({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}};var __=function(n){return n[n.Continue=100]="Continue",n[n.SwitchingProtocols=101]="SwitchingProtocols",n[n.Processing=102]="Processing",n[n.EarlyHints=103]="EarlyHints",n[n.Ok=200]="Ok",n[n.Created=201]="Created",n[n.Accepted=202]="Accepted",n[n.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",n[n.NoContent=204]="NoContent",n[n.ResetContent=205]="ResetContent",n[n.PartialContent=206]="PartialContent",n[n.MultiStatus=207]="MultiStatus",n[n.AlreadyReported=208]="AlreadyReported",n[n.ImUsed=226]="ImUsed",n[n.MultipleChoices=300]="MultipleChoices",n[n.MovedPermanently=301]="MovedPermanently",n[n.Found=302]="Found",n[n.SeeOther=303]="SeeOther",n[n.NotModified=304]="NotModified",n[n.UseProxy=305]="UseProxy",n[n.Unused=306]="Unused",n[n.TemporaryRedirect=307]="TemporaryRedirect",n[n.PermanentRedirect=308]="PermanentRedirect",n[n.BadRequest=400]="BadRequest",n[n.Unauthorized=401]="Unauthorized",n[n.PaymentRequired=402]="PaymentRequired",n[n.Forbidden=403]="Forbidden",n[n.NotFound=404]="NotFound",n[n.MethodNotAllowed=405]="MethodNotAllowed",n[n.NotAcceptable=406]="NotAcceptable",n[n.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",n[n.RequestTimeout=408]="RequestTimeout",n[n.Conflict=409]="Conflict",n[n.Gone=410]="Gone",n[n.LengthRequired=411]="LengthRequired",n[n.PreconditionFailed=412]="PreconditionFailed",n[n.PayloadTooLarge=413]="PayloadTooLarge",n[n.UriTooLong=414]="UriTooLong",n[n.UnsupportedMediaType=415]="UnsupportedMediaType",n[n.RangeNotSatisfiable=416]="RangeNotSatisfiable",n[n.ExpectationFailed=417]="ExpectationFailed",n[n.ImATeapot=418]="ImATeapot",n[n.MisdirectedRequest=421]="MisdirectedRequest",n[n.UnprocessableEntity=422]="UnprocessableEntity",n[n.Locked=423]="Locked",n[n.FailedDependency=424]="FailedDependency",n[n.TooEarly=425]="TooEarly",n[n.UpgradeRequired=426]="UpgradeRequired",n[n.PreconditionRequired=428]="PreconditionRequired",n[n.TooManyRequests=429]="TooManyRequests",n[n.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",n[n.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",n[n.InternalServerError=500]="InternalServerError",n[n.NotImplemented=501]="NotImplemented",n[n.BadGateway=502]="BadGateway",n[n.ServiceUnavailable=503]="ServiceUnavailable",n[n.GatewayTimeout=504]="GatewayTimeout",n[n.HttpVersionNotSupported=505]="HttpVersionNotSupported",n[n.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",n[n.InsufficientStorage=507]="InsufficientStorage",n[n.LoopDetected=508]="LoopDetected",n[n.NotExtended=510]="NotExtended",n[n.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",n}(__||{});function gu(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var mO=(()=>{let t=class t{constructor(i){this.handler=i}request(i,r,s={}){let o;if(i instanceof ks)o=i;else{let u;s.headers instanceof tr?u=s.headers:u=new tr(s.headers);let f;s.params&&(s.params instanceof xn?f=s.params:f=new xn({fromObject:s.params})),o=new ks(i,r,s.body!==void 0?s.body:null,{headers:u,context:s.context,params:f,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}let c=W(o).pipe(ti(u=>this.handler.handle(u)));if(i instanceof ks||s.observe==="events")return c;let l=c.pipe(ue(u=>u instanceof wu));switch(s.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return l.pipe(it(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return l.pipe(it(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return l.pipe(it(u=>{if(u.body!==null&&typeof u.body!="string")throw new Error("Response is not a string.");return u.body}));case"json":default:return l.pipe(it(u=>u.body))}case"response":return l;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(i,r={}){return this.request("DELETE",i,r)}get(i,r={}){return this.request("GET",i,r)}head(i,r={}){return this.request("HEAD",i,r)}jsonp(i,r){return this.request("JSONP",i,{params:new xn().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(i,r={}){return this.request("OPTIONS",i,r)}patch(i,r,s={}){return this.request("PATCH",i,gu(s,r))}post(i,r,s={}){return this.request("POST",i,gu(s,r))}put(i,r,s={}){return this.request("PUT",i,gu(s,r))}};t.\u0275fac=function(r){return new(r||t)(k(_u))},t.\u0275prov=U({token:t,factory:t.\u0275fac});let n=t;return n})();var Tu=class extends o_{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Au=class n extends Tu{static makeCurrent(){s_(new n)}onAndCancel(t,e,i){return t.addEventListener(e,i),()=>{t.removeEventListener(e,i)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=vI();return e==null?null:yI(e)}resetBaseElement(){Ps=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return a_(document.cookie,t)}},Ps=null;function vI(){return Ps=Ps||document.querySelector("base"),Ps?Ps.getAttribute("href"):null}function yI(n){return new URL(n,document.baseURI).pathname}var wI=(()=>{let t=class t{build(){return new XMLHttpRequest}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=U({token:t,factory:t.\u0275fac});let n=t;return n})(),Ru=new tt(""),w_=(()=>{let t=class t{constructor(i,r){this._zone=r,this._eventNameToPlugin=new Map,i.forEach(s=>{s.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,r,s){return this._findPluginFor(r).addEventListener(i,r,s)}getZone(){return this._zone}_findPluginFor(i){let r=this._eventNameToPlugin.get(i);if(r)return r;if(r=this._plugins.find(o=>o.supports(i)),!r)throw new Dt(5101,!1);return this._eventNameToPlugin.set(i,r),r}};t.\u0275fac=function(r){return new(r||t)(k(Ru),k(K))},t.\u0275prov=U({token:t,factory:t.\u0275fac});let n=t;return n})(),Ia=class{constructor(t){this._doc=t}},Eu="ng-app-id",E_=(()=>{let t=class t{constructor(i,r,s,o={}){this.doc=i,this.appId=r,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=hu(o),this.resetHostNodes()}addStyles(i){for(let r of i)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(i){for(let r of i)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let i=this.styleNodesInDOM;i&&(i.forEach(r=>r.remove()),i.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(let r of this.getAllStyles())this.addStyleToHost(i,r)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(let r of this.hostNodes)this.addStyleToHost(r,i)}onStyleRemoved(i){let r=this.styleRef;r.get(i)?.elements?.forEach(s=>s.remove()),r.delete(i)}collectServerRenderedStyles(){let i=this.doc.head?.querySelectorAll(`style[${Eu}="${this.appId}"]`);if(i?.length){let r=new Map;return i.forEach(s=>{s.textContent!=null&&r.set(s.textContent,s)}),r}return null}changeUsageCount(i,r){let s=this.styleRef;if(s.has(i)){let o=s.get(i);return o.usage+=r,o.usage}return s.set(i,{usage:r,elements:[]}),r}getStyleElement(i,r){let s=this.styleNodesInDOM,o=s?.get(r);if(o?.parentNode===i)return s.delete(r),o.removeAttribute(Eu),o;{let c=this.doc.createElement("style");return this.nonce&&c.setAttribute("nonce",this.nonce),c.textContent=r,this.platformIsServer&&c.setAttribute(Eu,this.appId),i.appendChild(c),c}}addStyleToHost(i,r){let s=this.getStyleElement(i,r),o=this.styleRef,c=o.get(r)?.elements;c?c.push(s):o.set(r,{elements:[s],usage:1})}resetHostNodes(){let i=this.hostNodes;i.clear(),i.add(this.doc.head)}};t.\u0275fac=function(r){return new(r||t)(k(J),k(ha),k(As,8),k(tn))},t.\u0275prov=U({token:t,factory:t.\u0275fac});let n=t;return n})(),Iu={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Cu=/%COMP%/g,I_="%COMP%",EI=`_nghost-${I_}`,II=`_ngcontent-${I_}`,TI=!0,AI=new tt("",{providedIn:"root",factory:()=>TI});function RI(n){return II.replace(Cu,n)}function SI(n){return EI.replace(Cu,n)}function T_(n,t){return t.map(e=>e.replace(Cu,n))}var b_=(()=>{let t=class t{constructor(i,r,s,o,c,l,u,f=null){this.eventManager=i,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=c,this.platformId=l,this.ngZone=u,this.nonce=f,this.rendererByCompId=new Map,this.platformIsServer=hu(l),this.defaultRenderer=new Os(i,c,u,this.platformIsServer)}createRenderer(i,r){if(!i||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Es.ShadowDom&&(r=vt(N({},r),{encapsulation:Es.Emulated}));let s=this.getOrCreateRenderer(i,r);return s instanceof Ta?s.applyToHost(i):s instanceof Ns&&s.applyStyles(),s}getOrCreateRenderer(i,r){let s=this.rendererByCompId,o=s.get(r.id);if(!o){let c=this.doc,l=this.ngZone,u=this.eventManager,f=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,_=this.platformIsServer;switch(r.encapsulation){case Es.Emulated:o=new Ta(u,f,r,this.appId,p,c,l,_);break;case Es.ShadowDom:return new Su(u,f,i,r,c,l,this.nonce,_);default:o=new Ns(u,f,r,p,c,l,_);break}s.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};t.\u0275fac=function(r){return new(r||t)(k(w_),k(E_),k(ha),k(AI),k(J),k(tn),k(K),k(As))},t.\u0275prov=U({token:t,factory:t.\u0275fac});let n=t;return n})(),Os=class{constructor(t,e,i,r){this.eventManager=t,this.doc=e,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,e){return e?this.doc.createElementNS(Iu[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(v_(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&(v_(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let i=typeof t=="string"?this.doc.querySelector(t):t;if(!i)throw new Dt(-5104,!1);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;let s=Iu[r];s?t.setAttributeNS(s,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){let r=Iu[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(Rs.DashCase|Rs.Important)?t.style.setProperty(e,i,r&Rs.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&Rs.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t!=null&&(t[e]=i)}setValue(t,e){t.nodeValue=e}listen(t,e,i){if(typeof t=="string"&&(t=du().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${e}`);return this.eventManager.addEventListener(t,e,this.decoratePreventDefault(i))}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))===!1&&e.preventDefault()}}};function v_(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Su=class extends Os{constructor(t,e,i,r,s,o,c,l){super(t,s,o,l),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=T_(r.id,r.styles);for(let f of u){let p=document.createElement("style");c&&p.setAttribute("nonce",c),p.textContent=f,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ns=class extends Os{constructor(t,e,i,r,s,o,c,l){super(t,s,o,c),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=r,this.styles=l?T_(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Ta=class extends Ns{constructor(t,e,i,r,s,o,c,l){let u=r+"-"+i.id;super(t,e,i,s,o,c,l,u),this.contentAttr=RI(u),this.hostAttr=SI(u)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}},CI=(()=>{let t=class t extends Ia{constructor(i){super(i)}supports(i){return!0}addEventListener(i,r,s){return i.addEventListener(r,s,!1),()=>this.removeEventListener(i,r,s)}removeEventListener(i,r,s){return i.removeEventListener(r,s)}};t.\u0275fac=function(r){return new(r||t)(k(J))},t.\u0275prov=U({token:t,factory:t.\u0275fac});let n=t;return n})(),y_=["alt","control","meta","shift"],DI={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},xI={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},kI=(()=>{let t=class t extends Ia{constructor(i){super(i)}supports(i){return t.parseEventName(i)!=null}addEventListener(i,r,s){let o=t.parseEventName(r),c=t.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>du().onAndCancel(i,o.domEventName,c))}static parseEventName(i){let r=i.toLowerCase().split("."),s=r.shift();if(r.length===0||!(s==="keydown"||s==="keyup"))return null;let o=t._normalizeKey(r.pop()),c="",l=r.indexOf("code");if(l>-1&&(r.splice(l,1),c="code."),y_.forEach(f=>{let p=r.indexOf(f);p>-1&&(r.splice(p,1),c+=f+".")}),c+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=s,u.fullKey=c,u}static matchEventFullKeyCode(i,r){let s=DI[i.key]||i.key,o="";return r.indexOf("code.")>-1&&(s=i.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),y_.forEach(c=>{if(c!==s){let l=xI[c];l(i)&&(o+=c+".")}}),o+=s,o===r)}static eventCallback(i,r,s){return o=>{t.matchEventFullKeyCode(o,i)&&s.runGuarded(()=>r(o))}}static _normalizeKey(i){return i==="esc"?"escape":i}};t.\u0275fac=function(r){return new(r||t)(k(J))},t.\u0275prov=U({token:t,factory:t.\u0275fac});let n=t;return n})();function VO(n,t){return r_(N({rootComponent:n},PI(t)))}function PI(n){return{appProviders:[...FI,...n?.providers??[]],platformProviders:LI}}function OI(){Au.makeCurrent()}function NI(){return new au}function MI(){return Vg(document),document}var LI=[{provide:tn,useValue:c_},{provide:Ug,useValue:OI,multi:!0},{provide:J,useFactory:MI,deps:[]}];var FI=[{provide:Mg,useValue:"root"},{provide:au,useFactory:NI,deps:[]},{provide:Ru,useClass:CI,multi:!0,deps:[J,K,tn]},{provide:Ru,useClass:kI,multi:!0,deps:[J]},b_,E_,w_,{provide:Gg,useExisting:b_},{provide:u_,useClass:wI,deps:[]},[]];var A_=(()=>{let t=class t{constructor(i){this._doc=i}getTitle(){return this._doc.title}setTitle(i){this._doc.title=i||""}};t.\u0275fac=function(r){return new(r||t)(k(J))},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var VI=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=U({token:t,factory:function(r){let s=null;return r?s=new(r||t):s=k(UI),s},providedIn:"root"});let n=t;return n})(),UI=(()=>{let t=class t extends VI{constructor(i){super(),this._doc=i}sanitize(i,r){if(r==null)return null;switch(i){case ii.NONE:return r;case ii.HTML:return Gi(r,"HTML")?Wi(r):Wg(this._doc,String(r)).toString();case ii.STYLE:return Gi(r,"Style")?Wi(r):r;case ii.SCRIPT:if(Gi(r,"Script"))return Wi(r);throw new Dt(5200,!1);case ii.URL:return Gi(r,"URL")?Wi(r):Hg(String(r));case ii.RESOURCE_URL:if(Gi(r,"ResourceURL"))return Wi(r);throw new Dt(5201,!1);default:throw new Dt(5202,!1)}}bypassSecurityTrustHtml(i){return jg(i)}bypassSecurityTrustStyle(i){return Bg(i)}bypassSecurityTrustScript(i){return zg(i)}bypassSecurityTrustUrl(i){return $g(i)}bypassSecurityTrustResourceUrl(i){return qg(i)}};t.\u0275fac=function(r){return new(r||t)(k(J))},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var X="primary",Ys=Symbol("RouteTitle"),Ou=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function sr(n){return new Ou(n)}function BI(n,t,e){let i=e.path.split("/");if(i.length>n.length||e.pathMatch==="full"&&(t.hasChildren()||i.length<n.length))return null;let r={};for(let s=0;s<i.length;s++){let o=i[s],c=n[s];if(o.startsWith(":"))r[o.substring(1)]=c;else if(o!==c.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function zI(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!Me(n[e],t[e]))return!1;return!0}function Me(n,t){let e=n?Nu(n):void 0,i=t?Nu(t):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!k_(n[r],t[r]))return!1;return!0}function Nu(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function k_(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;let e=[...n].sort(),i=[...t].sort();return e.every((r,s)=>i[s]===r)}else return n===t}function P_(n){return n.length>0?n[n.length-1]:null}function On(n){return Jl(n)?n:n_(n)?_e(Promise.resolve(n)):W(n)}var $I={exact:N_,subset:M_},O_={exact:qI,subset:HI,ignored:()=>!0};function R_(n,t,e){return $I[e.paths](n.root,t.root,e.matrixParams)&&O_[e.queryParams](n.queryParams,t.queryParams)&&!(e.fragment==="exact"&&n.fragment!==t.fragment)}function qI(n,t){return Me(n,t)}function N_(n,t,e){if(!li(n.segments,t.segments)||!Sa(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(let i in t.children)if(!n.children[i]||!N_(n.children[i],t.children[i],e))return!1;return!0}function HI(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>k_(n[e],t[e]))}function M_(n,t,e){return L_(n,t,t.segments,e)}function L_(n,t,e,i){if(n.segments.length>e.length){let r=n.segments.slice(0,e.length);return!(!li(r,e)||t.hasChildren()||!Sa(r,e,i))}else if(n.segments.length===e.length){if(!li(n.segments,e)||!Sa(n.segments,e,i))return!1;for(let r in t.children)if(!n.children[r]||!M_(n.children[r],t.children[r],i))return!1;return!0}else{let r=e.slice(0,n.segments.length),s=e.slice(n.segments.length);return!li(n.segments,r)||!Sa(n.segments,r,i)||!n.children[X]?!1:L_(n.children[X],t,s,i)}}function Sa(n,t,e){return t.every((i,r)=>O_[e](n[r].parameters,i.parameters))}var kn=class{constructor(t=new ct([],{}),e={},i=null){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap??=sr(this.queryParams),this._queryParamMap}toString(){return KI.serialize(this)}},ct=class{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Object.values(e).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ca(this)}},ci=class{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=sr(this.parameters),this._parameterMap}toString(){return V_(this)}};function WI(n,t){return li(n,t)&&n.every((e,i)=>Me(e.parameters,t[i].parameters))}function li(n,t){return n.length!==t.length?!1:n.every((e,i)=>e.path===t[i].path)}function GI(n,t){let e=[];return Object.entries(n.children).forEach(([i,r])=>{i===X&&(e=e.concat(t(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==X&&(e=e.concat(t(r,i)))}),e}var od=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=U({token:t,factory:()=>new xa,providedIn:"root"});let n=t;return n})(),xa=class{parse(t){let e=new Lu(t);return new kn(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${Ms(t.root,!0)}`,i=XI(t.queryParams),r=typeof t.fragment=="string"?`#${YI(t.fragment)}`:"";return`${e}${i}${r}`}},KI=new xa;function Ca(n){return n.segments.map(t=>V_(t)).join("/")}function Ms(n,t){if(!n.hasChildren())return Ca(n);if(t){let e=n.children[X]?Ms(n.children[X],!1):"",i=[];return Object.entries(n.children).forEach(([r,s])=>{r!==X&&i.push(`${r}:${Ms(s,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}else{let e=GI(n,(i,r)=>r===X?[Ms(n.children[X],!1)]:[`${r}:${Ms(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[X]!=null?`${Ca(n)}/${e[0]}`:`${Ca(n)}/(${e.join("//")})`}}function F_(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Aa(n){return F_(n).replace(/%3B/gi,";")}function YI(n){return encodeURI(n)}function Mu(n){return F_(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Da(n){return decodeURIComponent(n)}function S_(n){return Da(n.replace(/\+/g,"%20"))}function V_(n){return`${Mu(n.path)}${QI(n.parameters)}`}function QI(n){return Object.entries(n).map(([t,e])=>`;${Mu(t)}=${Mu(e)}`).join("")}function XI(n){let t=Object.entries(n).map(([e,i])=>Array.isArray(i)?i.map(r=>`${Aa(e)}=${Aa(r)}`).join("&"):`${Aa(e)}=${Aa(i)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var JI=/^[^\/()?;#]+/;function Du(n){let t=n.match(JI);return t?t[0]:""}var ZI=/^[^\/()?;=#]+/;function t0(n){let t=n.match(ZI);return t?t[0]:""}var e0=/^[^=?&#]+/;function n0(n){let t=n.match(e0);return t?t[0]:""}var i0=/^[^&#]+/;function r0(n){let t=n.match(i0);return t?t[0]:""}var Lu=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ct([],{}):new ct([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[X]=new ct(t,e)),i}parseSegment(){let t=Du(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new Dt(4009,!1);return this.capture(t),new ci(Da(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=t0(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let r=Du(this.remaining);r&&(i=r,this.capture(i))}t[Da(e)]=Da(i)}parseQueryParam(t){let e=n0(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let o=r0(this.remaining);o&&(i=o,this.capture(i))}let r=S_(e),s=S_(i);if(t.hasOwnProperty(r)){let o=t[r];Array.isArray(o)||(o=[o],t[r]=o),o.push(s)}else t[r]=s}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=Du(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new Dt(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=X);let o=this.parseChildren();e[s]=Object.keys(o).length===1?o[X]:new ct([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new Dt(4011,!1)}};function U_(n){return n.segments.length>0?new ct([],{[X]:n}):n}function j_(n){let t={};for(let[i,r]of Object.entries(n.children)){let s=j_(r);if(i===X&&s.segments.length===0&&s.hasChildren())for(let[o,c]of Object.entries(s.children))t[o]=c;else(s.segments.length>0||s.hasChildren())&&(t[i]=s)}let e=new ct(n.segments,t);return s0(e)}function s0(n){if(n.numberOfChildren===1&&n.children[X]){let t=n.children[X];return new ct(n.segments.concat(t.segments),t.children)}return n}function or(n){return n instanceof kn}function o0(n,t,e=null,i=null){let r=B_(n);return z_(r,t,e,i)}function B_(n){let t;function e(s){let o={};for(let l of s.children){let u=e(l);o[l.outlet]=u}let c=new ct(s.url,o);return s===n&&(t=c),c}let i=e(n.root),r=U_(i);return t??r}function z_(n,t,e,i){let r=n;for(;r.parent;)r=r.parent;if(t.length===0)return xu(r,r,r,e,i);let s=a0(t);if(s.toRoot())return xu(r,r,new ct([],{}),e,i);let o=c0(s,r,n),c=o.processChildren?Vs(o.segmentGroup,o.index,s.commands):q_(o.segmentGroup,o.index,s.commands);return xu(r,o.segmentGroup,c,e,i)}function ka(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Bs(n){return typeof n=="object"&&n!=null&&n.outlets}function xu(n,t,e,i,r){let s={};i&&Object.entries(i).forEach(([l,u])=>{s[l]=Array.isArray(u)?u.map(f=>`${f}`):`${u}`});let o;n===t?o=e:o=$_(n,t,e);let c=U_(j_(o));return new kn(c,s,r)}function $_(n,t,e){let i={};return Object.entries(n.children).forEach(([r,s])=>{s===t?i[r]=e:i[r]=$_(s,t,e)}),new ct(n.segments,i)}var Pa=class{constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&ka(i[0]))throw new Dt(4003,!1);let r=i.find(Bs);if(r&&r!==P_(i))throw new Dt(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function a0(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Pa(!0,0,n);let t=0,e=!1,i=n.reduce((r,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let c={};return Object.entries(s.outlets).forEach(([l,u])=>{c[l]=typeof u=="string"?u.split("/"):u}),[...r,{outlets:c}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:o===0?(s.split("/").forEach((c,l)=>{l==0&&c==="."||(l==0&&c===""?e=!0:c===".."?t++:c!=""&&r.push(c))}),r):[...r,s]},[]);return new Pa(e,t,i)}var ir=class{constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}};function c0(n,t,e){if(n.isAbsolute)return new ir(t,!0,0);if(!e)return new ir(t,!1,NaN);if(e.parent===null)return new ir(e,!0,0);let i=ka(n.commands[0])?0:1,r=e.segments.length-1+i;return l0(e,r,n.numberOfDoubleDots)}function l0(n,t,e){let i=n,r=t,s=e;for(;s>r;){if(s-=r,i=i.parent,!i)throw new Dt(4005,!1);r=i.segments.length}return new ir(i,!1,r-s)}function u0(n){return Bs(n[0])?n[0].outlets:{[X]:n}}function q_(n,t,e){if(n??=new ct([],{}),n.segments.length===0&&n.hasChildren())return Vs(n,t,e);let i=d0(n,t,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let s=new ct(n.segments.slice(0,i.pathIndex),{});return s.children[X]=new ct(n.segments.slice(i.pathIndex),n.children),Vs(s,0,r)}else return i.match&&r.length===0?new ct(n.segments,{}):i.match&&!n.hasChildren()?Fu(n,t,e):i.match?Vs(n,0,r):Fu(n,t,e)}function Vs(n,t,e){if(e.length===0)return new ct(n.segments,{});{let i=u0(e),r={};if(Object.keys(i).some(s=>s!==X)&&n.children[X]&&n.numberOfChildren===1&&n.children[X].segments.length===0){let s=Vs(n.children[X],t,e);return new ct(n.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(r[s]=q_(n.children[s],t,o))}),Object.entries(n.children).forEach(([s,o])=>{i[s]===void 0&&(r[s]=o)}),new ct(n.segments,r)}}function d0(n,t,e){let i=0,r=t,s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=e.length)return s;let o=n.segments[r],c=e[i];if(Bs(c))break;let l=`${c}`,u=i<e.length-1?e[i+1]:null;if(r>0&&l===void 0)break;if(l&&u&&typeof u=="object"&&u.outlets===void 0){if(!D_(l,u,o))return s;i+=2}else{if(!D_(l,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function Fu(n,t,e){let i=n.segments.slice(0,t),r=0;for(;r<e.length;){let s=e[r];if(Bs(s)){let l=h0(s.outlets);return new ct(i,l)}if(r===0&&ka(e[0])){let l=n.segments[t];i.push(new ci(l.path,C_(e[0]))),r++;continue}let o=Bs(s)?s.outlets[X]:`${s}`,c=r<e.length-1?e[r+1]:null;o&&c&&ka(c)?(i.push(new ci(o,C_(c))),r+=2):(i.push(new ci(o,{})),r++)}return new ct(i,{})}function h0(n){let t={};return Object.entries(n).forEach(([e,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(t[e]=Fu(new ct([],{}),0,i))}),t}function C_(n){let t={};return Object.entries(n).forEach(([e,i])=>t[e]=`${i}`),t}function D_(n,t,e){return n==e.path&&Me(t,e.parameters)}var Us="imperative",Wt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Wt||{}),Ee=class{constructor(t,e){this.id=t,this.url=e}},zs=class extends Ee{constructor(t,e,i="imperative",r=null){super(t,e),this.type=Wt.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},ui=class extends Ee{constructor(t,e,i){super(t,e),this.urlAfterRedirects=i,this.type=Wt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},he=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(he||{}),Vu=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Vu||{}),Pn=class extends Ee{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=Wt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},di=class extends Ee{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=Wt.NavigationSkipped}},$s=class extends Ee{constructor(t,e,i,r){super(t,e),this.error=i,this.target=r,this.type=Wt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Oa=class extends Ee{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=Wt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Uu=class extends Ee{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=Wt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ju=class extends Ee{constructor(t,e,i,r,s){super(t,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=Wt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Bu=class extends Ee{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=Wt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},zu=class extends Ee{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=Wt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},$u=class{constructor(t){this.route=t,this.type=Wt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},qu=class{constructor(t){this.route=t,this.type=Wt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Hu=class{constructor(t){this.snapshot=t,this.type=Wt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Wu=class{constructor(t){this.snapshot=t,this.type=Wt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Gu=class{constructor(t){this.snapshot=t,this.type=Wt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ku=class{constructor(t){this.snapshot=t,this.type=Wt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var qs=class{},Hs=class{constructor(t){this.url=t}};var Yu=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Ua,this.attachRef=null}},Ua=(()=>{let t=class t{constructor(){this.contexts=new Map}onChildOutletCreated(i,r){let s=this.getOrCreateContext(i);s.outlet=r,this.contexts.set(i,s)}onChildOutletDestroyed(i){let r=this.getContext(i);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let r=this.getContext(i);return r||(r=new Yu,this.contexts.set(i,r)),r}getContext(i){return this.contexts.get(i)||null}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),Na=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=Qu(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){let e=Qu(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=Xu(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return Xu(t,this._root).map(e=>e.value)}};function Qu(n,t){if(n===t.value)return t;for(let e of t.children){let i=Qu(n,e);if(i)return i}return null}function Xu(n,t){if(n===t.value)return[t];for(let e of t.children){let i=Xu(n,e);if(i.length)return i.unshift(t),i}return[]}var de=class{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function nr(n){let t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}var Ma=class extends Na{constructor(t,e){super(t),this.snapshot=e,cd(this,t)}toString(){return this.snapshot.toString()}};function H_(n){let t=f0(n),e=new ae([new ci("",{})]),i=new ae({}),r=new ae({}),s=new ae({}),o=new ae(""),c=new ar(e,i,s,o,r,X,n,t.root);return c.snapshot=t.root,new Ma(new de(c,[]),t)}function f0(n){let t={},e={},i={},r="",s=new Ws([],t,i,r,e,X,n,null,{});return new La("",new de(s,[]))}var ar=class{constructor(t,e,i,r,s,o,c,l){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=c,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(it(u=>u[Ys]))??W(void 0),this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(it(t=>sr(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(it(t=>sr(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function ad(n,t,e="emptyOnly"){let i,{routeConfig:r}=n;return t!==null&&(e==="always"||r?.path===""||!t.component&&!t.routeConfig?.loadComponent)?i={params:N(N({},t.params),n.params),data:N(N({},t.data),n.data),resolve:N(N(N(N({},n.data),t.data),r?.data),n._resolvedData)}:i={params:N({},n.params),data:N({},n.data),resolve:N(N({},n.data),n._resolvedData??{})},r&&G_(r)&&(i.resolve[Ys]=r.title),i}var Ws=class{get title(){return this.data?.[Ys]}constructor(t,e,i,r,s,o,c,l,u){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=c,this.routeConfig=l,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=sr(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=sr(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(i=>i.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},La=class extends Na{constructor(t,e){super(e),this.url=t,cd(this,e)}toString(){return W_(this._root)}};function cd(n,t){t.value._routerState=n,t.children.forEach(e=>cd(n,e))}function W_(n){let t=n.children.length>0?` { ${n.children.map(W_).join(", ")} } `:"";return`${n.value}${t}`}function ku(n){if(n.snapshot){let t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,Me(t.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),Me(t.params,e.params)||n.paramsSubject.next(e.params),zI(t.url,e.url)||n.urlSubject.next(e.url),Me(t.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Ju(n,t){let e=Me(n.params,t.params)&&WI(n.url,t.url),i=!n.parent!=!t.parent;return e&&!i&&(!n.parent||Ju(n.parent,t.parent))}function G_(n){return typeof n.title=="string"||n.title===null}var m0=(()=>{let t=class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=X,this.activateEvents=new we,this.deactivateEvents=new we,this.attachEvents=new we,this.detachEvents=new we,this.parentContexts=B(Ua),this.location=B(Ki),this.changeDetector=B(ai),this.environmentInjector=B(Is),this.inputBinder=B(ld,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(i){if(i.name){let{firstChange:r,previousValue:s}=i.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(i){return this.parentContexts.getContext(i)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let i=this.parentContexts.getContext(this.name);i?.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Dt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Dt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Dt(4012,!1);this.location.detach();let i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,r){this.activated=i,this._activatedRoute=r,this.location.insert(i.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){let i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,r){if(this.isActivated)throw new Dt(4013,!1);this._activatedRoute=i;let s=this.location,c=i.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,u=new Zu(i,l,s.injector);this.activated=s.createComponent(c,{index:s.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=Ht({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ts]});let n=t;return n})(),Zu=class n{__ngOutletInjector(t){return new n(this.route,this.childContexts,t)}constructor(t,e,i){this.route=t,this.childContexts=e,this.parent=i}get(t,e){return t===ar?this.route:t===Ua?this.childContexts:this.parent.get(t,e)}},ld=new tt("");function p0(n,t,e){let i=Gs(n,t._root,e?e._root:void 0);return new Ma(i,t)}function Gs(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){let i=e.value;i._futureSnapshot=t.value;let r=g0(n,t,e);return new de(i,r)}else{if(n.shouldAttach(t.value)){let s=n.retrieve(t.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(c=>Gs(n,c)),o}}let i=_0(t.value),r=t.children.map(s=>Gs(n,s));return new de(i,r)}}function g0(n,t,e){return t.children.map(i=>{for(let r of e.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Gs(n,i,r);return Gs(n,i)})}function _0(n){return new ar(new ae(n.url),new ae(n.params),new ae(n.queryParams),new ae(n.fragment),new ae(n.data),n.outlet,n.component,n)}var K_="ngNavigationCancelingError";function Y_(n,t){let{redirectTo:e,navigationBehaviorOptions:i}=or(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=Q_(!1,he.Redirect);return r.url=e,r.navigationBehaviorOptions=i,r}function Q_(n,t){let e=new Error(`NavigationCancelingError: ${n||""}`);return e[K_]=!0,e.cancellationCode=t,e}function b0(n){return X_(n)&&or(n.url)}function X_(n){return!!n&&n[K_]}var v0=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Ze({type:t,selectors:[["ng-component"]],standalone:!0,features:[rn],decls:1,vars:0,template:function(r,s){r&1&&nn(0,"router-outlet")},dependencies:[m0],encapsulation:2});let n=t;return n})();function y0(n,t){return n.providers&&!n._injector&&(n._injector=Yg(n.providers,t,`Route: ${n.path}`)),n._injector??t}function ud(n){let t=n.children&&n.children.map(ud),e=t?vt(N({},n),{children:t}):N({},n);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==X&&(e.component=v0),e}function Le(n){return n.outlet||X}function w0(n,t){let e=n.filter(i=>Le(i)===t);return e.push(...n.filter(i=>Le(i)!==t)),e}function Qs(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var E0=(n,t,e,i)=>it(r=>(new td(t,r.targetRouterState,r.currentRouterState,e,i).activate(n),r)),td=class{constructor(t,e,i,r,s){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(t){let e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),ku(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){let r=nr(e);t.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(t,e,i){let r=t.value,s=e?e.value:null;if(r===s)if(r.component){let o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,i);else s&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=nr(t);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);if(i&&i.outlet){let o=i.outlet.detach(),c=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:c})}}deactivateRouteAndOutlet(t,e){let i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=nr(t);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(t,e,i){let r=nr(e);t.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new Ku(s.value.snapshot))}),t.children.length&&this.forwardEvent(new Wu(t.value.snapshot))}activateRoutes(t,e,i){let r=t.value,s=e?e.value:null;if(ku(r),r===s)if(r.component){let o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,i);else if(r.component){let o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let c=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(c.contexts),o.attachRef=c.componentRef,o.route=c.route.value,o.outlet&&o.outlet.attach(c.componentRef,c.route.value),ku(c.route.value),this.activateChildRoutes(t,null,o.children)}else{let c=Qs(r.snapshot);o.attachRef=null,o.route=r,o.injector=c,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(t,null,o.children)}}else this.activateChildRoutes(t,null,i)}},Fa=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},rr=class{constructor(t,e){this.component=t,this.route=e}};function I0(n,t,e){let i=n._root,r=t?t._root:null;return Ls(i,r,e,[i.value])}function T0(n){let t=n.routeConfig?n.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:n,guards:t}}function lr(n,t){let e=Symbol(),i=t.get(n,e);return i===e?typeof n=="function"&&!Ng(n)?n:t.get(n):i}function Ls(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=nr(t);return n.children.forEach(o=>{A0(o,s[o.value.outlet],e,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,c])=>js(c,e.getContext(o),r)),r}function A0(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=t?t.value:null,c=e?e.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let l=R0(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new Fa(i)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Ls(n,t,c?c.children:null,i,r):Ls(n,t,e,i,r),l&&c&&c.outlet&&c.outlet.isActivated&&r.canDeactivateChecks.push(new rr(c.outlet.component,o))}else o&&js(t,c,r),r.canActivateChecks.push(new Fa(i)),s.component?Ls(n,null,c?c.children:null,i,r):Ls(n,null,e,i,r);return r}function R0(n,t,e){if(typeof e=="function")return e(n,t);switch(e){case"pathParamsChange":return!li(n.url,t.url);case"pathParamsOrQueryParamsChange":return!li(n.url,t.url)||!Me(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ju(n,t)||!Me(n.queryParams,t.queryParams);case"paramsChange":default:return!Ju(n,t)}}function js(n,t,e){let i=nr(n),r=n.value;Object.entries(i).forEach(([s,o])=>{r.component?t?js(o,t.children.getContext(s),e):js(o,null,e):js(o,t,e)}),r.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new rr(t.outlet.component,r)):e.canDeactivateChecks.push(new rr(null,r)):e.canDeactivateChecks.push(new rr(null,r))}function Xs(n){return typeof n=="function"}function S0(n){return typeof n=="boolean"}function C0(n){return n&&Xs(n.canLoad)}function D0(n){return n&&Xs(n.canActivate)}function x0(n){return n&&Xs(n.canActivateChild)}function k0(n){return n&&Xs(n.canDeactivate)}function P0(n){return n&&Xs(n.canMatch)}function J_(n){return n instanceof Cg||n?.name==="EmptyError"}var Ra=Symbol("INITIAL_VALUE");function cr(){return ye(n=>vs(n.map(t=>t.pipe(ve(1),ws(Ra)))).pipe(it(t=>{for(let e of t)if(e!==!0){if(e===Ra)return Ra;if(e===!1||e instanceof kn)return e}return!0}),ue(t=>t!==Ra),ve(1)))}function O0(n,t){return be(e=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=e;return o.length===0&&s.length===0?W(vt(N({},e),{guardsResult:!0})):N0(o,i,r,n).pipe(be(c=>c&&S0(c)?M0(i,s,n,t):W(c)),it(c=>vt(N({},e),{guardsResult:c})))})}function N0(n,t,e,i){return _e(n).pipe(be(r=>j0(r.component,r.route,e,t,i)),Sn(r=>r!==!0,!0))}function M0(n,t,e,i){return _e(t).pipe(ti(r=>la(F0(r.route.parent,i),L0(r.route,i),U0(n,r.path,e),V0(n,r.route,e))),Sn(r=>r!==!0,!0))}function L0(n,t){return n!==null&&t&&t(new Gu(n)),W(!0)}function F0(n,t){return n!==null&&t&&t(new Hu(n)),W(!0)}function V0(n,t,e){let i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||i.length===0)return W(!0);let r=i.map(s=>Zl(()=>{let o=Qs(t)??e,c=lr(s,o),l=D0(c)?c.canActivate(t,n):ei(o,()=>c(t,n));return On(l).pipe(Sn())}));return W(r).pipe(cr())}function U0(n,t,e){let i=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(o=>T0(o)).filter(o=>o!==null).map(o=>Zl(()=>{let c=o.guards.map(l=>{let u=Qs(o.node)??e,f=lr(l,u),p=x0(f)?f.canActivateChild(i,n):ei(u,()=>f(i,n));return On(p).pipe(Sn())});return W(c).pipe(cr())}));return W(s).pipe(cr())}function j0(n,t,e,i,r){let s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!s||s.length===0)return W(!0);let o=s.map(c=>{let l=Qs(t)??r,u=lr(c,l),f=k0(u)?u.canDeactivate(n,t,e,i):ei(l,()=>u(n,t,e,i));return On(f).pipe(Sn())});return W(o).pipe(cr())}function B0(n,t,e,i){let r=t.canLoad;if(r===void 0||r.length===0)return W(!0);let s=r.map(o=>{let c=lr(o,n),l=C0(c)?c.canLoad(t,e):ei(n,()=>c(t,e));return On(l)});return W(s).pipe(cr(),Z_(i))}function Z_(n){return Ag(Ot(t=>{if(or(t))throw Y_(n,t)}),it(t=>t===!0))}function z0(n,t,e,i){let r=t.canMatch;if(!r||r.length===0)return W(!0);let s=r.map(o=>{let c=lr(o,n),l=P0(c)?c.canMatch(t,e):ei(n,()=>c(t,e));return On(l)});return W(s).pipe(cr(),Z_(i))}var Ks=class{constructor(t){this.segmentGroup=t||null}},Va=class extends Error{constructor(t){super(),this.urlTree=t}};function er(n){return bs(new Ks(n))}function $0(n){return bs(new Dt(4e3,!1))}function q0(n){return bs(Q_(!1,he.GuardRejected))}var ed=class{constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return W(i);if(r.numberOfChildren>1||!r.children[X])return $0(t.redirectTo);r=r.children[X]}}applyRedirectCommands(t,e,i){let r=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,i);if(e.startsWith("/"))throw new Va(r);return r}applyRedirectCreateUrlTree(t,e,i,r){let s=this.createSegmentGroup(t,e.root,i,r);return new kn(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let i={};return Object.entries(t).forEach(([r,s])=>{if(typeof s=="string"&&s.startsWith(":")){let c=s.substring(1);i[r]=e[c]}else i[r]=s}),i}createSegmentGroup(t,e,i,r){let s=this.createSegments(t,e.segments,i,r),o={};return Object.entries(e.children).forEach(([c,l])=>{o[c]=this.createSegmentGroup(t,l,i,r)}),new ct(s,o)}createSegments(t,e,i,r){return e.map(s=>s.path.startsWith(":")?this.findPosParam(t,s,r):this.findOrReturn(s,i))}findPosParam(t,e,i){let r=i[e.path.substring(1)];if(!r)throw new Dt(4001,!1);return r}findOrReturn(t,e){let i=0;for(let r of e){if(r.path===t.path)return e.splice(i),r;i++}return t}},nd={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function H0(n,t,e,i,r){let s=dd(n,t,e);return s.matched?(i=y0(t,i),z0(i,t,e,r).pipe(it(o=>o===!0?s:N({},nd)))):W(s)}function dd(n,t,e){if(t.path==="**")return W0(e);if(t.path==="")return t.pathMatch==="full"&&(n.hasChildren()||e.length>0)?N({},nd):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let r=(t.matcher||BI)(e,n,t);if(!r)return N({},nd);let s={};Object.entries(r.posParams??{}).forEach(([c,l])=>{s[c]=l.path});let o=r.consumed.length>0?N(N({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function W0(n){return{matched:!0,parameters:n.length>0?P_(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function x_(n,t,e,i){return e.length>0&&Y0(n,e,i)?{segmentGroup:new ct(t,K0(i,new ct(e,n.children))),slicedSegments:[]}:e.length===0&&Q0(n,e,i)?{segmentGroup:new ct(n.segments,G0(n,e,i,n.children)),slicedSegments:e}:{segmentGroup:new ct(n.segments,n.children),slicedSegments:e}}function G0(n,t,e,i){let r={};for(let s of e)if(ja(n,t,s)&&!i[Le(s)]){let o=new ct([],{});r[Le(s)]=o}return N(N({},i),r)}function K0(n,t){let e={};e[X]=t;for(let i of n)if(i.path===""&&Le(i)!==X){let r=new ct([],{});e[Le(i)]=r}return e}function Y0(n,t,e){return e.some(i=>ja(n,t,i)&&Le(i)!==X)}function Q0(n,t,e){return e.some(i=>ja(n,t,i))}function ja(n,t,e){return(n.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function X0(n,t,e,i){return Le(n)!==i&&(i===X||!ja(t,e,n))?!1:dd(t,n,e).matched}function J0(n,t,e){return t.length===0&&!n.children[e]}var id=class{};function Z0(n,t,e,i,r,s,o="emptyOnly"){return new rd(n,t,e,i,r,o,s).recognize()}var tT=31,rd=class{constructor(t,e,i,r,s,o,c){this.injector=t,this.configLoader=e,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=c,this.applyRedirects=new ed(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new Dt(4002,`'${t.segmentGroup}'`)}recognize(){let t=x_(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(it(e=>{let i=new Ws([],Object.freeze({}),Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,{},X,this.rootComponentType,null,{}),r=new de(i,e),s=new La("",r),o=o0(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(t){return this.processSegmentGroup(this.injector,this.config,t,X).pipe(Hi(i=>{if(i instanceof Va)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Ks?this.noMatchError(i):i}))}inheritParamsAndData(t,e){let i=t.value,r=ad(i,e,this.paramsInheritanceStrategy);i.params=Object.freeze(r.params),i.data=Object.freeze(r.data),t.children.forEach(s=>this.inheritParamsAndData(s,i))}processSegmentGroup(t,e,i,r){return i.segments.length===0&&i.hasChildren()?this.processChildren(t,e,i):this.processSegment(t,e,i,i.segments,r,!0).pipe(it(s=>s instanceof de?[s]:[]))}processChildren(t,e,i){let r=[];for(let s of Object.keys(i.children))s==="primary"?r.unshift(s):r.push(s);return _e(r).pipe(ti(s=>{let o=i.children[s],c=w0(e,s);return this.processSegmentGroup(t,c,o,s)}),Og((s,o)=>(s.push(...o),s)),nu(null),Pg(),be(s=>{if(s===null)return er(i);let o=tb(s);return eT(o),W(o)}))}processSegment(t,e,i,r,s,o){return _e(e).pipe(ti(c=>this.processSegmentAgainstRoute(c._injector??t,e,c,i,r,s,o).pipe(Hi(l=>{if(l instanceof Ks)return W(null);throw l}))),Sn(c=>!!c),Hi(c=>{if(J_(c))return J0(i,r,s)?W(new id):er(i);throw c}))}processSegmentAgainstRoute(t,e,i,r,s,o,c){return X0(i,r,s,o)?i.redirectTo===void 0?this.matchSegmentAgainstRoute(t,r,i,s,o):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(t,r,e,i,s,o):er(r):er(r)}expandSegmentAgainstRouteUsingRedirect(t,e,i,r,s,o){let{matched:c,consumedSegments:l,positionalParamSegments:u,remainingSegments:f}=dd(e,r,s);if(!c)return er(e);r.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>tT&&(this.allowRedirects=!1));let p=this.applyRedirects.applyRedirectCommands(l,r.redirectTo,u);return this.applyRedirects.lineralizeSegments(r,p).pipe(be(_=>this.processSegment(t,i,e,_.concat(f),o,!1)))}matchSegmentAgainstRoute(t,e,i,r,s){let o=H0(e,i,r,t,this.urlSerializer);return i.path==="**"&&(e.children={}),o.pipe(ye(c=>c.matched?(t=i._injector??t,this.getChildConfig(t,i,r).pipe(ye(({routes:l})=>{let u=i._loadedInjector??t,{consumedSegments:f,remainingSegments:p,parameters:_}=c,E=new Ws(f,_,Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,iT(i),Le(i),i.component??i._loadedComponent??null,i,rT(i)),{segmentGroup:C,slicedSegments:D}=x_(e,f,p,l);if(D.length===0&&C.hasChildren())return this.processChildren(u,l,C).pipe(it(L=>L===null?null:new de(E,L)));if(l.length===0&&D.length===0)return W(new de(E,[]));let x=Le(i)===s;return this.processSegment(u,l,C,D,x?X:s,!0).pipe(it(L=>new de(E,L instanceof de?[L]:[])))}))):er(e)))}getChildConfig(t,e,i){return e.children?W({routes:e.children,injector:t}):e.loadChildren?e._loadedRoutes!==void 0?W({routes:e._loadedRoutes,injector:e._loadedInjector}):B0(t,e,i,this.urlSerializer).pipe(be(r=>r?this.configLoader.loadChildren(t,e).pipe(Ot(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):q0(e))):W({routes:[],injector:t})}};function eT(n){n.sort((t,e)=>t.value.outlet===X?-1:e.value.outlet===X?1:t.value.outlet.localeCompare(e.value.outlet))}function nT(n){let t=n.value.routeConfig;return t&&t.path===""}function tb(n){let t=[],e=new Set;for(let i of n){if(!nT(i)){t.push(i);continue}let r=t.find(s=>i.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...i.children),e.add(r)):t.push(i)}for(let i of e){let r=tb(i.children);t.push(new de(i.value,r))}return t.filter(i=>!e.has(i))}function iT(n){return n.data||{}}function rT(n){return n.resolve||{}}function sT(n,t,e,i,r,s){return be(o=>Z0(n,t,e,i,o.extractedUrl,r,s).pipe(it(({state:c,tree:l})=>vt(N({},o),{targetSnapshot:c,urlAfterRedirects:l}))))}function oT(n,t){return be(e=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return W(e);let s=new Set(r.map(l=>l.route)),o=new Set;for(let l of s)if(!o.has(l))for(let u of eb(l))o.add(u);let c=0;return _e(o).pipe(ti(l=>s.has(l)?aT(l,i,n,t):(l.data=ad(l,l.parent,n).resolve,W(void 0))),Ot(()=>c++),ru(1),be(l=>c===o.size?W(e):Rn))})}function eb(n){let t=n.children.map(e=>eb(e)).flat();return[n,...t]}function aT(n,t,e,i){let r=n.routeConfig,s=n._resolve;return r?.title!==void 0&&!G_(r)&&(s[Ys]=r.title),cT(s,n,t,i).pipe(it(o=>(n._resolvedData=o,n.data=ad(n,n.parent,e).resolve,null)))}function cT(n,t,e,i){let r=Nu(n);if(r.length===0)return W({});let s={};return _e(r).pipe(be(o=>lT(n[o],t,e,i).pipe(Sn(),Ot(c=>{s[o]=c}))),ru(1),kg(s),Hi(o=>J_(o)?Rn:bs(o)))}function lT(n,t,e,i){let r=Qs(t)??i,s=lr(n,r),o=s.resolve?s.resolve(t,e):ei(r,()=>s(t,e));return On(o)}function Pu(n){return ye(t=>{let e=n(t);return e?_e(e).pipe(it(()=>t)):W(t)})}var nb=(()=>{let t=class t{buildTitle(i){let r,s=i.root;for(;s!==void 0;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(o=>o.outlet===X);return r}getResolvedTitleForRoute(i){return i.data[Ys]}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=U({token:t,factory:()=>B(uT),providedIn:"root"});let n=t;return n})(),uT=(()=>{let t=class t extends nb{constructor(i){super(),this.title=i}updateTitle(i){let r=this.buildTitle(i);r!==void 0&&this.title.setTitle(r)}};t.\u0275fac=function(r){return new(r||t)(k(A_))},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),hd=new tt("",{providedIn:"root",factory:()=>({})}),fd=new tt(""),dT=(()=>{let t=class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=B(uu)}loadComponent(i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return W(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=On(i.loadComponent()).pipe(it(ib),Ot(o=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=o}),ys(()=>{this.componentLoaders.delete(i)})),s=new Kl(r,()=>new ut).pipe(Gl());return this.componentLoaders.set(i,s),s}loadChildren(i,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return W({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=hT(r,this.compiler,i,this.onLoadEndListener).pipe(ys(()=>{this.childrenLoaders.delete(r)})),c=new Kl(o,()=>new ut).pipe(Gl());return this.childrenLoaders.set(r,c),c}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function hT(n,t,e,i){return On(n.loadChildren()).pipe(it(ib),be(r=>r instanceof Kg||Array.isArray(r)?W(r):_e(t.compileModuleAsync(r))),it(r=>{i&&i(n);let s,o,c=!1;return Array.isArray(r)?(o=r,c=!0):(s=r.create(e).injector,o=s.get(fd,[],{optional:!0,self:!0}).flat()),{routes:o.map(ud),injector:s}}))}function fT(n){return n&&typeof n=="object"&&"default"in n}function ib(n){return fT(n)?n.default:n}var md=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=U({token:t,factory:()=>B(mT),providedIn:"root"});let n=t;return n})(),mT=(()=>{let t=class t{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,r){return i}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),pT=new tt("");var gT=(()=>{let t=class t{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ut,this.transitionAbortSubject=new ut,this.configLoader=B(dT),this.environmentInjector=B(Is),this.urlSerializer=B(od),this.rootContexts=B(Ua),this.location=B(Zi),this.inputBindingEnabled=B(ld,{optional:!0})!==null,this.titleStrategy=B(nb),this.options=B(hd,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=B(md),this.createViewTransition=B(pT,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>W(void 0),this.rootComponentType=null;let i=s=>this.events.next(new $u(s)),r=s=>this.events.next(new qu(s));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=i}complete(){this.transitions?.complete()}handleNavigationRequest(i){let r=++this.navigationId;this.transitions?.next(vt(N(N({},this.transitions.value),i),{id:r}))}setupNavigations(i,r,s){return this.transitions=new ae({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Us,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ue(o=>o.id!==0),it(o=>vt(N({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),ye(o=>{let c=!1,l=!1;return W(o).pipe(ye(u=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",he.SupersededByNewNavigation),Rn;this.currentTransition=o,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?vt(N({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let f=!i.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),p=u.extras.onSameUrlNavigation??i.onSameUrlNavigation;if(!f&&p!=="reload"){let _="";return this.events.next(new di(u.id,this.urlSerializer.serialize(u.rawUrl),_,Vu.IgnoredSameUrlNavigation)),u.resolve(null),Rn}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return W(u).pipe(ye(_=>{let E=this.transitions?.getValue();return this.events.next(new zs(_.id,this.urlSerializer.serialize(_.extractedUrl),_.source,_.restoredState)),E!==this.transitions?.getValue()?Rn:Promise.resolve(_)}),sT(this.environmentInjector,this.configLoader,this.rootComponentType,i.config,this.urlSerializer,this.paramsInheritanceStrategy),Ot(_=>{o.targetSnapshot=_.targetSnapshot,o.urlAfterRedirects=_.urlAfterRedirects,this.currentNavigation=vt(N({},this.currentNavigation),{finalUrl:_.urlAfterRedirects});let E=new Oa(_.id,this.urlSerializer.serialize(_.extractedUrl),this.urlSerializer.serialize(_.urlAfterRedirects),_.targetSnapshot);this.events.next(E)}));if(f&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:_,extractedUrl:E,source:C,restoredState:D,extras:x}=u,L=new zs(_,this.urlSerializer.serialize(E),C,D);this.events.next(L);let V=H_(this.rootComponentType).snapshot;return this.currentTransition=o=vt(N({},u),{targetSnapshot:V,urlAfterRedirects:E,extras:vt(N({},x),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=E,W(o)}else{let _="";return this.events.next(new di(u.id,this.urlSerializer.serialize(u.extractedUrl),_,Vu.IgnoredByUrlHandlingStrategy)),u.resolve(null),Rn}}),Ot(u=>{let f=new Uu(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}),it(u=>(this.currentTransition=o=vt(N({},u),{guards:I0(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),O0(this.environmentInjector,u=>this.events.next(u)),Ot(u=>{if(o.guardsResult=u.guardsResult,or(u.guardsResult))throw Y_(this.urlSerializer,u.guardsResult);let f=new ju(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(f)}),ue(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",he.GuardRejected),!1)),Pu(u=>{if(u.guards.canActivateChecks.length)return W(u).pipe(Ot(f=>{let p=new Bu(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(p)}),ye(f=>{let p=!1;return W(f).pipe(oT(this.paramsInheritanceStrategy,this.environmentInjector),Ot({next:()=>p=!0,complete:()=>{p||this.cancelNavigationTransition(f,"",he.NoDataFromResolver)}}))}),Ot(f=>{let p=new zu(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(p)}))}),Pu(u=>{let f=p=>{let _=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&_.push(this.configLoader.loadComponent(p.routeConfig).pipe(Ot(E=>{p.component=E}),it(()=>{})));for(let E of p.children)_.push(...f(E));return _};return vs(f(u.targetSnapshot.root)).pipe(nu(null),ve(1))}),Pu(()=>this.afterPreactivation()),ye(()=>{let{currentSnapshot:u,targetSnapshot:f}=o,p=this.createViewTransition?.(this.environmentInjector,u.root,f.root);return p?_e(p).pipe(it(()=>o)):W(o)}),it(u=>{let f=p0(i.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=vt(N({},u),{targetRouterState:f}),this.currentNavigation.targetRouterState=f,o}),Ot(()=>{this.events.next(new qs)}),E0(this.rootContexts,i.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),ve(1),Ot({next:u=>{c=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ui(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{c=!0}}),Se(this.transitionAbortSubject.pipe(Ot(u=>{throw u}))),ys(()=>{!c&&!l&&this.cancelNavigationTransition(o,"",he.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Hi(u=>{if(l=!0,X_(u))this.events.next(new Pn(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),b0(u)?this.events.next(new Hs(u.url)):o.resolve(!1);else{this.events.next(new $s(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0));try{o.resolve(i.errorHandler(u))}catch(f){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(f)}}return Rn}))}))}cancelNavigationTransition(i,r,s){let o=new Pn(i.id,this.urlSerializer.serialize(i.extractedUrl),r,s);this.events.next(o),i.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function _T(n){return n!==Us}var bT=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=U({token:t,factory:()=>B(vT),providedIn:"root"});let n=t;return n})(),sd=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},vT=(()=>{let t=class t extends sd{};t.\u0275fac=(()=>{let i;return function(s){return(i||(i=da(t)))(s||t)}})(),t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),rb=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=U({token:t,factory:()=>B(yT),providedIn:"root"});let n=t;return n})(),yT=(()=>{let t=class t extends rb{constructor(){super(...arguments),this.location=B(Zi),this.urlSerializer=B(od),this.options=B(hd,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=B(md),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new kn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=H_(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(i){return this.location.subscribe(r=>{r.type==="popstate"&&i(r.url,r.state)})}handleRouterEvent(i,r){if(i instanceof zs)this.stateMemento=this.createStateMemento();else if(i instanceof di)this.rawUrlTree=r.initialUrl;else if(i instanceof Oa){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(s,r)}}else i instanceof qs?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):i instanceof Pn&&(i.code===he.GuardRejected||i.code===he.NoDataFromResolver)?this.restoreHistory(r):i instanceof $s?this.restoreHistory(r,!0):i instanceof ui&&(this.lastSuccessfulId=i.id,this.currentPageId=this.browserPageId)}setBrowserUrl(i,r){let s=this.urlSerializer.serialize(i);if(this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl){let o=this.browserPageId,c=N(N({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(s,"",c)}else{let o=N(N({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(i,r=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===i.finalUrl&&o===0&&(this.resetState(i),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(i,r){return this.canceledNavigationResolution==="computed"?{navigationId:i,\u0275routerPageId:r}:{navigationId:i}}};t.\u0275fac=(()=>{let i;return function(s){return(i||(i=da(t)))(s||t)}})(),t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),Fs=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Fs||{});function wT(n,t){n.events.pipe(ue(e=>e instanceof ui||e instanceof Pn||e instanceof $s||e instanceof di),it(e=>e instanceof ui||e instanceof di?Fs.COMPLETE:(e instanceof Pn?e.code===he.Redirect||e.code===he.SupersededByNewNavigation:!1)?Fs.REDIRECTING:Fs.FAILED),ue(e=>e!==Fs.REDIRECTING),ve(1)).subscribe(()=>{t()})}function ET(n){throw n}var IT={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},TT={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ur=(()=>{let t=class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=B(ya),this.stateManager=B(rb),this.options=B(hd,{optional:!0})||{},this.pendingTasks=B(Qg),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=B(gT),this.urlSerializer=B(od),this.location=B(Zi),this.urlHandlingStrategy=B(md),this._events=new ut,this.errorHandler=this.options.errorHandler||ET,this.navigated=!1,this.routeReuseStrategy=B(bT),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=B(fd,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!B(ld,{optional:!0}),this.eventsSubscription=new Zn,this.isNgZoneEnabled=B(K)instanceof K&&K.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:i=>{this.console.warn(i)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let i=this.navigationTransitions.events.subscribe(r=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Pn&&r.code!==he.Redirect&&r.code!==he.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof ui)this.navigated=!0;else if(r instanceof Hs){let c=this.urlHandlingStrategy.merge(r.url,s.currentRawUrl),l={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||_T(s.source)};this.scheduleNavigation(c,Us,null,l,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}RT(r)&&this._events.next(r)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(i)}resetRootComponentType(i){this.routerState.root.component=i,this.navigationTransitions.rootComponentType=i}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Us,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((i,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(i,"popstate",r)},0)})}navigateToSyncWithBrowser(i,r,s){let o={replaceUrl:!0},c=s?.navigationId?s:null;if(s){let u=N({},s);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let l=this.parseUrl(i);this.scheduleNavigation(l,r,c,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(i){this.config=i.map(ud),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(i,r={}){let{relativeTo:s,queryParams:o,fragment:c,queryParamsHandling:l,preserveFragment:u}=r,f=u?this.currentUrlTree.fragment:c,p=null;switch(l){case"merge":p=N(N({},this.currentUrlTree.queryParams),o);break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=o||null}p!==null&&(p=this.removeEmptyProps(p));let _;try{let E=s?s.snapshot:this.routerState.snapshot.root;_=B_(E)}catch{(typeof i[0]!="string"||!i[0].startsWith("/"))&&(i=[]),_=this.currentUrlTree.root}return z_(_,i,p,f??null)}navigateByUrl(i,r={skipLocationChange:!1}){let s=or(i)?i:this.parseUrl(i),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,Us,null,r)}navigate(i,r={skipLocationChange:!1}){return AT(i),this.navigateByUrl(this.createUrlTree(i,r),r)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){try{return this.urlSerializer.parse(i)}catch{return this.urlSerializer.parse("/")}}isActive(i,r){let s;if(r===!0?s=N({},IT):r===!1?s=N({},TT):s=r,or(i))return R_(this.currentUrlTree,i,s);let o=this.parseUrl(i);return R_(this.currentUrlTree,o,s)}removeEmptyProps(i){return Object.entries(i).reduce((r,[s,o])=>(o!=null&&(r[s]=o),r),{})}scheduleNavigation(i,r,s,o,c){if(this.disposed)return Promise.resolve(!1);let l,u,f;c?(l=c.resolve,u=c.reject,f=c.promise):f=new Promise((_,E)=>{l=_,u=E});let p=this.pendingTasks.add();return wT(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:i,extras:o,resolve:l,reject:u,promise:f,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),f.catch(_=>Promise.reject(_))}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function AT(n){for(let t=0;t<n.length;t++)if(n[t]==null)throw new Dt(4008,!1)}function RT(n){return!(n instanceof qs)&&!(n instanceof Hs)}var ST=new tt("");function _N(n,...t){return ou([{provide:fd,multi:!0,useValue:n},[],{provide:ar,useFactory:CT,deps:[ur]},{provide:i_,multi:!0,useFactory:DT},t.map(e=>e.\u0275providers)])}function CT(n){return n.routerState.root}function DT(){let n=B(jt);return t=>{let e=n.get(xs);if(t!==e.components[0])return;let i=n.get(ur),r=n.get(xT);n.get(kT)===1&&i.initialNavigation(),n.get(PT,null,su.Optional)?.setUpPreloading(),n.get(ST,null,su.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var xT=new tt("",{factory:()=>new ut}),kT=new tt("",{providedIn:"root",factory:()=>1});var PT=new tt("");var gd;try{gd=typeof Intl<"u"&&Intl.v8BreakIterator}catch{gd=!1}var It=(()=>{let t=class t{constructor(i){this._platformId=i,this.isBrowser=this._platformId?l_(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||gd)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};t.\u0275fac=function(r){return new(r||t)(k(tn))},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var dr,sb=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function TN(){if(dr)return dr;if(typeof document!="object"||!document)return dr=new Set(sb),dr;let n=document.createElement("input");return dr=new Set(sb.filter(t=>(n.setAttribute("type",t),n.type===t))),dr}var Js;function NT(){if(Js==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Js=!0}))}finally{Js=Js||!1}return Js}function hr(n){return NT()?n:!!n.capture}var hi;function ob(){if(hi==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return hi=!1,hi;if("scrollBehavior"in document.documentElement.style)hi=!0;else{let n=Element.prototype.scrollTo;n?hi=!/\{\s*\[native code\]\s*\}/.test(n.toString()):hi=!1}}return hi}var pd;function MT(){if(pd==null){let n=typeof document<"u"?document.head:null;pd=!!(n&&(n.createShadowRoot||n.attachShadow))}return pd}function ab(n){if(MT()){let t=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function LT(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){let t=n.shadowRoot.activeElement;if(t===n)break;n=t}return n}function Ce(n){return n.composedPath?n.composedPath()[0]:n.target}function Zs(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function AN(n,...t){return t.length?t.some(e=>n[e]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function FT(n){return n!=null&&`${n}`!="false"}function cb(n,t=0){return VT(n)?Number(n):t}function VT(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}function fr(n){return Array.isArray(n)?n:[n]}function xt(n){return n==null?"":typeof n=="string"?n:`${n}px`}function on(n){return n instanceof Bt?n.nativeElement:n}var UT=(()=>{let t=class t{create(i){return typeof MutationObserver>"u"?null:new MutationObserver(i)}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var DN=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=pt({type:t}),t.\u0275inj=mt({providers:[UT]});let n=t;return n})();var lb=new Set,mi,jT=(()=>{let t=class t{constructor(i,r){this._platform=i,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):zT}matchMedia(i){return(this._platform.WEBKIT||this._platform.BLINK)&&BT(i,this._nonce),this._matchMedia(i)}};t.\u0275fac=function(r){return new(r||t)(k(It),k(As,8))},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function BT(n,t){if(!lb.has(n))try{mi||(mi=document.createElement("style"),t&&mi.setAttribute("nonce",t),mi.setAttribute("type","text/css"),document.head.appendChild(mi)),mi.sheet&&(mi.sheet.insertRule(`@media ${n} {body{ }}`,0),lb.add(n))}catch(e){console.error(e)}}function zT(n){return{matches:n==="all"||n==="",media:n,addListener:()=>{},removeListener:()=>{}}}var Ba=(()=>{let t=class t{constructor(i,r){this._mediaMatcher=i,this._zone=r,this._queries=new Map,this._destroySubject=new ut}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(i){return ub(fr(i)).some(s=>this._registerQuery(s).mql.matches)}observe(i){let s=ub(fr(i)).map(c=>this._registerQuery(c).observable),o=vs(s);return o=la(o.pipe(ve(1)),o.pipe(ua(1),eu(0))),o.pipe(it(c=>{let l={matches:!1,breakpoints:{}};return c.forEach(({matches:u,query:f})=>{l.matches=l.matches||u,l.breakpoints[f]=u}),l}))}_registerQuery(i){if(this._queries.has(i))return this._queries.get(i);let r=this._mediaMatcher.matchMedia(i),o={observable:new An(c=>{let l=u=>this._zone.run(()=>c.next(u));return r.addListener(l),()=>{r.removeListener(l)}}).pipe(ws(r),it(({matches:c})=>({query:i,matches:c})),Se(this._destroySubject)),mql:r};return this._queries.set(i,o),o}};t.\u0275fac=function(r){return new(r||t)(k(jT),k(K))},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function ub(n){return n.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}var db={XSmall:"(max-width: 599.98px)",Small:"(min-width: 600px) and (max-width: 959.98px)",Medium:"(min-width: 960px) and (max-width: 1279.98px)",Large:"(min-width: 1280px) and (max-width: 1919.98px)",XLarge:"(min-width: 1920px)",Handset:"(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)",Tablet:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait), (min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",Web:"(min-width: 840px) and (orientation: portrait), (min-width: 1280px) and (orientation: landscape)",HandsetPortrait:"(max-width: 599.98px) and (orientation: portrait)",TabletPortrait:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait)",WebPortrait:"(min-width: 840px) and (orientation: portrait)",HandsetLandscape:"(max-width: 959.98px) and (orientation: landscape)",TabletLandscape:"(min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",WebLandscape:"(min-width: 1280px) and (orientation: landscape)"};var qT=(()=>{let t=class t{constructor(i){this._platform=i}isDisabled(i){return i.hasAttribute("disabled")}isVisible(i){return WT(i)&&getComputedStyle(i).visibility==="visible"}isTabbable(i){if(!this._platform.isBrowser)return!1;let r=HT(tA(i));if(r&&(hb(r)===-1||!this.isVisible(r)))return!1;let s=i.nodeName.toLowerCase(),o=hb(i);return i.hasAttribute("contenteditable")?o!==-1:s==="iframe"||s==="object"||this._platform.WEBKIT&&this._platform.IOS&&!JT(i)?!1:s==="audio"?i.hasAttribute("controls")?o!==-1:!1:s==="video"?o===-1?!1:o!==null?!0:this._platform.FIREFOX||i.hasAttribute("controls"):i.tabIndex>=0}isFocusable(i,r){return ZT(i)&&!this.isDisabled(i)&&(r?.ignoreVisibility||this.isVisible(i))}};t.\u0275fac=function(r){return new(r||t)(k(It))},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function HT(n){try{return n.frameElement}catch{return null}}function WT(n){return!!(n.offsetWidth||n.offsetHeight||typeof n.getClientRects=="function"&&n.getClientRects().length)}function GT(n){let t=n.nodeName.toLowerCase();return t==="input"||t==="select"||t==="button"||t==="textarea"}function KT(n){return QT(n)&&n.type=="hidden"}function YT(n){return XT(n)&&n.hasAttribute("href")}function QT(n){return n.nodeName.toLowerCase()=="input"}function XT(n){return n.nodeName.toLowerCase()=="a"}function pb(n){if(!n.hasAttribute("tabindex")||n.tabIndex===void 0)return!1;let t=n.getAttribute("tabindex");return!!(t&&!isNaN(parseInt(t,10)))}function hb(n){if(!pb(n))return null;let t=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}function JT(n){let t=n.nodeName.toLowerCase(),e=t==="input"&&n.type;return e==="text"||e==="password"||t==="select"||t==="textarea"}function ZT(n){return KT(n)?!1:GT(n)||YT(n)||n.hasAttribute("contenteditable")||pb(n)}function tA(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}var bd=class{get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}constructor(t,e,i,r,s=!1){this._element=t,this._checker=e,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}destroy(){let t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return this._hasAttached?!0:(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){let e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);return t=="start"?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){let e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){let i=this._getFirstTabbableElement(e);return i?.focus(t),!!i}return e.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){let e=this._getRegionBoundary("start");return e&&e.focus(t),!!e}focusLastTabbableElement(t){let e=this._getRegionBoundary("end");return e&&e.focus(t),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children;for(let i=0;i<e.length;i++){let r=e[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[i]):null;if(r)return r}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children;for(let i=e.length-1;i>=0;i--){let r=e[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[i]):null;if(r)return r}return null}_createAnchor(){let t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.pipe(ve(1)).subscribe(t)}},aM=(()=>{let t=class t{constructor(i,r,s){this._checker=i,this._ngZone=r,this._document=s}create(i,r=!1){return new bd(i,this._checker,this._ngZone,this._document,r)}};t.\u0275fac=function(r){return new(r||t)(k(qT),k(K),k(J))},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function vd(n){return n.buttons===0||n.detail===0}function yd(n){let t=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!!t&&t.identifier===-1&&(t.radiusX==null||t.radiusX===1)&&(t.radiusY==null||t.radiusY===1)}var eA=new tt("cdk-input-modality-detector-options"),nA={ignoreKeys:[18,17,224,91,16]},gb=650,mr=hr({passive:!0,capture:!0}),iA=(()=>{let t=class t{get mostRecentModality(){return this._modality.value}constructor(i,r,s,o){this._platform=i,this._mostRecentTarget=null,this._modality=new ae(null),this._lastTouchMs=0,this._onKeydown=c=>{this._options?.ignoreKeys?.some(l=>l===c.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Ce(c))},this._onMousedown=c=>{Date.now()-this._lastTouchMs<gb||(this._modality.next(vd(c)?"keyboard":"mouse"),this._mostRecentTarget=Ce(c))},this._onTouchstart=c=>{if(yd(c)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Ce(c)},this._options=N(N({},nA),o),this.modalityDetected=this._modality.pipe(ua(1)),this.modalityChanged=this.modalityDetected.pipe(iu()),i.isBrowser&&r.runOutsideAngular(()=>{s.addEventListener("keydown",this._onKeydown,mr),s.addEventListener("mousedown",this._onMousedown,mr),s.addEventListener("touchstart",this._onTouchstart,mr)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,mr),document.removeEventListener("mousedown",this._onMousedown,mr),document.removeEventListener("touchstart",this._onTouchstart,mr))}};t.\u0275fac=function(r){return new(r||t)(k(It),k(K),k(J),k(eA,8))},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),rA=new tt("liveAnnouncerElement",{providedIn:"root",factory:sA});function sA(){return null}var oA=new tt("LIVE_ANNOUNCER_DEFAULT_OPTIONS"),aA=0,_b=(()=>{let t=class t{constructor(i,r,s,o){this._ngZone=r,this._defaultOptions=o,this._document=s,this._liveElement=i||this._createLiveElement()}announce(i,...r){let s=this._defaultOptions,o,c;return r.length===1&&typeof r[0]=="number"?c=r[0]:[o,c]=r,this.clear(),clearTimeout(this._previousTimeout),o||(o=s&&s.politeness?s.politeness:"polite"),c==null&&s&&(c=s.duration),this._liveElement.setAttribute("aria-live",o),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(l=>this._currentResolve=l)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=i,typeof c=="number"&&(this._previousTimeout=setTimeout(()=>this.clear(),c)),this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){let i="cdk-live-announcer-element",r=this._document.getElementsByClassName(i),s=this._document.createElement("div");for(let o=0;o<r.length;o++)r[o].remove();return s.classList.add(i),s.classList.add("cdk-visually-hidden"),s.setAttribute("aria-atomic","true"),s.setAttribute("aria-live","polite"),s.id=`cdk-live-announcer-${aA++}`,this._document.body.appendChild(s),s}_exposeAnnouncerToModals(i){let r=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let s=0;s<r.length;s++){let o=r[s],c=o.getAttribute("aria-owns");c?c.indexOf(i)===-1&&o.setAttribute("aria-owns",c+" "+i):o.setAttribute("aria-owns",i)}}};t.\u0275fac=function(r){return new(r||t)(k(rA,8),k(K),k(J),k(oA,8))},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var $a=function(n){return n[n.IMMEDIATE=0]="IMMEDIATE",n[n.EVENTUAL=1]="EVENTUAL",n}($a||{}),cA=new tt("cdk-focus-monitor-default-options"),za=hr({passive:!0,capture:!0}),bb=(()=>{let t=class t{constructor(i,r,s,o,c){this._ngZone=i,this._platform=r,this._inputModalityDetector=s,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new ut,this._rootNodeFocusAndBlurListener=l=>{let u=Ce(l);for(let f=u;f;f=f.parentElement)l.type==="focus"?this._onFocus(l,f):this._onBlur(l,f)},this._document=o,this._detectionMode=c?.detectionMode||$a.IMMEDIATE}monitor(i,r=!1){let s=on(i);if(!this._platform.isBrowser||s.nodeType!==1)return W();let o=ab(s)||this._getDocument(),c=this._elementInfo.get(s);if(c)return r&&(c.checkChildren=!0),c.subject;let l={checkChildren:r,subject:new ut,rootNode:o};return this._elementInfo.set(s,l),this._registerGlobalListeners(l),l.subject}stopMonitoring(i){let r=on(i),s=this._elementInfo.get(r);s&&(s.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(s))}focusVia(i,r,s){let o=on(i),c=this._getDocument().activeElement;o===c?this._getClosestElementsInfo(o).forEach(([l,u])=>this._originChanged(l,r,u)):(this._setOrigin(r),typeof o.focus=="function"&&o.focus(s))}ngOnDestroy(){this._elementInfo.forEach((i,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(i){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(i)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:i&&this._isLastInteractionFromInputLabel(i)?"mouse":"program"}_shouldBeAttributedToTouch(i){return this._detectionMode===$a.EVENTUAL||!!i?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(i,r){i.classList.toggle("cdk-focused",!!r),i.classList.toggle("cdk-touch-focused",r==="touch"),i.classList.toggle("cdk-keyboard-focused",r==="keyboard"),i.classList.toggle("cdk-mouse-focused",r==="mouse"),i.classList.toggle("cdk-program-focused",r==="program")}_setOrigin(i,r=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=i,this._originFromTouchInteraction=i==="touch"&&r,this._detectionMode===$a.IMMEDIATE){clearTimeout(this._originTimeoutId);let s=this._originFromTouchInteraction?gb:1;this._originTimeoutId=setTimeout(()=>this._origin=null,s)}})}_onFocus(i,r){let s=this._elementInfo.get(r),o=Ce(i);!s||!s.checkChildren&&r!==o||this._originChanged(r,this._getFocusOrigin(o),s)}_onBlur(i,r){let s=this._elementInfo.get(r);!s||s.checkChildren&&i.relatedTarget instanceof Node&&r.contains(i.relatedTarget)||(this._setClasses(r),this._emitOrigin(s,null))}_emitOrigin(i,r){i.subject.observers.length&&this._ngZone.run(()=>i.subject.next(r))}_registerGlobalListeners(i){if(!this._platform.isBrowser)return;let r=i.rootNode,s=this._rootNodeFocusListenerCount.get(r)||0;s||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,za),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,za)}),this._rootNodeFocusListenerCount.set(r,s+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Se(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(i){let r=i.rootNode;if(this._rootNodeFocusListenerCount.has(r)){let s=this._rootNodeFocusListenerCount.get(r);s>1?this._rootNodeFocusListenerCount.set(r,s-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,za),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,za),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(i,r,s){this._setClasses(i,r),this._emitOrigin(s,r),this._lastFocusOrigin=r}_getClosestElementsInfo(i){let r=[];return this._elementInfo.forEach((s,o)=>{(o===i||s.checkChildren&&o.contains(i))&&r.push([o,s])}),r}_isLastInteractionFromInputLabel(i){let{_mostRecentTarget:r,mostRecentModality:s}=this._inputModalityDetector;if(s!=="mouse"||!r||r===i||i.nodeName!=="INPUT"&&i.nodeName!=="TEXTAREA"||i.disabled)return!1;let o=i.labels;if(o){for(let c=0;c<o.length;c++)if(o[c].contains(r))return!0}return!1}};t.\u0275fac=function(r){return new(r||t)(k(K),k(It),k(iA),k(J,8),k(cA,8))},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var pi=function(n){return n[n.NONE=0]="NONE",n[n.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",n[n.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",n}(pi||{}),fb="cdk-high-contrast-black-on-white",mb="cdk-high-contrast-white-on-black",_d="cdk-high-contrast-active",vb=(()=>{let t=class t{constructor(i,r){this._platform=i,this._document=r,this._breakpointSubscription=B(Ba).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return pi.NONE;let i=this._document.createElement("div");i.style.backgroundColor="rgb(1,2,3)",i.style.position="absolute",this._document.body.appendChild(i);let r=this._document.defaultView||window,s=r&&r.getComputedStyle?r.getComputedStyle(i):null,o=(s&&s.backgroundColor||"").replace(/ /g,"");switch(i.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return pi.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return pi.BLACK_ON_WHITE}return pi.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let i=this._document.body.classList;i.remove(_d,fb,mb),this._hasCheckedHighContrastMode=!0;let r=this.getHighContrastMode();r===pi.BLACK_ON_WHITE?i.add(_d,fb):r===pi.WHITE_ON_BLACK&&i.add(_d,mb)}}};t.\u0275fac=function(r){return new(r||t)(k(It),k(J))},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var lA=new tt("cdk-dir-doc",{providedIn:"root",factory:uA});function uA(){return B(J)}var dA=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function hA(n){let t=n?.toLowerCase()||"";return t==="auto"&&typeof navigator<"u"&&navigator?.language?dA.test(navigator.language)?"rtl":"ltr":t==="rtl"?"rtl":"ltr"}var wb=(()=>{let t=class t{constructor(i){if(this.value="ltr",this.change=new we,i){let r=i.body?i.body.dir:null,s=i.documentElement?i.documentElement.dir:null;this.value=hA(r||s||"ltr")}}ngOnDestroy(){this.change.complete()}};t.\u0275fac=function(r){return new(r||t)(k(lA,8))},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var Ed=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=pt({type:t}),t.\u0275inj=mt({});let n=t;return n})();function mA(){return!0}var pA=new tt("mat-sanity-checks",{providedIn:"root",factory:mA}),eo=(()=>{let t=class t{constructor(i,r,s){this._sanityChecks=r,this._document=s,this._hasDoneGlobalChecks=!1,i._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(i){return Zs()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[i]}};t.\u0275fac=function(r){return new(r||t)(k(vb),k(pA,8),k(J))},t.\u0275mod=pt({type:t}),t.\u0275inj=mt({imports:[Ed,Ed]});let n=t;return n})();var Eb=class{constructor(t,e,i,r,s){this._defaultMatcher=t,this.ngControl=e,this._parentFormGroup=i,this._parentForm=r,this._stateChanges=s,this.errorState=!1}updateErrorState(){let t=this.errorState,e=this._parentFormGroup||this._parentForm,i=this.matcher||this._defaultMatcher,r=this.ngControl?this.ngControl.control:null,s=i?.isErrorState(r,e)??!1;s!==t&&(this.errorState=s,this._stateChanges.next())}};var VM=(()=>{let t=class t{isErrorState(i,r){return!!(i&&i.invalid&&(i.touched||r&&r.submitted))}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var Ie=function(n){return n[n.FADING_IN=0]="FADING_IN",n[n.VISIBLE=1]="VISIBLE",n[n.FADING_OUT=2]="FADING_OUT",n[n.HIDDEN=3]="HIDDEN",n}(Ie||{}),Ad=class{constructor(t,e,i,r=!1){this._renderer=t,this.element=e,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=Ie.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},Ib=hr({passive:!0,capture:!0}),Rd=class{constructor(){this._events=new Map,this._delegateEventHandler=t=>{let e=Ce(t);e&&this._events.get(t.type)?.forEach((i,r)=>{(r===e||r.contains(e))&&i.forEach(s=>s.handleEvent(t))})}}addHandler(t,e,i,r){let s=this._events.get(e);if(s){let o=s.get(i);o?o.add(r):s.set(i,new Set([r]))}else this._events.set(e,new Map([[i,new Set([r])]])),t.runOutsideAngular(()=>{document.addEventListener(e,this._delegateEventHandler,Ib)})}removeHandler(t,e,i){let r=this._events.get(t);if(!r)return;let s=r.get(e);s&&(s.delete(i),s.size===0&&r.delete(e),r.size===0&&(this._events.delete(t),document.removeEventListener(t,this._delegateEventHandler,Ib)))}},Tb={enterDuration:225,exitDuration:150},gA=800,Ab=hr({passive:!0,capture:!0}),Rb=["mousedown","touchstart"],Sb=["mouseup","mouseleave","touchend","touchcancel"],to=class to{constructor(t,e,i,r){this._target=t,this._ngZone=e,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=on(i))}fadeInRipple(t,e,i={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=N(N({},Tb),i.animation);i.centered&&(t=r.left+r.width/2,e=r.top+r.height/2);let o=i.radius||_A(t,e,r),c=t-r.left,l=e-r.top,u=s.enterDuration,f=document.createElement("div");f.classList.add("mat-ripple-element"),f.style.left=`${c-o}px`,f.style.top=`${l-o}px`,f.style.height=`${o*2}px`,f.style.width=`${o*2}px`,i.color!=null&&(f.style.backgroundColor=i.color),f.style.transitionDuration=`${u}ms`,this._containerElement.appendChild(f);let p=window.getComputedStyle(f),_=p.transitionProperty,E=p.transitionDuration,C=_==="none"||E==="0s"||E==="0s, 0s"||r.width===0&&r.height===0,D=new Ad(this,f,i,C);f.style.transform="scale3d(1, 1, 1)",D.state=Ie.FADING_IN,i.persistent||(this._mostRecentTransientRipple=D);let x=null;return!C&&(u||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let L=()=>this._finishRippleTransition(D),V=()=>this._destroyRipple(D);f.addEventListener("transitionend",L),f.addEventListener("transitioncancel",V),x={onTransitionEnd:L,onTransitionCancel:V}}),this._activeRipples.set(D,x),(C||!u)&&this._finishRippleTransition(D),D}fadeOutRipple(t){if(t.state===Ie.FADING_OUT||t.state===Ie.HIDDEN)return;let e=t.element,i=N(N({},Tb),t.config.animation);e.style.transitionDuration=`${i.exitDuration}ms`,e.style.opacity="0",t.state=Ie.FADING_OUT,(t._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){let e=on(t);!this._platform.isBrowser||!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,Rb.forEach(i=>{to._eventManager.addHandler(this._ngZone,i,e,this)}))}handleEvent(t){t.type==="mousedown"?this._onMousedown(t):t.type==="touchstart"?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{Sb.forEach(e=>{this._triggerElement.addEventListener(e,this,Ab)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){t.state===Ie.FADING_IN?this._startFadeOutTransition(t):t.state===Ie.FADING_OUT&&this._destroyRipple(t)}_startFadeOutTransition(t){let e=t===this._mostRecentTransientRipple,{persistent:i}=t.config;t.state=Ie.VISIBLE,!i&&(!e||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){let e=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=Ie.HIDDEN,e!==null&&(t.element.removeEventListener("transitionend",e.onTransitionEnd),t.element.removeEventListener("transitioncancel",e.onTransitionCancel)),t.element.remove()}_onMousedown(t){let e=vd(t),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+gA;!this._target.rippleDisabled&&!e&&!i&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!yd(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let e=t.changedTouches;if(e)for(let i=0;i<e.length;i++)this.fadeInRipple(e[i].clientX,e[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{let e=t.state===Ie.VISIBLE||t.config.terminateOnPointerUp&&t.state===Ie.FADING_IN;!t.config.persistent&&e&&t.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let t=this._triggerElement;t&&(Rb.forEach(e=>to._eventManager.removeHandler(e,t,this)),this._pointerUpEventsRegistered&&(Sb.forEach(e=>t.removeEventListener(e,this,Ab)),this._pointerUpEventsRegistered=!1))}};to._eventManager=new Rd;var Sd=to;function _A(n,t,e){let i=Math.max(Math.abs(n-e.left),Math.abs(n-e.right)),r=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(i*i+r*r)}var kb=new tt("mat-ripple-global-options"),bA=(()=>{let t=class t{get disabled(){return this._disabled}set disabled(i){i&&this.fadeOutAllNonPersistent(),this._disabled=i,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(i){this._trigger=i,this._setupTriggerEventsIfEnabled()}constructor(i,r,s,o,c){this._elementRef=i,this._animationMode=c,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=o||{},this._rippleRenderer=new Sd(this,r,i,s)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:N(N(N({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(i,r=0,s){return typeof i=="number"?this._rippleRenderer.fadeInRipple(i,r,N(N({},this.rippleConfig),s)):this._rippleRenderer.fadeInRipple(0,0,N(N({},this.rippleConfig),i))}};t.\u0275fac=function(r){return new(r||t)(dt(Bt),dt(K),dt(It),dt(kb,8),dt(ni,8))},t.\u0275dir=Ht({type:t,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(r,s){r&2&&Yi("mat-ripple-unbounded",s.unbounded)},inputs:{color:[Nt.None,"matRippleColor","color"],unbounded:[Nt.None,"matRippleUnbounded","unbounded"],centered:[Nt.None,"matRippleCentered","centered"],radius:[Nt.None,"matRippleRadius","radius"],animation:[Nt.None,"matRippleAnimation","animation"],disabled:[Nt.None,"matRippleDisabled","disabled"],trigger:[Nt.None,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0});let n=t;return n})(),Pb=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=pt({type:t}),t.\u0275inj=mt({imports:[eo,eo]});let n=t;return n})();var Cb={capture:!0},Db=["focus","click","mouseenter","touchstart"],Id="mat-ripple-loader-uninitialized",Td="mat-ripple-loader-class-name",xb="mat-ripple-loader-centered",qa="mat-ripple-loader-disabled",Ob=(()=>{let t=class t{constructor(){this._document=B(J,{optional:!0}),this._animationMode=B(ni,{optional:!0}),this._globalRippleOptions=B(kb,{optional:!0}),this._platform=B(It),this._ngZone=B(K),this._hosts=new Map,this._onInteraction=i=>{if(!(i.target instanceof HTMLElement))return;let s=i.target.closest(`[${Id}]`);s&&this._createRipple(s)},this._ngZone.runOutsideAngular(()=>{for(let i of Db)this._document?.addEventListener(i,this._onInteraction,Cb)})}ngOnDestroy(){let i=this._hosts.keys();for(let r of i)this.destroyRipple(r);for(let r of Db)this._document?.removeEventListener(r,this._onInteraction,Cb)}configureRipple(i,r){i.setAttribute(Id,""),(r.className||!i.hasAttribute(Td))&&i.setAttribute(Td,r.className||""),r.centered&&i.setAttribute(xb,""),r.disabled&&i.setAttribute(qa,"")}getRipple(i){return this._hosts.get(i)||this._createRipple(i)}setDisabled(i,r){let s=this._hosts.get(i);if(s){s.disabled=r;return}r?i.setAttribute(qa,""):i.removeAttribute(qa)}_createRipple(i){if(!this._document)return;let r=this._hosts.get(i);if(r)return r;i.querySelector(".mat-ripple")?.remove();let s=this._document.createElement("span");s.classList.add("mat-ripple",i.getAttribute(Td)),i.append(s);let o=new bA(new Bt(s),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return o._isInitialized=!0,o.trigger=i,o.centered=i.hasAttribute(xb),o.disabled=i.hasAttribute(qa),this.attachRipple(i,o),o}attachRipple(i,r){i.removeAttribute(Id),this._hosts.set(i,r)}destroyRipple(i){let r=this._hosts.get(i);r&&(r.ngOnDestroy(),this._hosts.delete(i))}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var vA=["mat-button",""],yA=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],wA=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"];var EA=new tt("MAT_BUTTON_CONFIG");var IA=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],TA=(()=>{let t=class t{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(i){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,i)}get disableRipple(){return this._disableRipple}set disableRipple(i){this._disableRipple=i,this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(i){this._disabled=i,this._updateRippleDisabled()}constructor(i,r,s,o){this._elementRef=i,this._platform=r,this._ngZone=s,this._animationMode=o,this._focusMonitor=B(bb),this._rippleLoader=B(Ob),this._isFab=!1,this._disableRipple=!1,this._disabled=!1;let c=B(EA,{optional:!0}),l=i.nativeElement,u=l.classList;this.disabledInteractive=c?.disabledInteractive??!1,this._rippleLoader?.configureRipple(l,{className:"mat-mdc-button-ripple"});for(let{attribute:f,mdcClasses:p}of IA)l.hasAttribute(f)&&u.add(...p)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(i="program",r){i?this._focusMonitor.focusVia(this._elementRef.nativeElement,i,r):this._elementRef.nativeElement.focus(r)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}};t.\u0275fac=function(r){cu()},t.\u0275dir=Ht({type:t,inputs:{color:"color",disableRipple:[Nt.HasDecoratorInputTransform,"disableRipple","disableRipple",sn],disabled:[Nt.HasDecoratorInputTransform,"disabled","disabled",sn],ariaDisabled:[Nt.HasDecoratorInputTransform,"aria-disabled","ariaDisabled",sn],disabledInteractive:[Nt.HasDecoratorInputTransform,"disabledInteractive","disabledInteractive",sn]},features:[Cn]});let n=t;return n})();var Nb=(()=>{let t=class t extends TA{constructor(i,r,s,o){super(i,r,s,o)}};t.\u0275fac=function(r){return new(r||t)(dt(Bt),dt(It),dt(K),dt(ni,8))},t.\u0275cmp=Ze({type:t,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:14,hostBindings:function(r,s){r&2&&(oi("disabled",s._getDisabledAttribute())("aria-disabled",s._getAriaDisabled()),Xg(s.color?"mat-"+s.color:""),Yi("mat-mdc-button-disabled",s.disabled)("mat-mdc-button-disabled-interactive",s.disabledInteractive)("_mat-animation-noopable",s._animationMode==="NoopAnimations")("mat-unthemed",!s.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[si,rn],attrs:vA,ngContentSelectors:wA,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(r,s){r&1&&(_a(yA),nn(0,"span",0),Qi(1),Dn(2,"span",1),Qi(3,1),en(),Qi(4,2),nn(5,"span",2)(6,"span",3)),r&2&&Yi("mdc-button__ripple",!s._isFab)("mdc-fab__ripple",s._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px);display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{font-family:var(--mdc-text-button-label-text-font);font-size:var(--mdc-text-button-label-text-size);letter-spacing:var(--mdc-text-button-label-text-tracking);font-weight:var(--mdc-text-button-label-text-weight);text-transform:var(--mdc-text-button-label-text-transform);height:var(--mdc-text-button-container-height);border-radius:var(--mdc-text-button-container-shape);padding:0 var(--mat-text-button-horizontal-padding, 8px)}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape)}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-text-button-with-icon-horizontal-padding, 8px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color)}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color)}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-disabled-state-layer-color)}.mat-mdc-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity)}.mat-mdc-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity)}.mat-mdc-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity)}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-text-button-touch-target-display)}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-unelevated-button{font-family:var(--mdc-filled-button-label-text-font);font-size:var(--mdc-filled-button-label-text-size);letter-spacing:var(--mdc-filled-button-label-text-tracking);font-weight:var(--mdc-filled-button-label-text-weight);text-transform:var(--mdc-filled-button-label-text-transform);height:var(--mdc-filled-button-container-height);border-radius:var(--mdc-filled-button-container-shape);padding:0 var(--mat-filled-button-horizontal-padding, 16px)}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color)}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color)}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-disabled-state-layer-color)}.mat-mdc-unelevated-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity)}.mat-mdc-unelevated-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity)}.mat-mdc-unelevated-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity)}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-filled-button-touch-target-display)}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color);background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{font-family:var(--mdc-protected-button-label-text-font);font-size:var(--mdc-protected-button-label-text-size);letter-spacing:var(--mdc-protected-button-label-text-tracking);font-weight:var(--mdc-protected-button-label-text-weight);text-transform:var(--mdc-protected-button-label-text-transform);height:var(--mdc-protected-button-container-height);border-radius:var(--mdc-protected-button-container-shape);padding:0 var(--mat-protected-button-horizontal-padding, 16px);box-shadow:var(--mdc-protected-button-container-elevation-shadow)}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color)}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color)}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color)}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-disabled-state-layer-color)}.mat-mdc-raised-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity)}.mat-mdc-raised-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity)}.mat-mdc-raised-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity)}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-protected-button-touch-target-display)}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation-shadow)}.mat-mdc-raised-button:focus{box-shadow:var(--mdc-protected-button-focus-container-elevation-shadow)}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mdc-protected-button-pressed-container-elevation-shadow)}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color);background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation-shadow)}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{font-family:var(--mdc-outlined-button-label-text-font);font-size:var(--mdc-outlined-button-label-text-size);letter-spacing:var(--mdc-outlined-button-label-text-tracking);font-weight:var(--mdc-outlined-button-label-text-weight);text-transform:var(--mdc-outlined-button-label-text-transform);height:var(--mdc-outlined-button-container-height);border-radius:var(--mdc-outlined-button-container-shape);padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width);padding:0 var(--mat-outlined-button-horizontal-padding, 15px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color)}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape)}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color)}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width))}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color)}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-disabled-state-layer-color)}.mat-mdc-outlined-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity)}.mat-mdc-outlined-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity)}.mat-mdc-outlined-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity)}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-outlined-button-touch-target-display)}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color);border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button-base{text-decoration:none}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px)*-1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0});let n=t;return n})();var AA=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=pt({type:t}),t.\u0275inj=mt({imports:[eo,Pb,eo]});let n=t;return n})();var no=class{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;t!=null&&(this._attachedHost=null,t.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(t){this._attachedHost=t}},pr=class extends no{constructor(t,e,i,r,s){super(),this.component=t,this.viewContainerRef=e,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=s}},gr=class extends no{constructor(t,e,i,r){super(),this.templateRef=t,this.viewContainerRef=e,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}},Cd=class extends no{constructor(t){super(),this.element=t instanceof Bt?t.nativeElement:t}},_r=class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){if(t instanceof pr)return this._attachedPortal=t,this.attachComponentPortal(t);if(t instanceof gr)return this._attachedPortal=t,this.attachTemplatePortal(t);if(this.attachDomPortal&&t instanceof Cd)return this._attachedPortal=t,this.attachDomPortal(t)}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var Ha=class extends _r{constructor(t,e,i,r,s){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=o=>{this._document;let c=o.element;c.parentNode;let l=this._document.createComment("dom-portal");c.parentNode.insertBefore(l,c),this.outletElement.appendChild(c),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(c,l)})},this._document=s}attachComponentPortal(t){let i=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),r;return t.viewContainerRef?(r=t.viewContainerRef.createComponent(i,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector,t.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(t.injector||this._defaultInjector||jt.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=t,r}attachTemplatePortal(t){let e=t.viewContainerRef,i=e.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=e.indexOf(i);r!==-1&&e.remove(r)}),this._attachedPortal=t,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}};var Dd=(()=>{let t=class t extends _r{constructor(i,r,s){super(),this._componentFactoryResolver=i,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new we,this.attachDomPortal=o=>{this._document;let c=o.element;c.parentNode;let l=this._document.createComment("dom-portal");o.setAttachedHost(this),c.parentNode.insertBefore(l,c),this._getRootNode().appendChild(c),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(c,l)})},this._document=s}get portal(){return this._attachedPortal}set portal(i){this.hasAttached()&&!i&&!this._isInitialized||(this.hasAttached()&&super.detach(),i&&super.attach(i),this._attachedPortal=i||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(i){i.setAttachedHost(this);let r=i.viewContainerRef!=null?i.viewContainerRef:this._viewContainerRef,o=(i.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(i.component),c=r.createComponent(o,r.length,i.injector||r.injector,i.projectableNodes||void 0);return r!==this._viewContainerRef&&this._getRootNode().appendChild(c.hostView.rootNodes[0]),super.setDisposeFn(()=>c.destroy()),this._attachedPortal=i,this._attachedRef=c,this.attached.emit(c),c}attachTemplatePortal(i){i.setAttachedHost(this);let r=this._viewContainerRef.createEmbeddedView(i.templateRef,i.context,{injector:i.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=i,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){let i=this._viewContainerRef.element.nativeElement;return i.nodeType===i.ELEMENT_NODE?i:i.parentNode}};t.\u0275fac=function(r){return new(r||t)(dt(fa),dt(Ki),dt(J))},t.\u0275dir=Ht({type:t,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[Nt.None,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],standalone:!0,features:[si]});let n=t;return n})();var RA=20,Mb=(()=>{let t=class t{constructor(i,r,s){this._ngZone=i,this._platform=r,this._scrolled=new ut,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=s}register(i){this.scrollContainers.has(i)||this.scrollContainers.set(i,i.elementScrolled().subscribe(()=>this._scrolled.next(i)))}deregister(i){let r=this.scrollContainers.get(i);r&&(r.unsubscribe(),this.scrollContainers.delete(i))}scrolled(i=RA){return this._platform.isBrowser?new An(r=>{this._globalSubscription||this._addGlobalListener();let s=i>0?this._scrolled.pipe(tu(i)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{s.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):W()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((i,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(i,r){let s=this.getAncestorScrollContainers(i);return this.scrolled(r).pipe(ue(o=>!o||s.indexOf(o)>-1))}getAncestorScrollContainers(i){let r=[];return this.scrollContainers.forEach((s,o)=>{this._scrollableContainsElement(o,i)&&r.push(o)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(i,r){let s=on(r),o=i.getElementRef().nativeElement;do if(s==o)return!0;while(s=s.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let i=this._getWindow();return Dg(i.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}};t.\u0275fac=function(r){return new(r||t)(k(K),k(It),k(J,8))},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var SA=20,xd=(()=>{let t=class t{constructor(i,r,s){this._platform=i,this._change=new ut,this._changeListener=o=>{this._change.next(o)},this._document=s,r.runOutsideAngular(()=>{if(i.isBrowser){let o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let i=this._getWindow();i.removeEventListener("resize",this._changeListener),i.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let i={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),i}getViewportRect(){let i=this.getViewportScrollPosition(),{width:r,height:s}=this.getViewportSize();return{top:i.top,left:i.left,bottom:i.top+s,right:i.left+r,height:s,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let i=this._document,r=this._getWindow(),s=i.documentElement,o=s.getBoundingClientRect(),c=-o.top||i.body.scrollTop||r.scrollY||s.scrollTop||0,l=-o.left||i.body.scrollLeft||r.scrollX||s.scrollLeft||0;return{top:c,left:l}}change(i=SA){return i>0?this._change.pipe(tu(i)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let i=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:i.innerWidth,height:i.innerHeight}:{width:0,height:0}}};t.\u0275fac=function(r){return new(r||t)(k(It),k(K),k(J,8))},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var Lb=ob(),kd=class{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){let t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=xt(-this._previousScrollPosition.left),t.style.top=xt(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let t=this._document.documentElement,e=this._document.body,i=t.style,r=e.style,s=i.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),Lb&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),Lb&&(i.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let e=this._document.body,i=this._viewportRuler.getViewportSize();return e.scrollHeight>i.height||e.scrollWidth>i.width}};var Pd=class{constructor(t,e,i,r){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(this._scrollSubscription)return;let t=this._scrollDispatcher.scrolled(0).pipe(ue(e=>!e||!this._overlayRef.overlayElement.contains(e.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{let e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},Wa=class{enable(){}disable(){}attach(){}};function Od(n,t){return t.some(e=>{let i=n.bottom<e.top,r=n.top>e.bottom,s=n.right<e.left,o=n.left>e.right;return i||r||s||o})}function Fb(n,t){return t.some(e=>{let i=n.top<e.top,r=n.bottom>e.bottom,s=n.left<e.left,o=n.right>e.right;return i||r||s||o})}var Nd=class{constructor(t,e,i,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(!this._scrollSubscription){let t=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(t).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();Od(e,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},xA=(()=>{let t=class t{constructor(i,r,s,o){this._scrollDispatcher=i,this._viewportRuler=r,this._ngZone=s,this.noop=()=>new Wa,this.close=c=>new Pd(this._scrollDispatcher,this._ngZone,this._viewportRuler,c),this.block=()=>new kd(this._viewportRuler,this._document),this.reposition=c=>new Nd(this._scrollDispatcher,this._viewportRuler,this._ngZone,c),this._document=o}};t.\u0275fac=function(r){return new(r||t)(k(Mb),k(xd),k(K),k(J))},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),io=class{constructor(t){if(this.scrollStrategy=new Wa,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){let e=Object.keys(t);for(let i of e)t[i]!==void 0&&(this[i]=t[i])}}};var Md=class{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}};var zb=(()=>{let t=class t{constructor(i){this._attachedOverlays=[],this._document=i}ngOnDestroy(){this.detach()}add(i){this.remove(i),this._attachedOverlays.push(i)}remove(i){let r=this._attachedOverlays.indexOf(i);r>-1&&this._attachedOverlays.splice(r,1),this._attachedOverlays.length===0&&this.detach()}};t.\u0275fac=function(r){return new(r||t)(k(J))},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),kA=(()=>{let t=class t extends zb{constructor(i,r){super(i),this._ngZone=r,this._keydownListener=s=>{let o=this._attachedOverlays;for(let c=o.length-1;c>-1;c--)if(o[c]._keydownEvents.observers.length>0){let l=o[c]._keydownEvents;this._ngZone?this._ngZone.run(()=>l.next(s)):l.next(s);break}}}add(i){super.add(i),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}};t.\u0275fac=function(r){return new(r||t)(k(J),k(K,8))},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),PA=(()=>{let t=class t extends zb{constructor(i,r,s){super(i),this._platform=r,this._ngZone=s,this._cursorStyleIsSet=!1,this._pointerDownListener=o=>{this._pointerDownEventTarget=Ce(o)},this._clickListener=o=>{let c=Ce(o),l=o.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:c;this._pointerDownEventTarget=null;let u=this._attachedOverlays.slice();for(let f=u.length-1;f>-1;f--){let p=u[f];if(p._outsidePointerEvents.observers.length<1||!p.hasAttached())continue;if(p.overlayElement.contains(c)||p.overlayElement.contains(l))break;let _=p._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>_.next(o)):_.next(o)}}}add(i){if(super.add(i),!this._isAttached){let r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let i=this._document.body;i.removeEventListener("pointerdown",this._pointerDownListener,!0),i.removeEventListener("click",this._clickListener,!0),i.removeEventListener("auxclick",this._clickListener,!0),i.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(i.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(i){i.addEventListener("pointerdown",this._pointerDownListener,!0),i.addEventListener("click",this._clickListener,!0),i.addEventListener("auxclick",this._clickListener,!0),i.addEventListener("contextmenu",this._clickListener,!0)}};t.\u0275fac=function(r){return new(r||t)(k(J),k(It),k(K,8))},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),$b=(()=>{let t=class t{constructor(i,r){this._platform=r,this._document=i}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let i="cdk-overlay-container";if(this._platform.isBrowser||Zs()){let s=this._document.querySelectorAll(`.${i}[platform="server"], .${i}[platform="test"]`);for(let o=0;o<s.length;o++)s[o].remove()}let r=this._document.createElement("div");r.classList.add(i),Zs()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}};t.\u0275fac=function(r){return new(r||t)(k(J),k(It))},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),Ld=class{constructor(t,e,i,r,s,o,c,l,u,f=!1){this._portalOutlet=t,this._host=e,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=c,this._location=l,this._outsideClickDispatcher=u,this._animationsDisabled=f,this._backdropElement=null,this._backdropClick=new ut,this._attachments=new ut,this._detachments=new ut,this._locationChanges=Zn.EMPTY,this._backdropClickHandler=p=>this._backdropClick.next(p),this._backdropTransitionendHandler=p=>{this._disposeBackdrop(p.target)},this._keydownEvents=new ut,this._outsidePointerEvents=new ut,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(ve(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof e?.onDestroy=="function"&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){let t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=N(N({},this._config),t),this._updateElementSize()}setDirection(t){this._config=vt(N({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){let t=this._config.direction;return t?typeof t=="string"?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let t=this._pane.style;t.width=xt(this._config.width),t.height=xt(this._config.height),t.minWidth=xt(this._config.minWidth),t.minHeight=xt(this._config.minHeight),t.maxWidth=xt(this._config.maxWidth),t.maxHeight=xt(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){let t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let t=this._backdropElement;if(t){if(this._animationsDisabled){this._disposeBackdrop(t);return}t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500))}}_toggleClasses(t,e,i){let r=fr(e||[]).filter(s=>!!s);r.length&&(i?t.classList.add(...r):t.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{let t=this._ngZone.onStable.pipe(Se(xg(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){let t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}},Vb="cdk-overlay-connected-position-bounding-box",OA=/([A-Za-z%]+)$/,Fd=class{get positions(){return this._preferredPositions}constructor(t,e,i,r,s){this._viewportRuler=e,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new ut,this._resizeSubscription=Zn.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}attach(t){this._overlayRef&&this._overlayRef,this._validatePositions(),t.hostElement.classList.add(Vb),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let t=this._originRect,e=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[],o;for(let c of this._preferredPositions){let l=this._getOriginPoint(t,r,c),u=this._getOverlayPoint(l,e,c),f=this._getOverlayFit(u,e,i,c);if(f.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(c,l);return}if(this._canFitWithFlexibleDimensions(f,u,i)){s.push({position:c,origin:l,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(l,c)});continue}(!o||o.overlayFit.visibleArea<f.visibleArea)&&(o={overlayFit:f,overlayPoint:u,originPoint:l,position:c,overlayRect:e})}if(s.length){let c=null,l=-1;for(let u of s){let f=u.boundingBoxRect.width*u.boundingBoxRect.height*(u.position.weight||1);f>l&&(l=f,c=u)}this._isPushed=!1,this._applyPosition(c.position,c.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(o.position,o.originPoint);return}this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&gi(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Vb),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,t.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,i){let r;if(i.originX=="center")r=t.left+t.width/2;else{let o=this._isRtl()?t.right:t.left,c=this._isRtl()?t.left:t.right;r=i.originX=="start"?o:c}e.left<0&&(r-=e.left);let s;return i.originY=="center"?s=t.top+t.height/2:s=i.originY=="top"?t.top:t.bottom,e.top<0&&(s-=e.top),{x:r,y:s}}_getOverlayPoint(t,e,i){let r;i.overlayX=="center"?r=-e.width/2:i.overlayX==="start"?r=this._isRtl()?-e.width:0:r=this._isRtl()?0:-e.width;let s;return i.overlayY=="center"?s=-e.height/2:s=i.overlayY=="top"?0:-e.height,{x:t.x+r,y:t.y+s}}_getOverlayFit(t,e,i,r){let s=jb(e),{x:o,y:c}=t,l=this._getOffset(r,"x"),u=this._getOffset(r,"y");l&&(o+=l),u&&(c+=u);let f=0-o,p=o+s.width-i.width,_=0-c,E=c+s.height-i.height,C=this._subtractOverflows(s.width,f,p),D=this._subtractOverflows(s.height,_,E),x=C*D;return{visibleArea:x,isCompletelyWithinViewport:s.width*s.height===x,fitsInViewportVertically:D===s.height,fitsInViewportHorizontally:C==s.width}}_canFitWithFlexibleDimensions(t,e,i){if(this._hasFlexibleDimensions){let r=i.bottom-e.y,s=i.right-e.x,o=Ub(this._overlayRef.getConfig().minHeight),c=Ub(this._overlayRef.getConfig().minWidth),l=t.fitsInViewportVertically||o!=null&&o<=r,u=t.fitsInViewportHorizontally||c!=null&&c<=s;return l&&u}return!1}_pushOverlayOnScreen(t,e,i){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};let r=jb(e),s=this._viewportRect,o=Math.max(t.x+r.width-s.width,0),c=Math.max(t.y+r.height-s.height,0),l=Math.max(s.top-i.top-t.y,0),u=Math.max(s.left-i.left-t.x,0),f=0,p=0;return r.width<=s.width?f=u||-o:f=t.x<this._viewportMargin?s.left-i.left-t.x:0,r.height<=s.height?p=l||-c:p=t.y<this._viewportMargin?s.top-i.top-t.y:0,this._previousPushAmount={x:f,y:p},{x:t.x+f,y:t.y+p}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._positionChanges.observers.length){let i=this._getScrollVisibility();if(t!==this._lastPosition||!this._lastScrollVisibility||!NA(this._lastScrollVisibility,i)){let r=new Md(t,i);this._positionChanges.next(r)}this._lastScrollVisibility=i}this._lastPosition=t,this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;let e=this._boundingBox.querySelectorAll(this._transformOriginSelector),i,r=t.overlayY;t.overlayX==="center"?i="center":this._isRtl()?i=t.overlayX==="start"?"right":"left":i=t.overlayX==="start"?"left":"right";for(let s=0;s<e.length;s++)e[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(t,e){let i=this._viewportRect,r=this._isRtl(),s,o,c;if(e.overlayY==="top")o=t.y,s=i.height-o+this._viewportMargin;else if(e.overlayY==="bottom")c=i.height-t.y+this._viewportMargin*2,s=i.height-c+this._viewportMargin;else{let E=Math.min(i.bottom-t.y+i.top,t.y),C=this._lastBoundingBoxSize.height;s=E*2,o=t.y-E,s>C&&!this._isInitialRender&&!this._growAfterOpen&&(o=t.y-C/2)}let l=e.overlayX==="start"&&!r||e.overlayX==="end"&&r,u=e.overlayX==="end"&&!r||e.overlayX==="start"&&r,f,p,_;if(u)_=i.width-t.x+this._viewportMargin*2,f=t.x-this._viewportMargin;else if(l)p=t.x,f=i.right-t.x;else{let E=Math.min(i.right-t.x+i.left,t.x),C=this._lastBoundingBoxSize.width;f=E*2,p=t.x-E,f>C&&!this._isInitialRender&&!this._growAfterOpen&&(p=t.x-C/2)}return{top:o,left:p,bottom:c,right:_,width:f,height:s}}_setBoundingBoxStyles(t,e){let i=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));let r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{let s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=xt(i.height),r.top=xt(i.top),r.bottom=xt(i.bottom),r.width=xt(i.width),r.left=xt(i.left),r.right=xt(i.right),e.overlayX==="center"?r.alignItems="center":r.alignItems=e.overlayX==="end"?"flex-end":"flex-start",e.overlayY==="center"?r.justifyContent="center":r.justifyContent=e.overlayY==="bottom"?"flex-end":"flex-start",s&&(r.maxHeight=xt(s)),o&&(r.maxWidth=xt(o))}this._lastBoundingBoxSize=i,gi(this._boundingBox.style,r)}_resetBoundingBoxStyles(){gi(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){gi(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){let i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){let f=this._viewportRuler.getViewportScrollPosition();gi(i,this._getExactOverlayY(e,t,f)),gi(i,this._getExactOverlayX(e,t,f))}else i.position="static";let c="",l=this._getOffset(e,"x"),u=this._getOffset(e,"y");l&&(c+=`translateX(${l}px) `),u&&(c+=`translateY(${u}px)`),i.transform=c.trim(),o.maxHeight&&(r?i.maxHeight=xt(o.maxHeight):s&&(i.maxHeight="")),o.maxWidth&&(r?i.maxWidth=xt(o.maxWidth):s&&(i.maxWidth="")),gi(this._pane.style,i)}_getExactOverlayY(t,e,i){let r={top:"",bottom:""},s=this._getOverlayPoint(e,this._overlayRect,t);if(this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),t.overlayY==="bottom"){let o=this._document.documentElement.clientHeight;r.bottom=`${o-(s.y+this._overlayRect.height)}px`}else r.top=xt(s.y);return r}_getExactOverlayX(t,e,i){let r={left:"",right:""},s=this._getOverlayPoint(e,this._overlayRect,t);this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i));let o;if(this._isRtl()?o=t.overlayX==="end"?"left":"right":o=t.overlayX==="end"?"right":"left",o==="right"){let c=this._document.documentElement.clientWidth;r.right=`${c-(s.x+this._overlayRect.width)}px`}else r.left=xt(s.x);return r}_getScrollVisibility(){let t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Fb(t,i),isOriginOutsideView:Od(t,i),isOverlayClipped:Fb(e,i),isOverlayOutsideView:Od(e,i)}}_subtractOverflows(t,...e){return e.reduce((i,r)=>i-Math.max(r,0),t)}_getNarrowedViewportRect(){let t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+t-this._viewportMargin,bottom:i.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return e==="x"?t.offsetX==null?this._offsetX:t.offsetX:t.offsetY==null?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&fr(t).forEach(e=>{e!==""&&this._appliedPanelClasses.indexOf(e)===-1&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){let t=this._origin;if(t instanceof Bt)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();let e=t.width||0,i=t.height||0;return{top:t.y,bottom:t.y+i,left:t.x,right:t.x+e,height:i,width:e}}};function gi(n,t){for(let e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function Ub(n){if(typeof n!="number"&&n!=null){let[t,e]=n.split(OA);return!e||e==="px"?parseFloat(t):null}return n||null}function jb(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}function NA(n,t){return n===t?!0:n.isOriginClipped===t.isOriginClipped&&n.isOriginOutsideView===t.isOriginOutsideView&&n.isOverlayClipped===t.isOverlayClipped&&n.isOverlayOutsideView===t.isOverlayOutsideView}var Bb="cdk-global-overlay-wrapper",Vd=class{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(t){let e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(Bb),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:c}=i,l=(r==="100%"||r==="100vw")&&(!o||o==="100%"||o==="100vw"),u=(s==="100%"||s==="100vh")&&(!c||c==="100%"||c==="100vh"),f=this._xPosition,p=this._xOffset,_=this._overlayRef.getConfig().direction==="rtl",E="",C="",D="";l?D="flex-start":f==="center"?(D="center",_?C=p:E=p):_?f==="left"||f==="end"?(D="flex-end",E=p):(f==="right"||f==="start")&&(D="flex-start",C=p):f==="left"||f==="start"?(D="flex-start",E=p):(f==="right"||f==="end")&&(D="flex-end",C=p),t.position=this._cssPosition,t.marginLeft=l?"0":E,t.marginTop=u?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=l?"0":C,e.justifyContent=D,e.alignItems=u?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,i=e.style;e.classList.remove(Bb),i.justifyContent=i.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}},MA=(()=>{let t=class t{constructor(i,r,s,o){this._viewportRuler=i,this._document=r,this._platform=s,this._overlayContainer=o}global(){return new Vd}flexibleConnectedTo(i){return new Fd(i,this._viewportRuler,this._document,this._platform,this._overlayContainer)}};t.\u0275fac=function(r){return new(r||t)(k(xd),k(J),k(It),k($b))},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),LA=0,qb=(()=>{let t=class t{constructor(i,r,s,o,c,l,u,f,p,_,E,C){this.scrollStrategies=i,this._overlayContainer=r,this._componentFactoryResolver=s,this._positionBuilder=o,this._keyboardDispatcher=c,this._injector=l,this._ngZone=u,this._document=f,this._directionality=p,this._location=_,this._outsideClickDispatcher=E,this._animationsModuleType=C}create(i){let r=this._createHostElement(),s=this._createPaneElement(r),o=this._createPortalOutlet(s),c=new io(i);return c.direction=c.direction||this._directionality.value,new Ld(o,r,s,c,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations")}position(){return this._positionBuilder}_createPaneElement(i){let r=this._document.createElement("div");return r.id=`cdk-overlay-${LA++}`,r.classList.add("cdk-overlay-pane"),i.appendChild(r),r}_createHostElement(){let i=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalOutlet(i){return this._appRef||(this._appRef=this._injector.get(xs)),new Ha(i,this._componentFactoryResolver,this._appRef,this._injector,this._document)}};t.\u0275fac=function(r){return new(r||t)(k(xA),k($b),k(fa),k(MA),k(kA),k(jt),k(K),k(J),k(wb),k(Zi),k(PA),k(ni,8))},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function VA(n,t){if(n&1){let e=Jg();Dn(0,"div",1)(1,"button",2),pa("click",function(){Lg(e);let r=ga();return Fg(r.action())}),ba(2),en()()}if(n&2){let e=ga();ri(2),va(" ",e.data.action," ")}}var UA=["label"];function jA(n,t){}var BA=Math.pow(2,31)-1,ro=class{constructor(t,e){this._overlayRef=e,this._afterDismissed=new ut,this._afterOpened=new ut,this._onAction=new ut,this._dismissedByAction=!1,this.containerInstance=t,t._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(t){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(t,BA))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}},Hb=new tt("MatSnackBarData"),br=class{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}},zA=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=Ht({type:t,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"],standalone:!0});let n=t;return n})(),$A=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=Ht({type:t,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"],standalone:!0});let n=t;return n})(),qA=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=Ht({type:t,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"],standalone:!0});let n=t;return n})(),HA=(()=>{let t=class t{constructor(i,r){this.snackBarRef=i,this.data=r}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}};t.\u0275fac=function(r){return new(r||t)(dt(ro),dt(Hb))},t.\u0275cmp=Ze({type:t,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],standalone:!0,features:[rn],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions",""],["mat-button","","matSnackBarAction","",3,"click"]],template:function(r,s){r&1&&(Dn(0,"div",0),ba(1),en(),ma(2,VA,3,1,"div",1)),r&2&&(ri(),va(" ",s.data.message,`
`),ri(),lu(2,s.hasAction?2:-1))},dependencies:[Nb,zA,$A,qA],styles:[".mat-mdc-simple-snack-bar{display:flex}"],encapsulation:2,changeDetection:0});let n=t;return n})(),WA={snackBarState:d_("state",[mu("void, hidden",wa({transform:"scale(0.8)",opacity:0})),mu("visible",wa({transform:"scale(1)",opacity:1})),pu("* => visible",fu("150ms cubic-bezier(0, 0, 0.2, 1)")),pu("* => void, * => hidden",fu("75ms cubic-bezier(0.4, 0.0, 1, 1)",wa({opacity:0})))])},GA=0,KA=(()=>{let t=class t extends _r{constructor(i,r,s,o,c){super(),this._ngZone=i,this._elementRef=r,this._changeDetectorRef=s,this._platform=o,this.snackBarConfig=c,this._document=B(J),this._trackedModals=new Set,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new ut,this._onExit=new ut,this._onEnter=new ut,this._animationState="void",this._liveElementId=`mat-snack-bar-container-live-${GA++}`,this.attachDomPortal=l=>{this._assertNotAttached();let u=this._portalOutlet.attachDomPortal(l);return this._afterPortalAttached(),u},c.politeness==="assertive"&&!c.announcementMessage?this._live="assertive":c.politeness==="off"?this._live="off":this._live="polite",this._platform.FIREFOX&&(this._live==="polite"&&(this._role="status"),this._live==="assertive"&&(this._role="alert"))}attachComponentPortal(i){this._assertNotAttached();let r=this._portalOutlet.attachComponentPortal(i);return this._afterPortalAttached(),r}attachTemplatePortal(i){this._assertNotAttached();let r=this._portalOutlet.attachTemplatePortal(i);return this._afterPortalAttached(),r}onAnimationEnd(i){let{fromState:r,toState:s}=i;if((s==="void"&&r!=="void"||s==="hidden")&&this._completeExit(),s==="visible"){let o=this._onEnter;this._ngZone.run(()=>{o.next(),o.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.markForCheck(),this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._changeDetectorRef.markForCheck(),this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._clearFromModals(),this._completeExit()}_completeExit(){queueMicrotask(()=>{this._onExit.next(),this._onExit.complete()})}_afterPortalAttached(){let i=this._elementRef.nativeElement,r=this.snackBarConfig.panelClass;r&&(Array.isArray(r)?r.forEach(c=>i.classList.add(c)):i.classList.add(r)),this._exposeToModals();let s=this._label.nativeElement,o="mdc-snackbar__label";s.classList.toggle(o,!s.querySelector(`.${o}`))}_exposeToModals(){let i=this._liveElementId,r=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let s=0;s<r.length;s++){let o=r[s],c=o.getAttribute("aria-owns");this._trackedModals.add(o),c?c.indexOf(i)===-1&&o.setAttribute("aria-owns",c+" "+i):o.setAttribute("aria-owns",i)}}_clearFromModals(){this._trackedModals.forEach(i=>{let r=i.getAttribute("aria-owns");if(r){let s=r.replace(this._liveElementId,"").trim();s.length>0?i.setAttribute("aria-owns",s):i.removeAttribute("aria-owns")}}),this._trackedModals.clear()}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{let i=this._elementRef.nativeElement.querySelector("[aria-hidden]"),r=this._elementRef.nativeElement.querySelector("[aria-live]");if(i&&r){let s=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&i.contains(document.activeElement)&&(s=document.activeElement),i.removeAttribute("aria-hidden"),r.appendChild(i),s?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}};t.\u0275fac=function(r){return new(r||t)(dt(K),dt(Bt),dt(ai),dt(It),dt(br))},t.\u0275cmp=Ze({type:t,selectors:[["mat-snack-bar-container"]],viewQuery:function(r,s){if(r&1&&(Cs(Dd,7),Cs(UA,7)),r&2){let o;Xi(o=Ji())&&(s._portalOutlet=o.first),Xi(o=Ji())&&(s._label=o.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container","mdc-snackbar--open"],hostVars:1,hostBindings:function(r,s){r&1&&t_("@state.done",function(c){return s.onAnimationEnd(c)}),r&2&&Zg("@state",s._animationState)},standalone:!0,features:[si,rn],decls:6,vars:3,consts:[["label",""],[1,"mdc-snackbar__surface"],[1,"mat-mdc-snack-bar-label"],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(r,s){r&1&&(Dn(0,"div",1)(1,"div",2,0)(3,"div",3),ma(4,jA,0,0,"ng-template",4),en(),nn(5,"div"),en()()),r&2&&(ri(5),oi("aria-live",s._live)("role",s._role)("id",s._liveElementId))},dependencies:[Dd],styles:['.mdc-snackbar{display:none;position:fixed;right:0;bottom:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;pointer-events:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mdc-snackbar--opening,.mdc-snackbar--open,.mdc-snackbar--closing{display:flex}.mdc-snackbar--open .mdc-snackbar__label,.mdc-snackbar--open .mdc-snackbar__actions{visibility:visible}.mdc-snackbar__surface{padding-left:0;padding-right:8px;display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;transform:scale(0.8);opacity:0}.mdc-snackbar__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-snackbar__surface::before{border-color:CanvasText}}[dir=rtl] .mdc-snackbar__surface,.mdc-snackbar__surface[dir=rtl]{padding-left:8px;padding-right:0}.mdc-snackbar--open .mdc-snackbar__surface{transform:scale(1);opacity:1;pointer-events:auto}.mdc-snackbar--closing .mdc-snackbar__surface{transform:scale(1)}.mdc-snackbar__label{padding-left:16px;padding-right:8px;width:100%;flex-grow:1;box-sizing:border-box;margin:0;visibility:hidden;padding-top:14px;padding-bottom:14px}[dir=rtl] .mdc-snackbar__label,.mdc-snackbar__label[dir=rtl]{padding-left:8px;padding-right:16px}.mdc-snackbar__label::before{display:inline;content:attr(data-mdc-snackbar-label-text)}.mdc-snackbar__actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box;visibility:hidden}.mdc-snackbar__action+.mdc-snackbar__dismiss{margin-left:8px;margin-right:0}[dir=rtl] .mdc-snackbar__action+.mdc-snackbar__dismiss,.mdc-snackbar__action+.mdc-snackbar__dismiss[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-snack-bar-container{margin:8px;position:static}.mat-mdc-snack-bar-container .mdc-snackbar__surface{min-width:344px}@media(max-width: 480px),(max-width: 344px){.mat-mdc-snack-bar-container .mdc-snackbar__surface{min-width:100%}}@media(max-width: 480px),(max-width: 344px){.mat-mdc-snack-bar-container{width:100vw}}.mat-mdc-snack-bar-container .mdc-snackbar__surface{max-width:672px}.mat-mdc-snack-bar-container .mdc-snackbar__surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12)}.mat-mdc-snack-bar-container .mdc-snackbar__surface{background-color:var(--mdc-snackbar-container-color)}.mat-mdc-snack-bar-container .mdc-snackbar__surface{border-radius:var(--mdc-snackbar-container-shape)}.mat-mdc-snack-bar-container .mdc-snackbar__label{color:var(--mdc-snackbar-supporting-text-color)}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-size:var(--mdc-snackbar-supporting-text-size);font-family:var(--mdc-snackbar-supporting-text-font);font-weight:var(--mdc-snackbar-supporting-text-weight);line-height:var(--mdc-snackbar-supporting-text-line-height)}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){color:var(--mat-snack-bar-button-color);--mat-text-button-state-layer-color:currentColor;--mat-text-button-ripple-color:currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{opacity:.1}.mat-mdc-snack-bar-container .mdc-snackbar__label::before{display:none}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-handset .mdc-snackbar__surface{width:100%}'],encapsulation:2,data:{animation:[WA.snackBarState]}});let n=t;return n})();function YA(){return new br}var QA=new tt("mat-snack-bar-default-options",{providedIn:"root",factory:YA}),Wb=(()=>{let t=class t{get _openedSnackBarRef(){let i=this._parentSnackBar;return i?i._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(i){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=i:this._snackBarRefAtThisLevel=i}constructor(i,r,s,o,c,l){this._overlay=i,this._live=r,this._injector=s,this._breakpointObserver=o,this._parentSnackBar=c,this._defaultConfig=l,this._snackBarRefAtThisLevel=null,this.simpleSnackBarComponent=HA,this.snackBarContainerComponent=KA,this.handsetCssClass="mat-mdc-snack-bar-handset"}openFromComponent(i,r){return this._attach(i,r)}openFromTemplate(i,r){return this._attach(i,r)}open(i,r="",s){let o=N(N({},this._defaultConfig),s);return o.data={message:i,action:r},o.announcementMessage===i&&(o.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,o)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(i,r){let s=r&&r.viewContainerRef&&r.viewContainerRef.injector,o=jt.create({parent:s||this._injector,providers:[{provide:br,useValue:r}]}),c=new pr(this.snackBarContainerComponent,r.viewContainerRef,o),l=i.attach(c);return l.instance.snackBarConfig=r,l.instance}_attach(i,r){let s=N(N(N({},new br),this._defaultConfig),r),o=this._createOverlay(s),c=this._attachSnackBarContainer(o,s),l=new ro(c,o);if(i instanceof Ss){let u=new gr(i,null,{$implicit:s.data,snackBarRef:l});l.instance=c.attachTemplatePortal(u)}else{let u=this._createInjector(s,l),f=new pr(i,void 0,u),p=c.attachComponentPortal(f);l.instance=p.instance}return this._breakpointObserver.observe(db.HandsetPortrait).pipe(Se(o.detachments())).subscribe(u=>{o.overlayElement.classList.toggle(this.handsetCssClass,u.matches)}),s.announcementMessage&&c._onAnnounce.subscribe(()=>{this._live.announce(s.announcementMessage,s.politeness)}),this._animateSnackBar(l,s),this._openedSnackBarRef=l,this._openedSnackBarRef}_animateSnackBar(i,r){i.afterDismissed().subscribe(()=>{this._openedSnackBarRef==i&&(this._openedSnackBarRef=null),r.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{i.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):i.containerInstance.enter(),r.duration&&r.duration>0&&i.afterOpened().subscribe(()=>i._dismissAfter(r.duration))}_createOverlay(i){let r=new io;r.direction=i.direction;let s=this._overlay.position().global(),o=i.direction==="rtl",c=i.horizontalPosition==="left"||i.horizontalPosition==="start"&&!o||i.horizontalPosition==="end"&&o,l=!c&&i.horizontalPosition!=="center";return c?s.left("0"):l?s.right("0"):s.centerHorizontally(),i.verticalPosition==="top"?s.top("0"):s.bottom("0"),r.positionStrategy=s,this._overlay.create(r)}_createInjector(i,r){let s=i&&i.viewContainerRef&&i.viewContainerRef.injector;return jt.create({parent:s||this._injector,providers:[{provide:ro,useValue:r},{provide:Hb,useValue:i.data}]})}};t.\u0275fac=function(r){return new(r||t)(k(qb),k(_b),k(jt),k(Ba),k(t,12),k(QA))},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var Gb=(()=>{let t=class t{constructor(i){this.snackBar=i,this.router=B(ur)}routerLink(i){return this.router.navigateByUrl(i)}saveInLocalStorage(i,r){return localStorage.setItem(i,JSON.stringify(r))}showSuccess(i){this.snackBar.open(i,"Cerrar",{duration:7e3,panelClass:["success-snackbar"]})}showError(i){this.snackBar.open(i,"Cerrar",{duration:5e3,panelClass:["error-snackbar"]})}showWarning(i){this.snackBar.open(i,"Cerrar",{duration:5e3,panelClass:["warning-snackbar"]})}};t.\u0275fac=function(r){return new(r||t)(k(Wb))},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var Yb=function(n){let t=[],e=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?t[e++]=r:r<2048?(t[e++]=r>>6|192,t[e++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),t[e++]=r>>18|240,t[e++]=r>>12&63|128,t[e++]=r>>6&63|128,t[e++]=r&63|128):(t[e++]=r>>12|224,t[e++]=r>>6&63|128,t[e++]=r&63|128)}return t},JA=function(n){let t=[],e=0,i=0;for(;e<n.length;){let r=n[e++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){let s=n[e++];t[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){let s=n[e++],o=n[e++],c=n[e++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|c&63)-65536;t[i++]=String.fromCharCode(55296+(l>>10)),t[i++]=String.fromCharCode(56320+(l&1023))}else{let s=n[e++],o=n[e++];t[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return t.join("")},Qb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){let s=n[r],o=r+1<n.length,c=o?n[r+1]:0,l=r+2<n.length,u=l?n[r+2]:0,f=s>>2,p=(s&3)<<4|c>>4,_=(c&15)<<2|u>>6,E=u&63;l||(E=64,o||(_=64)),i.push(e[f],e[p],e[_],e[E])}return i.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(Yb(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):JA(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();let e=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){let s=e[n.charAt(r++)],c=r<n.length?e[n.charAt(r)]:0;++r;let u=r<n.length?e[n.charAt(r)]:64;++r;let p=r<n.length?e[n.charAt(r)]:64;if(++r,s==null||c==null||u==null||p==null)throw new jd;let _=s<<2|c>>4;if(i.push(_),u!==64){let E=c<<4&240|u>>2;if(i.push(E),p!==64){let C=u<<6&192|p;i.push(C)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},jd=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},ZA=function(n){let t=Yb(n);return Qb.encodeByteArray(t,!0)},so=function(n){return ZA(n).replace(/\./g,"")},zd=function(n){try{return Qb.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function tR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var eR=()=>tR().__FIREBASE_DEFAULTS__,nR=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},iR=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let t=n&&zd(n[1]);return t&&JSON.parse(t)},Ka=()=>{try{return eR()||nR()||iR()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},$d=n=>{var t,e;return(e=(t=Ka())===null||t===void 0?void 0:t.emulatorHosts)===null||e===void 0?void 0:e[n]},Ya=n=>{let t=$d(n);if(!t)return;let e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);let i=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),i]:[t.substring(0,e),i]},qd=()=>{var n;return(n=Ka())===null||n===void 0?void 0:n.config},Hd=n=>{var t;return(t=Ka())===null||t===void 0?void 0:t[`_${n}`]};var Ga=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,i)=>{e?this.reject(e):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,i))}}};function Qa(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let e={alg:"none",type:"JWT"},i=t||"demo-project",r=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[so(JSON.stringify(e)),so(JSON.stringify(o)),""].join(".")}function zt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Xb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(zt())}function rR(){var n;let t=(n=Ka())===null||n===void 0?void 0:n.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Jb(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Zb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function tv(){let n=zt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function ev(){return!rR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Wd(){try{return typeof indexedDB=="object"}catch{return!1}}function nv(){return new Promise((n,t)=>{try{let e=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),e||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{e=!1},r.onerror=()=>{var s;t(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(e){t(e)}})}var sR="FirebaseError",re=class n extends Error{constructor(t,e,i){super(e),this.code=t,this.customData=i,this.name=sR,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,an.prototype.create)}},an=class{constructor(t,e,i){this.service=t,this.serviceName=e,this.errors=i}create(t,...e){let i=e[0]||{},r=`${this.service}/${t}`,s=this.errors[t],o=s?oR(s,i):"Error",c=`${this.serviceName}: ${o} (${r}).`;return new re(r,c,i)}};function oR(n,t){return n.replace(aR,(e,i)=>{let r=t[i];return r!=null?String(r):`<${i}?>`})}var aR=/\{\$([^}]+)}/g;function iv(n){for(let t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}function Nn(n,t){if(n===t)return!0;let e=Object.keys(n),i=Object.keys(t);for(let r of e){if(!i.includes(r))return!1;let s=n[r],o=t[r];if(Kb(s)&&Kb(o)){if(!Nn(s,o))return!1}else if(s!==o)return!1}for(let r of i)if(!e.includes(r))return!1;return!0}function Kb(n){return n!==null&&typeof n=="object"}function oo(n){let t=[];for(let[e,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(r))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function vr(n){let t={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){let[r,s]=i.split("=");t[decodeURIComponent(r)]=decodeURIComponent(s)}}),t}function yr(n){let t=n.indexOf("?");if(!t)return"";let e=n.indexOf("#",t);return n.substring(t,e>0?e:void 0)}function rv(n,t){let e=new Bd(n,t);return e.subscribe.bind(e)}var Bd=class{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,i){let r;if(t===void 0&&e===void 0&&i===void 0)throw new Error("Missing Observer.");cR(t,["next","error","complete"])?r=t:r={next:t,error:e,complete:i},r.next===void 0&&(r.next=Ud),r.error===void 0&&(r.error=Ud),r.complete===void 0&&(r.complete=Ud);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function cR(n,t){if(typeof n!="object"||n===null)return!1;for(let e of t)if(e in n&&typeof n[e]=="function")return!0;return!1}function Ud(){}var oL=4*60*60*1e3;function yt(n){return n&&n._delegate?n._delegate:n}var ce=class{constructor(t,e,i){this.name=t,this.instanceFactory=e,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}};var _i="[DEFAULT]";var Gd=class{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){let e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){let i=new Ga;if(this.instancesDeferred.set(e,i),this.isInitialized(e)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:e});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;let i=this.normalizeInstanceIdentifier(t?.identifier),r=(e=t?.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(uR(t))try{this.getOrInitializeService({instanceIdentifier:_i})}catch{}for(let[e,i]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(e);try{let s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(t=_i){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}delete(){return g(this,null,function*(){let t=Array.from(this.instances.values());yield Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])})}isComponentSet(){return this.component!=null}isInitialized(t=_i){return this.instances.has(t)}getOptions(t=_i){return this.instancesOptions.get(t)||{}}initialize(t={}){let{options:e={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:i,options:e});for(let[s,o]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(s);i===c&&o.resolve(r)}return r}onInit(t,e){var i;let r=this.normalizeInstanceIdentifier(e),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(t),this.onInitCallbacks.set(r,s);let o=this.instances.get(r);return o&&t(o,r),()=>{s.delete(t)}}invokeOnInitCallbacks(t,e){let i=this.onInitCallbacks.get(e);if(i)for(let r of i)try{r(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:lR(t),options:e}),this.instances.set(t,i),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=_i){return this.component?this.component.multipleInstances?t:_i:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function lR(n){return n===_i?void 0:n}function uR(n){return n.instantiationMode==="EAGER"}var Xa=class{constructor(t){this.name=t,this.providers=new Map}addComponent(t){let e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);let e=new Gd(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}};var dR=[],et=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(et||{}),hR={debug:et.DEBUG,verbose:et.VERBOSE,info:et.INFO,warn:et.WARN,error:et.ERROR,silent:et.SILENT},fR=et.INFO,mR={[et.DEBUG]:"log",[et.VERBOSE]:"log",[et.INFO]:"info",[et.WARN]:"warn",[et.ERROR]:"error"},pR=(n,t,...e)=>{if(t<n.logLevel)return;let i=new Date().toISOString(),r=mR[t];if(r)console[r](`[${i}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)},Mn=class{constructor(t){this.name=t,this._logLevel=fR,this._logHandler=pR,this._userLogHandler=null,dR.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in et))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?hR[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,et.DEBUG,...t),this._logHandler(this,et.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,et.VERBOSE,...t),this._logHandler(this,et.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,et.INFO,...t),this._logHandler(this,et.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,et.WARN,...t),this._logHandler(this,et.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,et.ERROR,...t),this._logHandler(this,et.ERROR,...t)}};var gR=(n,t)=>t.some(e=>n instanceof e),sv,ov;function _R(){return sv||(sv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bR(){return ov||(ov=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var av=new WeakMap,Yd=new WeakMap,cv=new WeakMap,Kd=new WeakMap,Xd=new WeakMap;function vR(n){let t=new Promise((e,i)=>{let r=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{e(Fe(n.result)),r()},o=()=>{i(n.error),r()};n.addEventListener("success",s),n.addEventListener("error",o)});return t.then(e=>{e instanceof IDBCursor&&av.set(e,n)}).catch(()=>{}),Xd.set(t,n),t}function yR(n){if(Yd.has(n))return;let t=new Promise((e,i)=>{let r=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{e(),r()},o=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});Yd.set(n,t)}var Qd={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return Yd.get(n);if(t==="objectStoreNames")return n.objectStoreNames||cv.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Fe(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function lv(n){Qd=n(Qd)}function wR(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){let i=n.call(Ja(this),t,...e);return cv.set(i,t.sort?t.sort():[t]),Fe(i)}:bR().includes(n)?function(...t){return n.apply(Ja(this),t),Fe(av.get(this))}:function(...t){return Fe(n.apply(Ja(this),t))}}function ER(n){return typeof n=="function"?wR(n):(n instanceof IDBTransaction&&yR(n),gR(n,_R())?new Proxy(n,Qd):n)}function Fe(n){if(n instanceof IDBRequest)return vR(n);if(Kd.has(n))return Kd.get(n);let t=ER(n);return t!==n&&(Kd.set(n,t),Xd.set(t,n)),t}var Ja=n=>Xd.get(n);function dv(n,t,{blocked:e,upgrade:i,blocking:r,terminated:s}={}){let o=indexedDB.open(n,t),c=Fe(o);return i&&o.addEventListener("upgradeneeded",l=>{i(Fe(o.result),l.oldVersion,l.newVersion,Fe(o.transaction),l)}),e&&o.addEventListener("blocked",l=>e(l.oldVersion,l.newVersion,l)),c.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",u=>r(u.oldVersion,u.newVersion,u))}).catch(()=>{}),c}var IR=["get","getKey","getAll","getAllKeys","count"],TR=["put","add","delete","clear"],Jd=new Map;function uv(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(Jd.get(t))return Jd.get(t);let e=t.replace(/FromIndex$/,""),i=t!==e,r=TR.includes(e);if(!(e in(i?IDBIndex:IDBObjectStore).prototype)||!(r||IR.includes(e)))return;let s=function(o,...c){return g(this,null,function*(){let l=this.transaction(o,r?"readwrite":"readonly"),u=l.store;return i&&(u=u.index(c.shift())),(yield Promise.all([u[e](...c),r&&l.done]))[0]})};return Jd.set(t,s),s}lv(n=>vt(N({},n),{get:(t,e,i)=>uv(t,e)||n.get(t,e,i),has:(t,e)=>!!uv(t,e)||n.has(t,e)}));var th=class{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(AR(e)){let i=e.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(e=>e).join(" ")}};function AR(n){let t=n.getComponent();return t?.type==="VERSION"}var eh="@firebase/app",hv="0.10.5";var bi=new Mn("@firebase/app"),RR="@firebase/app-compat",SR="@firebase/analytics-compat",CR="@firebase/analytics",DR="@firebase/app-check-compat",xR="@firebase/app-check",kR="@firebase/auth",PR="@firebase/auth-compat",OR="@firebase/database",NR="@firebase/database-compat",MR="@firebase/functions",LR="@firebase/functions-compat",FR="@firebase/installations",VR="@firebase/installations-compat",UR="@firebase/messaging",jR="@firebase/messaging-compat",BR="@firebase/performance",zR="@firebase/performance-compat",$R="@firebase/remote-config",qR="@firebase/remote-config-compat",HR="@firebase/storage",WR="@firebase/storage-compat",GR="@firebase/firestore",KR="@firebase/vertexai-preview",YR="@firebase/firestore-compat",QR="firebase",XR="10.12.2";var nh="[DEFAULT]",JR={[eh]:"fire-core",[RR]:"fire-core-compat",[CR]:"fire-analytics",[SR]:"fire-analytics-compat",[xR]:"fire-app-check",[DR]:"fire-app-check-compat",[kR]:"fire-auth",[PR]:"fire-auth-compat",[OR]:"fire-rtdb",[NR]:"fire-rtdb-compat",[MR]:"fire-fn",[LR]:"fire-fn-compat",[FR]:"fire-iid",[VR]:"fire-iid-compat",[UR]:"fire-fcm",[jR]:"fire-fcm-compat",[BR]:"fire-perf",[zR]:"fire-perf-compat",[$R]:"fire-rc",[qR]:"fire-rc-compat",[HR]:"fire-gcs",[WR]:"fire-gcs-compat",[GR]:"fire-fst",[YR]:"fire-fst-compat",[KR]:"fire-vertex","fire-js":"fire-js",[QR]:"fire-js-all"};var ao=new Map,ZR=new Map,ih=new Map;function fv(n,t){try{n.container.addComponent(t)}catch(e){bi.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function Ve(n){let t=n.name;if(ih.has(t))return bi.debug(`There were multiple attempts to register component ${t}.`),!1;ih.set(t,n);for(let e of ao.values())fv(e,n);for(let e of ZR.values())fv(e,n);return!0}function vi(n,t){let e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function De(n){return n.settings!==void 0}var tS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ln=new an("app","Firebase",tS);var rh=class{constructor(t,e,i){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ce("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Ln.create("app-deleted",{appName:this._name})}};var Ue=XR;function ah(n,t={}){let e=n;typeof t!="object"&&(t={name:t});let i=Object.assign({name:nh,automaticDataCollectionEnabled:!1},t),r=i.name;if(typeof r!="string"||!r)throw Ln.create("bad-app-name",{appName:String(r)});if(e||(e=qd()),!e)throw Ln.create("no-options");let s=ao.get(r);if(s){if(Nn(e,s.options)&&Nn(i,s.config))return s;throw Ln.create("duplicate-app",{appName:r})}let o=new Xa(r);for(let l of ih.values())o.addComponent(l);let c=new rh(e,i,o);return ao.set(r,c),c}function Fn(n=nh){let t=ao.get(n);if(!t&&n===nh&&qd())return ah();if(!t)throw Ln.create("no-app",{appName:n});return t}function Za(){return Array.from(ao.values())}function wt(n,t,e){var i;let r=(i=JR[n])!==null&&i!==void 0?i:n;e&&(r+=`-${e}`);let s=r.match(/\s|\//),o=t.match(/\s|\//);if(s||o){let c=[`Unable to register library "${r}" with version "${t}":`];s&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${t}" contains illegal characters (whitespace or "/")`),bi.warn(c.join(" "));return}Ve(new ce(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}var eS="firebase-heartbeat-database",nS=1,co="firebase-heartbeat-store",Zd=null;function _v(){return Zd||(Zd=dv(eS,nS,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(co)}catch(e){console.warn(e)}}}}).catch(n=>{throw Ln.create("idb-open",{originalErrorMessage:n.message})})),Zd}function iS(n){return g(this,null,function*(){try{let e=(yield _v()).transaction(co),i=yield e.objectStore(co).get(bv(n));return yield e.done,i}catch(t){if(t instanceof re)bi.warn(t.message);else{let e=Ln.create("idb-get",{originalErrorMessage:t?.message});bi.warn(e.message)}}})}function mv(n,t){return g(this,null,function*(){try{let i=(yield _v()).transaction(co,"readwrite");yield i.objectStore(co).put(t,bv(n)),yield i.done}catch(e){if(e instanceof re)bi.warn(e.message);else{let i=Ln.create("idb-set",{originalErrorMessage:e?.message});bi.warn(i.message)}}})}function bv(n){return`${n.name}!${n.options.appId}`}var rS=1024,sS=30*24*60*60*1e3,sh=class{constructor(t){this.container=t,this._heartbeatsCache=null;let e=this.container.getProvider("app").getImmediate();this._storage=new oh(e),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){return g(this,null,function*(){var t,e;let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=pv();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let c=new Date(o.date).valueOf();return Date.now()-c<=sS}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return g(this,null,function*(){var t;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=pv(),{heartbeatsToSend:i,unsentEntries:r}=oS(this._heartbeatsCache.heartbeats),s=so(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function pv(){return new Date().toISOString().substring(0,10)}function oS(n,t=rS){let e=[],i=n.slice();for(let r of n){let s=e.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),gv(e)>t){s.dates.pop();break}}else if(e.push({agent:r.agent,dates:[r.date]}),gv(e)>t){e.pop();break}i=i.slice(1)}return{heartbeatsToSend:e,unsentEntries:i}}var oh=class{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return g(this,null,function*(){return Wd()?nv().then(()=>!0).catch(()=>!1):!1})}read(){return g(this,null,function*(){if(yield this._canUseIndexedDBPromise){let e=yield iS(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(t){return g(this,null,function*(){var e;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return mv(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return})}add(t){return g(this,null,function*(){var e;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return mv(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return})}};function gv(n){return so(JSON.stringify({version:2,heartbeats:n})).length}function aS(n){Ve(new ce("platform-logger",t=>new th(t),"PRIVATE")),Ve(new ce("heartbeat",t=>new sh(t),"PRIVATE")),wt(eh,hv,n),wt(eh,hv,"esm2017"),wt("fire-js","")}aS("");var cS="firebase",lS="10.12.2";wt(cS,lS,"app");var cn=new Ds("ANGULARFIRE2_VERSION");function Er(n,t,e){if(t){if(t.length===1)return t[0];let s=t.filter(o=>o.app===e);if(s.length===1)return s[0]}return e.container.getProvider(n).getImmediate({optional:!0})}var wi=(n,t)=>{let e=t?[t]:Za(),i=[];return e.forEach(r=>{r.container.getProvider(n).instances.forEach(o=>{i.includes(o)||i.push(o)})}),i},Vn=class{constructor(){return wi(uS)}},uS="app-check";function wr(){}var tc=class{zone;delegate;constructor(t,e=Sg){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,i){let r=this.zone,s=function(o){r.runGuarded(()=>{t.apply(this,[o])})};return this.delegate.schedule(s,e,i)}},ch=class{zone;task=null;constructor(t){this.zone=t}call(t,e){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",wr,{},wr,wr)),e.pipe(Ot({next:i,complete:i,error:i})).subscribe(t).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Un=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(e){this.ngZone=e,this.outsideAngular=e.runOutsideAngular(()=>new tc(Zone.current)),this.insideAngular=e.run(()=>new tc(Zone.current,Rg)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||n)(k(K))};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ec(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function dS(n){return ec().ngZone.runOutsideAngular(()=>n())}function yi(n){return ec().ngZone.run(()=>n())}function hS(n){return fS(ec())(n)}function fS(n){return function(e){return e=e.lift(new ch(n.ngZone)),e.pipe(Xl(n.outsideAngular),Ql(n.insideAngular))}}var mS=(n,t)=>function(){let i=arguments;return t&&setTimeout(()=>{t.state==="scheduled"&&t.invoke()},10),yi(()=>n.apply(void 0,i))},Gt=(n,t)=>function(){let e,i=arguments;for(let s=0;s<arguments.length;s++)typeof i[s]=="function"&&(t&&(e||=yi(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",wr,{},wr,wr))),i[s]=mS(i[s],e));let r=dS(()=>n.apply(this,i));if(!t)if(r instanceof An){let s=ec();return r.pipe(Xl(s.outsideAngular),Ql(s.insideAngular))}else return yi(()=>r);return r instanceof An?r.pipe(hS):r instanceof Promise?yi(()=>new Promise((s,o)=>r.then(c=>yi(()=>s(c)),c=>yi(()=>o(c))))):typeof r=="function"&&e?function(){return setTimeout(()=>{e&&e.state==="scheduled"&&e.invoke()},10),r.apply(this,arguments)}:yi(()=>r)};var xe=class{constructor(t){return t}},ln=class{constructor(){return Za()}};function pS(n){return n&&n.length===1?n[0]:new xe(Fn())}var lh=new tt("angularfire2._apps"),gS={provide:xe,useFactory:pS,deps:[[new Ut,lh]]},_S={provide:ln,deps:[[new Ut,lh]]};function bS(n){return(t,e)=>{let i=t.runOutsideAngular(()=>n(e));return new xe(i)}}var vS=(()=>{class n{constructor(e){wt("angularfire",cn.full,"core"),wt("angularfire",cn.full,"app"),wt("angular",e_.full,e.toString())}static \u0275fac=function(i){return new(i||n)(k(tn))};static \u0275mod=pt({type:n});static \u0275inj=mt({providers:[gS,_S]})}return n})();function qL(n,...t){return{ngModule:vS,providers:[{provide:lh,useFactory:bS(n),multi:!0,deps:[K,jt,Un,...t]}]}}var HL=Gt(ah,!0);function Mv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var Lv=Mv,Fv=new an("auth","Firebase",Mv());var ac=new Mn("@firebase/auth");function yS(n,...t){ac.logLevel<=et.WARN&&ac.warn(`Auth (${Ue}): ${n}`,...t)}function ic(n,...t){ac.logLevel<=et.ERROR&&ac.error(`Auth (${Ue}): ${n}`,...t)}function Be(n,...t){throw Ph(n,...t)}function Ei(n,...t){return Ph(n,...t)}function Vv(n,t,e){let i=Object.assign(Object.assign({},Lv()),{[t]:e});return new an("auth","Firebase",i).create(t,{appName:n.name})}function hn(n){return Vv(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ph(n,...t){if(typeof n!="string"){let e=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(e,...i)}return Fv.create(n,...t)}function q(n,t,...e){if(!n)throw Ph(t,...e)}function un(n){let t="INTERNAL ASSERTION FAILED: "+n;throw ic(t),new Error(t)}function Bn(n,t){n||un(t)}function fh(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function wS(){return vv()==="http:"||vv()==="https:"}function vv(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function ES(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(wS()||Jb()||"connection"in navigator)?navigator.onLine:!0}function IS(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Ii=class{constructor(t,e){this.shortDelay=t,this.longDelay=e,Bn(e>t,"Short delay should be less than long delay!"),this.isMobile=Xb()||Zb()}get(){return ES()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Oh(n,t){Bn(n.emulator,"Emulator should always be set here");let{url:e}=n.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}var cc=class{static initialize(t,e,i){this.fetchImpl=t,e&&(this.headersImpl=e),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;un("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;un("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;un("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var TS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var AS=new Ii(3e4,6e4);function fn(n,t){return n.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:n.tenantId}):t}function mn(s,o,c,l){return g(this,arguments,function*(n,t,e,i,r={}){return Uv(n,r,()=>g(this,null,function*(){let u={},f={};i&&(t==="GET"?f=i:u={body:JSON.stringify(i)});let p=oo(Object.assign({key:n.config.apiKey},f)).slice(1),_=yield n._getAdditionalHeaders();return _["Content-Type"]="application/json",n.languageCode&&(_["X-Firebase-Locale"]=n.languageCode),cc.fetch()(jv(n,n.config.apiHost,e,p),Object.assign({method:t,headers:_,referrerPolicy:"no-referrer"},u))}))})}function Uv(n,t,e){return g(this,null,function*(){n._canInitEmulator=!1;let i=Object.assign(Object.assign({},TS),t);try{let r=new mh(n),s=yield Promise.race([e(),r.promise]);r.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw nc(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let c=s.ok?o.errorMessage:o.error.message,[l,u]=c.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw nc(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw nc(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw nc(n,"user-disabled",o);let f=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Vv(n,f,u);Be(n,f)}}catch(r){if(r instanceof re)throw r;Be(n,"network-request-failed",{message:String(r)})}})}function _o(s,o,c,l){return g(this,arguments,function*(n,t,e,i,r={}){let u=yield mn(n,t,e,i,r);return"mfaPendingCredential"in u&&Be(n,"multi-factor-auth-required",{_serverResponse:u}),u})}function jv(n,t,e,i){let r=`${t}${e}?${i}`;return n.config.emulator?Oh(n.config,r):`${n.config.apiScheme}://${r}`}function RS(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var mh=class{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,i)=>{this.timer=setTimeout(()=>i(Ei(this.auth,"network-request-failed")),AS.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function nc(n,t,e){let i={appName:n.name};e.email&&(i.email=e.email),e.phoneNumber&&(i.phoneNumber=e.phoneNumber);let r=Ei(n,t,i);return r.customData._tokenResponse=e,r}function yv(n){return n!==void 0&&n.enterprise!==void 0}var ph=class{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return RS(e.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}};function SS(n,t){return g(this,null,function*(){return mn(n,"GET","/v2/recaptchaConfig",fn(n,t))})}function CS(n,t){return g(this,null,function*(){return mn(n,"POST","/v1/accounts:delete",t)})}function Bv(n,t){return g(this,null,function*(){return mn(n,"POST","/v1/accounts:lookup",t)})}function lo(n){if(n)try{let t=new Date(Number(n));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}function Nh(n,t=!1){return g(this,null,function*(){let e=yt(n),i=yield e.getIdToken(t),r=Mh(i);q(r&&r.exp&&r.auth_time&&r.iat,e.auth,"internal-error");let s=typeof r.firebase=="object"?r.firebase:void 0,o=s?.sign_in_provider;return{claims:r,token:i,authTime:lo(uh(r.auth_time)),issuedAtTime:lo(uh(r.iat)),expirationTime:lo(uh(r.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function uh(n){return Number(n)*1e3}function Mh(n){let[t,e,i]=n.split(".");if(t===void 0||e===void 0||i===void 0)return ic("JWT malformed, contained fewer than 3 sections"),null;try{let r=zd(e);return r?JSON.parse(r):(ic("Failed to decode base64 JWT payload"),null)}catch(r){return ic("Caught error parsing JWT payload as JSON",r?.toString()),null}}function wv(n){let t=Mh(n);return q(t,"internal-error"),q(typeof t.exp<"u","internal-error"),q(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}function ho(n,t,e=!1){return g(this,null,function*(){if(e)return t;try{return yield t}catch(i){throw i instanceof re&&DS(i)&&n.auth.currentUser===n&&(yield n.auth.signOut()),i}})}function DS({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var gh=class{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){let i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;let r=((e=this.user.stsTokenManager.expirationTime)!==null&&e!==void 0?e:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;let e=this.getInterval(t);this.timerId=setTimeout(()=>g(this,null,function*(){yield this.iteration()}),e)}iteration(){return g(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var fo=class{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=lo(this.lastLoginAt),this.creationTime=lo(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function lc(n){return g(this,null,function*(){var t;let e=n.auth,i=yield n.getIdToken(),r=yield ho(n,Bv(e,{idToken:i}));q(r?.users.length,e,"internal-error");let s=r.users[0];n._notifyReloadListener(s);let o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?zv(s.providerUserInfo):[],c=xS(n.providerData,o),l=n.isAnonymous,u=!(n.email&&s.passwordHash)&&!c?.length,f=l?u:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new fo(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(n,p)})}function Lh(n){return g(this,null,function*(){let t=yt(n);yield lc(t),yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)})}function xS(n,t){return[...n.filter(i=>!t.some(r=>r.providerId===i.providerId)),...t]}function zv(n){return n.map(t=>{var{providerId:e}=t,i=Yl(t,["providerId"]);return{providerId:e,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}function kS(n,t){return g(this,null,function*(){let e=yield Uv(n,{},()=>g(this,null,function*(){let i=oo({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=n.config,o=jv(n,r,"/v1/token",`key=${s}`),c=yield n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",cc.fetch()(o,{method:"POST",headers:c,body:i})}));return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}})}function PS(n,t){return g(this,null,function*(){return mn(n,"POST","/v2/accounts:revokeToken",fn(n,t))})}var uo=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){q(t.idToken,"internal-error"),q(typeof t.idToken<"u","internal-error"),q(typeof t.refreshToken<"u","internal-error");let e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):wv(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){q(t.length!==0,"internal-error");let e=wv(t);this.updateTokensAndExpiration(t,null,e)}getToken(t,e=!1){return g(this,null,function*(){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(q(this.refreshToken,t,"user-token-expired"),this.refreshToken?(yield this.refresh(t,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(t,e){return g(this,null,function*(){let{accessToken:i,refreshToken:r,expiresIn:s}=yield kS(t,e);this.updateTokensAndExpiration(i,r,Number(s))})}updateTokensAndExpiration(t,e,i){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,e){let{refreshToken:i,accessToken:r,expirationTime:s}=e,o=new n;return i&&(q(typeof i=="string","internal-error",{appName:t}),o.refreshToken=i),r&&(q(typeof r=="string","internal-error",{appName:t}),o.accessToken=r),s&&(q(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return un("not implemented")}};function jn(n,t){q(typeof n=="string"||typeof n>"u","internal-error",{appName:t})}var Ir=class n{constructor(t){var{uid:e,auth:i,stsTokenManager:r}=t,s=Yl(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new gh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new fo(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(t){return g(this,null,function*(){let e=yield ho(this,this.stsTokenManager.getToken(this.auth,t));return q(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e})}getIdTokenResult(t){return Nh(this,t)}reload(){return Lh(this)}_assign(t){this!==t&&(q(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>Object.assign({},e)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){let e=new n(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return e.metadata._copy(this.metadata),e}_onReload(t){q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(t,e=!1){return g(this,null,function*(){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),e&&(yield lc(this)),yield this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)})}delete(){return g(this,null,function*(){if(De(this.auth.app))return Promise.reject(hn(this.auth));let t=yield this.getIdToken();return yield ho(this,CS(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var i,r,s,o,c,l,u,f;let p=(i=e.displayName)!==null&&i!==void 0?i:void 0,_=(r=e.email)!==null&&r!==void 0?r:void 0,E=(s=e.phoneNumber)!==null&&s!==void 0?s:void 0,C=(o=e.photoURL)!==null&&o!==void 0?o:void 0,D=(c=e.tenantId)!==null&&c!==void 0?c:void 0,x=(l=e._redirectEventId)!==null&&l!==void 0?l:void 0,L=(u=e.createdAt)!==null&&u!==void 0?u:void 0,V=(f=e.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:z,emailVerified:H,isAnonymous:lt,providerData:Z,stsTokenManager:I}=e;q(z&&I,t,"internal-error");let b=uo.fromJSON(this.name,I);q(typeof z=="string",t,"internal-error"),jn(p,t.name),jn(_,t.name),q(typeof H=="boolean",t,"internal-error"),q(typeof lt=="boolean",t,"internal-error"),jn(E,t.name),jn(C,t.name),jn(D,t.name),jn(x,t.name),jn(L,t.name),jn(V,t.name);let y=new n({uid:z,auth:t,email:_,emailVerified:H,displayName:p,isAnonymous:lt,photoURL:C,phoneNumber:E,tenantId:D,stsTokenManager:b,createdAt:L,lastLoginAt:V});return Z&&Array.isArray(Z)&&(y.providerData=Z.map(w=>Object.assign({},w))),x&&(y._redirectEventId=x),y}static _fromIdTokenResponse(t,e,i=!1){return g(this,null,function*(){let r=new uo;r.updateFromServerResponse(e);let s=new n({uid:e.localId,auth:t,stsTokenManager:r,isAnonymous:i});return yield lc(s),s})}static _fromGetAccountInfoResponse(t,e,i){return g(this,null,function*(){let r=e.users[0];q(r.localId!==void 0,"internal-error");let s=r.providerUserInfo!==void 0?zv(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!s?.length,c=new uo;c.updateFromIdToken(i);let l=new n({uid:r.localId,auth:t,stsTokenManager:c,isAnonymous:o}),u={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new fo(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!s?.length};return Object.assign(l,u),l})}};var Ev=new Map;function dn(n){Bn(n instanceof Function,"Expected a class definition");let t=Ev.get(n);return t?(Bn(t instanceof n,"Instance stored in cache mismatched with class"),t):(t=new n,Ev.set(n,t),t)}var OS=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return g(this,null,function*(){return!0})}_set(e,i){return g(this,null,function*(){this.storage[e]=i})}_get(e){return g(this,null,function*(){let i=this.storage[e];return i===void 0?null:i})}_remove(e){return g(this,null,function*(){delete this.storage[e]})}_addListener(e,i){}_removeListener(e,i){}}return n.type="NONE",n})(),_h=OS;function rc(n,t,e){return`firebase:${n}:${t}:${e}`}var uc=class n{constructor(t,e,i){this.persistence=t,this.auth=e,this.userKey=i;let{config:r,name:s}=this.auth;this.fullUserKey=rc(this.userKey,r.apiKey,s),this.fullPersistenceKey=rc("persistence",r.apiKey,s),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}getCurrentUser(){return g(this,null,function*(){let t=yield this.persistence._get(this.fullUserKey);return t?Ir._fromJSON(this.auth,t):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(t){return g(this,null,function*(){if(this.persistence===t)return;let e=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(t,e,i="authUser"){return g(this,null,function*(){if(!e.length)return new n(dn(_h),t,i);let r=(yield Promise.all(e.map(u=>g(this,null,function*(){if(yield u._isAvailable())return u})))).filter(u=>u),s=r[0]||dn(_h),o=rc(i,t.config.apiKey,t.name),c=null;for(let u of e)try{let f=yield u._get(o);if(f){let p=Ir._fromJSON(t,f);u!==s&&(c=p),s=u;break}}catch{}let l=r.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new n(s,t,i):(s=l[0],c&&(yield s._set(o,c.toJSON())),yield Promise.all(e.map(u=>g(this,null,function*(){if(u!==s)try{yield u._remove(o)}catch{}}))),new n(s,t,i))})}};function Iv(n){let t=n.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Hv(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if($v(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Gv(t))return"Blackberry";if(Kv(t))return"Webos";if(Fh(t))return"Safari";if((t.includes("chrome/")||qv(t))&&!t.includes("edge/"))return"Chrome";if(Wv(t))return"Android";{let e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(e);if(i?.length===2)return i[1]}return"Other"}function $v(n=zt()){return/firefox\//i.test(n)}function Fh(n=zt()){let t=n.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function qv(n=zt()){return/crios\//i.test(n)}function Hv(n=zt()){return/iemobile/i.test(n)}function Wv(n=zt()){return/android/i.test(n)}function Gv(n=zt()){return/blackberry/i.test(n)}function Kv(n=zt()){return/webos/i.test(n)}function bc(n=zt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function NS(n=zt()){var t;return bc(n)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function MS(){return tv()&&document.documentMode===10}function Yv(n=zt()){return bc(n)||Wv(n)||Kv(n)||Gv(n)||/windows phone/i.test(n)||Hv(n)}function LS(){try{return!!(window&&window!==window.top)}catch{return!1}}function Qv(n,t=[]){let e;switch(n){case"Browser":e=Iv(zt());break;case"Worker":e=`${Iv(zt())}-${n}`;break;default:e=n}let i=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${Ue}/${i}`}var bh=class{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){let i=s=>new Promise((o,c)=>{try{let l=t(s);o(l)}catch(l){c(l)}});i.onAbort=e,this.queue.push(i);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(t){return g(this,null,function*(){if(this.auth.currentUser===t)return;let e=[];try{for(let i of this.queue)yield i(t),i.onAbort&&e.push(i.onAbort)}catch(i){e.reverse();for(let r of e)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})}};function FS(e){return g(this,arguments,function*(n,t={}){return mn(n,"GET","/v2/passwordPolicy",fn(n,t))})}var VS=6,vh=class{constructor(t){var e,i,r,s;let o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(e=o.minPasswordLength)!==null&&e!==void 0?e:VS,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=t.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var e,i,r,s,o,c;let l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,l),this.validatePasswordCharacterOptions(t,l),l.isValid&&(l.isValid=(e=l.meetsMinPasswordLength)!==null&&e!==void 0?e:!0),l.isValid&&(l.isValid=(i=l.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(r=l.containsLowercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(c=l.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),l}validatePasswordLengthOptions(t,e){let i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(e.meetsMinPasswordLength=t.length>=i),r&&(e.meetsMaxPasswordLength=t.length<=r)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let i;for(let r=0;r<t.length;r++)i=t.charAt(r),this.updatePasswordCharacterOptionsStatuses(e,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,e,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}};var yh=class{constructor(t,e,i,r){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new dc(this),this.idTokenSubscription=new dc(this),this.beforeStateQueue=new bh(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Fv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=dn(e)),this._initializationPromise=this.queue(()=>g(this,null,function*(){var i,r;if(!this._deleted&&(this.persistenceManager=yield uc.create(this,t),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(e),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return g(this,null,function*(){if(this._deleted)return;let t=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(t,!0)}})}initializeCurrentUserFromIdToken(t){return g(this,null,function*(){try{let e=yield Bv(this,{idToken:t}),i=yield Ir._fromGetAccountInfoResponse(this,e,t);yield this.directlySetCurrentUser(i)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(t){return g(this,null,function*(){var e;if(De(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}let i=yield this.assertedPersistence.getCurrentUser(),r=i,s=!1;if(t&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(e=this.redirectUser)===null||e===void 0?void 0:e._redirectEventId,c=r?._redirectEventId,l=yield this.tryRedirectSignIn(t);(!o||o===c)&&l?.user&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return q(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(t){return g(this,null,function*(){let e=null;try{e=yield this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{yield this._setRedirectUser(null)}return e})}reloadAndSetCurrentUserOrClear(t){return g(this,null,function*(){try{yield lc(t)}catch(e){if(e?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)})}useDeviceLanguage(){this.languageCode=IS()}_delete(){return g(this,null,function*(){this._deleted=!0})}updateCurrentUser(t){return g(this,null,function*(){if(De(this.app))return Promise.reject(hn(this));let e=t?yt(t):null;return e&&q(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))})}_updateCurrentUser(t,e=!1){return g(this,null,function*(){if(!this._deleted)return t&&q(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||(yield this.beforeStateQueue.runMiddleware(t)),this.queue(()=>g(this,null,function*(){yield this.directlySetCurrentUser(t),this.notifyAuthListeners()}))})}signOut(){return g(this,null,function*(){return De(this.app)?Promise.reject(hn(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(t){return De(this.app)?Promise.reject(hn(this)):this.queue(()=>g(this,null,function*(){yield this.assertedPersistence.setPersistence(dn(t))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(t){return g(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return g(this,null,function*(){let t=yield FS(this),e=new vh(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new an("auth","Firebase",t())}onAuthStateChanged(t,e,i){return this.registerStateListener(this.authStateSubscription,t,e,i)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,i){return this.registerStateListener(this.idTokenSubscription,t,e,i)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{let i=this.onAuthStateChanged(()=>{i(),t()},e)}})}revokeAccessToken(t){return g(this,null,function*(){if(this.currentUser){let e=yield this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(i.tenantId=this.tenantId),yield PS(this,i)}})}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}_setRedirectUser(t,e){return g(this,null,function*(){let i=yield this.getOrInitRedirectPersistenceManager(e);return t===null?i.removeCurrentUser():i.setCurrentUser(t)})}getOrInitRedirectPersistenceManager(t){return g(this,null,function*(){if(!this.redirectPersistenceManager){let e=t&&dn(t)||this._popupRedirectResolver;q(e,this,"argument-error"),this.redirectPersistenceManager=yield uc.create(this,[dn(e._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(t){return g(this,null,function*(){var e,i;return this._isInitialized&&(yield this.queue(()=>g(this,null,function*(){}))),((e=this._currentUser)===null||e===void 0?void 0:e._redirectEventId)===t?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===t?this.redirectUser:null})}_persistUserIfCurrent(t){return g(this,null,function*(){if(t===this.currentUser)return this.queue(()=>g(this,null,function*(){return this.directlySetCurrentUser(t)}))})}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let i=(e=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&e!==void 0?e:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,i,r){if(this._deleted)return()=>{};let s=typeof e=="function"?e:e.next.bind(e),o=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(q(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof e=="function"){let l=t.addObserver(e,i,r);return()=>{o=!0,l()}}else{let l=t.addObserver(e);return()=>{o=!0,l()}}}directlySetCurrentUser(t){return g(this,null,function*(){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?yield this.assertedPersistence.setCurrentUser(t):yield this.assertedPersistence.removeCurrentUser()})}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=Qv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return g(this,null,function*(){var t;let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let i=yield(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader();i&&(e["X-Firebase-Client"]=i);let r=yield this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e})}_getAppCheckToken(){return g(this,null,function*(){var t;let e=yield(t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken();return e?.error&&yS(`Error while retrieving App Check token: ${e.error}`),e?.token})}};function Ai(n){return yt(n)}var dc=class{constructor(t){this.auth=t,this.observer=null,this.addObserver=rv(e=>this.observer=e)}get next(){return q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var vc={loadJS(){return g(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function US(n){vc=n}function Xv(n){return vc.loadJS(n)}function jS(){return vc.recaptchaEnterpriseScript}function BS(){return vc.gapiScript}function Jv(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var zS="recaptcha-enterprise",$S="NO_RECAPTCHA",wh=class{constructor(t){this.type=zS,this.auth=Ai(t)}verify(t="verify",e=!1){return g(this,null,function*(){function i(s){return g(this,null,function*(){if(!e){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,c)=>g(this,null,function*(){SS(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{let u=new ph(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{c(l)})}))})}function r(s,o,c){let l=window.grecaptcha;yv(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:t}).then(u=>{o(u)}).catch(()=>{o($S)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{i(this.auth).then(c=>{if(!e&&yv(window.grecaptcha))r(c,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=jS();l.length!==0&&(l+=c),Xv(l).then(()=>{r(c,s,o)}).catch(u=>{o(u)})}}).catch(c=>{o(c)})})})}};function Tv(n,t,e,i=!1){return g(this,null,function*(){let r=new wh(n),s;try{s=yield r.verify(e)}catch{s=yield r.verify(e,!0)}let o=Object.assign({},t);return i?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})}function Eh(n,t,e,i){return g(this,null,function*(){var r;if(!((r=n._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield Tv(n,t,e,e==="getOobCode");return i(n,s)}else return i(n,t).catch(s=>g(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${e} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=yield Tv(n,t,e,e==="getOobCode");return i(n,o)}else return Promise.reject(s)}))})}function Vh(n,t){let e=vi(n,"auth");if(e.isInitialized()){let r=e.getImmediate(),s=e.getOptions();if(Nn(s,t??{}))return r;Be(r,"already-initialized")}return e.initialize({options:t})}function qS(n,t){let e=t?.persistence||[],i=(Array.isArray(e)?e:[e]).map(dn);t?.errorMap&&n._updateErrorMap(t.errorMap),n._initializeWithPersistence(i,t?.popupRedirectResolver)}function Uh(n,t,e){let i=Ai(n);q(i._canInitEmulator,i,"emulator-config-failed"),q(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");let r=!!e?.disableWarnings,s=Zv(t),{host:o,port:c}=HS(t),l=c===null?"":`:${c}`;i.config.emulator={url:`${s}//${o}${l}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||WS()}function Zv(n){let t=n.indexOf(":");return t<0?"":n.substr(0,t+1)}function HS(n){let t=Zv(n),e=/(\/\/)?([^?#/]+)/.exec(n.substr(t.length));if(!e)return{host:"",port:null};let i=e[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){let s=r[1];return{host:s,port:Av(i.substr(s.length+1))}}else{let[s,o]=i.split(":");return{host:s,port:Av(o)}}}function Av(n){if(!n)return null;let t=Number(n);return isNaN(t)?null:t}function WS(){function n(){let t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var mo=class{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return un("not implemented")}_getIdTokenResponse(t){return un("not implemented")}_linkToIdToken(t,e){return un("not implemented")}_getReauthenticationResolver(t){return un("not implemented")}};function GS(n,t){return g(this,null,function*(){return mn(n,"POST","/v1/accounts:signUp",t)})}function KS(n,t){return g(this,null,function*(){return _o(n,"POST","/v1/accounts:signInWithPassword",fn(n,t))})}function YS(n,t){return g(this,null,function*(){return mn(n,"POST","/v1/accounts:sendOobCode",fn(n,t))})}function QS(n,t){return g(this,null,function*(){return YS(n,t)})}function XS(n,t){return g(this,null,function*(){return _o(n,"POST","/v1/accounts:signInWithEmailLink",fn(n,t))})}function JS(n,t){return g(this,null,function*(){return _o(n,"POST","/v1/accounts:signInWithEmailLink",fn(n,t))})}var po=class n extends mo{constructor(t,e,i,r=null){super("password",i),this._email=t,this._password=e,this._tenantId=r}static _fromEmailAndPassword(t,e){return new n(t,e,"password")}static _fromEmailAndCode(t,e,i=null){return new n(t,e,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){let e=typeof t=="string"?JSON.parse(t):t;if(e?.email&&e?.password){if(e.signInMethod==="password")return this._fromEmailAndPassword(e.email,e.password);if(e.signInMethod==="emailLink")return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}_getIdTokenResponse(t){return g(this,null,function*(){switch(this.signInMethod){case"password":let e={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Eh(t,e,"signInWithPassword",KS);case"emailLink":return XS(t,{email:this._email,oobCode:this._password});default:Be(t,"internal-error")}})}_linkToIdToken(t,e){return g(this,null,function*(){switch(this.signInMethod){case"password":let i={idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Eh(t,i,"signUpPassword",GS);case"emailLink":return JS(t,{idToken:e,email:this._email,oobCode:this._password});default:Be(t,"internal-error")}})}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}};function dh(n,t){return g(this,null,function*(){return _o(n,"POST","/v1/accounts:signInWithIdp",fn(n,t))})}function ZS(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function tC(n){let t=vr(yr(n)).link,e=t?vr(yr(t)).deep_link_id:null,i=vr(yr(n)).deep_link_id;return(i?vr(yr(i)).link:null)||i||e||t||n}var hc=class n{constructor(t){var e,i,r,s,o,c;let l=vr(yr(t)),u=(e=l.apiKey)!==null&&e!==void 0?e:null,f=(i=l.oobCode)!==null&&i!==void 0?i:null,p=ZS((r=l.mode)!==null&&r!==void 0?r:null);q(u&&f&&p,"argument-error"),this.apiKey=u,this.operation=p,this.code=f,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(c=l.tenantId)!==null&&c!==void 0?c:null}static parseLink(t){let e=tC(t);try{return new n(e)}catch{return null}}};var ty=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(e,i){return po._fromEmailAndPassword(e,i)}static credentialWithLink(e,i){let r=hc.parseLink(i);return q(r,"argument-error"),po._fromEmailAndCode(e,r.code,r.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),fc=class{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}};var Ih=class extends fc{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}};function eC(n,t){return g(this,null,function*(){return _o(n,"POST","/v1/accounts:signUp",fn(n,t))})}var Tr=class n{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static _fromIdTokenResponse(t,e,i,r=!1){return g(this,null,function*(){let s=yield Ir._fromIdTokenResponse(t,i,r),o=Rv(i);return new n({user:s,providerId:o,_tokenResponse:i,operationType:e})})}static _forOperation(t,e,i){return g(this,null,function*(){yield t._updateTokensIfNecessary(i,!0);let r=Rv(i);return new n({user:t,providerId:r,_tokenResponse:i,operationType:e})})}};function Rv(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Th=class n extends re{constructor(t,e,i,r){var s;super(e.code,e.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,n.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:e.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,e,i,r){return new n(t,e,i,r)}};function ey(n,t,e,i){return(t==="reauthenticate"?e._getReauthenticationResolver(n):e._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Th._fromErrorAndOperation(n,s,t,i):s})}function nC(n,t,e=!1){return g(this,null,function*(){let i=yield ho(n,t._linkToIdToken(n.auth,yield n.getIdToken()),e);return Tr._forOperation(n,"link",i)})}function iC(n,t,e=!1){return g(this,null,function*(){let{auth:i}=n;if(De(i.app))return Promise.reject(hn(i));let r="reauthenticate";try{let s=yield ho(n,ey(i,r,t,n),e);q(s.idToken,i,"internal-error");let o=Mh(s.idToken);q(o,i,"internal-error");let{sub:c}=o;return q(n.uid===c,i,"user-mismatch"),Tr._forOperation(n,r,s)}catch(s){throw s?.code==="auth/user-not-found"&&Be(i,"user-mismatch"),s}})}function ny(n,t,e=!1){return g(this,null,function*(){if(De(n.app))return Promise.reject(hn(n));let i="signIn",r=yield ey(n,i,t),s=yield Tr._fromIdTokenResponse(n,i,r);return e||(yield n._updateCurrentUser(s.user)),s})}function jh(n,t){return g(this,null,function*(){return ny(Ai(n),t)})}function rC(n,t,e){var i;q(((i=e.url)===null||i===void 0?void 0:i.length)>0,n,"invalid-continue-uri"),q(typeof e.dynamicLinkDomain>"u"||e.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),t.continueUrl=e.url,t.dynamicLinkDomain=e.dynamicLinkDomain,t.canHandleCodeInApp=e.handleCodeInApp,e.iOS&&(q(e.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),t.iOSBundleId=e.iOS.bundleId),e.android&&(q(e.android.packageName.length>0,n,"missing-android-pkg-name"),t.androidInstallApp=e.android.installApp,t.androidMinimumVersionCode=e.android.minimumVersion,t.androidPackageName=e.android.packageName)}function iy(n){return g(this,null,function*(){let t=Ai(n);t._getPasswordPolicyInternal()&&(yield t._updatePasswordPolicy())})}function Bh(n,t,e){return g(this,null,function*(){if(De(n.app))return Promise.reject(hn(n));let i=Ai(n),o=yield Eh(i,{returnSecureToken:!0,email:t,password:e,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",eC).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&iy(n),l}),c=yield Tr._fromIdTokenResponse(i,"signIn",o);return yield i._updateCurrentUser(c.user),c})}function zh(n,t,e){return De(n.app)?Promise.reject(hn(n)):jh(yt(n),ty.credential(t,e)).catch(i=>g(this,null,function*(){throw i.code==="auth/password-does-not-meet-requirements"&&iy(n),i}))}function $h(n,t){return g(this,null,function*(){let e=yt(n),r={requestType:"VERIFY_EMAIL",idToken:yield n.getIdToken()};t&&rC(e.auth,r,t);let{email:s}=yield QS(e.auth,r);s!==n.email&&(yield n.reload())})}function qh(n,t,e,i){return yt(n).onIdTokenChanged(t,e,i)}function Hh(n,t,e){return yt(n).beforeAuthStateChanged(t,e)}function Wh(n){return yt(n).signOut()}var mc="__sak";var pc=class{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(mc,"1"),this.storage.removeItem(mc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){let e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}};function sC(){let n=zt();return Fh(n)||bc(n)}var oC=1e3,aC=10,cC=(()=>{class n extends pc{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,i)=>this.onStorageEvent(e,i),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=sC()&&LS(),this.fallbackToPolling=Yv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(let i of Object.keys(this.listeners)){let r=this.storage.getItem(i),s=this.localCache[i];r!==s&&e(i,s,r)}}onStorageEvent(e,i=!1){if(!e.key){this.forAllChangedKeys((c,l,u)=>{this.notifyListeners(c,u)});return}let r=e.key;if(i?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let c=this.storage.getItem(r);if(e.newValue!==c)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!i)return}let s=()=>{let c=this.storage.getItem(r);!i&&this.localCache[r]===c||this.notifyListeners(r,c)},o=this.storage.getItem(r);MS()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,aC):s()}notifyListeners(e,i){this.localCache[e]=i;let r=this.listeners[e];if(r)for(let s of Array.from(r))s(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:i,newValue:r}),!0)})},oC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(i)}_removeListener(e,i){this.listeners[e]&&(this.listeners[e].delete(i),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(e,i){return g(this,null,function*(){yield Tn(n.prototype,this,"_set").call(this,e,i),this.localCache[e]=JSON.stringify(i)})}_get(e){return g(this,null,function*(){let i=yield Tn(n.prototype,this,"_get").call(this,e);return this.localCache[e]=JSON.stringify(i),i})}_remove(e){return g(this,null,function*(){yield Tn(n.prototype,this,"_remove").call(this,e),delete this.localCache[e]})}}return n.type="LOCAL",n})(),ry=cC;var lC=(()=>{class n extends pc{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,i){}_removeListener(e,i){}}return n.type="SESSION",n})(),Gh=lC;function uC(n){return Promise.all(n.map(t=>g(this,null,function*(){try{return{fulfilled:!0,value:yield t}}catch(e){return{fulfilled:!1,reason:e}}})))}var dC=(()=>{class n{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){let i=this.receivers.find(s=>s.isListeningto(e));if(i)return i;let r=new n(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}handleEvent(e){return g(this,null,function*(){let i=e,{eventId:r,eventType:s,data:o}=i.data,c=this.handlersMap[s];if(!c?.size)return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:s});let l=Array.from(c).map(f=>g(this,null,function*(){return f(i.origin,o)})),u=yield uC(l);i.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})})}_subscribe(e,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(i)}_unsubscribe(e,i){this.handlersMap[e]&&i&&this.handlersMap[e].delete(i),(!i||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function sy(n="",t=10){let e="";for(let i=0;i<t;i++)e+=Math.floor(Math.random()*10);return n+e}var Ah=class{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}_send(t,e,i=50){return g(this,null,function*(){let r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((c,l)=>{let u=sy("",20);r.port1.start();let f=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(p){let _=p;if(_.data.eventId===u)switch(_.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(_.data.response);break;default:clearTimeout(f),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:u,data:e},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function je(){return window}function hC(n){je().location.href=n}function oy(){return typeof je().WorkerGlobalScope<"u"&&typeof je().importScripts=="function"}function fC(){return g(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function mC(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function pC(){return oy()?self:null}var ay="firebaseLocalStorageDb",gC=1,gc="firebaseLocalStorage",cy="fbase_key",Ti=class{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}};function yc(n,t){return n.transaction([gc],t?"readwrite":"readonly").objectStore(gc)}function _C(){let n=indexedDB.deleteDatabase(ay);return new Ti(n).toPromise()}function Rh(){let n=indexedDB.open(ay,gC);return new Promise((t,e)=>{n.addEventListener("error",()=>{e(n.error)}),n.addEventListener("upgradeneeded",()=>{let i=n.result;try{i.createObjectStore(gc,{keyPath:cy})}catch(r){e(r)}}),n.addEventListener("success",()=>g(this,null,function*(){let i=n.result;i.objectStoreNames.contains(gc)?t(i):(i.close(),yield _C(),t(yield Rh()))}))})}function Sv(n,t,e){return g(this,null,function*(){let i=yc(n,!0).put({[cy]:t,value:e});return new Ti(i).toPromise()})}function bC(n,t){return g(this,null,function*(){let e=yc(n,!1).get(t),i=yield new Ti(e).toPromise();return i===void 0?null:i.value})}function Cv(n,t){let e=yc(n,!0).delete(t);return new Ti(e).toPromise()}var vC=800,yC=3,wC=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return g(this,null,function*(){return this.db?this.db:(this.db=yield Rh(),this.db)})}_withRetries(e){return g(this,null,function*(){let i=0;for(;;)try{let r=yield this._openDb();return yield e(r)}catch(r){if(i++>yC)throw r;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return g(this,null,function*(){return oy()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return g(this,null,function*(){this.receiver=dC._getInstance(pC()),this.receiver._subscribe("keyChanged",(e,i)=>g(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(i.key)}})),this.receiver._subscribe("ping",(e,i)=>g(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return g(this,null,function*(){var e,i;if(this.activeServiceWorker=yield fC(),!this.activeServiceWorker)return;this.sender=new Ah(this.activeServiceWorker);let r=yield this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((i=r[0])===null||i===void 0)&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(e){return g(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||mC()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return g(this,null,function*(){try{if(!indexedDB)return!1;let e=yield Rh();return yield Sv(e,mc,"1"),yield Cv(e,mc),!0}catch{}return!1})}_withPendingWrite(e){return g(this,null,function*(){this.pendingWrites++;try{yield e()}finally{this.pendingWrites--}})}_set(e,i){return g(this,null,function*(){return this._withPendingWrite(()=>g(this,null,function*(){return yield this._withRetries(r=>Sv(r,e,i)),this.localCache[e]=i,this.notifyServiceWorker(e)}))})}_get(e){return g(this,null,function*(){let i=yield this._withRetries(r=>bC(r,e));return this.localCache[e]=i,i})}_remove(e){return g(this,null,function*(){return this._withPendingWrite(()=>g(this,null,function*(){return yield this._withRetries(i=>Cv(i,e)),delete this.localCache[e],this.notifyServiceWorker(e)}))})}_poll(){return g(this,null,function*(){let e=yield this._withRetries(s=>{let o=yc(s,!1).getAll();return new Ti(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];let i=[],r=new Set;if(e.length!==0)for(let{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),i.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),i.push(s));return i})}notifyListeners(e,i){this.localCache[e]=i;let r=this.listeners[e];if(r)for(let s of Array.from(r))s(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>g(this,null,function*(){return this._poll()}),vC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(i)}_removeListener(e,i){this.listeners[e]&&(this.listeners[e].delete(i),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),ly=wC;var ZL=Jv("rcb"),tF=new Ii(3e4,6e4);function EC(n,t){return t?dn(t):(q(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var go=class extends mo{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return dh(t,this._buildIdpRequest())}_linkToIdToken(t,e){return dh(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return dh(t,this._buildIdpRequest())}_buildIdpRequest(t){let e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}};function IC(n){return ny(n.auth,new go(n),n.bypassAuthState)}function TC(n){let{auth:t,user:e}=n;return q(e,t,"internal-error"),iC(e,new go(n),n.bypassAuthState)}function AC(n){return g(this,null,function*(){let{auth:t,user:e}=n;return q(e,t,"internal-error"),nC(e,new go(n),n.bypassAuthState)})}var Sh=class{constructor(t,e,i,r,s=!1){this.auth=t,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise((t,e)=>g(this,null,function*(){this.pendingPromise={resolve:t,reject:e};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}}))}onAuthEvent(t){return g(this,null,function*(){let{urlResponse:e,sessionId:i,postBody:r,tenantId:s,error:o,type:c}=t;if(o){this.reject(o);return}let l={auth:this.auth,requestUri:e,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(l))}catch(u){this.reject(u)}})}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return IC;case"linkViaPopup":case"linkViaRedirect":return AC;case"reauthViaPopup":case"reauthViaRedirect":return TC;default:Be(this.auth,"internal-error")}}resolve(t){Bn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Bn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var eF=new Ii(2e3,1e4);var RC="pendingRedirect",sc=new Map,Ch=class n extends Sh{constructor(t,e,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,i),this.eventId=null}execute(){return g(this,null,function*(){let t=sc.get(this.auth._key());if(!t){try{let i=(yield SC(this.resolver,this.auth))?yield Tn(n.prototype,this,"execute").call(this):null;t=()=>Promise.resolve(i)}catch(e){t=()=>Promise.reject(e)}sc.set(this.auth._key(),t)}return this.bypassAuthState||sc.set(this.auth._key(),()=>Promise.resolve(null)),t()})}onAuthEvent(t){return g(this,null,function*(){if(t.type==="signInViaRedirect")return Tn(n.prototype,this,"onAuthEvent").call(this,t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){let e=yield this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,Tn(n.prototype,this,"onAuthEvent").call(this,t);this.resolve(null)}})}onExecution(){return g(this,null,function*(){})}cleanUp(){}};function SC(n,t){return g(this,null,function*(){let e=xC(t),i=DC(n);if(!(yield i._isAvailable()))return!1;let r=(yield i._get(e))==="true";return yield i._remove(e),r})}function CC(n,t){sc.set(n._key(),t)}function DC(n){return dn(n._redirectPersistence)}function xC(n){return rc(RC,n.config.apiKey,n.name)}function kC(n,t,e=!1){return g(this,null,function*(){if(De(n.app))return Promise.reject(hn(n));let i=Ai(n),r=EC(i,t),o=yield new Ch(i,r,e).execute();return o&&!e&&(delete o.user._redirectEventId,yield i._persistUserIfCurrent(o.user),yield i._setRedirectUser(null,t)),o})}var PC=10*60*1e3,Dh=class{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(e=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!OC(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var i;if(t.error&&!uy(t)){let r=((i=t.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";e.onError(Ei(this.auth,r))}else e.onAuthEvent(t)}isEventForConsumer(t,e){let i=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=PC&&this.cachedEventUids.clear(),this.cachedEventUids.has(Dv(t))}saveEventToCache(t){this.cachedEventUids.add(Dv(t)),this.lastProcessedEventTime=Date.now()}};function Dv(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(t=>t).join("-")}function uy({type:n,error:t}){return n==="unknown"&&t?.code==="auth/no-auth-event"}function OC(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return uy(n);default:return!1}}function NC(e){return g(this,arguments,function*(n,t={}){return mn(n,"GET","/v1/projects",t)})}var MC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,LC=/^https?/;function FC(n){return g(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:t}=yield NC(n);for(let e of t)try{if(VC(e))return}catch{}Be(n,"unauthorized-domain")})}function VC(n){let t=fh(),{protocol:e,hostname:i}=new URL(t);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&i===""?e==="chrome-extension:"&&n.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&o.hostname===i}if(!LC.test(e))return!1;if(MC.test(n))return i===n;let r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}var UC=new Ii(3e4,6e4);function xv(){let n=je().___jsl;if(n?.H){for(let t of Object.keys(n.H))if(n.H[t].r=n.H[t].r||[],n.H[t].L=n.H[t].L||[],n.H[t].r=[...n.H[t].L],n.CP)for(let e=0;e<n.CP.length;e++)n.CP[e]=null}}function jC(n){return new Promise((t,e)=>{var i,r,s;function o(){xv(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{xv(),e(Ei(n,"network-request-failed"))},timeout:UC.get()})}if(!((r=(i=je().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)t(gapi.iframes.getContext());else if(!((s=je().gapi)===null||s===void 0)&&s.load)o();else{let c=Jv("iframefcb");return je()[c]=()=>{gapi.load?o():e(Ei(n,"network-request-failed"))},Xv(`${BS()}?onload=${c}`).catch(l=>e(l))}}).catch(t=>{throw oc=null,t})}var oc=null;function BC(n){return oc=oc||jC(n),oc}var zC=new Ii(5e3,15e3),$C="__/auth/iframe",qC="emulator/auth/iframe",HC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},WC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function GC(n){let t=n.config;q(t.authDomain,n,"auth-domain-config-required");let e=t.emulator?Oh(t,qC):`https://${n.config.authDomain}/${$C}`,i={apiKey:t.apiKey,appName:n.name,v:Ue},r=WC.get(n.config.apiHost);r&&(i.eid=r);let s=n._getFrameworks();return s.length&&(i.fw=s.join(",")),`${e}?${oo(i).slice(1)}`}function KC(n){return g(this,null,function*(){let t=yield BC(n),e=je().gapi;return q(e,n,"internal-error"),t.open({where:document.body,url:GC(n),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:HC,dontclear:!0},i=>new Promise((r,s)=>g(this,null,function*(){yield i.restyle({setHideOnLeave:!1});let o=Ei(n,"network-request-failed"),c=je().setTimeout(()=>{s(o)},zC.get());function l(){je().clearTimeout(c),r(i)}i.ping(l).then(l,()=>{s(o)})})))})}var YC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},QC=500,XC=600,JC="_blank",ZC="http://localhost",_c=class{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function tD(n,t,e,i=QC,r=XC){let s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString(),c="",l=Object.assign(Object.assign({},YC),{width:i.toString(),height:r.toString(),top:s,left:o}),u=zt().toLowerCase();e&&(c=qv(u)?JC:e),$v(u)&&(t=t||ZC,l.scrollbars="yes");let f=Object.entries(l).reduce((_,[E,C])=>`${_}${E}=${C},`,"");if(NS(u)&&c!=="_self")return eD(t||"",c),new _c(null);let p=window.open(t||"",c,f);q(p,n,"popup-blocked");try{p.focus()}catch{}return new _c(p)}function eD(n,t){let e=document.createElement("a");e.href=n,e.target=t;let i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(i)}var nD="__/auth/handler",iD="emulator/auth/handler",rD=encodeURIComponent("fac");function kv(n,t,e,i,r,s){return g(this,null,function*(){q(n.config.authDomain,n,"auth-domain-config-required"),q(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:e,redirectUrl:i,v:Ue,eventId:r};if(t instanceof fc){t.setDefaultLanguage(n.languageCode),o.providerId=t.providerId||"",iv(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(let[f,p]of Object.entries(s||{}))o[f]=p}if(t instanceof Ih){let f=t.getScopes().filter(p=>p!=="");f.length>0&&(o.scopes=f.join(","))}n.tenantId&&(o.tid=n.tenantId);let c=o;for(let f of Object.keys(c))c[f]===void 0&&delete c[f];let l=yield n._getAppCheckToken(),u=l?`#${rD}=${encodeURIComponent(l)}`:"";return`${sD(n)}?${oo(c).slice(1)}${u}`})}function sD({config:n}){return n.emulator?Oh(n,iD):`https://${n.authDomain}/${nD}`}var hh="webStorageSupport",xh=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Gh,this._completeRedirectFn=kC,this._overrideRedirectResult=CC}_openPopup(t,e,i,r){return g(this,null,function*(){var s;Bn((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield kv(t,e,i,fh(),r);return tD(t,o,sy())})}_openRedirect(t,e,i,r){return g(this,null,function*(){yield this._originValidation(t);let s=yield kv(t,e,i,fh(),r);return hC(s),new Promise(()=>{})})}_initialize(t){let e=t._key();if(this.eventManagers[e]){let{manager:r,promise:s}=this.eventManagers[e];return r?Promise.resolve(r):(Bn(s,"If manager is not set, promise should be"),s)}let i=this.initAndGetManager(t);return this.eventManagers[e]={promise:i},i.catch(()=>{delete this.eventManagers[e]}),i}initAndGetManager(t){return g(this,null,function*(){let e=yield KC(t),i=new Dh(t);return e.register("authEvent",r=>(q(r?.authEvent,t,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=e,i})}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(hh,{type:hh},r=>{var s;let o=(s=r?.[0])===null||s===void 0?void 0:s[hh];o!==void 0&&e(!!o),Be(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){let e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=FC(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return Yv()||Fh()||bc()}},dy=xh;var Pv="@firebase/auth",Ov="1.7.4";var kh=class{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}getToken(t){return g(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(t)}:null})}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;let e=this.auth.onIdTokenChanged(i=>{t(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();let e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function oD(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function aD(n){Ve(new ce("auth",(t,{options:e})=>{let i=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=i.options;q(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});let l={apiKey:o,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Qv(n)},u=new yh(i,r,s,l);return qS(u,e),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,i)=>{t.getProvider("auth-internal").initialize()})),Ve(new ce("auth-internal",t=>{let e=Ai(t.getProvider("auth").getImmediate());return(i=>new kh(i))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),wt(Pv,Ov,oD(n)),wt(Pv,Ov,"esm2017")}var cD=5*60,lD=Hd("authIdTokenMaxAge")||cD,Nv=null,uD=n=>t=>g(void 0,null,function*(){let e=t&&(yield t.getIdTokenResult()),i=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(i&&i>lD)return;let r=e?.token;Nv!==r&&(Nv=r,yield fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});function Kh(n=Fn()){let t=vi(n,"auth");if(t.isInitialized())return t.getImmediate();let e=Vh(n,{popupRedirectResolver:dy,persistence:[ly,ry,Gh]}),i=Hd("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(i,location.origin);if(location.origin===s.origin){let o=uD(s.toString());Hh(e,o,()=>o(e.currentUser)),qh(e,c=>o(c))}}let r=$d("auth");return r&&Uh(e,`http://${r}`),e}function dD(){var n,t;return(t=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&t!==void 0?t:document}US({loadJS(n){return new Promise((t,e)=>{let i=document.createElement("script");i.setAttribute("src",n),i.onload=t,i.onerror=r=>{let s=Ei("internal-error");s.customData=r,e(s)},i.type="text/javascript",i.charset="UTF-8",dD().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});aD("Browser");var hy="auth",Ri=class{constructor(t){return t}},Si=class{constructor(){return wi(hy)}};var Yh=new tt("angularfire2.auth-instances");function tx(n,t){let e=Er(hy,n,t);return e&&new Ri(e)}function ex(n){return(t,e)=>{let i=t.runOutsideAngular(()=>n(e));return new Ri(i)}}var nx={provide:Si,deps:[[new Ut,Yh]]},ix={provide:Ri,useFactory:tx,deps:[[new Ut,Yh],xe]},rx=(()=>{class n{constructor(){wt("angularfire",cn.full,"auth")}static \u0275fac=function(i){return new(i||n)};static \u0275mod=pt({type:n});static \u0275inj=mt({providers:[ix,nx]})}return n})();function VF(n,...t){return{ngModule:rx,providers:[{provide:Yh,useFactory:ex(n),multi:!0,deps:[K,jt,Un,ln,[new Ut,Vn],...t]}]}}var fy=Gt(Bh,!0);var bo=Gt(Kh,!0);var my=Gt($h,!0);var py=Gt(zh,!0);var vo=Gt(Wh,!0);var Ey="firebasestorage.googleapis.com",Iy="storageBucket",sx=2*60*1e3,ox=10*60*1e3;var Rt=class n extends re{constructor(t,e,i=0){super(Qh(t),`Firebase Storage: ${e} (${Qh(t)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return Qh(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},kt=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(kt||{});function Qh(n){return"storage/"+n}function nf(){let n="An unknown error occurred, please check the error payload for server response.";return new Rt(kt.UNKNOWN,n)}function ax(n){return new Rt(kt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function cx(n){return new Rt(kt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function lx(){let n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Rt(kt.UNAUTHENTICATED,n)}function ux(){return new Rt(kt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function dx(n){return new Rt(kt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function hx(){return new Rt(kt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function fx(){return new Rt(kt.CANCELED,"User canceled the upload/download.")}function mx(n){return new Rt(kt.INVALID_URL,"Invalid URL '"+n+"'.")}function px(n){return new Rt(kt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function gx(){return new Rt(kt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Iy+"' property when initializing the app?")}function _x(){return new Rt(kt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function bx(){return new Rt(kt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function vx(n){return new Rt(kt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Xh(n){return new Rt(kt.INVALID_ARGUMENT,n)}function Ty(){return new Rt(kt.APP_DELETED,"The Firebase app was deleted.")}function yx(n){return new Rt(kt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function wo(n,t){return new Rt(kt.INVALID_FORMAT,"String does not match format '"+n+"': "+t)}function yo(n){throw new Rt(kt.INTERNAL_ERROR,"Internal error: "+n)}var ke=class n{constructor(t,e){this.bucket=t,this.path_=e}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,e){let i;try{i=n.makeFromUrl(t,e)}catch{return new n(t,"")}if(i.path==="")return i;throw px(t)}static makeFromUrl(t,e){let i=null,r="([A-Za-z0-9.\\-_]+)";function s(H){H.path.charAt(H.path.length-1)==="/"&&(H.path_=H.path_.slice(0,-1))}let o="(/(.*))?$",c=new RegExp("^gs://"+r+o,"i"),l={bucket:1,path:3};function u(H){H.path_=decodeURIComponent(H.path)}let f="v[A-Za-z0-9_]+",p=e.replace(/[.]/g,"\\."),_="(/([^?#]*).*)?$",E=new RegExp(`^https?://${p}/${f}/b/${r}/o${_}`,"i"),C={bucket:1,path:3},D=e===Ey?"(?:storage.googleapis.com|storage.cloud.google.com)":e,x="([^?#]*)",L=new RegExp(`^https?://${D}/${r}/${x}`,"i"),z=[{regex:c,indices:l,postModify:s},{regex:E,indices:C,postModify:u},{regex:L,indices:{bucket:1,path:2},postModify:u}];for(let H=0;H<z.length;H++){let lt=z[H],Z=lt.regex.exec(t);if(Z){let I=Z[lt.indices.bucket],b=Z[lt.indices.path];b||(b=""),i=new n(I,b),lt.postModify(i);break}}if(i==null)throw mx(t);return i}},Jh=class{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}};function wx(n,t,e){let i=1,r=null,s=null,o=!1,c=0;function l(){return c===2}let u=!1;function f(...x){u||(u=!0,t.apply(null,x))}function p(x){r=setTimeout(()=>{r=null,n(E,l())},x)}function _(){s&&clearTimeout(s)}function E(x,...L){if(u){_();return}if(x){_(),f.call(null,x,...L);return}if(l()||o){_(),f.call(null,x,...L);return}i<64&&(i*=2);let z;c===1?(c=2,z=0):z=(i+Math.random())*1e3,p(z)}let C=!1;function D(x){C||(C=!0,_(),!u&&(r!==null?(x||(c=2),clearTimeout(r),p(0)):x||(c=1)))}return p(0),s=setTimeout(()=>{o=!0,D(!0)},e),D}function Ex(n){n(!1)}function Ix(n){return n!==void 0}function Tx(n){return typeof n=="object"&&!Array.isArray(n)}function rf(n){return typeof n=="string"||n instanceof String}function gy(n){return sf()&&n instanceof Blob}function sf(){return typeof Blob<"u"}function _y(n,t,e,i){if(i<t)throw Xh(`Invalid value for '${n}'. Expected ${t} or greater.`);if(i>e)throw Xh(`Invalid value for '${n}'. Expected ${e} or less.`)}function of(n,t,e){let i=t;return e==null&&(i=`https://${t}`),`${e}://${i}/v0${n}`}function Ay(n){let t=encodeURIComponent,e="?";for(let i in n)if(n.hasOwnProperty(i)){let r=t(i)+"="+t(n[i]);e=e+r+"&"}return e=e.slice(0,-1),e}var Rr=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(Rr||{});function Ax(n,t){let e=n>=500&&n<600,r=[408,429].indexOf(n)!==-1,s=t.indexOf(n)!==-1;return e||r||s}var Zh=class{constructor(t,e,i,r,s,o,c,l,u,f,p,_=!0){this.url_=t,this.method_=e,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=c,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=f,this.connectionFactory_=p,this.retry=_,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((E,C)=>{this.resolve_=E,this.reject_=C,this.start_()})}start_(){let t=(i,r)=>{if(r){i(!1,new Ar(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let o=c=>{let l=c.loaded,u=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;let c=s.getErrorCode()===Rr.NO_ERROR,l=s.getStatus();if(!c||Ax(l,this.additionalRetryCodes_)&&this.retry){let f=s.getErrorCode()===Rr.ABORT;i(!1,new Ar(!1,null,f));return}let u=this.successCodes_.indexOf(l)!==-1;i(!0,new Ar(u,s))})},e=(i,r)=>{let s=this.resolve_,o=this.reject_,c=r.connection;if(r.wasSuccessCode)try{let l=this.callback_(c,c.getResponse());Ix(l)?s(l):s()}catch(l){o(l)}else if(c!==null){let l=nf();l.serverResponse=c.getErrorText(),this.errorCallback_?o(this.errorCallback_(c,l)):o(l)}else if(r.canceled){let l=this.appDelete_?Ty():fx();o(l)}else{let l=hx();o(l)}};this.canceled_?e(!1,new Ar(!1,null,!0)):this.backoffId_=wx(t,e,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&Ex(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},Ar=class{constructor(t,e,i){this.wasSuccessCode=t,this.connection=e,this.canceled=!!i}};function Rx(n,t){t!==null&&t.length>0&&(n.Authorization="Firebase "+t)}function Sx(n,t){n["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function Cx(n,t){t&&(n["X-Firebase-GMPID"]=t)}function Dx(n,t){t!==null&&(n["X-Firebase-AppCheck"]=t)}function xx(n,t,e,i,r,s,o=!0){let c=Ay(n.urlParams),l=n.url+c,u=Object.assign({},n.headers);return Cx(u,t),Rx(u,e),Sx(u,s),Dx(u,i),new Zh(l,n.method,u,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,r,o)}function kx(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Px(...n){let t=kx();if(t!==void 0){let e=new t;for(let i=0;i<n.length;i++)e.append(n[i]);return e.getBlob()}else{if(sf())return new Blob(n);throw new Rt(kt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Ox(n,t,e){return n.webkitSlice?n.webkitSlice(t,e):n.mozSlice?n.mozSlice(t,e):n.slice?n.slice(t,e):null}function Nx(n){if(typeof atob>"u")throw vx("base-64");return atob(n)}var ze={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Eo=class{constructor(t,e){this.data=t,this.contentType=e||null}};function Mx(n,t){switch(n){case ze.RAW:return new Eo(Ry(t));case ze.BASE64:case ze.BASE64URL:return new Eo(Sy(n,t));case ze.DATA_URL:return new Eo(Fx(t),Vx(t))}throw nf()}function Ry(n){let t=[];for(let e=0;e<n.length;e++){let i=n.charCodeAt(e);if(i<=127)t.push(i);else if(i<=2047)t.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(e<n.length-1&&(n.charCodeAt(e+1)&64512)===56320))t.push(239,191,189);else{let s=i,o=n.charCodeAt(++e);i=65536|(s&1023)<<10|o&1023,t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?t.push(239,191,189):t.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(t)}function Lx(n){let t;try{t=decodeURIComponent(n)}catch{throw wo(ze.DATA_URL,"Malformed data URL.")}return Ry(t)}function Sy(n,t){switch(n){case ze.BASE64:{let r=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(r||s)throw wo(n,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case ze.BASE64URL:{let r=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(r||s)throw wo(n,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let e;try{e=Nx(t)}catch(r){throw r.message.includes("polyfill")?r:wo(n,"Invalid character found")}let i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i}var Ec=class{constructor(t){this.base64=!1,this.contentType=null;let e=t.match(/^data:([^,]+)?,/);if(e===null)throw wo(ze.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let i=e[1]||null;i!=null&&(this.base64=Ux(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=t.substring(t.indexOf(",")+1)}};function Fx(n){let t=new Ec(n);return t.base64?Sy(ze.BASE64,t.rest):Lx(t.rest)}function Vx(n){return new Ec(n).contentType}function Ux(n,t){return n.length>=t.length?n.substring(n.length-t.length)===t:!1}var Ic=class n{constructor(t,e){let i=0,r="";gy(t)?(this.data_=t,i=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),i=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),i=t.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(t,e){if(gy(this.data_)){let i=this.data_,r=Ox(i,t,e);return r===null?null:new n(r)}else{let i=new Uint8Array(this.data_.buffer,t,e-t);return new n(i,!0)}}static getBlob(...t){if(sf()){let e=t.map(i=>i instanceof n?i.data_:i);return new n(Px.apply(null,e))}else{let e=t.map(o=>rf(o)?Mx(ze.RAW,o).data:o.data_),i=0;e.forEach(o=>{i+=o.byteLength});let r=new Uint8Array(i),s=0;return e.forEach(o=>{for(let c=0;c<o.length;c++)r[s++]=o[c]}),new n(r,!0)}}uploadData(){return this.data_}};function Cy(n){let t;try{t=JSON.parse(n)}catch{return null}return Tx(t)?t:null}function jx(n){if(n.length===0)return null;let t=n.lastIndexOf("/");return t===-1?"":n.slice(0,t)}function Bx(n,t){let e=t.split("/").filter(i=>i.length>0).join("/");return n.length===0?e:n+"/"+e}function Dy(n){let t=n.lastIndexOf("/",n.length-2);return t===-1?n:n.slice(t+1)}function zx(n,t){return t}var Kt=class{constructor(t,e,i,r){this.server=t,this.local=e||t,this.writable=!!i,this.xform=r||zx}},wc=null;function $x(n){return!rf(n)||n.length<2?n:Dy(n)}function xy(){if(wc)return wc;let n=[];n.push(new Kt("bucket")),n.push(new Kt("generation")),n.push(new Kt("metageneration")),n.push(new Kt("name","fullPath",!0));function t(s,o){return $x(o)}let e=new Kt("name");e.xform=t,n.push(e);function i(s,o){return o!==void 0?Number(o):o}let r=new Kt("size");return r.xform=i,n.push(r),n.push(new Kt("timeCreated")),n.push(new Kt("updated")),n.push(new Kt("md5Hash",null,!0)),n.push(new Kt("cacheControl",null,!0)),n.push(new Kt("contentDisposition",null,!0)),n.push(new Kt("contentEncoding",null,!0)),n.push(new Kt("contentLanguage",null,!0)),n.push(new Kt("contentType",null,!0)),n.push(new Kt("metadata","customMetadata",!0)),wc=n,wc}function qx(n,t){function e(){let i=n.bucket,r=n.fullPath,s=new ke(i,r);return t._makeStorageReference(s)}Object.defineProperty(n,"ref",{get:e})}function Hx(n,t,e){let i={};i.type="file";let r=e.length;for(let s=0;s<r;s++){let o=e[s];i[o.local]=o.xform(i,t[o.server])}return qx(i,n),i}function ky(n,t,e){let i=Cy(t);return i===null?null:Hx(n,i,e)}function Wx(n,t,e,i){let r=Cy(t);if(r===null||!rf(r.downloadTokens))return null;let s=r.downloadTokens;if(s.length===0)return null;let o=encodeURIComponent;return s.split(",").map(u=>{let f=n.bucket,p=n.fullPath,_="/b/"+o(f)+"/o/"+o(p),E=of(_,e,i),C=Ay({alt:"media",token:u});return E+C})[0]}function Gx(n,t){let e={},i=t.length;for(let r=0;r<i;r++){let s=t[r];s.writable&&(e[s.server]=n[s.local])}return JSON.stringify(e)}var Tc=class{constructor(t,e,i,r){this.url=t,this.method=e,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function Py(n){if(!n)throw nf()}function Kx(n,t){function e(i,r){let s=ky(n,r,t);return Py(s!==null),s}return e}function Yx(n,t){function e(i,r){let s=ky(n,r,t);return Py(s!==null),Wx(s,r,n.host,n._protocol)}return e}function Oy(n){function t(e,i){let r;return e.getStatus()===401?e.getErrorText().includes("Firebase App Check token is invalid")?r=ux():r=lx():e.getStatus()===402?r=cx(n.bucket):e.getStatus()===403?r=dx(n.path):r=i,r.status=e.getStatus(),r.serverResponse=i.serverResponse,r}return t}function Qx(n){let t=Oy(n);function e(i,r){let s=t(i,r);return i.getStatus()===404&&(s=ax(n.path)),s.serverResponse=r.serverResponse,s}return e}function Xx(n,t,e){let i=t.fullServerUrl(),r=of(i,n.host,n._protocol),s="GET",o=n.maxOperationRetryTime,c=new Tc(r,s,Yx(n,e),o);return c.errorHandler=Qx(t),c}function Jx(n,t){return n&&n.contentType||t&&t.type()||"application/octet-stream"}function Zx(n,t,e){let i=Object.assign({},e);return i.fullPath=n.path,i.size=t.size(),i.contentType||(i.contentType=Jx(null,t)),i}function tk(n,t,e,i,r){let s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function c(){let z="";for(let H=0;H<2;H++)z=z+Math.random().toString().slice(2);return z}let l=c();o["Content-Type"]="multipart/related; boundary="+l;let u=Zx(t,i,r),f=Gx(u,e),p="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,_=`\r
--`+l+"--",E=Ic.getBlob(p,i,_);if(E===null)throw _x();let C={name:u.fullPath},D=of(s,n.host,n._protocol),x="POST",L=n.maxUploadRetryTime,V=new Tc(D,x,Kx(n,e),L);return V.urlParams=C,V.headers=o,V.body=E.uploadData(),V.errorHandler=Oy(t),V}var qF=256*1024;var by=null,tf=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Rr.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Rr.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Rr.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,e,i,r){if(this.sent_)throw yo("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),r!==void 0)for(let s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw yo("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw yo("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw yo("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw yo("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}},ef=class extends tf{initXhr(){this.xhr_.responseType="text"}};function Ny(){return by?by():new ef}var Sr=class n{constructor(t,e){this._service=t,e instanceof ke?this._location=e:this._location=ke.makeFromUrl(e,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,e){return new n(t,e)}get root(){let t=new ke(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Dy(this._location.path)}get storage(){return this._service}get parent(){let t=jx(this._location.path);if(t===null)return null;let e=new ke(this._location.bucket,t);return new n(this._service,e)}_throwIfRoot(t){if(this._location.path==="")throw yx(t)}};function ek(n,t,e){n._throwIfRoot("uploadBytes");let i=tk(n.storage,n._location,xy(),new Ic(t,!0),e);return n.storage.makeRequestWithTokens(i,Ny).then(r=>({metadata:r,ref:n}))}function nk(n){n._throwIfRoot("getDownloadURL");let t=Xx(n.storage,n._location,xy());return n.storage.makeRequestWithTokens(t,Ny).then(e=>{if(e===null)throw bx();return e})}function ik(n,t){let e=Bx(n._location.path,t),i=new ke(n._location.bucket,e);return new Sr(n.storage,i)}function rk(n){return/^[A-Za-z]+:\/\//.test(n)}function sk(n,t){return new Sr(n,t)}function My(n,t){if(n instanceof Io){let e=n;if(e._bucket==null)throw gx();let i=new Sr(e,e._bucket);return t!=null?My(i,t):i}else return t!==void 0?ik(n,t):n}function ok(n,t){if(t&&rk(t)){if(n instanceof Io)return sk(n,t);throw Xh("To use ref(service, url), the first argument must be a Storage instance.")}else return My(n,t)}function vy(n,t){let e=t?.[Iy];return e==null?null:ke.makeFromBucketSpec(e,n)}function ak(n,t,e,i={}){n.host=`${t}:${e}`,n._protocol="http";let{mockUserToken:r}=i;r&&(n._overrideAuthToken=typeof r=="string"?r:Qa(r,n.app.options.projectId))}var Io=class{constructor(t,e,i,r,s){this.app=t,this._authProvider=e,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=Ey,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=sx,this._maxUploadRetryTime=ox,this._requests=new Set,r!=null?this._bucket=ke.makeFromBucketSpec(r,this._host):this._bucket=vy(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=ke.makeFromBucketSpec(this._url,t):this._bucket=vy(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){_y("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){_y("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}_getAuthToken(){return g(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let t=this._authProvider.getImmediate({optional:!0});if(t){let e=yield t.getToken();if(e!==null)return e.accessToken}return null})}_getAppCheckToken(){return g(this,null,function*(){let t=this._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Sr(this,t)}_makeRequest(t,e,i,r,s=!0){if(this._deleted)return new Jh(Ty());{let o=xx(t,this._appId,i,r,e,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(t,e){return g(this,null,function*(){let[i,r]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,e,i,r).getPromise()})}},yy="@firebase/storage",wy="0.12.5";var Ly="storage";function Fy(n,t,e){return n=yt(n),ek(n,t,e)}function Vy(n){return n=yt(n),nk(n)}function Uy(n,t){return n=yt(n),ok(n,t)}function jy(n=Fn(),t){n=yt(n);let i=vi(n,Ly).getImmediate({identifier:t}),r=Ya("storage");return r&&By(i,...r),i}function By(n,t,e,i={}){ak(n,t,e,i)}function ck(n,{instanceIdentifier:t}){let e=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),r=n.getProvider("app-check-internal");return new Io(e,i,r,t,Ue)}function lk(){Ve(new ce(Ly,ck,"PUBLIC").setMultipleInstances(!0)),wt(yy,wy,""),wt(yy,wy,"esm2017")}lk();var Ci=class{constructor(t){return t}},zy="storage",af=class{constructor(){return wi(zy)}};var cf=new tt("angularfire2.storage-instances");function uk(n,t){let e=Er(zy,n,t);return e&&new Ci(e)}function dk(n){return(t,e)=>{let i=t.runOutsideAngular(()=>n(e));return new Ci(i)}}var hk={provide:af,deps:[[new Ut,cf]]},fk={provide:Ci,useFactory:uk,deps:[[new Ut,cf],xe]},mk=(()=>{class n{constructor(){wt("angularfire",cn.full,"gcs")}static \u0275fac=function(i){return new(i||n)};static \u0275mod=pt({type:n});static \u0275inj=mt({providers:[fk,hk]})}return n})();function hV(n,...t){return{ngModule:mk,providers:[{provide:cf,useFactory:dk(n),multi:!0,deps:[K,jt,Un,ln,[new Ut,Si],[new Ut,Vn],...t]}]}}var lf=Gt(Vy,!0);var fV=Gt(jy,!0);var uf=Gt(Uy,!0);var $y=Gt(Fy,!0);var qy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Hy={};var zn,df;(function(){var n;function t(I,b){function y(){}y.prototype=b.prototype,I.D=b.prototype,I.prototype=new y,I.prototype.constructor=I,I.C=function(w,T,R){for(var v=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)v[Qe-2]=arguments[Qe];return b.prototype[T].apply(w,v)}}function e(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,e),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(I,b,y){y||(y=0);var w=Array(16);if(typeof b=="string")for(var T=0;16>T;++T)w[T]=b.charCodeAt(y++)|b.charCodeAt(y++)<<8|b.charCodeAt(y++)<<16|b.charCodeAt(y++)<<24;else for(T=0;16>T;++T)w[T]=b[y++]|b[y++]<<8|b[y++]<<16|b[y++]<<24;b=I.g[0],y=I.g[1],T=I.g[2];var R=I.g[3],v=b+(R^y&(T^R))+w[0]+3614090360&4294967295;b=y+(v<<7&4294967295|v>>>25),v=R+(T^b&(y^T))+w[1]+3905402710&4294967295,R=b+(v<<12&4294967295|v>>>20),v=T+(y^R&(b^y))+w[2]+606105819&4294967295,T=R+(v<<17&4294967295|v>>>15),v=y+(b^T&(R^b))+w[3]+3250441966&4294967295,y=T+(v<<22&4294967295|v>>>10),v=b+(R^y&(T^R))+w[4]+4118548399&4294967295,b=y+(v<<7&4294967295|v>>>25),v=R+(T^b&(y^T))+w[5]+1200080426&4294967295,R=b+(v<<12&4294967295|v>>>20),v=T+(y^R&(b^y))+w[6]+2821735955&4294967295,T=R+(v<<17&4294967295|v>>>15),v=y+(b^T&(R^b))+w[7]+4249261313&4294967295,y=T+(v<<22&4294967295|v>>>10),v=b+(R^y&(T^R))+w[8]+1770035416&4294967295,b=y+(v<<7&4294967295|v>>>25),v=R+(T^b&(y^T))+w[9]+2336552879&4294967295,R=b+(v<<12&4294967295|v>>>20),v=T+(y^R&(b^y))+w[10]+4294925233&4294967295,T=R+(v<<17&4294967295|v>>>15),v=y+(b^T&(R^b))+w[11]+2304563134&4294967295,y=T+(v<<22&4294967295|v>>>10),v=b+(R^y&(T^R))+w[12]+1804603682&4294967295,b=y+(v<<7&4294967295|v>>>25),v=R+(T^b&(y^T))+w[13]+4254626195&4294967295,R=b+(v<<12&4294967295|v>>>20),v=T+(y^R&(b^y))+w[14]+2792965006&4294967295,T=R+(v<<17&4294967295|v>>>15),v=y+(b^T&(R^b))+w[15]+1236535329&4294967295,y=T+(v<<22&4294967295|v>>>10),v=b+(T^R&(y^T))+w[1]+4129170786&4294967295,b=y+(v<<5&4294967295|v>>>27),v=R+(y^T&(b^y))+w[6]+3225465664&4294967295,R=b+(v<<9&4294967295|v>>>23),v=T+(b^y&(R^b))+w[11]+643717713&4294967295,T=R+(v<<14&4294967295|v>>>18),v=y+(R^b&(T^R))+w[0]+3921069994&4294967295,y=T+(v<<20&4294967295|v>>>12),v=b+(T^R&(y^T))+w[5]+3593408605&4294967295,b=y+(v<<5&4294967295|v>>>27),v=R+(y^T&(b^y))+w[10]+38016083&4294967295,R=b+(v<<9&4294967295|v>>>23),v=T+(b^y&(R^b))+w[15]+3634488961&4294967295,T=R+(v<<14&4294967295|v>>>18),v=y+(R^b&(T^R))+w[4]+3889429448&4294967295,y=T+(v<<20&4294967295|v>>>12),v=b+(T^R&(y^T))+w[9]+568446438&4294967295,b=y+(v<<5&4294967295|v>>>27),v=R+(y^T&(b^y))+w[14]+3275163606&4294967295,R=b+(v<<9&4294967295|v>>>23),v=T+(b^y&(R^b))+w[3]+4107603335&4294967295,T=R+(v<<14&4294967295|v>>>18),v=y+(R^b&(T^R))+w[8]+1163531501&4294967295,y=T+(v<<20&4294967295|v>>>12),v=b+(T^R&(y^T))+w[13]+2850285829&4294967295,b=y+(v<<5&4294967295|v>>>27),v=R+(y^T&(b^y))+w[2]+4243563512&4294967295,R=b+(v<<9&4294967295|v>>>23),v=T+(b^y&(R^b))+w[7]+1735328473&4294967295,T=R+(v<<14&4294967295|v>>>18),v=y+(R^b&(T^R))+w[12]+2368359562&4294967295,y=T+(v<<20&4294967295|v>>>12),v=b+(y^T^R)+w[5]+4294588738&4294967295,b=y+(v<<4&4294967295|v>>>28),v=R+(b^y^T)+w[8]+2272392833&4294967295,R=b+(v<<11&4294967295|v>>>21),v=T+(R^b^y)+w[11]+1839030562&4294967295,T=R+(v<<16&4294967295|v>>>16),v=y+(T^R^b)+w[14]+4259657740&4294967295,y=T+(v<<23&4294967295|v>>>9),v=b+(y^T^R)+w[1]+2763975236&4294967295,b=y+(v<<4&4294967295|v>>>28),v=R+(b^y^T)+w[4]+1272893353&4294967295,R=b+(v<<11&4294967295|v>>>21),v=T+(R^b^y)+w[7]+4139469664&4294967295,T=R+(v<<16&4294967295|v>>>16),v=y+(T^R^b)+w[10]+3200236656&4294967295,y=T+(v<<23&4294967295|v>>>9),v=b+(y^T^R)+w[13]+681279174&4294967295,b=y+(v<<4&4294967295|v>>>28),v=R+(b^y^T)+w[0]+3936430074&4294967295,R=b+(v<<11&4294967295|v>>>21),v=T+(R^b^y)+w[3]+3572445317&4294967295,T=R+(v<<16&4294967295|v>>>16),v=y+(T^R^b)+w[6]+76029189&4294967295,y=T+(v<<23&4294967295|v>>>9),v=b+(y^T^R)+w[9]+3654602809&4294967295,b=y+(v<<4&4294967295|v>>>28),v=R+(b^y^T)+w[12]+3873151461&4294967295,R=b+(v<<11&4294967295|v>>>21),v=T+(R^b^y)+w[15]+530742520&4294967295,T=R+(v<<16&4294967295|v>>>16),v=y+(T^R^b)+w[2]+3299628645&4294967295,y=T+(v<<23&4294967295|v>>>9),v=b+(T^(y|~R))+w[0]+4096336452&4294967295,b=y+(v<<6&4294967295|v>>>26),v=R+(y^(b|~T))+w[7]+1126891415&4294967295,R=b+(v<<10&4294967295|v>>>22),v=T+(b^(R|~y))+w[14]+2878612391&4294967295,T=R+(v<<15&4294967295|v>>>17),v=y+(R^(T|~b))+w[5]+4237533241&4294967295,y=T+(v<<21&4294967295|v>>>11),v=b+(T^(y|~R))+w[12]+1700485571&4294967295,b=y+(v<<6&4294967295|v>>>26),v=R+(y^(b|~T))+w[3]+2399980690&4294967295,R=b+(v<<10&4294967295|v>>>22),v=T+(b^(R|~y))+w[10]+4293915773&4294967295,T=R+(v<<15&4294967295|v>>>17),v=y+(R^(T|~b))+w[1]+2240044497&4294967295,y=T+(v<<21&4294967295|v>>>11),v=b+(T^(y|~R))+w[8]+1873313359&4294967295,b=y+(v<<6&4294967295|v>>>26),v=R+(y^(b|~T))+w[15]+4264355552&4294967295,R=b+(v<<10&4294967295|v>>>22),v=T+(b^(R|~y))+w[6]+2734768916&4294967295,T=R+(v<<15&4294967295|v>>>17),v=y+(R^(T|~b))+w[13]+1309151649&4294967295,y=T+(v<<21&4294967295|v>>>11),v=b+(T^(y|~R))+w[4]+4149444226&4294967295,b=y+(v<<6&4294967295|v>>>26),v=R+(y^(b|~T))+w[11]+3174756917&4294967295,R=b+(v<<10&4294967295|v>>>22),v=T+(b^(R|~y))+w[2]+718787259&4294967295,T=R+(v<<15&4294967295|v>>>17),v=y+(R^(T|~b))+w[9]+3951481745&4294967295,I.g[0]=I.g[0]+b&4294967295,I.g[1]=I.g[1]+(T+(v<<21&4294967295|v>>>11))&4294967295,I.g[2]=I.g[2]+T&4294967295,I.g[3]=I.g[3]+R&4294967295}i.prototype.u=function(I,b){b===void 0&&(b=I.length);for(var y=b-this.blockSize,w=this.B,T=this.h,R=0;R<b;){if(T==0)for(;R<=y;)r(this,I,R),R+=this.blockSize;if(typeof I=="string"){for(;R<b;)if(w[T++]=I.charCodeAt(R++),T==this.blockSize){r(this,w),T=0;break}}else for(;R<b;)if(w[T++]=I[R++],T==this.blockSize){r(this,w),T=0;break}}this.h=T,this.o+=b},i.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var b=1;b<I.length-8;++b)I[b]=0;var y=8*this.o;for(b=I.length-8;b<I.length;++b)I[b]=y&255,y/=256;for(this.u(I),I=Array(16),b=y=0;4>b;++b)for(var w=0;32>w;w+=8)I[y++]=this.g[b]>>>w&255;return I};function s(I,b){var y=c;return Object.prototype.hasOwnProperty.call(y,I)?y[I]:y[I]=b(I)}function o(I,b){this.h=b;for(var y=[],w=!0,T=I.length-1;0<=T;T--){var R=I[T]|0;w&&R==b||(y[T]=R,w=!1)}this.g=y}var c={};function l(I){return-128<=I&&128>I?s(I,function(b){return new o([b|0],0>b?-1:0)}):new o([I|0],0>I?-1:0)}function u(I){if(isNaN(I)||!isFinite(I))return p;if(0>I)return x(u(-I));for(var b=[],y=1,w=0;I>=y;w++)b[w]=I/y|0,y*=4294967296;return new o(b,0)}function f(I,b){if(I.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(I.charAt(0)=="-")return x(f(I.substring(1),b));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=u(Math.pow(b,8)),w=p,T=0;T<I.length;T+=8){var R=Math.min(8,I.length-T),v=parseInt(I.substring(T,T+R),b);8>R?(R=u(Math.pow(b,R)),w=w.j(R).add(u(v))):(w=w.j(y),w=w.add(u(v)))}return w}var p=l(0),_=l(1),E=l(16777216);n=o.prototype,n.m=function(){if(D(this))return-x(this).m();for(var I=0,b=1,y=0;y<this.g.length;y++){var w=this.i(y);I+=(0<=w?w:4294967296+w)*b,b*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(C(this))return"0";if(D(this))return"-"+x(this).toString(I);for(var b=u(Math.pow(I,6)),y=this,w="";;){var T=H(y,b).g;y=L(y,T.j(b));var R=((0<y.g.length?y.g[0]:y.h)>>>0).toString(I);if(y=T,C(y))return R+w;for(;6>R.length;)R="0"+R;w=R+w}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function C(I){if(I.h!=0)return!1;for(var b=0;b<I.g.length;b++)if(I.g[b]!=0)return!1;return!0}function D(I){return I.h==-1}n.l=function(I){return I=L(this,I),D(I)?-1:C(I)?0:1};function x(I){for(var b=I.g.length,y=[],w=0;w<b;w++)y[w]=~I.g[w];return new o(y,~I.h).add(_)}n.abs=function(){return D(this)?x(this):this},n.add=function(I){for(var b=Math.max(this.g.length,I.g.length),y=[],w=0,T=0;T<=b;T++){var R=w+(this.i(T)&65535)+(I.i(T)&65535),v=(R>>>16)+(this.i(T)>>>16)+(I.i(T)>>>16);w=v>>>16,R&=65535,v&=65535,y[T]=v<<16|R}return new o(y,y[y.length-1]&-2147483648?-1:0)};function L(I,b){return I.add(x(b))}n.j=function(I){if(C(this)||C(I))return p;if(D(this))return D(I)?x(this).j(x(I)):x(x(this).j(I));if(D(I))return x(this.j(x(I)));if(0>this.l(E)&&0>I.l(E))return u(this.m()*I.m());for(var b=this.g.length+I.g.length,y=[],w=0;w<2*b;w++)y[w]=0;for(w=0;w<this.g.length;w++)for(var T=0;T<I.g.length;T++){var R=this.i(w)>>>16,v=this.i(w)&65535,Qe=I.i(T)>>>16,Zr=I.i(T)&65535;y[2*w+2*T]+=v*Zr,V(y,2*w+2*T),y[2*w+2*T+1]+=R*Zr,V(y,2*w+2*T+1),y[2*w+2*T+1]+=v*Qe,V(y,2*w+2*T+1),y[2*w+2*T+2]+=R*Qe,V(y,2*w+2*T+2)}for(w=0;w<b;w++)y[w]=y[2*w+1]<<16|y[2*w];for(w=b;w<2*b;w++)y[w]=0;return new o(y,0)};function V(I,b){for(;(I[b]&65535)!=I[b];)I[b+1]+=I[b]>>>16,I[b]&=65535,b++}function z(I,b){this.g=I,this.h=b}function H(I,b){if(C(b))throw Error("division by zero");if(C(I))return new z(p,p);if(D(I))return b=H(x(I),b),new z(x(b.g),x(b.h));if(D(b))return b=H(I,x(b)),new z(x(b.g),b.h);if(30<I.g.length){if(D(I)||D(b))throw Error("slowDivide_ only works with positive integers.");for(var y=_,w=b;0>=w.l(I);)y=lt(y),w=lt(w);var T=Z(y,1),R=Z(w,1);for(w=Z(w,2),y=Z(y,2);!C(w);){var v=R.add(w);0>=v.l(I)&&(T=T.add(y),R=v),w=Z(w,1),y=Z(y,1)}return b=L(I,T.j(b)),new z(T,b)}for(T=p;0<=I.l(b);){for(y=Math.max(1,Math.floor(I.m()/b.m())),w=Math.ceil(Math.log(y)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),R=u(y),v=R.j(b);D(v)||0<v.l(I);)y-=w,R=u(y),v=R.j(b);C(R)&&(R=_),T=T.add(R),I=L(I,v)}return new z(T,I)}n.A=function(I){return H(this,I).h},n.and=function(I){for(var b=Math.max(this.g.length,I.g.length),y=[],w=0;w<b;w++)y[w]=this.i(w)&I.i(w);return new o(y,this.h&I.h)},n.or=function(I){for(var b=Math.max(this.g.length,I.g.length),y=[],w=0;w<b;w++)y[w]=this.i(w)|I.i(w);return new o(y,this.h|I.h)},n.xor=function(I){for(var b=Math.max(this.g.length,I.g.length),y=[],w=0;w<b;w++)y[w]=this.i(w)^I.i(w);return new o(y,this.h^I.h)};function lt(I){for(var b=I.g.length+1,y=[],w=0;w<b;w++)y[w]=I.i(w)<<1|I.i(w-1)>>>31;return new o(y,I.h)}function Z(I,b){var y=b>>5;b%=32;for(var w=I.g.length-y,T=[],R=0;R<w;R++)T[R]=0<b?I.i(R+y)>>>b|I.i(R+y+1)<<32-b:I.i(R+y);return new o(T,I.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,df=Hy.Md5=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=f,zn=Hy.Integer=o}).apply(typeof qy<"u"?qy:typeof self<"u"?self:typeof window<"u"?window:{});var Ac=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},pn={};var hf,ff,Cr,mf,To,Rc,pf,gf,_f;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,h){return a==Array.prototype||a==Object.prototype||(a[d]=h.value),a};function e(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ac=="object"&&Ac];for(var d=0;d<a.length;++d){var h=a[d];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var i=e(this);function r(a,d){if(d)t:{var h=i;a=a.split(".");for(var m=0;m<a.length-1;m++){var A=a[m];if(!(A in h))break t;h=h[A]}a=a[a.length-1],m=h[a],d=d(m),d!=m&&d!=null&&t(h,a,{configurable:!0,writable:!0,value:d})}}function s(a,d){a instanceof String&&(a+="");var h=0,m=!1,A={next:function(){if(!m&&h<a.length){var S=h++;return{value:d(S,a[S]),done:!1}}return m=!0,{done:!0,value:void 0}}};return A[Symbol.iterator]=function(){return A},A}r("Array.prototype.values",function(a){return a||function(){return s(this,function(d,h){return h})}});var o=o||{},c=this||self;function l(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function u(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function f(a,d,h){return a.call.apply(a.bind,arguments)}function p(a,d,h){if(!a)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var A=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(A,m),a.apply(d,A)}}return function(){return a.apply(d,arguments)}}function _(a,d,h){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,_.apply(null,arguments)}function E(a,d){var h=Array.prototype.slice.call(arguments,1);return function(){var m=h.slice();return m.push.apply(m,arguments),a.apply(this,m)}}function C(a,d){function h(){}h.prototype=d.prototype,a.aa=d.prototype,a.prototype=new h,a.prototype.constructor=a,a.Qb=function(m,A,S){for(var M=Array(arguments.length-2),ft=2;ft<arguments.length;ft++)M[ft-2]=arguments[ft];return d.prototype[A].apply(m,M)}}function D(a){let d=a.length;if(0<d){let h=Array(d);for(let m=0;m<d;m++)h[m]=a[m];return h}return[]}function x(a,d){for(let h=1;h<arguments.length;h++){let m=arguments[h];if(l(m)){let A=a.length||0,S=m.length||0;a.length=A+S;for(let M=0;M<S;M++)a[A+M]=m[M]}else a.push(m)}}class L{constructor(d,h){this.i=d,this.j=h,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function V(a){return/^[\s\xa0]*$/.test(a)}function z(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function H(a){return H[" "](a),a}H[" "]=function(){};var lt=z().indexOf("Gecko")!=-1&&!(z().toLowerCase().indexOf("webkit")!=-1&&z().indexOf("Edge")==-1)&&!(z().indexOf("Trident")!=-1||z().indexOf("MSIE")!=-1)&&z().indexOf("Edge")==-1;function Z(a,d,h){for(let m in a)d.call(h,a[m],m,a)}function I(a,d){for(let h in a)d.call(void 0,a[h],h,a)}function b(a){let d={};for(let h in a)d[h]=a[h];return d}let y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(a,d){let h,m;for(let A=1;A<arguments.length;A++){m=arguments[A];for(h in m)a[h]=m[h];for(let S=0;S<y.length;S++)h=y[S],Object.prototype.hasOwnProperty.call(m,h)&&(a[h]=m[h])}}function T(a){var d=1;a=a.split(":");let h=[];for(;0<d&&a.length;)h.push(a.shift()),d--;return a.length&&h.push(a.join(":")),h}function R(a){c.setTimeout(()=>{throw a},0)}function v(){var a=El;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class Qe{constructor(){this.h=this.g=null}add(d,h){let m=Zr.get();m.set(d,h),this.h?this.h.next=m:this.g=m,this.h=m}}var Zr=new L(()=>new OE,a=>a.reset());class OE{constructor(){this.next=this.g=this.h=null}set(d,h){this.h=d,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let ts,es=!1,El=new Qe,Tp=()=>{let a=c.Promise.resolve(void 0);ts=()=>{a.then(NE)}};var NE=()=>{for(var a;a=v();){try{a.h.call(a.g)}catch(h){R(h)}var d=Zr;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}es=!1};function yn(){this.s=this.s,this.C=this.C}yn.prototype.s=!1,yn.prototype.ma=function(){this.s||(this.s=!0,this.N())},yn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Qt(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}Qt.prototype.h=function(){this.defaultPrevented=!0};var ME=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let h=()=>{};c.addEventListener("test",h,d),c.removeEventListener("test",h,d)}catch{}return a}();function ns(a,d){if(Qt.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var h=this.type=a.type,m=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(lt){t:{try{H(d.nodeName);var A=!0;break t}catch{}A=!1}A||(d=null)}}else h=="mouseover"?d=a.fromElement:h=="mouseout"&&(d=a.toElement);this.relatedTarget=d,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:LE[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&ns.aa.h.call(this)}}C(ns,Qt);var LE={2:"touch",3:"pen",4:"mouse"};ns.prototype.h=function(){ns.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var is="closure_listenable_"+(1e6*Math.random()|0),FE=0;function VE(a,d,h,m,A){this.listener=a,this.proxy=null,this.src=d,this.type=h,this.capture=!!m,this.ha=A,this.key=++FE,this.da=this.fa=!1}function Wo(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Go(a){this.src=a,this.g={},this.h=0}Go.prototype.add=function(a,d,h,m,A){var S=a.toString();a=this.g[S],a||(a=this.g[S]=[],this.h++);var M=Tl(a,d,m,A);return-1<M?(d=a[M],h||(d.fa=!1)):(d=new VE(d,this.src,S,!!m,A),d.fa=h,a.push(d)),d};function Il(a,d){var h=d.type;if(h in a.g){var m=a.g[h],A=Array.prototype.indexOf.call(m,d,void 0),S;(S=0<=A)&&Array.prototype.splice.call(m,A,1),S&&(Wo(d),a.g[h].length==0&&(delete a.g[h],a.h--))}}function Tl(a,d,h,m){for(var A=0;A<a.length;++A){var S=a[A];if(!S.da&&S.listener==d&&S.capture==!!h&&S.ha==m)return A}return-1}var Al="closure_lm_"+(1e6*Math.random()|0),Rl={};function Ap(a,d,h,m,A){if(m&&m.once)return Sp(a,d,h,m,A);if(Array.isArray(d)){for(var S=0;S<d.length;S++)Ap(a,d[S],h,m,A);return null}return h=xl(h),a&&a[is]?a.K(d,h,u(m)?!!m.capture:!!m,A):Rp(a,d,h,!1,m,A)}function Rp(a,d,h,m,A,S){if(!d)throw Error("Invalid event type");var M=u(A)?!!A.capture:!!A,ft=Cl(a);if(ft||(a[Al]=ft=new Go(a)),h=ft.add(d,h,m,M,S),h.proxy)return h;if(m=UE(),h.proxy=m,m.src=a,m.listener=h,a.addEventListener)ME||(A=M),A===void 0&&(A=!1),a.addEventListener(d.toString(),m,A);else if(a.attachEvent)a.attachEvent(Dp(d.toString()),m);else if(a.addListener&&a.removeListener)a.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return h}function UE(){function a(h){return d.call(a.src,a.listener,h)}let d=jE;return a}function Sp(a,d,h,m,A){if(Array.isArray(d)){for(var S=0;S<d.length;S++)Sp(a,d[S],h,m,A);return null}return h=xl(h),a&&a[is]?a.L(d,h,u(m)?!!m.capture:!!m,A):Rp(a,d,h,!0,m,A)}function Cp(a,d,h,m,A){if(Array.isArray(d))for(var S=0;S<d.length;S++)Cp(a,d[S],h,m,A);else m=u(m)?!!m.capture:!!m,h=xl(h),a&&a[is]?(a=a.i,d=String(d).toString(),d in a.g&&(S=a.g[d],h=Tl(S,h,m,A),-1<h&&(Wo(S[h]),Array.prototype.splice.call(S,h,1),S.length==0&&(delete a.g[d],a.h--)))):a&&(a=Cl(a))&&(d=a.g[d.toString()],a=-1,d&&(a=Tl(d,h,m,A)),(h=-1<a?d[a]:null)&&Sl(h))}function Sl(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[is])Il(d.i,a);else{var h=a.type,m=a.proxy;d.removeEventListener?d.removeEventListener(h,m,a.capture):d.detachEvent?d.detachEvent(Dp(h),m):d.addListener&&d.removeListener&&d.removeListener(m),(h=Cl(d))?(Il(h,a),h.h==0&&(h.src=null,d[Al]=null)):Wo(a)}}}function Dp(a){return a in Rl?Rl[a]:Rl[a]="on"+a}function jE(a,d){if(a.da)a=!0;else{d=new ns(d,this);var h=a.listener,m=a.ha||a.src;a.fa&&Sl(a),a=h.call(m,d)}return a}function Cl(a){return a=a[Al],a instanceof Go?a:null}var Dl="__closure_events_fn_"+(1e9*Math.random()>>>0);function xl(a){return typeof a=="function"?a:(a[Dl]||(a[Dl]=function(d){return a.handleEvent(d)}),a[Dl])}function Xt(){yn.call(this),this.i=new Go(this),this.M=this,this.F=null}C(Xt,yn),Xt.prototype[is]=!0,Xt.prototype.removeEventListener=function(a,d,h,m){Cp(this,a,d,h,m)};function ne(a,d){var h,m=a.F;if(m)for(h=[];m;m=m.F)h.push(m);if(a=a.M,m=d.type||d,typeof d=="string")d=new Qt(d,a);else if(d instanceof Qt)d.target=d.target||a;else{var A=d;d=new Qt(m,a),w(d,A)}if(A=!0,h)for(var S=h.length-1;0<=S;S--){var M=d.g=h[S];A=Ko(M,m,!0,d)&&A}if(M=d.g=a,A=Ko(M,m,!0,d)&&A,A=Ko(M,m,!1,d)&&A,h)for(S=0;S<h.length;S++)M=d.g=h[S],A=Ko(M,m,!1,d)&&A}Xt.prototype.N=function(){if(Xt.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var h=a.g[d],m=0;m<h.length;m++)Wo(h[m]);delete a.g[d],a.h--}}this.F=null},Xt.prototype.K=function(a,d,h,m){return this.i.add(String(a),d,!1,h,m)},Xt.prototype.L=function(a,d,h,m){return this.i.add(String(a),d,!0,h,m)};function Ko(a,d,h,m){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var A=!0,S=0;S<d.length;++S){var M=d[S];if(M&&!M.da&&M.capture==h){var ft=M.listener,qt=M.ha||M.src;M.fa&&Il(a.i,M),A=ft.call(qt,m)!==!1&&A}}return A&&!m.defaultPrevented}function xp(a,d,h){if(typeof a=="function")h&&(a=_(a,h));else if(a&&typeof a.handleEvent=="function")a=_(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:c.setTimeout(a,d||0)}function kp(a){a.g=xp(()=>{a.g=null,a.i&&(a.i=!1,kp(a))},a.l);let d=a.h;a.h=null,a.m.apply(null,d)}class BE extends yn{constructor(d,h){super(),this.m=d,this.l=h,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:kp(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function rs(a){yn.call(this),this.h=a,this.g={}}C(rs,yn);var Pp=[];function Op(a){Z(a.g,function(d,h){this.g.hasOwnProperty(h)&&Sl(d)},a),a.g={}}rs.prototype.N=function(){rs.aa.N.call(this),Op(this)},rs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var kl=c.JSON.stringify,zE=c.JSON.parse,$E=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function Pl(){}Pl.prototype.h=null;function Np(a){return a.h||(a.h=a.i())}function Mp(){}var ss={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ol(){Qt.call(this,"d")}C(Ol,Qt);function Nl(){Qt.call(this,"c")}C(Nl,Qt);var Yn={},Lp=null;function Yo(){return Lp=Lp||new Xt}Yn.La="serverreachability";function Fp(a){Qt.call(this,Yn.La,a)}C(Fp,Qt);function os(a){let d=Yo();ne(d,new Fp(d))}Yn.STAT_EVENT="statevent";function Vp(a,d){Qt.call(this,Yn.STAT_EVENT,a),this.stat=d}C(Vp,Qt);function ie(a){let d=Yo();ne(d,new Vp(d,a))}Yn.Ma="timingevent";function Up(a,d){Qt.call(this,Yn.Ma,a),this.size=d}C(Up,Qt);function as(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},d)}function cs(){this.g=!0}cs.prototype.xa=function(){this.g=!1};function qE(a,d,h,m,A,S){a.info(function(){if(a.g)if(S)for(var M="",ft=S.split("&"),qt=0;qt<ft.length;qt++){var ot=ft[qt].split("=");if(1<ot.length){var Jt=ot[0];ot=ot[1];var Zt=Jt.split("_");M=2<=Zt.length&&Zt[1]=="type"?M+(Jt+"="+ot+"&"):M+(Jt+"=redacted&")}}else M=null;else M=S;return"XMLHTTP REQ ("+m+") [attempt "+A+"]: "+d+`
`+h+`
`+M})}function HE(a,d,h,m,A,S,M){a.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+A+"]: "+d+`
`+h+`
`+S+" "+M})}function Bi(a,d,h,m){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+GE(a,h)+(m?" "+m:"")})}function WE(a,d){a.info(function(){return"TIMEOUT: "+d})}cs.prototype.info=function(){};function GE(a,d){if(!a.g)return d;if(!d)return null;try{var h=JSON.parse(d);if(h){for(a=0;a<h.length;a++)if(Array.isArray(h[a])){var m=h[a];if(!(2>m.length)){var A=m[1];if(Array.isArray(A)&&!(1>A.length)){var S=A[0];if(S!="noop"&&S!="stop"&&S!="close")for(var M=1;M<A.length;M++)A[M]=""}}}}return kl(h)}catch{return d}}var Qo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},jp={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ml;function Xo(){}C(Xo,Pl),Xo.prototype.g=function(){return new XMLHttpRequest},Xo.prototype.i=function(){return{}},Ml=new Xo;function wn(a,d,h,m){this.j=a,this.i=d,this.l=h,this.R=m||1,this.U=new rs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Bp}function Bp(){this.i=null,this.g="",this.h=!1}var zp={},Ll={};function Fl(a,d,h){a.L=1,a.v=ea(Xe(d)),a.m=h,a.P=!0,$p(a,null)}function $p(a,d){a.F=Date.now(),Jo(a),a.A=Xe(a.v);var h=a.A,m=a.R;Array.isArray(m)||(m=[String(m)]),ig(h.i,"t",m),a.C=0,h=a.j.J,a.h=new Bp,a.g=wg(a.j,h?d:null,!a.m),0<a.O&&(a.M=new BE(_(a.Y,a,a.g),a.O)),d=a.U,h=a.g,m=a.ca;var A="readystatechange";Array.isArray(A)||(A&&(Pp[0]=A.toString()),A=Pp);for(var S=0;S<A.length;S++){var M=Ap(h,A[S],m||d.handleEvent,!1,d.h||d);if(!M)break;d.g[M.key]=M}d=a.H?b(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),os(),qE(a.i,a.u,a.A,a.l,a.R,a.m)}wn.prototype.ca=function(a){a=a.target;let d=this.M;d&&Je(a)==3?d.j():this.Y(a)},wn.prototype.Y=function(a){try{if(a==this.g)t:{let Zt=Je(this.g);var d=this.g.Ba();let qi=this.g.Z();if(!(3>Zt)&&(Zt!=3||this.g&&(this.h.h||this.g.oa()||ug(this.g)))){this.J||Zt!=4||d==7||(d==8||0>=qi?os(3):os(2)),Vl(this);var h=this.g.Z();this.X=h;e:if(qp(this)){var m=ug(this.g);a="";var A=m.length,S=Je(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Qn(this),ls(this);var M="";break e}this.h.i=new c.TextDecoder}for(d=0;d<A;d++)this.h.h=!0,a+=this.h.i.decode(m[d],{stream:!(S&&d==A-1)});m.length=0,this.h.g+=a,this.C=0,M=this.h.g}else M=this.g.oa();if(this.o=h==200,HE(this.i,this.u,this.A,this.l,this.R,Zt,h),this.o){if(this.T&&!this.K){e:{if(this.g){var ft,qt=this.g;if((ft=qt.g?qt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(ft)){var ot=ft;break e}}ot=null}if(h=ot)Bi(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ul(this,h);else{this.o=!1,this.s=3,ie(12),Qn(this),ls(this);break t}}if(this.P){h=!0;let Re;for(;!this.J&&this.C<M.length;)if(Re=KE(this,M),Re==Ll){Zt==4&&(this.s=4,ie(14),h=!1),Bi(this.i,this.l,null,"[Incomplete Response]");break}else if(Re==zp){this.s=4,ie(15),Bi(this.i,this.l,M,"[Invalid Chunk]"),h=!1;break}else Bi(this.i,this.l,Re,null),Ul(this,Re);if(qp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Zt!=4||M.length!=0||this.h.h||(this.s=1,ie(16),h=!1),this.o=this.o&&h,!h)Bi(this.i,this.l,M,"[Invalid Chunked Response]"),Qn(this),ls(this);else if(0<M.length&&!this.W){this.W=!0;var Jt=this.j;Jt.g==this&&Jt.ba&&!Jt.M&&(Jt.j.info("Great, no buffering proxy detected. Bytes received: "+M.length),Hl(Jt),Jt.M=!0,ie(11))}}else Bi(this.i,this.l,M,null),Ul(this,M);Zt==4&&Qn(this),this.o&&!this.J&&(Zt==4?_g(this.j,this):(this.o=!1,Jo(this)))}else dI(this.g),h==400&&0<M.indexOf("Unknown SID")?(this.s=3,ie(12)):(this.s=0,ie(13)),Qn(this),ls(this)}}}catch{}finally{}};function qp(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function KE(a,d){var h=a.C,m=d.indexOf(`
`,h);return m==-1?Ll:(h=Number(d.substring(h,m)),isNaN(h)?zp:(m+=1,m+h>d.length?Ll:(d=d.slice(m,m+h),a.C=m+h,d)))}wn.prototype.cancel=function(){this.J=!0,Qn(this)};function Jo(a){a.S=Date.now()+a.I,Hp(a,a.I)}function Hp(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=as(_(a.ba,a),d)}function Vl(a){a.B&&(c.clearTimeout(a.B),a.B=null)}wn.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(WE(this.i,this.A),this.L!=2&&(os(),ie(17)),Qn(this),this.s=2,ls(this)):Hp(this,this.S-a)};function ls(a){a.j.G==0||a.J||_g(a.j,a)}function Qn(a){Vl(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,Op(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function Ul(a,d){try{var h=a.j;if(h.G!=0&&(h.g==a||jl(h.h,a))){if(!a.K&&jl(h.h,a)&&h.G==3){try{var m=h.Da.g.parse(d)}catch{m=null}if(Array.isArray(m)&&m.length==3){var A=m;if(A[0]==0){t:if(!h.u){if(h.g)if(h.g.F+3e3<a.F)oa(h),ra(h);else break t;ql(h),ie(18)}}else h.za=A[1],0<h.za-h.T&&37500>A[2]&&h.F&&h.v==0&&!h.C&&(h.C=as(_(h.Za,h),6e3));if(1>=Kp(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else Jn(h,11)}else if((a.K||h.g==a)&&oa(h),!V(d))for(A=h.Da.g.parse(d),d=0;d<A.length;d++){let ot=A[d];if(h.T=ot[0],ot=ot[1],h.G==2)if(ot[0]=="c"){h.K=ot[1],h.ia=ot[2];let Jt=ot[3];Jt!=null&&(h.la=Jt,h.j.info("VER="+h.la));let Zt=ot[4];Zt!=null&&(h.Aa=Zt,h.j.info("SVER="+h.Aa));let qi=ot[5];qi!=null&&typeof qi=="number"&&0<qi&&(m=1.5*qi,h.L=m,h.j.info("backChannelRequestTimeoutMs_="+m)),m=h;let Re=a.g;if(Re){let ca=Re.g?Re.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ca){var S=m.h;S.g||ca.indexOf("spdy")==-1&&ca.indexOf("quic")==-1&&ca.indexOf("h2")==-1||(S.j=S.l,S.g=new Set,S.h&&(Bl(S,S.h),S.h=null))}if(m.D){let Wl=Re.g?Re.g.getResponseHeader("X-HTTP-Session-Id"):null;Wl&&(m.ya=Wl,bt(m.I,m.D,Wl))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-a.F,h.j.info("Handshake RTT: "+h.R+"ms")),m=h;var M=a;if(m.qa=yg(m,m.J?m.ia:null,m.W),M.K){Yp(m.h,M);var ft=M,qt=m.L;qt&&(ft.I=qt),ft.B&&(Vl(ft),Jo(ft)),m.g=M}else pg(m);0<h.i.length&&sa(h)}else ot[0]!="stop"&&ot[0]!="close"||Jn(h,7);else h.G==3&&(ot[0]=="stop"||ot[0]=="close"?ot[0]=="stop"?Jn(h,7):$l(h):ot[0]!="noop"&&h.l&&h.l.ta(ot),h.v=0)}}os(4)}catch{}}var YE=class{constructor(a,d){this.g=a,this.map=d}};function Wp(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Gp(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Kp(a){return a.h?1:a.g?a.g.size:0}function jl(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function Bl(a,d){a.g?a.g.add(d):a.h=d}function Yp(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}Wp.prototype.cancel=function(){if(this.i=Qp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function Qp(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(let h of a.g.values())d=d.concat(h.D);return d}return D(a.i)}function QE(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(l(a)){for(var d=[],h=a.length,m=0;m<h;m++)d.push(a[m]);return d}d=[],h=0;for(m in a)d[h++]=a[m];return d}function XE(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(l(a)||typeof a=="string"){var d=[];a=a.length;for(var h=0;h<a;h++)d.push(h);return d}d=[],h=0;for(let m in a)d[h++]=m;return d}}}function Xp(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(l(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var h=XE(a),m=QE(a),A=m.length,S=0;S<A;S++)d.call(void 0,m[S],h&&h[S],a)}var Jp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function JE(a,d){if(a){a=a.split("&");for(var h=0;h<a.length;h++){var m=a[h].indexOf("="),A=null;if(0<=m){var S=a[h].substring(0,m);A=a[h].substring(m+1)}else S=a[h];d(S,A?decodeURIComponent(A.replace(/\+/g," ")):"")}}}function Xn(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Xn){this.h=a.h,Zo(this,a.j),this.o=a.o,this.g=a.g,ta(this,a.s),this.l=a.l;var d=a.i,h=new hs;h.i=d.i,d.g&&(h.g=new Map(d.g),h.h=d.h),Zp(this,h),this.m=a.m}else a&&(d=String(a).match(Jp))?(this.h=!1,Zo(this,d[1]||"",!0),this.o=us(d[2]||""),this.g=us(d[3]||"",!0),ta(this,d[4]),this.l=us(d[5]||"",!0),Zp(this,d[6]||"",!0),this.m=us(d[7]||"")):(this.h=!1,this.i=new hs(null,this.h))}Xn.prototype.toString=function(){var a=[],d=this.j;d&&a.push(ds(d,tg,!0),":");var h=this.g;return(h||d=="file")&&(a.push("//"),(d=this.o)&&a.push(ds(d,tg,!0),"@"),a.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&a.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&a.push("/"),a.push(ds(h,h.charAt(0)=="/"?eI:tI,!0))),(h=this.i.toString())&&a.push("?",h),(h=this.m)&&a.push("#",ds(h,iI)),a.join("")};function Xe(a){return new Xn(a)}function Zo(a,d,h){a.j=h?us(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function ta(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function Zp(a,d,h){d instanceof hs?(a.i=d,rI(a.i,a.h)):(h||(d=ds(d,nI)),a.i=new hs(d,a.h))}function bt(a,d,h){a.i.set(d,h)}function ea(a){return bt(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function us(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function ds(a,d,h){return typeof a=="string"?(a=encodeURI(a).replace(d,ZE),h&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function ZE(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var tg=/[#\/\?@]/g,tI=/[#\?:]/g,eI=/[#\?]/g,nI=/[#\?@]/g,iI=/#/g;function hs(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function En(a){a.g||(a.g=new Map,a.h=0,a.i&&JE(a.i,function(d,h){a.add(decodeURIComponent(d.replace(/\+/g," ")),h)}))}n=hs.prototype,n.add=function(a,d){En(this),this.i=null,a=zi(this,a);var h=this.g.get(a);return h||this.g.set(a,h=[]),h.push(d),this.h+=1,this};function eg(a,d){En(a),d=zi(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function ng(a,d){return En(a),d=zi(a,d),a.g.has(d)}n.forEach=function(a,d){En(this),this.g.forEach(function(h,m){h.forEach(function(A){a.call(d,A,m,this)},this)},this)},n.na=function(){En(this);let a=Array.from(this.g.values()),d=Array.from(this.g.keys()),h=[];for(let m=0;m<d.length;m++){let A=a[m];for(let S=0;S<A.length;S++)h.push(d[m])}return h},n.V=function(a){En(this);let d=[];if(typeof a=="string")ng(this,a)&&(d=d.concat(this.g.get(zi(this,a))));else{a=Array.from(this.g.values());for(let h=0;h<a.length;h++)d=d.concat(a[h])}return d},n.set=function(a,d){return En(this),this.i=null,a=zi(this,a),ng(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},n.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function ig(a,d,h){eg(a,d),0<h.length&&(a.i=null,a.g.set(zi(a,d),D(h)),a.h+=h.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],d=Array.from(this.g.keys());for(var h=0;h<d.length;h++){var m=d[h];let S=encodeURIComponent(String(m)),M=this.V(m);for(m=0;m<M.length;m++){var A=S;M[m]!==""&&(A+="="+encodeURIComponent(String(M[m]))),a.push(A)}}return this.i=a.join("&")};function zi(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function rI(a,d){d&&!a.j&&(En(a),a.i=null,a.g.forEach(function(h,m){var A=m.toLowerCase();m!=A&&(eg(this,m),ig(this,A,h))},a)),a.j=d}function sI(a,d){let h=new cs;if(c.Image){let m=new Image;m.onload=E(In,h,"TestLoadImage: loaded",!0,d,m),m.onerror=E(In,h,"TestLoadImage: error",!1,d,m),m.onabort=E(In,h,"TestLoadImage: abort",!1,d,m),m.ontimeout=E(In,h,"TestLoadImage: timeout",!1,d,m),c.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=a}else d(!1)}function oI(a,d){let h=new cs,m=new AbortController,A=setTimeout(()=>{m.abort(),In(h,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:m.signal}).then(S=>{clearTimeout(A),S.ok?In(h,"TestPingServer: ok",!0,d):In(h,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(A),In(h,"TestPingServer: error",!1,d)})}function In(a,d,h,m,A){try{A&&(A.onload=null,A.onerror=null,A.onabort=null,A.ontimeout=null),m(h)}catch{}}function aI(){this.g=new $E}function cI(a,d,h){let m=h||"";try{Xp(a,function(A,S){let M=A;u(A)&&(M=kl(A)),d.push(m+S+"="+encodeURIComponent(M))})}catch(A){throw d.push(m+"type="+encodeURIComponent("_badmap")),A}}function fs(a){this.l=a.Ub||null,this.j=a.eb||!1}C(fs,Pl),fs.prototype.g=function(){return new na(this.l,this.j)},fs.prototype.i=function(a){return function(){return a}}({});function na(a,d){Xt.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(na,Xt),n=na.prototype,n.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,ps(this)},n.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||c).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ms(this)),this.readyState=0},n.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,ps(this)),this.g&&(this.readyState=3,ps(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;rg(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function rg(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}n.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?ms(this):ps(this),this.readyState==3&&rg(this)}},n.Ra=function(a){this.g&&(this.response=this.responseText=a,ms(this))},n.Qa=function(a){this.g&&(this.response=a,ms(this))},n.ga=function(){this.g&&ms(this)};function ms(a){a.readyState=4,a.l=null,a.j=null,a.v=null,ps(a)}n.setRequestHeader=function(a,d){this.u.append(a,d)},n.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],d=this.h.entries();for(var h=d.next();!h.done;)h=h.value,a.push(h[0]+": "+h[1]),h=d.next();return a.join(`\r
`)};function ps(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(na.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function sg(a){let d="";return Z(a,function(h,m){d+=m,d+=":",d+=h,d+=`\r
`}),d}function zl(a,d,h){t:{for(m in h){var m=!1;break t}m=!0}m||(h=sg(h),typeof a=="string"?h!=null&&encodeURIComponent(String(h)):bt(a,d,h))}function At(a){Xt.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(At,Xt);var lI=/^https?$/i,uI=["POST","PUT"];n=At.prototype,n.Ha=function(a){this.J=a},n.ea=function(a,d,h,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ml.g(),this.v=this.o?Np(this.o):Np(Ml),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(S){og(this,S);return}if(a=h||"",h=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var A in m)h.set(A,m[A]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let S of m.keys())h.set(S,m.get(S));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(h.keys()).find(S=>S.toLowerCase()=="content-type"),A=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(uI,d,void 0))||m||A||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[S,M]of h)this.g.setRequestHeader(S,M);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{lg(this),this.u=!0,this.g.send(a),this.u=!1}catch(S){og(this,S)}};function og(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,ag(a),ia(a)}function ag(a){a.A||(a.A=!0,ne(a,"complete"),ne(a,"error"))}n.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,ne(this,"complete"),ne(this,"abort"),ia(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ia(this,!0)),At.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?cg(this):this.bb())},n.bb=function(){cg(this)};function cg(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Je(a)!=4||a.Z()!=2)){if(a.u&&Je(a)==4)xp(a.Ea,0,a);else if(ne(a,"readystatechange"),Je(a)==4){a.h=!1;try{let M=a.Z();t:switch(M){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break t;default:d=!1}var h;if(!(h=d)){var m;if(m=M===0){var A=String(a.D).match(Jp)[1]||null;!A&&c.self&&c.self.location&&(A=c.self.location.protocol.slice(0,-1)),m=!lI.test(A?A.toLowerCase():"")}h=m}if(h)ne(a,"complete"),ne(a,"success");else{a.m=6;try{var S=2<Je(a)?a.g.statusText:""}catch{S=""}a.l=S+" ["+a.Z()+"]",ag(a)}}finally{ia(a)}}}}function ia(a,d){if(a.g){lg(a);let h=a.g,m=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||ne(a,"ready");try{h.onreadystatechange=m}catch{}}}function lg(a){a.I&&(c.clearTimeout(a.I),a.I=null)}n.isActive=function(){return!!this.g};function Je(a){return a.g?a.g.readyState:0}n.Z=function(){try{return 2<Je(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),zE(d)}};function ug(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function dI(a){let d={};a=(a.g&&2<=Je(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<a.length;m++){if(V(a[m]))continue;var h=T(a[m]);let A=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let S=d[A]||[];d[A]=S,S.push(h)}I(d,function(m){return m.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function gs(a,d,h){return h&&h.internalChannelParams&&h.internalChannelParams[a]||d}function dg(a){this.Aa=0,this.i=[],this.j=new cs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=gs("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=gs("baseRetryDelayMs",5e3,a),this.cb=gs("retryDelaySeedMs",1e4,a),this.Wa=gs("forwardChannelMaxRetries",2,a),this.wa=gs("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Wp(a&&a.concurrentRequestLimit),this.Da=new aI,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=dg.prototype,n.la=8,n.G=1,n.connect=function(a,d,h,m){ie(0),this.W=a,this.H=d||{},h&&m!==void 0&&(this.H.OSID=h,this.H.OAID=m),this.F=this.X,this.I=yg(this,null,this.W),sa(this)};function $l(a){if(hg(a),a.G==3){var d=a.U++,h=Xe(a.I);if(bt(h,"SID",a.K),bt(h,"RID",d),bt(h,"TYPE","terminate"),_s(a,h),d=new wn(a,a.j,d),d.L=2,d.v=ea(Xe(h)),h=!1,c.navigator&&c.navigator.sendBeacon)try{h=c.navigator.sendBeacon(d.v.toString(),"")}catch{}!h&&c.Image&&(new Image().src=d.v,h=!0),h||(d.g=wg(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Jo(d)}vg(a)}function ra(a){a.g&&(Hl(a),a.g.cancel(),a.g=null)}function hg(a){ra(a),a.u&&(c.clearTimeout(a.u),a.u=null),oa(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function sa(a){if(!Gp(a.h)&&!a.s){a.s=!0;var d=a.Ga;ts||Tp(),es||(ts(),es=!0),El.add(d,a),a.B=0}}function hI(a,d){return Kp(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=as(_(a.Ga,a,d),bg(a,a.B)),a.B++,!0)}n.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let A=new wn(this,this.j,a),S=this.o;if(this.S&&(S?(S=b(S),w(S,this.S)):S=this.S),this.m!==null||this.O||(A.H=S,S=null),this.P)t:{for(var d=0,h=0;h<this.i.length;h++){e:{var m=this.i[h];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break e}m=void 0}if(m===void 0)break;if(d+=m,4096<d){d=h;break t}if(d===4096||h===this.i.length-1){d=h+1;break t}}d=1e3}else d=1e3;d=mg(this,A,d),h=Xe(this.I),bt(h,"RID",a),bt(h,"CVER",22),this.D&&bt(h,"X-HTTP-Session-Id",this.D),_s(this,h),S&&(this.O?d="headers="+encodeURIComponent(String(sg(S)))+"&"+d:this.m&&zl(h,this.m,S)),Bl(this.h,A),this.Ua&&bt(h,"TYPE","init"),this.P?(bt(h,"$req",d),bt(h,"SID","null"),A.T=!0,Fl(A,h,null)):Fl(A,h,d),this.G=2}}else this.G==3&&(a?fg(this,a):this.i.length==0||Gp(this.h)||fg(this))};function fg(a,d){var h;d?h=d.l:h=a.U++;let m=Xe(a.I);bt(m,"SID",a.K),bt(m,"RID",h),bt(m,"AID",a.T),_s(a,m),a.m&&a.o&&zl(m,a.m,a.o),h=new wn(a,a.j,h,a.B+1),a.m===null&&(h.H=a.o),d&&(a.i=d.D.concat(a.i)),d=mg(a,h,1e3),h.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Bl(a.h,h),Fl(h,m,d)}function _s(a,d){a.H&&Z(a.H,function(h,m){bt(d,m,h)}),a.l&&Xp({},function(h,m){bt(d,m,h)})}function mg(a,d,h){h=Math.min(a.i.length,h);var m=a.l?_(a.l.Na,a.l,a):null;t:{var A=a.i;let S=-1;for(;;){let M=["count="+h];S==-1?0<h?(S=A[0].g,M.push("ofs="+S)):S=0:M.push("ofs="+S);let ft=!0;for(let qt=0;qt<h;qt++){let ot=A[qt].g,Jt=A[qt].map;if(ot-=S,0>ot)S=Math.max(0,A[qt].g-100),ft=!1;else try{cI(Jt,M,"req"+ot+"_")}catch{m&&m(Jt)}}if(ft){m=M.join("&");break t}}}return a=a.i.splice(0,h),d.D=a,m}function pg(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;ts||Tp(),es||(ts(),es=!0),El.add(d,a),a.v=0}}function ql(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=as(_(a.Fa,a),bg(a,a.v)),a.v++,!0)}n.Fa=function(){if(this.u=null,gg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=as(_(this.ab,this),a)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ie(10),ra(this),gg(this))};function Hl(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function gg(a){a.g=new wn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=Xe(a.qa);bt(d,"RID","rpc"),bt(d,"SID",a.K),bt(d,"AID",a.T),bt(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&bt(d,"TO",a.ja),bt(d,"TYPE","xmlhttp"),_s(a,d),a.m&&a.o&&zl(d,a.m,a.o),a.L&&(a.g.I=a.L);var h=a.g;a=a.ia,h.L=1,h.v=ea(Xe(d)),h.m=null,h.P=!0,$p(h,a)}n.Za=function(){this.C!=null&&(this.C=null,ra(this),ql(this),ie(19))};function oa(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function _g(a,d){var h=null;if(a.g==d){oa(a),Hl(a),a.g=null;var m=2}else if(jl(a.h,d))h=d.D,Yp(a.h,d),m=1;else return;if(a.G!=0){if(d.o)if(m==1){h=d.m?d.m.length:0,d=Date.now()-d.F;var A=a.B;m=Yo(),ne(m,new Up(m,h)),sa(a)}else pg(a);else if(A=d.s,A==3||A==0&&0<d.X||!(m==1&&hI(a,d)||m==2&&ql(a)))switch(h&&0<h.length&&(d=a.h,d.i=d.i.concat(h)),A){case 1:Jn(a,5);break;case 4:Jn(a,10);break;case 3:Jn(a,6);break;default:Jn(a,2)}}}function bg(a,d){let h=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(h*=2),h*d}function Jn(a,d){if(a.j.info("Error code "+d),d==2){var h=_(a.fb,a),m=a.Xa;let A=!m;m=new Xn(m||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Zo(m,"https"),ea(m),A?sI(m.toString(),h):oI(m.toString(),h)}else ie(2);a.G=0,a.l&&a.l.sa(d),vg(a),hg(a)}n.fb=function(a){a?(this.j.info("Successfully pinged google.com"),ie(2)):(this.j.info("Failed to ping google.com"),ie(1))};function vg(a){if(a.G=0,a.ka=[],a.l){let d=Qp(a.h);(d.length!=0||a.i.length!=0)&&(x(a.ka,d),x(a.ka,a.i),a.h.i.length=0,D(a.i),a.i.length=0),a.l.ra()}}function yg(a,d,h){var m=h instanceof Xn?Xe(h):new Xn(h);if(m.g!="")d&&(m.g=d+"."+m.g),ta(m,m.s);else{var A=c.location;m=A.protocol,d=d?d+"."+A.hostname:A.hostname,A=+A.port;var S=new Xn(null);m&&Zo(S,m),d&&(S.g=d),A&&ta(S,A),h&&(S.l=h),m=S}return h=a.D,d=a.ya,h&&d&&bt(m,h,d),bt(m,"VER",a.la),_s(a,m),m}function wg(a,d,h){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new At(new fs({eb:h})):new At(a.pa),d.Ha(a.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Eg(){}n=Eg.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function aa(){}aa.prototype.g=function(a,d){return new le(a,d)};function le(a,d){Xt.call(this),this.g=new dg(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!V(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!V(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new $i(this)}C(le,Xt),le.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},le.prototype.close=function(){$l(this.g)},le.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var h={};h.__data__=a,a=h}else this.u&&(h={},h.__data__=kl(a),a=h);d.i.push(new YE(d.Ya++,a)),d.G==3&&sa(d)},le.prototype.N=function(){this.g.l=null,delete this.j,$l(this.g),delete this.g,le.aa.N.call(this)};function Ig(a){Ol.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){t:{for(let h in d){a=h;break t}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}C(Ig,Ol);function Tg(){Nl.call(this),this.status=1}C(Tg,Nl);function $i(a){this.g=a}C($i,Eg),$i.prototype.ua=function(){ne(this.g,"a")},$i.prototype.ta=function(a){ne(this.g,new Ig(a))},$i.prototype.sa=function(a){ne(this.g,new Tg)},$i.prototype.ra=function(){ne(this.g,"b")},aa.prototype.createWebChannel=aa.prototype.g,le.prototype.send=le.prototype.o,le.prototype.open=le.prototype.m,le.prototype.close=le.prototype.close,_f=pn.createWebChannelTransport=function(){return new aa},gf=pn.getStatEventTarget=function(){return Yo()},pf=pn.Event=Yn,Rc=pn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Qo.NO_ERROR=0,Qo.TIMEOUT=8,Qo.HTTP_ERROR=6,To=pn.ErrorCode=Qo,jp.COMPLETE="complete",mf=pn.EventType=jp,Mp.EventType=ss,ss.OPEN="a",ss.CLOSE="b",ss.ERROR="c",ss.MESSAGE="d",Xt.prototype.listen=Xt.prototype.K,Cr=pn.WebChannel=Mp,ff=pn.FetchXmlHttpFactory=fs,At.prototype.listenOnce=At.prototype.L,At.prototype.getLastError=At.prototype.Ka,At.prototype.getLastErrorCode=At.prototype.Ba,At.prototype.getStatus=At.prototype.Z,At.prototype.getResponseJson=At.prototype.Oa,At.prototype.getResponseText=At.prototype.oa,At.prototype.send=At.prototype.ea,At.prototype.setWithCredentials=At.prototype.Ha,hf=pn.XhrIo=At}).apply(typeof Ac<"u"?Ac:typeof self<"u"?self:typeof window<"u"?window:{});var Wy="@firebase/firestore";var $t=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};$t.UNAUTHENTICATED=new $t(null),$t.GOOGLE_CREDENTIALS=new $t("google-credentials-uid"),$t.FIRST_PARTY=new $t("first-party-uid"),$t.MOCK_USER=new $t("mock-user");var Qr="10.12.1";var Pi=new Mn("@firebase/firestore");function Ao(){return Pi.logLevel}function j(n,...t){if(Pi.logLevel<=et.DEBUG){let e=t.map(np);Pi.debug(`Firestore (${Qr}): ${n}`,...e)}}function _n(n,...t){if(Pi.logLevel<=et.ERROR){let e=t.map(np);Pi.error(`Firestore (${Qr}): ${n}`,...e)}}function Mr(n,...t){if(Pi.logLevel<=et.WARN){let e=t.map(np);Pi.warn(`Firestore (${Qr}): ${n}`,...e)}}function np(n){if(typeof n=="string")return n;try{return function(e){return JSON.stringify(e)}(n)}catch{return n}}function G(n="Unexpected state"){let t=`FIRESTORE (${Qr}) INTERNAL ASSERTION FAILED: `+n;throw _n(t),new Error(t)}function gt(n,t){n||G()}function Y(n,t){return n}var P={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},F=class extends re{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Pe=class{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}};var kc=class{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}},Ef=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e($t.UNAUTHENTICATED))}shutdown(){}},If=class{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}},Tf=class{constructor(t){this.t=t,this.currentUser=$t.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let i=this.i,r=l=>this.i!==i?(i=this.i,e(l)):Promise.resolve(),s=new Pe;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Pe,t.enqueueRetryable(()=>r(this.currentUser))};let o=()=>{let l=s;t.enqueueRetryable(()=>g(this,null,function*(){yield l.promise,yield r(this.currentUser)}))},c=l=>{j("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>c(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?c(l):(j("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Pe)}},0),o()}getToken(){let t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(j("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(gt(typeof i.accessToken=="string"),new kc(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let t=this.auth&&this.auth.getUid();return gt(t===null||typeof t=="string"),new $t(t)}},Af=class{constructor(t,e,i){this.l=t,this.h=e,this.P=i,this.type="FirstParty",this.user=$t.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Rf=class{constructor(t,e,i){this.l=t,this.h=e,this.P=i}getToken(){return Promise.resolve(new Af(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable(()=>e($t.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Sf=class{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Cf=class{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){let i=s=>{s.error!=null&&j("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,j("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?e(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};let r=s=>{j("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?r(s):j("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(gt(typeof e.token=="string"),this.R=e.token,new Sf(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function gk(n){let t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}var Pc=class{static newId(){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,i="";for(;i.length<20;){let r=gk(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<e&&(i+=t.charAt(r[s]%t.length))}return i}};function at(n,t){return n<t?-1:n>t?1:0}function Lr(n,t,e){return n.length===t.length&&n.every((i,r)=>e(i,t[r]))}var Yt=class n{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new F(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new F(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new F(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new F(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return n.fromMillis(Date.now())}static fromDate(t){return n.fromMillis(t.getTime())}static fromMillis(t){let e=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*e));return new n(e,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?at(this.nanoseconds,t.nanoseconds):at(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var Q=class n{constructor(t){this.timestamp=t}static fromTimestamp(t){return new n(t)}static min(){return new n(new Yt(0,0))}static max(){return new n(new Yt(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Oc=class n{constructor(t,e,i){e===void 0?e=0:e>t.length&&G(),i===void 0?i=t.length-e:i>t.length-e&&G(),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return n.comparator(this,t)===0}child(t){let e=this.segments.slice(this.offset,this.limit());return t instanceof n?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){let i=Math.min(t.length,e.length);for(let r=0;r<i;r++){let s=t.get(r),o=e.get(r);if(s<o)return-1;if(s>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0}},Tt=class n extends Oc{construct(t,e,i){return new n(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){let e=[];for(let i of t){if(i.indexOf("//")>=0)throw new F(P.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(r=>r.length>0))}return new n(e)}static emptyPath(){return new n([])}},_k=/^[_a-zA-Z][_a-zA-Z0-9]*$/,me=class n extends Oc{construct(t,e,i){return new n(t,e,i)}static isValidIdentifier(t){return _k.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(t){let e=[],i="",r=0,s=()=>{if(i.length===0)throw new F(P.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""},o=!1;for(;r<t.length;){let c=t[r];if(c==="\\"){if(r+1===t.length)throw new F(P.INVALID_ARGUMENT,"Path has trailing escape character: "+t);let l=t[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new F(P.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=l,r+=2}else c==="`"?(o=!o,r++):c!=="."||o?(i+=c,r++):(s(),r++)}if(s(),o)throw new F(P.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new n(e)}static emptyPath(){return new n([])}};var $=class n{constructor(t){this.path=t}static fromPath(t){return new n(Tt.fromString(t))}static fromName(t){return new n(Tt.fromString(t).popFirst(5))}static empty(){return new n(Tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Tt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return Tt.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new n(new Tt(t.slice()))}};var Df=class{constructor(t,e,i,r){this.indexId=t,this.collectionGroup=e,this.fields=i,this.indexState=r}};Df.UNKNOWN_ID=-1;function bk(n,t){let e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Q.fromTimestamp(i===1e9?new Yt(e+1,0):new Yt(e,i));return new Oi(r,$.empty(),t)}function vk(n){return new Oi(n.readTime,n.key,-1)}var Oi=class n{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new n(Q.min(),$.empty(),-1)}static max(){return new n(Q.max(),$.empty(),-1)}};function yk(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=$.comparator(n.documentKey,t.documentKey),e!==0?e:at(n.largestBatchId,t.largestBatchId))}var wk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",xf=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}};function Bo(n){return g(this,null,function*(){if(n.code!==P.FAILED_PRECONDITION||n.message!==wk)throw n;j("LocalStore","Unexpectedly lost primary lease")})}var O=class n{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&G(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new n((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(e,s).next(i,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{let e=t();return e instanceof n?e:n.resolve(e)}catch(e){return n.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):n.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):n.reject(e)}static resolve(t){return new n((e,i)=>{e(t)})}static reject(t){return new n((e,i)=>{i(t)})}static waitFor(t){return new n((e,i)=>{let r=0,s=0,o=!1;t.forEach(c=>{++r,c.next(()=>{++s,o&&s===r&&e()},l=>i(l))}),o=!0,s===r&&e()})}static or(t){let e=n.resolve(!1);for(let i of t)e=e.next(r=>r?n.resolve(r):i());return e}static forEach(t,e){let i=[];return t.forEach((r,s)=>{i.push(e.call(this,r,s))}),this.waitFor(i)}static mapArray(t,e){return new n((i,r)=>{let s=t.length,o=new Array(s),c=0;for(let l=0;l<s;l++){let u=l;e(t[u]).next(f=>{o[u]=f,++c,c===s&&i(o)},f=>r(f))}})}static doWhile(t,e){return new n((i,r)=>{let s=()=>{t()===!0?e().next(()=>{s()},r):i()};s()})}};function Ek(n){let t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function zo(n){return n.name==="IndexedDbTransactionError"}var Iw=(()=>{class n{constructor(e,i){this.previousValue=e,i&&(i.sequenceNumberHandler=r=>this.ie(r),this.se=r=>i.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.se&&this.se(e),e}}return n.oe=-1,n})();function hl(n){return n==null}function ko(n){return n===0&&1/n==-1/0}function Ik(n){return typeof n=="number"&&Number.isInteger(n)&&!ko(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var Tk=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],RV=[...Tk,"documentOverlays"],Ak=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Rk=Ak,SV=[...Rk,"indexConfiguration","indexState","indexEntries"];function Gy(n){let t=0;for(let e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function Vi(n,t){for(let e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function Tw(n){for(let t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}var Ct=class n{constructor(t,e){this.comparator=t,this.root=e||qe.EMPTY}insert(t,e){return new n(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,qe.BLACK,null,null))}remove(t){return new n(this.comparator,this.root.remove(t,this.comparator).copy(null,null,qe.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){let i=this.comparator(t,e.key);if(i===0)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(t,i.key);if(r===0)return e+i.left.size;r<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){let t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Pr(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Pr(this.root,t,this.comparator,!1)}getReverseIterator(){return new Pr(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Pr(this.root,t,this.comparator,!0)}},Pr=class{constructor(t,e,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?i(t.key,e):1,e&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}},qe=class n{constructor(t,e,i,r,s){this.key=t,this.value=e,this.color=i??n.RED,this.left=r??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,r,s){return new n(t??this.key,e??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let r=this,s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,e,i),null):s===0?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),e(t,r.key)===0){if(r.right.isEmpty())return n.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){let t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){let t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){let t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){let t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw G();let t=this.left.check();if(t!==this.right.check())throw G();return t+(this.isRed()?0:1)}};qe.EMPTY=null,qe.RED=!0,qe.BLACK=!1;qe.EMPTY=new class{constructor(){this.size=0}get key(){throw G()}get value(){throw G()}get color(){throw G()}get left(){throw G()}get right(){throw G()}copy(t,e,i,r,s){return this}insert(t,e,i){return new qe(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var ee=class n{constructor(t){this.comparator=t,this.data=new Ct(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){let i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let i;for(i=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){let e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Nc(this.data.getIterator())}getIteratorFrom(t){return new Nc(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof n)||this.size!==t.size)return!1;let e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){let r=e.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){let t=[];return this.forEach(e=>{t.push(e)}),t}toString(){let t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){let e=new n(this.comparator);return e.data=t,e}},Nc=class{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Te=class n{constructor(t){this.fields=t,t.sort(me.comparator)}static empty(){return new n([])}unionWith(t){let e=new ee(me.comparator);for(let i of this.fields)e=e.add(i);for(let i of t)e=e.add(i);return new n(e.toArray())}covers(t){for(let e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Lr(this.fields,t.fields,(e,i)=>e.isEqual(i))}};var Mc=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var oe=class n{constructor(t){this.binaryString=t}static fromBase64String(t){let e=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Mc("Invalid base64 string: "+s):s}}(t);return new n(e)}static fromUint8Array(t){let e=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(t);return new n(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){let i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return at(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}};oe.EMPTY_BYTE_STRING=new oe("");var Sk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bn(n){if(gt(!!n),typeof n=="string"){let t=0,e=Sk.exec(n);if(gt(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}let i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:St(n.seconds),nanos:St(n.nanos)}}function St(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function qn(n){return typeof n=="string"?oe.fromBase64String(n):oe.fromUint8Array(n)}function ip(n){var t,e;return((e=(((t=n?.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||e===void 0?void 0:e.stringValue)==="server_timestamp"}function rp(n){let t=n.mapValue.fields.__previous_value__;return ip(t)?rp(t):t}function Po(n){let t=bn(n.mapValue.fields.__local_write_time__.timestampValue);return new Yt(t.seconds,t.nanos)}var kf=class{constructor(t,e,i,r,s,o,c,l,u){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=u}},Lc=class n{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof n&&t.projectId===this.projectId&&t.database===this.database}};var Sc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ni(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ip(n)?4:Aw(n)?9007199254740991:10:G()}function Ge(n,t){if(n===t)return!0;let e=Ni(n);if(e!==Ni(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return Po(n).isEqual(Po(t));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;let o=bn(r.timestampValue),c=bn(s.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(r,s){return qn(r.bytesValue).isEqual(qn(s.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(r,s){return St(r.geoPointValue.latitude)===St(s.geoPointValue.latitude)&&St(r.geoPointValue.longitude)===St(s.geoPointValue.longitude)}(n,t);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return St(r.integerValue)===St(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){let o=St(r.doubleValue),c=St(s.doubleValue);return o===c?ko(o)===ko(c):isNaN(o)&&isNaN(c)}return!1}(n,t);case 9:return Lr(n.arrayValue.values||[],t.arrayValue.values||[],Ge);case 10:return function(r,s){let o=r.mapValue.fields||{},c=s.mapValue.fields||{};if(Gy(o)!==Gy(c))return!1;for(let l in o)if(o.hasOwnProperty(l)&&(c[l]===void 0||!Ge(o[l],c[l])))return!1;return!0}(n,t);default:return G()}}function Oo(n,t){return(n.values||[]).find(e=>Ge(e,t))!==void 0}function Fr(n,t){if(n===t)return 0;let e=Ni(n),i=Ni(t);if(e!==i)return at(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return at(n.booleanValue,t.booleanValue);case 2:return function(s,o){let c=St(s.integerValue||s.doubleValue),l=St(o.integerValue||o.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1}(n,t);case 3:return Ky(n.timestampValue,t.timestampValue);case 4:return Ky(Po(n),Po(t));case 5:return at(n.stringValue,t.stringValue);case 6:return function(s,o){let c=qn(s),l=qn(o);return c.compareTo(l)}(n.bytesValue,t.bytesValue);case 7:return function(s,o){let c=s.split("/"),l=o.split("/");for(let u=0;u<c.length&&u<l.length;u++){let f=at(c[u],l[u]);if(f!==0)return f}return at(c.length,l.length)}(n.referenceValue,t.referenceValue);case 8:return function(s,o){let c=at(St(s.latitude),St(o.latitude));return c!==0?c:at(St(s.longitude),St(o.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return function(s,o){let c=s.values||[],l=o.values||[];for(let u=0;u<c.length&&u<l.length;++u){let f=Fr(c[u],l[u]);if(f)return f}return at(c.length,l.length)}(n.arrayValue,t.arrayValue);case 10:return function(s,o){if(s===Sc.mapValue&&o===Sc.mapValue)return 0;if(s===Sc.mapValue)return 1;if(o===Sc.mapValue)return-1;let c=s.fields||{},l=Object.keys(c),u=o.fields||{},f=Object.keys(u);l.sort(),f.sort();for(let p=0;p<l.length&&p<f.length;++p){let _=at(l[p],f[p]);if(_!==0)return _;let E=Fr(c[l[p]],u[f[p]]);if(E!==0)return E}return at(l.length,f.length)}(n.mapValue,t.mapValue);default:throw G()}}function Ky(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return at(n,t);let e=bn(n),i=bn(t),r=at(e.seconds,i.seconds);return r!==0?r:at(e.nanos,i.nanos)}function Vr(n){return Pf(n)}function Pf(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(e){let i=bn(e);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(e){return qn(e).toBase64()}(n.bytesValue):"referenceValue"in n?function(e){return $.fromName(e).toString()}(n.referenceValue):"geoPointValue"in n?function(e){return`geo(${e.latitude},${e.longitude})`}(n.geoPointValue):"arrayValue"in n?function(e){let i="[",r=!0;for(let s of e.values||[])r?r=!1:i+=",",i+=Pf(s);return i+"]"}(n.arrayValue):"mapValue"in n?function(e){let i=Object.keys(e.fields||{}).sort(),r="{",s=!0;for(let o of i)s?s=!1:r+=",",r+=`${o}:${Pf(e.fields[o])}`;return r+"}"}(n.mapValue):G()}function Yy(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function Of(n){return!!n&&"integerValue"in n}function sp(n){return!!n&&"arrayValue"in n}function Qy(n){return!!n&&"nullValue"in n}function Xy(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Dc(n){return!!n&&"mapValue"in n}function So(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let t={mapValue:{fields:{}}};return Vi(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=So(i)),t}if(n.arrayValue){let t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=So(n.arrayValue.values[e]);return t}return Object.assign({},n)}function Aw(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var fe=class n{constructor(t){this.value=t}static empty(){return new n({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!Dc(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=So(e)}setAll(t){let e=me.emptyPath(),i={},r=[];t.forEach((o,c)=>{if(!e.isImmediateParentOf(c)){let l=this.getFieldsMap(e);this.applyChanges(l,i,r),i={},r=[],e=c.popLast()}o?i[c.lastSegment()]=So(o):r.push(c.lastSegment())});let s=this.getFieldsMap(e);this.applyChanges(s,i,r)}delete(t){let e=this.field(t.popLast());Dc(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Ge(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=e.mapValue.fields[t.get(i)];Dc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,i){Vi(e,(r,s)=>t[r]=s);for(let r of i)delete t[r]}clone(){return new n(So(this.value))}};function Rw(n){let t=[];return Vi(n.fields,(e,i)=>{let r=new me([e]);if(Dc(i)){let s=Rw(i.mapValue).fields;if(s.length===0)t.push(r);else for(let o of s)t.push(r.child(o))}else t.push(r)}),new Te(t)}var Oe=class n{constructor(t,e,i,r,s,o,c){this.key=t,this.documentType=e,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=c}static newInvalidDocument(t){return new n(t,0,Q.min(),Q.min(),Q.min(),fe.empty(),0)}static newFoundDocument(t,e,i,r){return new n(t,1,e,Q.min(),i,r,0)}static newNoDocument(t,e){return new n(t,2,e,Q.min(),Q.min(),fe.empty(),0)}static newUnknownDocument(t,e){return new n(t,3,e,Q.min(),Q.min(),fe.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Q.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=fe.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=fe.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Q.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof n&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ur=class{constructor(t,e){this.position=t,this.inclusive=e}};function Jy(n,t,e){let i=0;for(let r=0;r<n.position.length;r++){let s=t[r],o=n.position[r];if(s.field.isKeyField()?i=$.comparator($.fromName(o.referenceValue),e.key):i=Fr(o,e.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function Zy(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!Ge(n.position[e],t.position[e]))return!1;return!0}var jr=class{constructor(t,e="asc"){this.field=t,this.dir=e}};function Ck(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}var Fc=class{},Vt=class n extends Fc{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,i):new Mf(t,e,i):e==="array-contains"?new Vf(t,i):e==="in"?new Uf(t,i):e==="not-in"?new jf(t,i):e==="array-contains-any"?new Bf(t,i):new n(t,e,i)}static createKeyFieldInFilter(t,e,i){return e==="in"?new Lf(t,i):new Ff(t,i)}matches(t){let e=t.data.field(this.field);return this.op==="!="?e!==null&&this.matchesComparison(Fr(e,this.value)):e!==null&&Ni(this.value)===Ni(e)&&this.matchesComparison(Fr(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return G()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Ne=class n extends Fc{constructor(t,e){super(),this.filters=t,this.op=e,this.ae=null}static create(t,e){return new n(t,e)}matches(t){return Sw(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Sw(n){return n.op==="and"}function Cw(n){return Dk(n)&&Sw(n)}function Dk(n){for(let t of n.filters)if(t instanceof Ne)return!1;return!0}function Nf(n){if(n instanceof Vt)return n.field.canonicalString()+n.op.toString()+Vr(n.value);if(Cw(n))return n.filters.map(t=>Nf(t)).join(",");{let t=n.filters.map(e=>Nf(e)).join(",");return`${n.op}(${t})`}}function Dw(n,t){return n instanceof Vt?function(i,r){return r instanceof Vt&&i.op===r.op&&i.field.isEqual(r.field)&&Ge(i.value,r.value)}(n,t):n instanceof Ne?function(i,r){return r instanceof Ne&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,c)=>s&&Dw(o,r.filters[c]),!0):!1}(n,t):void G()}function xw(n){return n instanceof Vt?function(e){return`${e.field.canonicalString()} ${e.op} ${Vr(e.value)}`}(n):n instanceof Ne?function(e){return e.op.toString()+" {"+e.getFilters().map(xw).join(" ,")+"}"}(n):"Filter"}var Mf=class extends Vt{constructor(t,e,i){super(t,e,i),this.key=$.fromName(i.referenceValue)}matches(t){let e=$.comparator(t.key,this.key);return this.matchesComparison(e)}},Lf=class extends Vt{constructor(t,e){super(t,"in",e),this.keys=kw("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}},Ff=class extends Vt{constructor(t,e){super(t,"not-in",e),this.keys=kw("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}};function kw(n,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(i=>$.fromName(i.referenceValue))}var Vf=class extends Vt{constructor(t,e){super(t,"array-contains",e)}matches(t){let e=t.data.field(this.field);return sp(e)&&Oo(e.arrayValue,this.value)}},Uf=class extends Vt{constructor(t,e){super(t,"in",e)}matches(t){let e=t.data.field(this.field);return e!==null&&Oo(this.value.arrayValue,e)}},jf=class extends Vt{constructor(t,e){super(t,"not-in",e)}matches(t){if(Oo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let e=t.data.field(this.field);return e!==null&&!Oo(this.value.arrayValue,e)}},Bf=class extends Vt{constructor(t,e){super(t,"array-contains-any",e)}matches(t){let e=t.data.field(this.field);return!(!sp(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>Oo(this.value.arrayValue,i))}};var zf=class{constructor(t,e=null,i=[],r=[],s=null,o=null,c=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=c,this.ue=null}};function tw(n,t=null,e=[],i=[],r=null,s=null,o=null){return new zf(n,t,e,i,r,s,o)}function op(n){let t=Y(n);if(t.ue===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>Nf(i)).join(","),e+="|ob:",e+=t.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),hl(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>Vr(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>Vr(i)).join(",")),t.ue=e}return t.ue}function ap(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!Ck(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!Dw(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!Zy(n.startAt,t.startAt)&&Zy(n.endAt,t.endAt)}function $f(n){return $.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Mi=class{constructor(t,e=null,i=[],r=[],s=null,o="F",c=null,l=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=c,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function xk(n,t,e,i,r,s,o,c){return new Mi(n,t,e,i,r,s,o,c)}function cp(n){return new Mi(n)}function ew(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Pw(n){return n.collectionGroup!==null}function Co(n){let t=Y(n);if(t.ce===null){t.ce=[];let e=new Set;for(let s of t.explicitOrderBy)t.ce.push(s),e.add(s.field.canonicalString());let i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new ee(me.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(c=c.add(u.field))})}),c})(t).forEach(s=>{e.has(s.canonicalString())||s.isKeyField()||t.ce.push(new jr(s,i))}),e.has(me.keyField().canonicalString())||t.ce.push(new jr(me.keyField(),i))}return t.ce}function He(n){let t=Y(n);return t.le||(t.le=kk(t,Co(n))),t.le}function kk(n,t){if(n.limitType==="F")return tw(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(r=>{let s=r.dir==="desc"?"asc":"desc";return new jr(r.field,s)});let e=n.endAt?new Ur(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Ur(n.startAt.position,n.startAt.inclusive):null;return tw(n.path,n.collectionGroup,t,n.filters,n.limit,e,i)}}function qf(n,t){let e=n.filters.concat([t]);return new Mi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function Hf(n,t,e){return new Mi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function fl(n,t){return ap(He(n),He(t))&&n.limitType===t.limitType}function Ow(n){return`${op(He(n))}|lt:${n.limitType}`}function Dr(n){return`Query(target=${function(e){let i=e.path.canonicalString();return e.collectionGroup!==null&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map(r=>xw(r)).join(", ")}]`),hl(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map(r=>Vr(r)).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map(r=>Vr(r)).join(",")),`Target(${i})`}(He(n))}; limitType=${n.limitType})`}function ml(n,t){return t.isFoundDocument()&&function(i,r){let s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):$.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(n,t)&&function(i,r){for(let s of Co(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(n,t)&&function(i,r){for(let s of i.filters)if(!s.matches(r))return!1;return!0}(n,t)&&function(i,r){return!(i.startAt&&!function(o,c,l){let u=Jy(o,c,l);return o.inclusive?u<=0:u<0}(i.startAt,Co(i),r)||i.endAt&&!function(o,c,l){let u=Jy(o,c,l);return o.inclusive?u>=0:u>0}(i.endAt,Co(i),r))}(n,t)}function Pk(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Nw(n){return(t,e)=>{let i=!1;for(let r of Co(n)){let s=Ok(r,t,e);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function Ok(n,t,e){let i=n.field.isKeyField()?$.comparator(t.key,e.key):function(s,o,c){let l=o.data.field(s),u=c.data.field(s);return l!==null&&u!==null?Fr(l,u):G()}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return G()}}var Hn=class{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){let e=this.mapKeyFn(t),i=this.inner[e];if(i!==void 0){for(let[r,s]of i)if(this.equalsFn(r,t))return s}}has(t){return this.get(t)!==void 0}set(t,e){let i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return this.inner[i]=[[t,e]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){let e=this.mapKeyFn(t),i=this.inner[e];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[e]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Vi(this.inner,(e,i)=>{for(let[r,s]of i)t(r,s)})}isEmpty(){return Tw(this.inner)}size(){return this.innerSize}};var Nk=new Ct($.comparator);function vn(){return Nk}var Mw=new Ct($.comparator);function Ro(...n){let t=Mw;for(let e of n)t=t.insert(e.key,e);return t}function Lw(n){let t=Mw;return n.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function Di(){return Do()}function Fw(){return Do()}function Do(){return new Hn(n=>n.toString(),(n,t)=>n.isEqual(t))}var Mk=new Ct($.comparator),Lk=new ee($.comparator);function nt(...n){let t=Lk;for(let e of n)t=t.add(e);return t}var Fk=new ee(at);function Vk(){return Fk}function Vw(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ko(t)?"-0":t}}function Uw(n){return{integerValue:""+n}}function Uk(n,t){return Ik(t)?Uw(t):Vw(n,t)}var Br=class{constructor(){this._=void 0}};function jk(n,t,e){return n instanceof zr?function(r,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&ip(s)&&(s=rp(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(e,t):n instanceof Wn?Bw(n,t):n instanceof Li?zw(n,t):function(r,s){let o=jw(r,s),c=nw(o)+nw(r.Pe);return Of(o)&&Of(r.Pe)?Uw(c):Vw(r.serializer,c)}(n,t)}function Bk(n,t,e){return n instanceof Wn?Bw(n,t):n instanceof Li?zw(n,t):e}function jw(n,t){return n instanceof $r?function(i){return Of(i)||function(s){return!!s&&"doubleValue"in s}(i)}(t)?t:{integerValue:0}:null}var zr=class extends Br{},Wn=class extends Br{constructor(t){super(),this.elements=t}};function Bw(n,t){let e=$w(t);for(let i of n.elements)e.some(r=>Ge(r,i))||e.push(i);return{arrayValue:{values:e}}}var Li=class extends Br{constructor(t){super(),this.elements=t}};function zw(n,t){let e=$w(t);for(let i of n.elements)e=e.filter(r=>!Ge(r,i));return{arrayValue:{values:e}}}var $r=class extends Br{constructor(t,e){super(),this.serializer=t,this.Pe=e}};function nw(n){return St(n.integerValue||n.doubleValue)}function $w(n){return sp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var Wf=class{constructor(t,e){this.field=t,this.transform=e}};function zk(n,t){return n.field.isEqual(t.field)&&function(i,r){return i instanceof Wn&&r instanceof Wn||i instanceof Li&&r instanceof Li?Lr(i.elements,r.elements,Ge):i instanceof $r&&r instanceof $r?Ge(i.Pe,r.Pe):i instanceof zr&&r instanceof zr}(n.transform,t.transform)}var Gf=class{constructor(t,e){this.version=t,this.transformResults=e}},gn=class n{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new n}static exists(t){return new n(void 0,t)}static updateTime(t){return new n(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}};function xc(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}var qr=class{};function qw(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new Vc(n.key,gn.none()):new Fi(n.key,n.data,gn.none());{let e=n.data,i=fe.empty(),r=new ee(me.comparator);for(let s of t.fields)if(!r.has(s)){let o=e.field(s);o===null&&s.length>1&&(s=s.popLast(),o=e.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new Ke(n.key,i,new Te(r.toArray()),gn.none())}}function $k(n,t,e){n instanceof Fi?function(r,s,o){let c=r.value.clone(),l=rw(r.fieldTransforms,s,o.transformResults);c.setAll(l),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,t,e):n instanceof Ke?function(r,s,o){if(!xc(r.precondition,s))return void s.convertToUnknownDocument(o.version);let c=rw(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(Hw(r)),l.setAll(c),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,t,e):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,e)}function xo(n,t,e,i){return n instanceof Fi?function(s,o,c,l){if(!xc(s.precondition,o))return c;let u=s.value.clone(),f=sw(s.fieldTransforms,l,o);return u.setAll(f),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(n,t,e,i):n instanceof Ke?function(s,o,c,l){if(!xc(s.precondition,o))return c;let u=sw(s.fieldTransforms,l,o),f=o.data;return f.setAll(Hw(s)),f.setAll(u),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(n,t,e,i):function(s,o,c){return xc(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(n,t,e)}function qk(n,t){let e=null;for(let i of n.fieldTransforms){let r=t.data.field(i.field),s=jw(i.transform,r||null);s!=null&&(e===null&&(e=fe.empty()),e.set(i.field,s))}return e||null}function iw(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Lr(i,r,(s,o)=>zk(s,o))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}var Fi=class extends qr{constructor(t,e,i,r=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},Ke=class extends qr{constructor(t,e,i,r,s=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function Hw(n){let t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){let i=n.data.field(e);t.set(e,i)}}),t}function rw(n,t,e){let i=new Map;gt(n.length===e.length);for(let r=0;r<e.length;r++){let s=n[r],o=s.transform,c=t.data.field(s.field);i.set(s.field,Bk(o,c,e[r]))}return i}function sw(n,t,e){let i=new Map;for(let r of n){let s=r.transform,o=e.data.field(r.field);i.set(r.field,jk(s,o,t))}return i}var Vc=class extends qr{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Kf=class extends qr{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Yf=class{constructor(t,e,i,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,e){let i=e.mutationResults;for(let r=0;r<this.mutations.length;r++){let s=this.mutations[r];s.key.isEqual(t.key)&&$k(s,t,i[r])}}applyToLocalView(t,e){for(let i of this.baseMutations)i.key.isEqual(t.key)&&(e=xo(i,t,e,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(t.key)&&(e=xo(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){let i=Fw();return this.mutations.forEach(r=>{let s=t.get(r.key),o=s.overlayedDocument,c=this.applyToLocalView(o,s.mutatedFields);c=e.has(r.key)?null:c;let l=qw(o,c);l!==null&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(Q.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),nt())}isEqual(t){return this.batchId===t.batchId&&Lr(this.mutations,t.mutations,(e,i)=>iw(e,i))&&Lr(this.baseMutations,t.baseMutations,(e,i)=>iw(e,i))}},Qf=class n{constructor(t,e,i,r){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=r}static from(t,e,i){gt(t.mutations.length===i.length);let r=function(){return Mk}(),s=t.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new n(t,e,i,r)}};var Xf=class{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Jf=class{constructor(t,e){this.count=t,this.unchangedNames=e}};var Lt,rt;function Hk(n){switch(n){default:return G();case P.CANCELLED:case P.UNKNOWN:case P.DEADLINE_EXCEEDED:case P.RESOURCE_EXHAUSTED:case P.INTERNAL:case P.UNAVAILABLE:case P.UNAUTHENTICATED:return!1;case P.INVALID_ARGUMENT:case P.NOT_FOUND:case P.ALREADY_EXISTS:case P.PERMISSION_DENIED:case P.FAILED_PRECONDITION:case P.ABORTED:case P.OUT_OF_RANGE:case P.UNIMPLEMENTED:case P.DATA_LOSS:return!0}}function Ww(n){if(n===void 0)return _n("GRPC error has no .code"),P.UNKNOWN;switch(n){case Lt.OK:return P.OK;case Lt.CANCELLED:return P.CANCELLED;case Lt.UNKNOWN:return P.UNKNOWN;case Lt.DEADLINE_EXCEEDED:return P.DEADLINE_EXCEEDED;case Lt.RESOURCE_EXHAUSTED:return P.RESOURCE_EXHAUSTED;case Lt.INTERNAL:return P.INTERNAL;case Lt.UNAVAILABLE:return P.UNAVAILABLE;case Lt.UNAUTHENTICATED:return P.UNAUTHENTICATED;case Lt.INVALID_ARGUMENT:return P.INVALID_ARGUMENT;case Lt.NOT_FOUND:return P.NOT_FOUND;case Lt.ALREADY_EXISTS:return P.ALREADY_EXISTS;case Lt.PERMISSION_DENIED:return P.PERMISSION_DENIED;case Lt.FAILED_PRECONDITION:return P.FAILED_PRECONDITION;case Lt.ABORTED:return P.ABORTED;case Lt.OUT_OF_RANGE:return P.OUT_OF_RANGE;case Lt.UNIMPLEMENTED:return P.UNIMPLEMENTED;case Lt.DATA_LOSS:return P.DATA_LOSS;default:return G()}}(rt=Lt||(Lt={}))[rt.OK=0]="OK",rt[rt.CANCELLED=1]="CANCELLED",rt[rt.UNKNOWN=2]="UNKNOWN",rt[rt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rt[rt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rt[rt.NOT_FOUND=5]="NOT_FOUND",rt[rt.ALREADY_EXISTS=6]="ALREADY_EXISTS",rt[rt.PERMISSION_DENIED=7]="PERMISSION_DENIED",rt[rt.UNAUTHENTICATED=16]="UNAUTHENTICATED",rt[rt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rt[rt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rt[rt.ABORTED=10]="ABORTED",rt[rt.OUT_OF_RANGE=11]="OUT_OF_RANGE",rt[rt.UNIMPLEMENTED=12]="UNIMPLEMENTED",rt[rt.INTERNAL=13]="INTERNAL",rt[rt.UNAVAILABLE=14]="UNAVAILABLE",rt[rt.DATA_LOSS=15]="DATA_LOSS";var ow=null;function Wk(){return new TextEncoder}var Gk=new zn([4294967295,4294967295],0);function aw(n){let t=Wk().encode(n),e=new df;return e.update(t),new Uint8Array(e.digest())}function cw(n){let t=new DataView(n.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new zn([e,i],0),new zn([r,s],0)]}var Zf=class n{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new xi(`Invalid padding: ${e}`);if(i<0)throw new xi(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new xi(`Invalid hash count: ${i}`);if(t.length===0&&e!==0)throw new xi(`Invalid padding when bitmap length is 0: ${e}`);this.Ie=8*t.length-e,this.Te=zn.fromNumber(this.Ie)}Ee(t,e,i){let r=t.add(e.multiply(zn.fromNumber(i)));return r.compare(Gk)===1&&(r=new zn([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;let e=aw(t),[i,r]=cw(e);for(let s=0;s<this.hashCount;s++){let o=this.Ee(i,r,s);if(!this.de(o))return!1}return!0}static create(t,e,i){let r=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new n(s,r,e);return i.forEach(c=>o.insert(c)),o}insert(t){if(this.Ie===0)return;let e=aw(t),[i,r]=cw(e);for(let s=0;s<this.hashCount;s++){let o=this.Ee(i,r,s);this.Ae(o)}}Ae(t){let e=Math.floor(t/8),i=t%8;this.bitmap[e]|=1<<i}},xi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Uc=class n{constructor(t,e,i,r,s){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,e,i){let r=new Map;return r.set(t,No.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new n(Q.min(),r,new Ct(at),vn(),nt())}},No=class n{constructor(t,e,i,r,s){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new n(i,e,nt(),nt(),nt())}};var Or=class{constructor(t,e,i,r){this.Re=t,this.removedTargetIds=e,this.key=i,this.Ve=r}},jc=class{constructor(t,e){this.targetId=t,this.me=e}},Bc=class{constructor(t,e,i=oe.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=r}},zc=class{constructor(){this.fe=0,this.ge=uw(),this.pe=oe.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}Ce(){let t=nt(),e=nt(),i=nt();return this.ge.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:i=i.add(r);break;default:G()}}),new No(this.pe,this.ye,t,e,i)}ve(){this.we=!1,this.ge=uw()}Fe(t,e){this.we=!0,this.ge=this.ge.insert(t,e)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,gt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},tm=class{constructor(t){this.Le=t,this.Be=new Map,this.ke=vn(),this.qe=lw(),this.Qe=new Ct(at)}Ke(t){for(let e of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(e,t.Ve):this.Ue(e,t.key,t.Ve);for(let e of t.removedTargetIds)this.Ue(e,t.key,t.Ve)}We(t){this.forEachTarget(t,e=>{let i=this.Ge(e);switch(t.state){case 0:this.ze(e)&&i.De(t.resumeToken);break;case 1:i.Oe(),i.Se||i.ve(),i.De(t.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(e);break;case 3:this.ze(e)&&(i.Ne(),i.De(t.resumeToken));break;case 4:this.ze(e)&&(this.je(e),i.De(t.resumeToken));break;default:G()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Be.forEach((i,r)=>{this.ze(r)&&e(r)})}He(t){let e=t.targetId,i=t.me.count,r=this.Je(e);if(r){let s=r.target;if($f(s))if(i===0){let o=new $(s.path);this.Ue(e,o,Oe.newNoDocument(o,Q.min()))}else gt(i===1);else{let o=this.Ye(e);if(o!==i){let c=this.Ze(t),l=c?this.Xe(c,t,o):1;if(l!==0){this.je(e);let u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(e,u)}ow?.et(function(f,p,_,E,C){var D,x,L,V,z,H;let lt={localCacheCount:f,existenceFilterCount:p.count,databaseId:_.database,projectId:_.projectId},Z=p.unchangedNames;return Z&&(lt.bloomFilter={applied:C===0,hashCount:(D=Z?.hashCount)!==null&&D!==void 0?D:0,bitmapLength:(V=(L=(x=Z?.bits)===null||x===void 0?void 0:x.bitmap)===null||L===void 0?void 0:L.length)!==null&&V!==void 0?V:0,padding:(H=(z=Z?.bits)===null||z===void 0?void 0:z.padding)!==null&&H!==void 0?H:0,mightContain:I=>{var b;return(b=E?.mightContain(I))!==null&&b!==void 0&&b}}),lt}(o,t.me,this.Le.tt(),c,l))}}}}Ze(t){let e=t.me.unchangedNames;if(!e||!e.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=e,o,c;try{o=qn(i).toUint8Array()}catch(l){if(l instanceof Mc)return Mr("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{c=new Zf(o,r,s)}catch(l){return Mr(l instanceof xi?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return c.Ie===0?null:c}Xe(t,e,i){return e.me.count===i-this.nt(t,e.targetId)?0:2}nt(t,e){let i=this.Le.getRemoteKeysForTarget(e),r=0;return i.forEach(s=>{let o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(c)||(this.Ue(e,s,null),r++)}),r}rt(t){let e=new Map;this.Be.forEach((s,o)=>{let c=this.Je(o);if(c){if(s.current&&$f(c.target)){let l=new $(c.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Oe.newNoDocument(l,t))}s.be&&(e.set(o,s.Ce()),s.ve())}});let i=nt();this.qe.forEach((s,o)=>{let c=!0;o.forEachWhile(l=>{let u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(i=i.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));let r=new Uc(t,e,this.Qe,this.ke,i);return this.ke=vn(),this.qe=lw(),this.Qe=new Ct(at),r}$e(t,e){if(!this.ze(t))return;let i=this.it(t,e.key)?2:0;this.Ge(t).Fe(e.key,i),this.ke=this.ke.insert(e.key,e),this.qe=this.qe.insert(e.key,this.st(e.key).add(t))}Ue(t,e,i){if(!this.ze(t))return;let r=this.Ge(t);this.it(t,e)?r.Fe(e,1):r.Me(e),this.qe=this.qe.insert(e,this.st(e).delete(t)),i&&(this.ke=this.ke.insert(e,i))}removeTarget(t){this.Be.delete(t)}Ye(t){let e=this.Ge(t).Ce();return this.Le.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let e=this.Be.get(t);return e||(e=new zc,this.Be.set(t,e)),e}st(t){let e=this.qe.get(t);return e||(e=new ee(at),this.qe=this.qe.insert(t,e)),e}ze(t){let e=this.Je(t)!==null;return e||j("WatchChangeAggregator","Detected inactive target",t),e}Je(t){let e=this.Be.get(t);return e&&e.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new zc),this.Le.getRemoteKeysForTarget(t).forEach(e=>{this.Ue(t,e,null)})}it(t,e){return this.Le.getRemoteKeysForTarget(t).has(e)}};function lw(){return new Ct($.comparator)}function uw(){return new Ct($.comparator)}var Kk={asc:"ASCENDING",desc:"DESCENDING"},Yk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Qk={and:"AND",or:"OR"},em=class{constructor(t,e){this.databaseId=t,this.useProto3Json=e}};function nm(n,t){return n.useProto3Json||hl(t)?t:{value:t}}function $c(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Gw(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function Xk(n,t){return $c(n,t.toTimestamp())}function We(n){return gt(!!n),Q.fromTimestamp(function(e){let i=bn(e);return new Yt(i.seconds,i.nanos)}(n))}function lp(n,t){return im(n,t).canonicalString()}function im(n,t){let e=function(r){return new Tt(["projects",r.projectId,"databases",r.database])}(n).child("documents");return t===void 0?e:e.child(t)}function Kw(n){let t=Tt.fromString(n);return gt(Zw(t)),t}function rm(n,t){return lp(n.databaseId,t.path)}function bf(n,t){let e=Kw(t);if(e.get(1)!==n.databaseId.projectId)throw new F(P.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new F(P.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new $(Qw(e))}function Yw(n,t){return lp(n.databaseId,t)}function Jk(n){let t=Kw(n);return t.length===4?Tt.emptyPath():Qw(t)}function sm(n){return new Tt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Qw(n){return gt(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function dw(n,t,e){return{name:rm(n,t),fields:e.value.mapValue.fields}}function Zk(n,t){let e;if("targetChange"in t){t.targetChange;let i=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:G()}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],s=function(u,f){return u.useProto3Json?(gt(f===void 0||typeof f=="string"),oe.fromBase64String(f||"")):(gt(f===void 0||f instanceof Buffer||f instanceof Uint8Array),oe.fromUint8Array(f||new Uint8Array))}(n,t.targetChange.resumeToken),o=t.targetChange.cause,c=o&&function(u){let f=u.code===void 0?P.UNKNOWN:Ww(u.code);return new F(f,u.message||"")}(o);e=new Bc(i,r,s,c||null)}else if("documentChange"in t){t.documentChange;let i=t.documentChange;i.document,i.document.name,i.document.updateTime;let r=bf(n,i.document.name),s=We(i.document.updateTime),o=i.document.createTime?We(i.document.createTime):Q.min(),c=new fe({mapValue:{fields:i.document.fields}}),l=Oe.newFoundDocument(r,s,o,c),u=i.targetIds||[],f=i.removedTargetIds||[];e=new Or(u,f,l.key,l)}else if("documentDelete"in t){t.documentDelete;let i=t.documentDelete;i.document;let r=bf(n,i.document),s=i.readTime?We(i.readTime):Q.min(),o=Oe.newNoDocument(r,s),c=i.removedTargetIds||[];e=new Or([],c,o.key,o)}else if("documentRemove"in t){t.documentRemove;let i=t.documentRemove;i.document;let r=bf(n,i.document),s=i.removedTargetIds||[];e=new Or([],s,r,null)}else{if(!("filter"in t))return G();{t.filter;let i=t.filter;i.targetId;let{count:r=0,unchangedNames:s}=i,o=new Jf(r,s),c=i.targetId;e=new jc(c,o)}}return e}function tP(n,t){let e;if(t instanceof Fi)e={update:dw(n,t.key,t.value)};else if(t instanceof Vc)e={delete:rm(n,t.key)};else if(t instanceof Ke)e={update:dw(n,t.key,t.data),updateMask:lP(t.fieldMask)};else{if(!(t instanceof Kf))return G();e={verify:rm(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(s,o){let c=o.transform;if(c instanceof zr)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Wn)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Li)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof $r)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw G()}(0,i))),t.precondition.isNone||(e.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:Xk(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:G()}(n,t.precondition)),e}function eP(n,t){return n&&n.length>0?(gt(t!==void 0),n.map(e=>function(r,s){let o=r.updateTime?We(r.updateTime):We(s);return o.isEqual(Q.min())&&(o=We(s)),new Gf(o,r.transformResults||[])}(e,t))):[]}function nP(n,t){return{documents:[Yw(n,t.path)]}}function iP(n,t){let e={structuredQuery:{}},i=t.path,r;t.collectionGroup!==null?(r=i,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),e.structuredQuery.from=[{collectionId:i.lastSegment()}]),e.parent=Yw(n,r);let s=function(u){if(u.length!==0)return Jw(Ne.create(u,"and"))}(t.filters);s&&(e.structuredQuery.where=s);let o=function(u){if(u.length!==0)return u.map(f=>function(_){return{field:xr(_.field),direction:oP(_.dir)}}(f))}(t.orderBy);o&&(e.structuredQuery.orderBy=o);let c=nm(n,t.limit);return c!==null&&(e.structuredQuery.limit=c),t.startAt&&(e.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(t.endAt)),{_t:e,parent:r}}function rP(n){let t=Jk(n.parent),e=n.structuredQuery,i=e.from?e.from.length:0,r=null;if(i>0){gt(i===1);let f=e.from[0];f.allDescendants?r=f.collectionId:t=t.child(f.collectionId)}let s=[];e.where&&(s=function(p){let _=Xw(p);return _ instanceof Ne&&Cw(_)?_.getFilters():[_]}(e.where));let o=[];e.orderBy&&(o=function(p){return p.map(_=>function(C){return new jr(kr(C.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(_))}(e.orderBy));let c=null;e.limit&&(c=function(p){let _;return _=typeof p=="object"?p.value:p,hl(_)?null:_}(e.limit));let l=null;e.startAt&&(l=function(p){let _=!!p.before,E=p.values||[];return new Ur(E,_)}(e.startAt));let u=null;return e.endAt&&(u=function(p){let _=!p.before,E=p.values||[];return new Ur(E,_)}(e.endAt)),xk(t,r,o,s,c,"F",l,u)}function sP(n,t){let e=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return G()}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function Xw(n){return n.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":let i=kr(e.unaryFilter.field);return Vt.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=kr(e.unaryFilter.field);return Vt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=kr(e.unaryFilter.field);return Vt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=kr(e.unaryFilter.field);return Vt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return G()}}(n):n.fieldFilter!==void 0?function(e){return Vt.create(kr(e.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return G()}}(e.fieldFilter.op),e.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(e){return Ne.create(e.compositeFilter.filters.map(i=>Xw(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return G()}}(e.compositeFilter.op))}(n):G()}function oP(n){return Kk[n]}function aP(n){return Yk[n]}function cP(n){return Qk[n]}function xr(n){return{fieldPath:n.canonicalString()}}function kr(n){return me.fromServerFormat(n.fieldPath)}function Jw(n){return n instanceof Vt?function(e){if(e.op==="=="){if(Xy(e.value))return{unaryFilter:{field:xr(e.field),op:"IS_NAN"}};if(Qy(e.value))return{unaryFilter:{field:xr(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(Xy(e.value))return{unaryFilter:{field:xr(e.field),op:"IS_NOT_NAN"}};if(Qy(e.value))return{unaryFilter:{field:xr(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xr(e.field),op:aP(e.op),value:e.value}}}(n):n instanceof Ne?function(e){let i=e.getFilters().map(r=>Jw(r));return i.length===1?i[0]:{compositeFilter:{op:cP(e.op),filters:i}}}(n):G()}function lP(n){let t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Zw(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Mo=class n{constructor(t,e,i,r,s=Q.min(),o=Q.min(),c=oe.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=l}withSequenceNumber(t){return new n(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}};var om=class{constructor(t){this.ct=t}};function uP(n){let t=rP({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Hf(t,t.limit,"L"):t}var qc=class{constructor(){}Pt(t,e){this.It(t,e),e.Tt()}It(t,e){if("nullValue"in t)this.Et(e,5);else if("booleanValue"in t)this.Et(e,10),e.dt(t.booleanValue?1:0);else if("integerValue"in t)this.Et(e,15),e.dt(St(t.integerValue));else if("doubleValue"in t){let i=St(t.doubleValue);isNaN(i)?this.Et(e,13):(this.Et(e,15),ko(i)?e.dt(0):e.dt(i))}else if("timestampValue"in t){let i=t.timestampValue;this.Et(e,20),typeof i=="string"&&(i=bn(i)),e.At(`${i.seconds||""}`),e.dt(i.nanos||0)}else if("stringValue"in t)this.Rt(t.stringValue,e),this.Vt(e);else if("bytesValue"in t)this.Et(e,30),e.ft(qn(t.bytesValue)),this.Vt(e);else if("referenceValue"in t)this.gt(t.referenceValue,e);else if("geoPointValue"in t){let i=t.geoPointValue;this.Et(e,45),e.dt(i.latitude||0),e.dt(i.longitude||0)}else"mapValue"in t?Aw(t)?this.Et(e,Number.MAX_SAFE_INTEGER):(this.yt(t.mapValue,e),this.Vt(e)):"arrayValue"in t?(this.wt(t.arrayValue,e),this.Vt(e)):G()}Rt(t,e){this.Et(e,25),this.St(t,e)}St(t,e){e.At(t)}yt(t,e){let i=t.fields||{};this.Et(e,55);for(let r of Object.keys(i))this.Rt(r,e),this.It(i[r],e)}wt(t,e){let i=t.values||[];this.Et(e,50);for(let r of i)this.It(r,e)}gt(t,e){this.Et(e,37),$.fromName(t).path.forEach(i=>{this.Et(e,60),this.St(i,e)})}Et(t,e){t.dt(e)}Vt(t){t.dt(2)}};qc.bt=new qc;var am=class{constructor(){this._n=new cm}addToCollectionParentIndex(t,e){return this._n.add(e),O.resolve()}getCollectionParents(t,e){return O.resolve(this._n.getEntries(e))}addFieldIndex(t,e){return O.resolve()}deleteFieldIndex(t,e){return O.resolve()}deleteAllFieldIndexes(t){return O.resolve()}createTargetIndexes(t,e){return O.resolve()}getDocumentsMatchingTarget(t,e){return O.resolve(null)}getIndexType(t,e){return O.resolve(0)}getFieldIndexes(t,e){return O.resolve([])}getNextCollectionGroupToUpdate(t){return O.resolve(null)}getMinOffset(t,e){return O.resolve(Oi.min())}getMinOffsetFromCollectionGroup(t,e){return O.resolve(Oi.min())}updateCollectionGroup(t,e,i){return O.resolve()}updateIndexEntries(t,e){return O.resolve()}},cm=class{constructor(){this.index={}}add(t){let e=t.lastSegment(),i=t.popLast(),r=this.index[e]||new ee(Tt.comparator),s=!r.has(i);return this.index[e]=r.add(i),s}has(t){let e=t.lastSegment(),i=t.popLast(),r=this.index[e];return r&&r.has(i)}getEntries(t){return(this.index[t]||new ee(Tt.comparator)).toArray()}};var DV=new Uint8Array(0);var $e=class n{constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}static withCacheSize(t){return new n(t,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};$e.DEFAULT_COLLECTION_PERCENTILE=10,$e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$e.DEFAULT=new $e(41943040,$e.DEFAULT_COLLECTION_PERCENTILE,$e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$e.DISABLED=new $e(-1,0,0);var Lo=class n{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new n(0)}static Ln(){return new n(-1)}};var lm=class{constructor(){this.changes=new Hn(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Oe.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();let i=this.changes.get(e);return i!==void 0?O.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}};var um=class{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}};var dm=class{constructor(t,e,i,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,e))).next(r=>(i!==null&&xo(i.mutation,r,Te.empty(),Yt.now()),r))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,nt()).next(()=>i))}getLocalViewOfDocuments(t,e,i=nt()){let r=Di();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,i).next(s=>{let o=Ro();return s.forEach((c,l)=>{o=o.insert(c,l.overlayedDocument)}),o}))}getOverlayedDocuments(t,e){let i=Di();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,nt()))}populateOverlays(t,e,i){let r=[];return i.forEach(s=>{e.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((o,c)=>{e.set(o,c)})})}computeViews(t,e,i,r){let s=vn(),o=Do(),c=function(){return Do()}();return e.forEach((l,u)=>{let f=i.get(u.key);r.has(u.key)&&(f===void 0||f.mutation instanceof Ke)?s=s.insert(u.key,u):f!==void 0?(o.set(u.key,f.mutation.getFieldMask()),xo(f.mutation,u,f.mutation.getFieldMask(),Yt.now())):o.set(u.key,Te.empty())}),this.recalculateAndSaveOverlays(t,s).next(l=>(l.forEach((u,f)=>o.set(u,f)),e.forEach((u,f)=>{var p;return c.set(u,new um(f,(p=o.get(u))!==null&&p!==void 0?p:null))}),c))}recalculateAndSaveOverlays(t,e){let i=Do(),r=new Ct((o,c)=>o-c),s=nt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(o=>{for(let c of o)c.keys().forEach(l=>{let u=e.get(l);if(u===null)return;let f=i.get(l)||Te.empty();f=c.applyToLocalView(u,f),i.set(l,f);let p=(r.get(c.batchId)||nt()).add(l);r=r.insert(c.batchId,p)})}).next(()=>{let o=[],c=r.getReverseIterator();for(;c.hasNext();){let l=c.getNext(),u=l.key,f=l.value,p=Fw();f.forEach(_=>{if(!s.has(_)){let E=qw(e.get(_),i.get(_));E!==null&&p.set(_,E),s=s.add(_)}}),o.push(this.documentOverlayCache.saveOverlays(t,u,p))}return O.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i,r){return function(o){return $.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):Pw(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i,r):this.getDocumentsMatchingCollectionQuery(t,e,i,r)}getNextDocuments(t,e,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,r).next(s=>{let o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,r-s.size):O.resolve(Di()),c=-1,l=s;return o.next(u=>O.forEach(u,(f,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),s.get(f)?O.resolve():this.remoteDocumentCache.getEntry(t,f).next(_=>{l=l.insert(f,_)}))).next(()=>this.populateOverlays(t,u,s)).next(()=>this.computeViews(t,l,u,nt())).next(f=>({batchId:c,changes:Lw(f)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new $(e)).next(i=>{let r=Ro();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,e,i,r){let s=e.collectionGroup,o=Ro();return this.indexManager.getCollectionParents(t,s).next(c=>O.forEach(c,l=>{let u=function(p,_){return new Mi(_,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(e,l.child(s));return this.getDocumentsMatchingCollectionQuery(t,u,i,r).next(f=>{f.forEach((p,_)=>{o=o.insert(p,_)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,e,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,s,r))).next(o=>{s.forEach((l,u)=>{let f=u.getKey();o.get(f)===null&&(o=o.insert(f,Oe.newInvalidDocument(f)))});let c=Ro();return o.forEach((l,u)=>{let f=s.get(l);f!==void 0&&xo(f.mutation,u,Te.empty(),Yt.now()),ml(e,u)&&(c=c.insert(l,u))}),c})}};var hm=class{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,e){return O.resolve(this.cr.get(e))}saveBundleMetadata(t,e){return this.cr.set(e.id,function(r){return{id:r.id,version:r.version,createTime:We(r.createTime)}}(e)),O.resolve()}getNamedQuery(t,e){return O.resolve(this.lr.get(e))}saveNamedQuery(t,e){return this.lr.set(e.name,function(r){return{name:r.name,query:uP(r.bundledQuery),readTime:We(r.readTime)}}(e)),O.resolve()}};var fm=class{constructor(){this.overlays=new Ct($.comparator),this.hr=new Map}getOverlay(t,e){return O.resolve(this.overlays.get(e))}getOverlays(t,e){let i=Di();return O.forEach(e,r=>this.getOverlay(t,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((r,s)=>{this.ht(t,e,s)}),O.resolve()}removeOverlaysForBatchId(t,e,i){let r=this.hr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(i)),O.resolve()}getOverlaysForCollection(t,e,i){let r=Di(),s=e.length+1,o=new $(e.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){let l=c.getNext().value,u=l.getKey();if(!e.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return O.resolve(r)}getOverlaysForCollectionGroup(t,e,i,r){let s=new Ct((u,f)=>u-f),o=this.overlays.getIterator();for(;o.hasNext();){let u=o.getNext().value;if(u.getKey().getCollectionGroup()===e&&u.largestBatchId>i){let f=s.get(u.largestBatchId);f===null&&(f=Di(),s=s.insert(u.largestBatchId,f)),f.set(u.getKey(),u)}}let c=Di(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,f)=>c.set(u,f)),!(c.size()>=r)););return O.resolve(c)}ht(t,e,i){let r=this.overlays.get(i.key);if(r!==null){let o=this.hr.get(r.largestBatchId).delete(i.key);this.hr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new Xf(e,i));let s=this.hr.get(e);s===void 0&&(s=nt(),this.hr.set(e,s)),this.hr.set(e,s.add(i.key))}};var Fo=class{constructor(){this.Pr=new ee(Ft.Ir),this.Tr=new ee(Ft.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,e){let i=new Ft(t,e);this.Pr=this.Pr.add(i),this.Tr=this.Tr.add(i)}dr(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.Ar(new Ft(t,e))}Rr(t,e){t.forEach(i=>this.removeReference(i,e))}Vr(t){let e=new $(new Tt([])),i=new Ft(e,t),r=new Ft(e,t+1),s=[];return this.Tr.forEachInRange([i,r],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){let e=new $(new Tt([])),i=new Ft(e,t),r=new Ft(e,t+1),s=nt();return this.Tr.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(t){let e=new Ft(t,0),i=this.Pr.firstAfterOrEqual(e);return i!==null&&t.isEqual(i.key)}},Ft=class{constructor(t,e){this.key=t,this.pr=e}static Ir(t,e){return $.comparator(t.key,e.key)||at(t.pr,e.pr)}static Er(t,e){return at(t.pr,e.pr)||$.comparator(t.key,e.key)}};var mm=class{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.yr=1,this.wr=new ee(Ft.Ir)}checkEmpty(t){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,i,r){let s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Yf(s,e,i,r);this.mutationQueue.push(o);for(let c of r)this.wr=this.wr.add(new Ft(c.key,s)),this.indexManager.addToCollectionParentIndex(t,c.key.path.popLast());return O.resolve(o)}lookupMutationBatch(t,e){return O.resolve(this.Sr(e))}getNextMutationBatchAfterBatchId(t,e){let i=e+1,r=this.br(i),s=r<0?0:r;return O.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){let i=new Ft(e,0),r=new Ft(e,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([i,r],o=>{let c=this.Sr(o.pr);s.push(c)}),O.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new ee(at);return e.forEach(r=>{let s=new Ft(r,0),o=new Ft(r,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],c=>{i=i.add(c.pr)})}),O.resolve(this.Dr(i))}getAllMutationBatchesAffectingQuery(t,e){let i=e.path,r=i.length+1,s=i;$.isDocumentKey(s)||(s=s.child(""));let o=new Ft(new $(s),0),c=new ee(at);return this.wr.forEachWhile(l=>{let u=l.key.path;return!!i.isPrefixOf(u)&&(u.length===r&&(c=c.add(l.pr)),!0)},o),O.resolve(this.Dr(c))}Dr(t){let e=[];return t.forEach(i=>{let r=this.Sr(i);r!==null&&e.push(r)}),e}removeMutationBatch(t,e){gt(this.Cr(e.batchId,"removed")===0),this.mutationQueue.shift();let i=this.wr;return O.forEach(e.mutations,r=>{let s=new Ft(r.key,e.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.wr=i})}Mn(t){}containsKey(t,e){let i=new Ft(e,0),r=this.wr.firstAfterOrEqual(i);return O.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,O.resolve()}Cr(t,e){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){let e=this.br(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}};var pm=class{constructor(t){this.vr=t,this.docs=function(){return new Ct($.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){let i=e.key,r=this.docs.get(i),s=r?r.size:0,o=this.vr(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){let e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){let i=this.docs.get(e);return O.resolve(i?i.document.mutableCopy():Oe.newInvalidDocument(e))}getEntries(t,e){let i=vn();return e.forEach(r=>{let s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Oe.newInvalidDocument(r))}),O.resolve(i)}getDocumentsMatchingQuery(t,e,i,r){let s=vn(),o=e.path,c=new $(o.child("")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){let{key:u,value:{document:f}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||yk(vk(f),i)<=0||(r.has(f.key)||ml(e,f))&&(s=s.insert(f.key,f.mutableCopy()))}return O.resolve(s)}getAllFromCollectionGroup(t,e,i,r){G()}Fr(t,e){return O.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new gm(this)}getSize(t){return O.resolve(this.size)}},gm=class extends lm{constructor(t){super(),this.ar=t}applyChanges(t){let e=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?e.push(this.ar.addEntry(t,r)):this.ar.removeEntry(i)}),O.waitFor(e)}getFromCache(t,e){return this.ar.getEntry(t,e)}getAllFromCache(t,e){return this.ar.getEntries(t,e)}};var _m=class{constructor(t){this.persistence=t,this.Mr=new Hn(e=>op(e),ap),this.lastRemoteSnapshotVersion=Q.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Fo,this.targetCount=0,this.Lr=Lo.Nn()}forEachTarget(t,e){return this.Mr.forEach((i,r)=>e(r)),O.resolve()}getLastRemoteSnapshotVersion(t){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return O.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.Or&&(this.Or=e),O.resolve()}qn(t){this.Mr.set(t.target,t);let e=t.targetId;e>this.highestTargetId&&(this.Lr=new Lo(e),this.highestTargetId=e),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,e){return this.qn(e),this.targetCount+=1,O.resolve()}updateTargetData(t,e){return this.qn(e),O.resolve()}removeTargetData(t,e){return this.Mr.delete(e.target),this.Nr.Vr(e.targetId),this.targetCount-=1,O.resolve()}removeTargets(t,e,i){let r=0,s=[];return this.Mr.forEach((o,c)=>{c.sequenceNumber<=e&&i.get(c.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,c.targetId)),r++)}),O.waitFor(s).next(()=>r)}getTargetCount(t){return O.resolve(this.targetCount)}getTargetData(t,e){let i=this.Mr.get(e)||null;return O.resolve(i)}addMatchingKeys(t,e,i){return this.Nr.dr(e,i),O.resolve()}removeMatchingKeys(t,e,i){this.Nr.Rr(e,i);let r=this.persistence.referenceDelegate,s=[];return r&&e.forEach(o=>{s.push(r.markPotentiallyOrphaned(t,o))}),O.waitFor(s)}removeMatchingKeysForTargetId(t,e){return this.Nr.Vr(e),O.resolve()}getMatchingKeysForTargetId(t,e){let i=this.Nr.gr(e);return O.resolve(i)}containsKey(t,e){return O.resolve(this.Nr.containsKey(e))}};var bm=class{constructor(t,e){this.Br={},this.overlays={},this.kr=new Iw(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new _m(this),this.indexManager=new am,this.remoteDocumentCache=function(r){return new pm(r)}(i=>this.referenceDelegate.Kr(i)),this.serializer=new om(e),this.$r=new hm(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new fm,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.Br[t.toKey()];return i||(i=new mm(e,this.referenceDelegate),this.Br[t.toKey()]=i),i}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,e,i){j("MemoryPersistence","Starting transaction:",t);let r=new vm(this.kr.next());return this.referenceDelegate.Ur(),i(r).next(s=>this.referenceDelegate.Wr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Gr(t,e){return O.or(Object.values(this.Br).map(i=>()=>i.containsKey(t,e)))}},vm=class extends xf{constructor(t){super(),this.currentSequenceNumber=t}},ym=class n{constructor(t){this.persistence=t,this.zr=new Fo,this.jr=null}static Hr(t){return new n(t)}get Jr(){if(this.jr)return this.jr;throw G()}addReference(t,e,i){return this.zr.addReference(i,e),this.Jr.delete(i.toString()),O.resolve()}removeReference(t,e,i){return this.zr.removeReference(i,e),this.Jr.add(i.toString()),O.resolve()}markPotentiallyOrphaned(t,e){return this.Jr.add(e.toString()),O.resolve()}removeTarget(t,e){this.zr.Vr(e.targetId).forEach(r=>this.Jr.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(s=>this.Jr.add(s.toString()))}).next(()=>i.removeTargetData(t,e))}Ur(){this.jr=new Set}Wr(t){let e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.Jr,i=>{let r=$.fromPath(i);return this.Yr(t,r).next(s=>{s||e.removeEntry(r,Q.min())})}).next(()=>(this.jr=null,e.apply(t)))}updateLimboDocument(t,e){return this.Yr(t,e).next(i=>{i?this.Jr.delete(e.toString()):this.Jr.add(e.toString())})}Kr(t){return 0}Yr(t,e){return O.or([()=>O.resolve(this.zr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Gr(t,e)])}};var wm=class n{constructor(t,e,i,r){this.targetId=t,this.fromCache=e,this.qi=i,this.Qi=r}static Ki(t,e){let i=nt(),r=nt();for(let s of e.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new n(t,e.fromCache,i,r)}};var Em=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}};var Im=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return ev()?8:Ek(zt())>0?6:4}()}initialize(t,e){this.zi=t,this.indexManager=e,this.$i=!0}getDocumentsMatchingQuery(t,e,i,r){let s={result:null};return this.ji(t,e).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(t,e,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new Em;return this.Ji(t,e,o).next(c=>{if(s.result=c,this.Ui)return this.Yi(t,e,o,c.size)})}).next(()=>s.result)}Yi(t,e,i,r){return i.documentReadCount<this.Wi?(Ao()<=et.DEBUG&&j("QueryEngine","SDK will not create cache indexes for query:",Dr(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),O.resolve()):(Ao()<=et.DEBUG&&j("QueryEngine","Query:",Dr(e),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Gi*r?(Ao()<=et.DEBUG&&j("QueryEngine","The SDK decides to create cache indexes for query:",Dr(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,He(e))):O.resolve())}ji(t,e){if(ew(e))return O.resolve(null);let i=He(e);return this.indexManager.getIndexType(t,i).next(r=>r===0?null:(e.limit!==null&&r===1&&(e=Hf(e,null,"F"),i=He(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(s=>{let o=nt(...s);return this.zi.getDocuments(t,o).next(c=>this.indexManager.getMinOffset(t,i).next(l=>{let u=this.Zi(e,c);return this.Xi(e,u,o,l.readTime)?this.ji(t,Hf(e,null,"F")):this.es(t,u,e,l)}))})))}Hi(t,e,i,r){return ew(e)||r.isEqual(Q.min())?O.resolve(null):this.zi.getDocuments(t,i).next(s=>{let o=this.Zi(e,s);return this.Xi(e,o,i,r)?O.resolve(null):(Ao()<=et.DEBUG&&j("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Dr(e)),this.es(t,o,e,bk(r,-1)).next(c=>c))})}Zi(t,e){let i=new ee(Nw(t));return e.forEach((r,s)=>{ml(t,s)&&(i=i.add(s))}),i}Xi(t,e,i,r){if(t.limit===null)return!1;if(i.size!==e.size)return!0;let s=t.limitType==="F"?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ji(t,e,i){return Ao()<=et.DEBUG&&j("QueryEngine","Using full collection scan to execute query:",Dr(e)),this.zi.getDocumentsMatchingQuery(t,e,Oi.min(),i)}es(t,e,i,r){return this.zi.getDocumentsMatchingQuery(t,i,r).next(s=>(e.forEach(o=>{s=s.insert(o.key,o)}),s))}};var Tm=class{constructor(t,e,i,r){this.persistence=t,this.ts=e,this.serializer=r,this.ns=new Ct(at),this.rs=new Hn(s=>op(s),ap),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(i)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new dm(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.ns))}};function dP(n,t,e,i){return new Tm(n,t,e,i)}function tE(n,t){return g(this,null,function*(){let e=Y(n);return yield e.persistence.runTransaction("Handle user change","readonly",i=>{let r;return e.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,e._s(t),e.mutationQueue.getAllMutationBatches(i))).next(s=>{let o=[],c=[],l=nt();for(let u of r){o.push(u.batchId);for(let f of u.mutations)l=l.add(f.key)}for(let u of s){c.push(u.batchId);for(let f of u.mutations)l=l.add(f.key)}return e.localDocuments.getDocuments(i,l).next(u=>({us:u,removedBatchIds:o,addedBatchIds:c}))})})})}function hP(n,t){let e=Y(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=t.batch.keys(),s=e.os.newChangeBuffer({trackRemovals:!0});return function(c,l,u,f){let p=u.batch,_=p.keys(),E=O.resolve();return _.forEach(C=>{E=E.next(()=>f.getEntry(l,C)).next(D=>{let x=u.docVersions.get(C);gt(x!==null),D.version.compareTo(x)<0&&(p.applyToRemoteDocument(D,u),D.isValidDocument()&&(D.setReadTime(u.commitVersion),f.addEntry(D)))})}),E.next(()=>c.mutationQueue.removeMutationBatch(l,p))}(e,i,t,s).next(()=>s.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(c){let l=nt();for(let u=0;u<c.mutationResults.length;++u)c.mutationResults[u].transformResults.length>0&&(l=l.add(c.batch.mutations[u].key));return l}(t))).next(()=>e.localDocuments.getDocuments(i,r))})}function eE(n){let t=Y(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Qr.getLastRemoteSnapshotVersion(e))}function fP(n,t){let e=Y(n),i=t.snapshotVersion,r=e.ns;return e.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=e.os.newChangeBuffer({trackRemovals:!0});r=e.ns;let c=[];t.targetChanges.forEach((f,p)=>{let _=r.get(p);if(!_)return;c.push(e.Qr.removeMatchingKeys(s,f.removedDocuments,p).next(()=>e.Qr.addMatchingKeys(s,f.addedDocuments,p)));let E=_.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(p)!==null?E=E.withResumeToken(oe.EMPTY_BYTE_STRING,Q.min()).withLastLimboFreeSnapshotVersion(Q.min()):f.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(f.resumeToken,i)),r=r.insert(p,E),function(D,x,L){return D.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=3e8?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0}(_,E,f)&&c.push(e.Qr.updateTargetData(s,E))});let l=vn(),u=nt();if(t.documentUpdates.forEach(f=>{t.resolvedLimboDocuments.has(f)&&c.push(e.persistence.referenceDelegate.updateLimboDocument(s,f))}),c.push(mP(s,o,t.documentUpdates).next(f=>{l=f.cs,u=f.ls})),!i.isEqual(Q.min())){let f=e.Qr.getLastRemoteSnapshotVersion(s).next(p=>e.Qr.setTargetsMetadata(s,s.currentSequenceNumber,i));c.push(f)}return O.waitFor(c).next(()=>o.apply(s)).next(()=>e.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(e.ns=r,s))}function mP(n,t,e){let i=nt(),r=nt();return e.forEach(s=>i=i.add(s)),t.getEntries(n,i).next(s=>{let o=vn();return e.forEach((c,l)=>{let u=s.get(c);l.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(c)),l.isNoDocument()&&l.version.isEqual(Q.min())?(t.removeEntry(c,l.readTime),o=o.insert(c,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(t.addEntry(l),o=o.insert(c,l)):j("LocalStore","Ignoring outdated watch update for ",c,". Current version:",u.version," Watch version:",l.version)}),{cs:o,ls:r}})}function pP(n,t){let e=Y(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function gP(n,t){let e=Y(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return e.Qr.getTargetData(i,t).next(s=>s?(r=s,O.resolve(r)):e.Qr.allocateTargetId(i).next(o=>(r=new Mo(t,o,"TargetPurposeListen",i.currentSequenceNumber),e.Qr.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=e.ns.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.ns=e.ns.insert(i.targetId,i),e.rs.set(t,i.targetId)),i})}function Am(n,t,e){return g(this,null,function*(){let i=Y(n),r=i.ns.get(t),s=e?"readwrite":"readwrite-primary";try{e||(yield i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!zo(o))throw o;j("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}i.ns=i.ns.remove(t),i.rs.delete(r.target)})}function hw(n,t,e){let i=Y(n),r=Q.min(),s=nt();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,f){let p=Y(l),_=p.rs.get(f);return _!==void 0?O.resolve(p.ns.get(_)):p.Qr.getTargetData(u,f)}(i,o,He(t)).next(c=>{if(c)return r=c.lastLimboFreeSnapshotVersion,i.Qr.getMatchingKeysForTargetId(o,c.targetId).next(l=>{s=l})}).next(()=>i.ts.getDocumentsMatchingQuery(o,t,e?r:Q.min(),e?s:nt())).next(c=>(_P(i,Pk(t),c),{documents:c,hs:s})))}function _P(n,t,e){let i=n.ss.get(t)||Q.min();e.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.ss.set(t,i)}var Hc=class{constructor(){this.activeTargetIds=Vk()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){let t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}};var Rm=class{constructor(){this.no=new Hc,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,e,i){this.ro[t]=e}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new Hc,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}};var Sm=class{io(t){}shutdown(){}};var Wc=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){j("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let t of this.uo)t(0)}ao(){j("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Cc=null;function vf(){return Cc===null?Cc=function(){return 268435456+Math.round(2147483648*Math.random())}():Cc++,"0x"+Cc.toString(16)}var bP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Cm=class{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}Ao(t){this.Ro=t}onMessage(t){this.Vo=t}close(){this.ho()}send(t){this.lo(t)}mo(){this.Io()}fo(){this.Eo()}po(t){this.Ro(t)}yo(t){this.Vo(t)}};var te="WebChannelConnection",Dm=class extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let i=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=i+"://"+e.host,this.So=`projects/${r}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get Do(){return!1}Co(e,i,r,s,o){let c=vf(),l=this.vo(e,i.toUriEncodedString());j("RestConnection",`Sending RPC '${e}' ${c}:`,l,r);let u={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(u,s,o),this.Mo(e,l,u,r).then(f=>(j("RestConnection",`Received RPC '${e}' ${c}: `,f),f),f=>{throw Mr("RestConnection",`RPC '${e}' ${c} failed with error: `,f,"url: ",l,"request:",r),f})}xo(e,i,r,s,o,c){return this.Co(e,i,r,s,o)}Fo(e,i,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Qr}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>e[o]=s),r&&r.headers.forEach((s,o)=>e[o]=s)}vo(e,i){let r=bP[e];return`${this.wo}/v1/${i}:${r}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Mo(t,e,i,r){let s=vf();return new Promise((o,c)=>{let l=new hf;l.setWithCredentials(!0),l.listenOnce(mf.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case To.NO_ERROR:let f=l.getResponseJson();j(te,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(f)),o(f);break;case To.TIMEOUT:j(te,`RPC '${t}' ${s} timed out`),c(new F(P.DEADLINE_EXCEEDED,"Request time out"));break;case To.HTTP_ERROR:let p=l.getStatus();if(j(te,`RPC '${t}' ${s} failed with status:`,p,"response text:",l.getResponseText()),p>0){let _=l.getResponseJson();Array.isArray(_)&&(_=_[0]);let E=_?.error;if(E&&E.status&&E.message){let C=function(x){let L=x.toLowerCase().replace(/_/g,"-");return Object.values(P).indexOf(L)>=0?L:P.UNKNOWN}(E.status);c(new F(C,E.message))}else c(new F(P.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new F(P.UNAVAILABLE,"Connection failed."));break;default:G()}}finally{j(te,`RPC '${t}' ${s} completed.`)}});let u=JSON.stringify(r);j(te,`RPC '${t}' ${s} sending request:`,r),l.send(e,"POST",u,i,15)})}Oo(t,e,i){let r=vf(),s=[this.wo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=_f(),c=gf(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.xmlHttpFactory=new ff({})),this.Fo(l.initMessageHeaders,e,i),l.encodeInitMessageHeaders=!0;let f=s.join("");j(te,`Creating RPC '${t}' stream ${r}: ${f}`,l);let p=o.createWebChannel(f,l),_=!1,E=!1,C=new Cm({lo:x=>{E?j(te,`Not sending because RPC '${t}' stream ${r} is closed:`,x):(_||(j(te,`Opening RPC '${t}' stream ${r} transport.`),p.open(),_=!0),j(te,`RPC '${t}' stream ${r} sending:`,x),p.send(x))},ho:()=>p.close()}),D=(x,L,V)=>{x.listen(L,z=>{try{V(z)}catch(H){setTimeout(()=>{throw H},0)}})};return D(p,Cr.EventType.OPEN,()=>{E||(j(te,`RPC '${t}' stream ${r} transport opened.`),C.mo())}),D(p,Cr.EventType.CLOSE,()=>{E||(E=!0,j(te,`RPC '${t}' stream ${r} transport closed`),C.po())}),D(p,Cr.EventType.ERROR,x=>{E||(E=!0,Mr(te,`RPC '${t}' stream ${r} transport errored:`,x),C.po(new F(P.UNAVAILABLE,"The operation could not be completed")))}),D(p,Cr.EventType.MESSAGE,x=>{var L;if(!E){let V=x.data[0];gt(!!V);let z=V,H=z.error||((L=z[0])===null||L===void 0?void 0:L.error);if(H){j(te,`RPC '${t}' stream ${r} received error:`,H);let lt=H.status,Z=function(y){let w=Lt[y];if(w!==void 0)return Ww(w)}(lt),I=H.message;Z===void 0&&(Z=P.INTERNAL,I="Unknown error status: "+lt+" with message "+H.message),E=!0,C.po(new F(Z,I)),p.close()}else j(te,`RPC '${t}' stream ${r} received:`,V),C.yo(V)}}),D(c,pf.STAT_EVENT,x=>{x.stat===Rc.PROXY?j(te,`RPC '${t}' stream ${r} detected buffering proxy`):x.stat===Rc.NOPROXY&&j(te,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{C.fo()},0),C}};function yf(){return typeof document<"u"?document:null}function pl(n){return new em(n,!0)}var Gc=class{constructor(t,e,i=1e3,r=1.5,s=6e4){this.oi=t,this.timerId=e,this.No=i,this.Lo=r,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(t){this.cancel();let e=Math.floor(this.ko+this.Uo()),i=Math.max(0,Date.now()-this.Qo),r=Math.max(0,e-i);r>0&&j("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.ko} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,r,()=>(this.Qo=Date.now(),t())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}};var Kc=class{constructor(t,e,i,r,s,o,c,l){this.oi=t,this.Go=i,this.zo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new Gc(t,e)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}stop(){return g(this,null,function*(){this.Zo()&&(yield this.close(0))})}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(t){this.s_(),this.stream.send(t)}r_(){return g(this,null,function*(){if(this.Xo())return this.close(0)})}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(t,e){return g(this,null,function*(){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,t!==4?this.Yo.reset():e&&e.code===P.RESOURCE_EXHAUSTED?(_n(e.toString()),_n("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):e&&e.code===P.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=t,yield this.listener.Ao(e)})}__(){}auth(){this.state=1;let t=this.a_(this.jo),e=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.jo===e&&this.u_(i,r)},i=>{t(()=>{let r=new F(P.UNKNOWN,"Fetching auth token failed: "+i.message);return this.c_(r)})})}u_(t,e){let i=this.a_(this.jo);this.stream=this.l_(t,e),this.stream.Po(()=>{i(()=>this.listener.Po())}),this.stream.To(()=>{i(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(r=>{i(()=>this.c_(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}e_(){this.state=5,this.Yo.$o(()=>g(this,null,function*(){this.state=0,this.start()}))}c_(t){return j("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}a_(t){return e=>{this.oi.enqueueAndForget(()=>this.jo===t?e():(j("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},xm=class extends Kc{constructor(t,e,i,r,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,r,o),this.serializer=s}l_(t,e){return this.connection.Oo("Listen",t,e)}onMessage(t){this.Yo.reset();let e=Zk(this.serializer,t),i=function(s){if(!("targetChange"in s))return Q.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?Q.min():o.readTime?We(o.readTime):Q.min()}(t);return this.listener.h_(e,i)}P_(t){let e={};e.database=sm(this.serializer),e.addTarget=function(s,o){let c,l=o.target;if(c=$f(l)?{documents:nP(s,l)}:{query:iP(s,l)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=Gw(s,o.resumeToken);let u=nm(s,o.expectedCount);u!==null&&(c.expectedCount=u)}else if(o.snapshotVersion.compareTo(Q.min())>0){c.readTime=$c(s,o.snapshotVersion.toTimestamp());let u=nm(s,o.expectedCount);u!==null&&(c.expectedCount=u)}return c}(this.serializer,t);let i=sP(this.serializer,t);i&&(e.labels=i),this.i_(e)}I_(t){let e={};e.database=sm(this.serializer),e.removeTarget=t,this.i_(e)}},km=class extends Kc{constructor(t,e,i,r,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,r,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(t,e){return this.connection.Oo("Write",t,e)}onMessage(t){if(gt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.T_){this.Yo.reset();let e=eP(t.writeResults,t.commitTime),i=We(t.commitTime);return this.listener.A_(i,e)}return gt(!t.writeResults||t.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){let t={};t.database=sm(this.serializer),this.i_(t)}d_(t){let e={streamToken:this.lastStreamToken,writes:t.map(i=>tP(this.serializer,i))};this.i_(e)}};var Pm=class extends class{}{constructor(t,e,i,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=r,this.m_=!1}f_(){if(this.m_)throw new F(P.FAILED_PRECONDITION,"The client has already been terminated.")}Co(t,e,i,r){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(t,im(e,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new F(P.UNKNOWN,s.toString())})}xo(t,e,i,r,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.xo(t,im(e,i),r,o,c,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new F(P.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}},Om=class{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(t){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.S_("Offline")))}set(t){this.C_(),this.g_=0,t==="Online"&&(this.y_=!1),this.S_(t)}S_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}b_(t){let e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(_n(e),this.y_=!1):j("OnlineStateTracker",e)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}};var Nm=class{constructor(t,e,i,r,s){this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{i.enqueueAndForget(()=>g(this,null,function*(){Ui(this)&&(j("RemoteStore","Restarting streams for network reachability change."),yield function(l){return g(this,null,function*(){let u=Y(l);u.M_.add(4),yield $o(u),u.N_.set("Unknown"),u.M_.delete(4),yield gl(u)})}(this))}))}),this.N_=new Om(i,r)}};function gl(n){return g(this,null,function*(){if(Ui(n))for(let t of n.x_)yield t(!0)})}function $o(n){return g(this,null,function*(){for(let t of n.x_)yield t(!1)})}function nE(n,t){let e=Y(n);e.F_.has(t.targetId)||(e.F_.set(t.targetId,t),fp(e)?hp(e):Xr(e).Xo()&&dp(e,t))}function up(n,t){let e=Y(n),i=Xr(e);e.F_.delete(t),i.Xo()&&iE(e,t),e.F_.size===0&&(i.Xo()?i.n_():Ui(e)&&e.N_.set("Unknown"))}function dp(n,t){if(n.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Q.min())>0){let e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}Xr(n).P_(t)}function iE(n,t){n.L_.xe(t),Xr(n).I_(t)}function hp(n){n.L_=new tm({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>n.F_.get(t)||null,tt:()=>n.datastore.serializer.databaseId}),Xr(n).start(),n.N_.w_()}function fp(n){return Ui(n)&&!Xr(n).Zo()&&n.F_.size>0}function Ui(n){return Y(n).M_.size===0}function rE(n){n.L_=void 0}function vP(n){return g(this,null,function*(){n.N_.set("Online")})}function yP(n){return g(this,null,function*(){n.F_.forEach((t,e)=>{dp(n,t)})})}function wP(n,t){return g(this,null,function*(){rE(n),fp(n)?(n.N_.D_(t),hp(n)):n.N_.set("Unknown")})}function EP(n,t,e){return g(this,null,function*(){if(n.N_.set("Online"),t instanceof Bc&&t.state===2&&t.cause)try{yield function(r,s){return g(this,null,function*(){let o=s.cause;for(let c of s.targetIds)r.F_.has(c)&&(yield r.remoteSyncer.rejectListen(c,o),r.F_.delete(c),r.L_.removeTarget(c))})}(n,t)}catch(i){j("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),yield Yc(n,i)}else if(t instanceof Or?n.L_.Ke(t):t instanceof jc?n.L_.He(t):n.L_.We(t),!e.isEqual(Q.min()))try{let i=yield eE(n.localStore);e.compareTo(i)>=0&&(yield function(s,o){let c=s.L_.rt(o);return c.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){let f=s.F_.get(u);f&&s.F_.set(u,f.withResumeToken(l.resumeToken,o))}}),c.targetMismatches.forEach((l,u)=>{let f=s.F_.get(l);if(!f)return;s.F_.set(l,f.withResumeToken(oe.EMPTY_BYTE_STRING,f.snapshotVersion)),iE(s,l);let p=new Mo(f.target,l,u,f.sequenceNumber);dp(s,p)}),s.remoteSyncer.applyRemoteEvent(c)}(n,e))}catch(i){j("RemoteStore","Failed to raise snapshot:",i),yield Yc(n,i)}})}function Yc(n,t,e){return g(this,null,function*(){if(!zo(t))throw t;n.M_.add(1),yield $o(n),n.N_.set("Offline"),e||(e=()=>eE(n.localStore)),n.asyncQueue.enqueueRetryable(()=>g(this,null,function*(){j("RemoteStore","Retrying IndexedDB access"),yield e(),n.M_.delete(1),yield gl(n)}))})}function sE(n,t){return t().catch(e=>Yc(n,e,t))}function _l(n){return g(this,null,function*(){let t=Y(n),e=Gn(t),i=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;IP(t);)try{let r=yield pP(t.localStore,i);if(r===null){t.v_.length===0&&e.n_();break}i=r.batchId,TP(t,r)}catch(r){yield Yc(t,r)}oE(t)&&aE(t)})}function IP(n){return Ui(n)&&n.v_.length<10}function TP(n,t){n.v_.push(t);let e=Gn(n);e.Xo()&&e.E_&&e.d_(t.mutations)}function oE(n){return Ui(n)&&!Gn(n).Zo()&&n.v_.length>0}function aE(n){Gn(n).start()}function AP(n){return g(this,null,function*(){Gn(n).V_()})}function RP(n){return g(this,null,function*(){let t=Gn(n);for(let e of n.v_)t.d_(e.mutations)})}function SP(n,t,e){return g(this,null,function*(){let i=n.v_.shift(),r=Qf.from(i,t,e);yield sE(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield _l(n)})}function CP(n,t){return g(this,null,function*(){t&&Gn(n).E_&&(yield function(i,r){return g(this,null,function*(){if(function(o){return Hk(o)&&o!==P.ABORTED}(r.code)){let s=i.v_.shift();Gn(i).t_(),yield sE(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),yield _l(i)}})}(n,t)),oE(n)&&aE(n)})}function fw(n,t){return g(this,null,function*(){let e=Y(n);e.asyncQueue.verifyOperationInProgress(),j("RemoteStore","RemoteStore received new credentials");let i=Ui(e);e.M_.add(3),yield $o(e),i&&e.N_.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e.M_.delete(3),yield gl(e)})}function DP(n,t){return g(this,null,function*(){let e=Y(n);t?(e.M_.delete(2),yield gl(e)):t||(e.M_.add(2),yield $o(e),e.N_.set("Unknown"))})}function Xr(n){return n.B_||(n.B_=function(e,i,r){let s=Y(e);return s.f_(),new xm(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{Po:vP.bind(null,n),To:yP.bind(null,n),Ao:wP.bind(null,n),h_:EP.bind(null,n)}),n.x_.push(t=>g(this,null,function*(){t?(n.B_.t_(),fp(n)?hp(n):n.N_.set("Unknown")):(yield n.B_.stop(),rE(n))}))),n.B_}function Gn(n){return n.k_||(n.k_=function(e,i,r){let s=Y(e);return s.f_(),new km(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{Po:()=>Promise.resolve(),To:AP.bind(null,n),Ao:CP.bind(null,n),R_:RP.bind(null,n),A_:SP.bind(null,n)}),n.x_.push(t=>g(this,null,function*(){t?(n.k_.t_(),yield _l(n)):(yield n.k_.stop(),n.v_.length>0&&(j("RemoteStore",`Stopping write stream with ${n.v_.length} pending writes`),n.v_=[]))}))),n.k_}var Mm=class n{constructor(t,e,i,r,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Pe,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,i,r,s){let o=Date.now()+i,c=new n(t,e,o,r,s);return c.start(i),c}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new F(P.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function mp(n,t){if(_n("AsyncQueue",`${t}: ${n}`),zo(n))return new F(P.UNAVAILABLE,`${t}: ${n}`);throw n}var Qc=class n{constructor(t){this.comparator=t?(e,i)=>t(e,i)||$.comparator(e.key,i.key):(e,i)=>$.comparator(e.key,i.key),this.keyedMap=Ro(),this.sortedSet=new Ct(this.comparator)}static emptySet(t){return new n(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){let e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){let e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){let e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof n)||this.size!==t.size)return!1;let e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){let r=e.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){let t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){let i=new n;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}};var Xc=class{constructor(){this.q_=new Ct($.comparator)}track(t){let e=t.doc.key,i=this.q_.get(e);i?t.type!==0&&i.type===3?this.q_=this.q_.insert(e,t):t.type===3&&i.type!==1?this.q_=this.q_.insert(e,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.q_=this.q_.insert(e,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.q_=this.q_.insert(e,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.q_=this.q_.remove(e):t.type===1&&i.type===2?this.q_=this.q_.insert(e,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.q_=this.q_.insert(e,{type:2,doc:t.doc}):G():this.q_=this.q_.insert(e,t)}Q_(){let t=[];return this.q_.inorderTraversal((e,i)=>{t.push(i)}),t}},Hr=class n{constructor(t,e,i,r,s,o,c,l,u){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(t,e,i,r,s){let o=[];return e.forEach(c=>{o.push({type:0,doc:c})}),new n(t,e,Qc.emptySet(e),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&fl(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;let e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==i[r].type||!e[r].doc.isEqual(i[r].doc))return!1;return!0}};var Lm=class{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(t=>t.G_())}},Fm=class{constructor(){this.queries=new Hn(t=>Ow(t),fl),this.onlineState="Unknown",this.z_=new Set}};function cE(n,t){return g(this,null,function*(){let e=Y(n),i=3,r=t.query,s=e.queries.get(r);s?!s.W_()&&t.G_()&&(i=2):(s=new Lm,i=t.G_()?0:1);try{switch(i){case 0:s.K_=yield e.onListen(r,!0);break;case 1:s.K_=yield e.onListen(r,!1);break;case 2:yield e.onFirstRemoteStoreListen(r)}}catch(o){let c=mp(o,`Initialization of query '${Dr(t.query)}' failed`);return void t.onError(c)}e.queries.set(r,s),s.U_.push(t),t.j_(e.onlineState),s.K_&&t.H_(s.K_)&&pp(e)})}function lE(n,t){return g(this,null,function*(){let e=Y(n),i=t.query,r=3,s=e.queries.get(i);if(s){let o=s.U_.indexOf(t);o>=0&&(s.U_.splice(o,1),s.U_.length===0?r=t.G_()?0:1:!s.W_()&&t.G_()&&(r=2))}switch(r){case 0:return e.queries.delete(i),e.onUnlisten(i,!0);case 1:return e.queries.delete(i),e.onUnlisten(i,!1);case 2:return e.onLastRemoteStoreUnlisten(i);default:return}})}function xP(n,t){let e=Y(n),i=!1;for(let r of t){let s=r.query,o=e.queries.get(s);if(o){for(let c of o.U_)c.H_(r)&&(i=!0);o.K_=r}}i&&pp(e)}function kP(n,t,e){let i=Y(n),r=i.queries.get(t);if(r)for(let s of r.U_)s.onError(e);i.queries.delete(t)}function pp(n){n.z_.forEach(t=>{t.next()})}var Vm,mw;(mw=Vm||(Vm={})).J_="default",mw.Cache="cache";var Jc=class{constructor(t,e,i){this.query=t,this.Y_=e,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=i||{}}H_(t){if(!this.options.includeMetadataChanges){let i=[];for(let r of t.docChanges)r.type!==3&&i.push(r);t=new Hr(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Z_?this.ea(t)&&(this.Y_.next(t),e=!0):this.ta(t,this.onlineState)&&(this.na(t),e=!0),this.X_=t,e}onError(t){this.Y_.error(t)}j_(t){this.onlineState=t;let e=!1;return this.X_&&!this.Z_&&this.ta(this.X_,t)&&(this.na(this.X_),e=!0),e}ta(t,e){if(!t.fromCache||!this.G_())return!0;let i=e!=="Offline";return(!this.options.ra||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}ea(t){if(t.docChanges.length>0)return!0;let e=this.X_&&this.X_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}na(t){t=Hr.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Z_=!0,this.Y_.next(t)}G_(){return this.options.source!==Vm.Cache}};var Zc=class{constructor(t){this.key=t}},tl=class{constructor(t){this.key=t}},Um=class{constructor(t,e){this.query=t,this.la=e,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=nt(),this.mutatedKeys=nt(),this.Ia=Nw(t),this.Ta=new Qc(this.Ia)}get Ea(){return this.la}da(t,e){let i=e?e.Aa:new Xc,r=e?e.Ta:this.Ta,s=e?e.mutatedKeys:this.mutatedKeys,o=r,c=!1,l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((f,p)=>{let _=r.get(f),E=ml(this.query,p)?p:null,C=!!_&&this.mutatedKeys.has(_.key),D=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations),x=!1;_&&E?_.data.isEqual(E.data)?C!==D&&(i.track({type:3,doc:E}),x=!0):this.Ra(_,E)||(i.track({type:2,doc:E}),x=!0,(l&&this.Ia(E,l)>0||u&&this.Ia(E,u)<0)&&(c=!0)):!_&&E?(i.track({type:0,doc:E}),x=!0):_&&!E&&(i.track({type:1,doc:_}),x=!0,(l||u)&&(c=!0)),x&&(E?(o=o.add(E),s=D?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),i.track({type:1,doc:f})}return{Ta:o,Aa:i,Xi:c,mutatedKeys:s}}Ra(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i,r){let s=this.Ta;this.Ta=t.Ta,this.mutatedKeys=t.mutatedKeys;let o=t.Aa.Q_();o.sort((f,p)=>function(E,C){let D=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return G()}};return D(E)-D(C)}(f.type,p.type)||this.Ia(f.doc,p.doc)),this.Va(i),r=r!=null&&r;let c=e&&!r?this.ma():[],l=this.Pa.size===0&&this.current&&!r?1:0,u=l!==this.ha;return this.ha=l,o.length!==0||u?{snapshot:new Hr(this.query,t.Ta,s,o,t.mutatedKeys,l===0,u,!1,!!i&&i.resumeToken.approximateByteSize()>0),fa:c}:{fa:c}}j_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Xc,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(t){return!this.la.has(t)&&!!this.Ta.has(t)&&!this.Ta.get(t).hasLocalMutations}Va(t){t&&(t.addedDocuments.forEach(e=>this.la=this.la.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.la=this.la.delete(e)),this.current=t.current)}ma(){if(!this.current)return[];let t=this.Pa;this.Pa=nt(),this.Ta.forEach(i=>{this.ga(i.key)&&(this.Pa=this.Pa.add(i.key))});let e=[];return t.forEach(i=>{this.Pa.has(i)||e.push(new tl(i))}),this.Pa.forEach(i=>{t.has(i)||e.push(new Zc(i))}),e}pa(t){this.la=t.hs,this.Pa=nt();let e=this.da(t.documents);return this.applyChanges(e,!0)}ya(){return Hr.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}},jm=class{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}},Bm=class{constructor(t){this.key=t,this.wa=!1}},zm=class{constructor(t,e,i,r,s,o){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new Hn(c=>Ow(c),fl),this.Da=new Map,this.Ca=new Set,this.va=new Ct($.comparator),this.Fa=new Map,this.Ma=new Fo,this.xa={},this.Oa=new Map,this.Na=Lo.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}};function PP(n,t,e=!0){return g(this,null,function*(){let i=pE(n),r,s=i.ba.get(t);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.ya()):r=yield uE(i,t,e,!0),r})}function OP(n,t){return g(this,null,function*(){let e=pE(n);yield uE(e,t,!0,!1)})}function uE(n,t,e,i){return g(this,null,function*(){let r=yield gP(n.localStore,He(t)),s=r.targetId,o=e?n.sharedClientState.addLocalQueryTarget(s):"not-current",c;return i&&(c=yield NP(n,t,s,o==="current",r.resumeToken)),n.isPrimaryClient&&e&&nE(n.remoteStore,r),c})}function NP(n,t,e,i,r){return g(this,null,function*(){n.Ba=(p,_,E)=>function(D,x,L,V){return g(this,null,function*(){let z=x.view.da(L);z.Xi&&(z=yield hw(D.localStore,x.query,!1).then(({documents:I})=>x.view.da(I,z)));let H=V&&V.targetChanges.get(x.targetId),lt=V&&V.targetMismatches.get(x.targetId)!=null,Z=x.view.applyChanges(z,D.isPrimaryClient,H,lt);return gw(D,x.targetId,Z.fa),Z.snapshot})}(n,p,_,E);let s=yield hw(n.localStore,t,!0),o=new Um(t,s.hs),c=o.da(s.documents),l=No.createSynthesizedTargetChangeForCurrentChange(e,i&&n.onlineState!=="Offline",r),u=o.applyChanges(c,n.isPrimaryClient,l);gw(n,e,u.fa);let f=new jm(t,e,o);return n.ba.set(t,f),n.Da.has(e)?n.Da.get(e).push(t):n.Da.set(e,[t]),u.snapshot})}function MP(n,t,e){return g(this,null,function*(){let i=Y(n),r=i.ba.get(t),s=i.Da.get(r.targetId);if(s.length>1)return i.Da.set(r.targetId,s.filter(o=>!fl(o,t))),void i.ba.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Am(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),e&&up(i.remoteStore,r.targetId),$m(i,r.targetId)}).catch(Bo))):($m(i,r.targetId),yield Am(i.localStore,r.targetId,!0))})}function LP(n,t){return g(this,null,function*(){let e=Y(n),i=e.ba.get(t),r=e.Da.get(i.targetId);e.isPrimaryClient&&r.length===1&&(e.sharedClientState.removeLocalQueryTarget(i.targetId),up(e.remoteStore,i.targetId))})}function FP(n,t,e){return g(this,null,function*(){let i=qP(n);try{let r=yield function(o,c){let l=Y(o),u=Yt.now(),f=c.reduce((E,C)=>E.add(C.key),nt()),p,_;return l.persistence.runTransaction("Locally write mutations","readwrite",E=>{let C=vn(),D=nt();return l.os.getEntries(E,f).next(x=>{C=x,C.forEach((L,V)=>{V.isValidDocument()||(D=D.add(L))})}).next(()=>l.localDocuments.getOverlayedDocuments(E,C)).next(x=>{p=x;let L=[];for(let V of c){let z=qk(V,p.get(V.key).overlayedDocument);z!=null&&L.push(new Ke(V.key,z,Rw(z.value.mapValue),gn.exists(!0)))}return l.mutationQueue.addMutationBatch(E,u,L,c)}).next(x=>{_=x;let L=x.applyToLocalDocumentSet(p,D);return l.documentOverlayCache.saveOverlays(E,x.batchId,L)})}).then(()=>({batchId:_.batchId,changes:Lw(p)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(o,c,l){let u=o.xa[o.currentUser.toKey()];u||(u=new Ct(at)),u=u.insert(c,l),o.xa[o.currentUser.toKey()]=u}(i,r.batchId,e),yield qo(i,r.changes),yield _l(i.remoteStore)}catch(r){let s=mp(r,"Failed to persist write");e.reject(s)}})}function dE(n,t){return g(this,null,function*(){let e=Y(n);try{let i=yield fP(e.localStore,t);t.targetChanges.forEach((r,s)=>{let o=e.Fa.get(s);o&&(gt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.wa=!0:r.modifiedDocuments.size>0?gt(o.wa):r.removedDocuments.size>0&&(gt(o.wa),o.wa=!1))}),yield qo(e,i,t)}catch(i){yield Bo(i)}})}function pw(n,t,e){let i=Y(n);if(i.isPrimaryClient&&e===0||!i.isPrimaryClient&&e===1){let r=[];i.ba.forEach((s,o)=>{let c=o.view.j_(t);c.snapshot&&r.push(c.snapshot)}),function(o,c){let l=Y(o);l.onlineState=c;let u=!1;l.queries.forEach((f,p)=>{for(let _ of p.U_)_.j_(c)&&(u=!0)}),u&&pp(l)}(i.eventManager,t),r.length&&i.Sa.h_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}function VP(n,t,e){return g(this,null,function*(){let i=Y(n);i.sharedClientState.updateQueryState(t,"rejected",e);let r=i.Fa.get(t),s=r&&r.key;if(s){let o=new Ct($.comparator);o=o.insert(s,Oe.newNoDocument(s,Q.min()));let c=nt().add(s),l=new Uc(Q.min(),new Map,new Ct(at),o,c);yield dE(i,l),i.va=i.va.remove(s),i.Fa.delete(t),gp(i)}else yield Am(i.localStore,t,!1).then(()=>$m(i,t,e)).catch(Bo)})}function UP(n,t){return g(this,null,function*(){let e=Y(n),i=t.batch.batchId;try{let r=yield hP(e.localStore,t);fE(e,i,null),hE(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),yield qo(e,r)}catch(r){yield Bo(r)}})}function jP(n,t,e){return g(this,null,function*(){let i=Y(n);try{let r=yield function(o,c){let l=Y(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let f;return l.mutationQueue.lookupMutationBatch(u,c).next(p=>(gt(p!==null),f=p.keys(),l.mutationQueue.removeMutationBatch(u,p))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,f,c)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,f)).next(()=>l.localDocuments.getDocuments(u,f))})}(i.localStore,t);fE(i,t,e),hE(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),yield qo(i,r)}catch(r){yield Bo(r)}})}function hE(n,t){(n.Oa.get(t)||[]).forEach(e=>{e.resolve()}),n.Oa.delete(t)}function fE(n,t,e){let i=Y(n),r=i.xa[i.currentUser.toKey()];if(r){let s=r.get(t);s&&(e?s.reject(e):s.resolve(),r=r.remove(t)),i.xa[i.currentUser.toKey()]=r}}function $m(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(let i of n.Da.get(t))n.ba.delete(i),e&&n.Sa.ka(i,e);n.Da.delete(t),n.isPrimaryClient&&n.Ma.Vr(t).forEach(i=>{n.Ma.containsKey(i)||mE(n,i)})}function mE(n,t){n.Ca.delete(t.path.canonicalString());let e=n.va.get(t);e!==null&&(up(n.remoteStore,e),n.va=n.va.remove(t),n.Fa.delete(e),gp(n))}function gw(n,t,e){for(let i of e)i instanceof Zc?(n.Ma.addReference(i.key,t),BP(n,i)):i instanceof tl?(j("SyncEngine","Document no longer in limbo: "+i.key),n.Ma.removeReference(i.key,t),n.Ma.containsKey(i.key)||mE(n,i.key)):G()}function BP(n,t){let e=t.key,i=e.path.canonicalString();n.va.get(e)||n.Ca.has(i)||(j("SyncEngine","New document in limbo: "+e),n.Ca.add(i),gp(n))}function gp(n){for(;n.Ca.size>0&&n.va.size<n.maxConcurrentLimboResolutions;){let t=n.Ca.values().next().value;n.Ca.delete(t);let e=new $(Tt.fromString(t)),i=n.Na.next();n.Fa.set(i,new Bm(e)),n.va=n.va.insert(e,i),nE(n.remoteStore,new Mo(He(cp(e.path)),i,"TargetPurposeLimboResolution",Iw.oe))}}function qo(n,t,e){return g(this,null,function*(){let i=Y(n),r=[],s=[],o=[];i.ba.isEmpty()||(i.ba.forEach((c,l)=>{o.push(i.Ba(l,t,e).then(u=>{if((u||e)&&i.isPrimaryClient){let f=u&&!u.fromCache;i.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(u){r.push(u);let f=wm.Ki(l.targetId,u);s.push(f)}}))}),yield Promise.all(o),i.Sa.h_(r),yield function(l,u){return g(this,null,function*(){let f=Y(l);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>O.forEach(u,_=>O.forEach(_.qi,E=>f.persistence.referenceDelegate.addReference(p,_.targetId,E)).next(()=>O.forEach(_.Qi,E=>f.persistence.referenceDelegate.removeReference(p,_.targetId,E)))))}catch(p){if(!zo(p))throw p;j("LocalStore","Failed to update sequence numbers: "+p)}for(let p of u){let _=p.targetId;if(!p.fromCache){let E=f.ns.get(_),C=E.snapshotVersion,D=E.withLastLimboFreeSnapshotVersion(C);f.ns=f.ns.insert(_,D)}}})}(i.localStore,s))})}function zP(n,t){return g(this,null,function*(){let e=Y(n);if(!e.currentUser.isEqual(t)){j("SyncEngine","User change. New user:",t.toKey());let i=yield tE(e.localStore,t);e.currentUser=t,function(s,o){s.Oa.forEach(c=>{c.forEach(l=>{l.reject(new F(P.CANCELLED,o))})}),s.Oa.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),yield qo(e,i.us)}})}function $P(n,t){let e=Y(n),i=e.Fa.get(t);if(i&&i.wa)return nt().add(i.key);{let r=nt(),s=e.Da.get(t);if(!s)return r;for(let o of s){let c=e.ba.get(o);r=r.unionWith(c.view.Ea)}return r}}function pE(n){let t=Y(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=dE.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=$P.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=VP.bind(null,t),t.Sa.h_=xP.bind(null,t.eventManager),t.Sa.ka=kP.bind(null,t.eventManager),t}function qP(n){let t=Y(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=UP.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=jP.bind(null,t),t}var el=class{constructor(){this.synchronizeTabs=!1}initialize(t){return g(this,null,function*(){this.serializer=pl(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),yield this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)})}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return dP(this.persistence,new Im,t.initialUser,this.serializer)}createPersistence(t){return new bm(ym.Hr,this.serializer)}createSharedClientState(t){return new Rm}terminate(){return g(this,null,function*(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var qm=class{initialize(t,e){return g(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>pw(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=zP.bind(null,this.syncEngine),yield DP(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new Fm}()}createDatastore(t){let e=pl(t.databaseInfo.databaseId),i=function(s){return new Dm(s)}(t.databaseInfo);return function(s,o,c,l){return new Pm(s,o,c,l)}(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return function(i,r,s,o,c){return new Nm(i,r,s,o,c)}(this.localStore,this.datastore,t.asyncQueue,e=>pw(this.syncEngine,e,0),function(){return Wc.D()?new Wc:new Sm}())}createSyncEngine(t,e){return function(r,s,o,c,l,u,f){let p=new zm(r,s,o,c,l,u);return f&&(p.La=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return g(this,null,function*(){var t;yield function(i){return g(this,null,function*(){let r=Y(i);j("RemoteStore","RemoteStore shutting down."),r.M_.add(5),yield $o(r),r.O_.shutdown(),r.N_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()})}};var nl=class{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ka(this.observer.next,t)}error(t){this.observer.error?this.Ka(this.observer.error,t):_n("Uncaught Error in snapshot listener:",t.toString())}$a(){this.muted=!0}Ka(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}};var Hm=class{constructor(t,e,i,r){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=r,this.user=$t.UNAUTHENTICATED,this.clientId=Pc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,s=>g(this,null,function*(){j("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(i,s=>(j("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new F(P.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let t=new Pe;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>g(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){let i=mp(e,"Failed to shutdown persistence");t.reject(i)}})),t.promise}};function wf(n,t){return g(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),j("FirestoreClient","Initializing OfflineComponentProvider");let e=n.configuration;yield t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(r=>g(this,null,function*(){i.isEqual(r)||(yield tE(t.localStore,r),i=r)})),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t})}function _w(n,t){return g(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let e=yield WP(n);j("FirestoreClient","Initializing OnlineComponentProvider"),yield t.initialize(e,n.configuration),n.setCredentialChangeListener(i=>fw(t.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>fw(t.remoteStore,r)),n._onlineComponents=t})}function HP(n){return n.name==="FirebaseError"?n.code===P.FAILED_PRECONDITION||n.code===P.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}function WP(n){return g(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){j("FirestoreClient","Using user provided OfflineComponentProvider");try{yield wf(n,n._uninitializedComponentsProvider._offline)}catch(t){let e=t;if(!HP(e))throw e;Mr("Error using user provided cache. Falling back to memory cache: "+e),yield wf(n,new el)}}else j("FirestoreClient","Using default OfflineComponentProvider"),yield wf(n,new el);return n._offlineComponents})}function gE(n){return g(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(j("FirestoreClient","Using user provided OnlineComponentProvider"),yield _w(n,n._uninitializedComponentsProvider._online)):(j("FirestoreClient","Using default OnlineComponentProvider"),yield _w(n,new qm))),n._onlineComponents})}function GP(n){return gE(n).then(t=>t.syncEngine)}function _E(n){return g(this,null,function*(){let t=yield gE(n),e=t.eventManager;return e.onListen=PP.bind(null,t.syncEngine),e.onUnlisten=MP.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=OP.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=LP.bind(null,t.syncEngine),e})}function KP(n,t,e={}){let i=new Pe;return n.asyncQueue.enqueueAndForget(()=>g(this,null,function*(){return function(s,o,c,l,u){let f=new nl({next:_=>{o.enqueueAndForget(()=>lE(s,p));let E=_.docs.has(c);!E&&_.fromCache?u.reject(new F(P.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&_.fromCache&&l&&l.source==="server"?u.reject(new F(P.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(_)},error:_=>u.reject(_)}),p=new Jc(cp(c.path),f,{includeMetadataChanges:!0,ra:!0});return cE(s,p)}(yield _E(n),n.asyncQueue,t,e,i)})),i.promise}function YP(n,t,e={}){let i=new Pe;return n.asyncQueue.enqueueAndForget(()=>g(this,null,function*(){return function(s,o,c,l,u){let f=new nl({next:_=>{o.enqueueAndForget(()=>lE(s,p)),_.fromCache&&l.source==="server"?u.reject(new F(P.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(_)},error:_=>u.reject(_)}),p=new Jc(c,f,{includeMetadataChanges:!0,ra:!0});return cE(s,p)}(yield _E(n),n.asyncQueue,t,e,i)})),i.promise}function bE(n){let t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}var bw=new Map;function vE(n,t,e){if(!e)throw new F(P.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function QP(n,t,e,i){if(t===!0&&i===!0)throw new F(P.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function vw(n){if(!$.isDocumentKey(n))throw new F(P.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function yw(n){if($.isDocumentKey(n))throw new F(P.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function bl(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let t=function(i){return i.constructor?i.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":G()}function Ye(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new F(P.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let e=bl(n);throw new F(P.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}var il=class{constructor(t){var e,i;if(t.host===void 0){if(t.ssl!==void 0)throw new F(P.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(e=t.ssl)===null||e===void 0||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new F(P.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}QP("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=bE((i=t.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new F(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new F(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new F(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}},Wr=class{constructor(t,e,i,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new il({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new F(P.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new F(P.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new il(t),t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new Ef;switch(i.type){case"firstParty":return new Rf(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new F(P.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){let i=bw.get(e);i&&(j("ComponentProvider","Removing Datastore"),bw.delete(e),i.terminate())}(this),Promise.resolve()}};function yE(n,t,e,i={}){var r;let s=(n=Ye(n,Wr))._getSettings(),o=`${t}:${e}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Mr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let c,l;if(typeof i.mockUserToken=="string")c=i.mockUserToken,l=$t.MOCK_USER;else{c=Qa(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);let u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new F(P.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new $t(u)}n._authCredentials=new If(new kc(c,l))}}var Gr=class n{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new n(this.firestore,t,this._query)}},se=class n{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $n(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new n(this.firestore,t,this._key)}},$n=class n extends Gr{constructor(t,e,i){super(t,e,cp(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let t=this._path.popLast();return t.isEmpty()?null:new se(this.firestore,null,new $(t))}withConverter(t){return new n(this.firestore,t,this._path)}};function wE(n,t,...e){if(n=yt(n),vE("collection","path",t),n instanceof Wr){let i=Tt.fromString(t,...e);return yw(i),new $n(n,null,i)}{if(!(n instanceof se||n instanceof $n))throw new F(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(Tt.fromString(t,...e));return yw(i),new $n(n.firestore,null,i)}}function st(n,t,...e){if(n=yt(n),arguments.length===1&&(t=Pc.newId()),vE("doc","path",t),n instanceof Wr){let i=Tt.fromString(t,...e);return vw(i),new se(n,null,new $(i))}{if(!(n instanceof se||n instanceof $n))throw new F(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(Tt.fromString(t,...e));return vw(i),new se(n.firestore,n instanceof $n?n.converter:null,new $(i))}}var Wm=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new Gc(this,"async_queue_retry"),this.hu=()=>{let e=yf();e&&j("AsyncQueue","Visibility state changed to "+e.visibilityState),this.Yo.Wo()};let t=yf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pu(),this.Iu(t)}enterRestrictedMode(t){if(!this.ou){this.ou=!0,this.cu=t||!1;let e=yf();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.hu)}}enqueue(t){if(this.Pu(),this.ou)return new Promise(()=>{});let e=new Pe;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.su.push(t),this.Tu()))}Tu(){return g(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Yo.reset()}catch(t){if(!zo(t))throw t;j("AsyncQueue","Operation failed with retryable error: "+t)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}})}Iu(t){let e=this.iu.then(()=>(this.uu=!0,t().catch(i=>{this.au=i,this.uu=!1;let r=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(i);throw _n("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.uu=!1,i))));return this.iu=e,e}enqueueAfterDelay(t,e,i){this.Pu(),this.lu.indexOf(t)>-1&&(e=0);let r=Mm.createAndSchedule(this,t,e,i,s=>this.Eu(s));return this._u.push(r),r}Pu(){this.au&&G()}verifyOperationInProgress(){}du(){return g(this,null,function*(){let t;do t=this.iu,yield t;while(t!==this.iu)})}Au(t){for(let e of this._u)if(e.timerId===t)return!0;return!1}Ru(t){return this.du().then(()=>{this._u.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(let e of this._u)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.du()})}Vu(t){this.lu.push(t)}Eu(t){let e=this._u.indexOf(t);this._u.splice(e,1)}};var Kn=class extends Wr{constructor(t,e,i,r){super(t,e,i,r),this.type="firestore",this._queue=function(){return new Wm}(),this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||IE(this),this._firestoreClient.terminate()}};function EE(n,t){let e=typeof n=="object"?n:Fn(),i=typeof n=="string"?n:t||"(default)",r=vi(e,"firestore").getImmediate({identifier:i});if(!r._initialized){let s=Ya("firestore");s&&yE(r,...s)}return r}function _p(n){return n._firestoreClient||IE(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function IE(n){var t,e,i;let r=n._freezeSettings(),s=function(c,l,u,f){return new kf(c,l,u,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,bE(f.experimentalLongPollingOptions),f.useFetchStreams)}(n._databaseId,((t=n._app)===null||t===void 0?void 0:t.options.appId)||"",n._persistenceKey,r);n._firestoreClient=new Hm(n._authCredentials,n._appCheckCredentials,n._queue,s),!((e=r.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}var Vo=class n{constructor(t){this._byteString=t}static fromBase64String(t){try{return new n(oe.fromBase64String(t))}catch(e){throw new F(P.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new n(oe.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}};var Kr=class{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new F(P.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new me(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}};var Yr=class{constructor(t){this._methodName=t}};var Uo=class{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new F(P.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new F(P.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return at(this._lat,t._lat)||at(this._long,t._long)}};var XP=/^__.*__$/,Gm=class{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return this.fieldMask!==null?new Ke(t,this.data,this.fieldMask,e,this.fieldTransforms):new Fi(t,this.data,e,this.fieldTransforms)}},rl=class{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new Ke(t,this.data,this.fieldMask,e,this.fieldTransforms)}};function TE(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw G()}}var sl=class n{constructor(t,e,i,r,s,o){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(t){return new n(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(t){var e;let i=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.gu({path:i,yu:!1});return r.wu(t),r}Su(t){var e;let i=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.gu({path:i,yu:!1});return r.mu(),r}bu(t){return this.gu({path:void 0,yu:!0})}Du(t){return al(t,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}mu(){if(this.path)for(let t=0;t<this.path.length;t++)this.wu(this.path.get(t))}wu(t){if(t.length===0)throw this.Du("Document fields must not be empty");if(TE(this.fu)&&XP.test(t))throw this.Du('Document fields cannot begin and end with "__"')}},Km=class{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||pl(t)}Fu(t,e,i,r=!1){return new sl({fu:t,methodName:e,vu:i,path:me.emptyPath(),yu:!1,Cu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function vl(n){let t=n._freezeSettings(),e=pl(n._databaseId);return new Km(n._databaseId,!!t.ignoreUndefinedProperties,e)}function AE(n,t,e,i,r,s={}){let o=n.Fu(s.merge||s.mergeFields?2:0,t,e,r);bp("Data must be an object, but it was:",o,i);let c=RE(i,o),l,u;if(s.merge)l=new Te(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){let f=[];for(let p of s.mergeFields){let _=Qm(t,p,e);if(!o.contains(_))throw new F(P.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);CE(f,_)||f.push(_)}l=new Te(f),u=o.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,u=o.fieldTransforms;return new Gm(new fe(c),l,u)}var ol=class n extends Yr{_toFieldTransform(t){if(t.fu!==2)throw t.fu===1?t.Du(`${this._methodName}() can only appear at the top level of your update data`):t.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof n}};function JP(n,t,e){return new sl({fu:3,vu:t.settings.vu,methodName:n._methodName,yu:e},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var Ym=class n extends Yr{constructor(t,e){super(t),this.Mu=e}_toFieldTransform(t){let e=JP(this,t,!0),i=this.Mu.map(s=>Jr(s,e)),r=new Wn(i);return new Wf(t.path,r)}isEqual(t){return t instanceof n&&Nn(this.Mu,t.Mu)}};function ZP(n,t,e,i){let r=n.Fu(1,t,e);bp("Data must be an object, but it was:",r,i);let s=[],o=fe.empty();Vi(i,(l,u)=>{let f=vp(t,l,e);u=yt(u);let p=r.Su(f);if(u instanceof ol)s.push(f);else{let _=Jr(u,p);_!=null&&(s.push(f),o.set(f,_))}});let c=new Te(s);return new rl(o,c,r.fieldTransforms)}function tO(n,t,e,i,r,s){let o=n.Fu(1,t,e),c=[Qm(t,i,e)],l=[r];if(s.length%2!=0)throw new F(P.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<s.length;_+=2)c.push(Qm(t,s[_])),l.push(s[_+1]);let u=[],f=fe.empty();for(let _=c.length-1;_>=0;--_)if(!CE(u,c[_])){let E=c[_],C=l[_];C=yt(C);let D=o.Su(E);if(C instanceof ol)u.push(E);else{let x=Jr(C,D);x!=null&&(u.push(E),f.set(E,x))}}let p=new Te(u);return new rl(f,p,o.fieldTransforms)}function eO(n,t,e,i=!1){return Jr(e,n.Fu(i?4:3,t))}function Jr(n,t){if(SE(n=yt(n)))return bp("Unsupported field value:",t,n),RE(n,t);if(n instanceof Yr)return function(i,r){if(!TE(r.fu))throw r.Du(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Du(`${i._methodName}() is not currently supported inside arrays`);let s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.yu&&t.fu!==4)throw t.Du("Nested arrays are not supported");return function(i,r){let s=[],o=0;for(let c of i){let l=Jr(c,r.bu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,t)}return function(i,r){if((i=yt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return Uk(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let s=Yt.fromDate(i);return{timestampValue:$c(r.serializer,s)}}if(i instanceof Yt){let s=new Yt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:$c(r.serializer,s)}}if(i instanceof Uo)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Vo)return{bytesValue:Gw(r.serializer,i._byteString)};if(i instanceof se){let s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:lp(i.firestore._databaseId||r.databaseId,i._key.path)}}throw r.Du(`Unsupported field value: ${bl(i)}`)}(n,t)}function RE(n,t){let e={};return Tw(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Vi(n,(i,r)=>{let s=Jr(r,t.pu(i));s!=null&&(e[i]=s)}),{mapValue:{fields:e}}}function SE(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Yt||n instanceof Uo||n instanceof Vo||n instanceof se||n instanceof Yr)}function bp(n,t,e){if(!SE(e)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(e)){let i=bl(e);throw i==="an object"?t.Du(n+" a custom object"):t.Du(n+" "+i)}}function Qm(n,t,e){if((t=yt(t))instanceof Kr)return t._internalPath;if(typeof t=="string")return vp(n,t);throw al("Field path arguments must be of type string or ",n,!1,void 0,e)}var nO=new RegExp("[~\\*/\\[\\]]");function vp(n,t,e){if(t.search(nO)>=0)throw al(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new Kr(...t.split("."))._internalPath}catch{throw al(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function al(n,t,e,i,r){let s=i&&!i.isEmpty(),o=r!==void 0,c=`Function ${t}() called with invalid data`;e&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new F(P.INVALID_ARGUMENT,c+n+l)}function CE(n,t){return n.some(e=>e.isEqual(t))}var cl=class{constructor(t,e,i,r,s){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new se(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let t=new Xm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){let e=this._document.data.field(yp("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}},Xm=class extends cl{data(){return super.data()}};function yp(n,t){return typeof t=="string"?vp(n,t):t instanceof Kr?t._internalPath:t._delegate._internalPath}function iO(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new F(P.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var jo=class{},Jm=class extends jo{};function Ae(n,t,...e){let i=[];t instanceof jo&&i.push(t),i=i.concat(e),function(s){let o=s.filter(l=>l instanceof Zm).length,c=s.filter(l=>l instanceof ll).length;if(o>1||o>0&&c>0)throw new F(P.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(let r of i)n=r._apply(n);return n}var ll=class n extends Jm{constructor(t,e,i){super(),this._field=t,this._op=e,this._value=i,this.type="where"}static _create(t,e,i){return new n(t,e,i)}_apply(t){let e=this._parse(t);return DE(t._query,e),new Gr(t.firestore,t.converter,qf(t._query,e))}_parse(t){let e=vl(t.firestore);return function(s,o,c,l,u,f,p){let _;if(u.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new F(P.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Ew(p,f);let E=[];for(let C of p)E.push(ww(l,s,C));_={arrayValue:{values:E}}}else _=ww(l,s,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Ew(p,f),_=eO(c,o,p,f==="in"||f==="not-in");return Vt.create(u,f,_)}(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}};function pe(n,t,e){let i=t,r=yp("where",n);return ll._create(r,i,e)}var Zm=class n extends jo{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new n(t,e)}_parse(t){let e=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return e.length===1?e[0]:Ne.create(e,this._getOperator())}_apply(t){let e=this._parse(t);return e.getFilters().length===0?t:(function(r,s){let o=r,c=s.getFlattenedFilters();for(let l of c)DE(o,l),o=qf(o,l)}(t._query,e),new Gr(t.firestore,t.converter,qf(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function ww(n,t,e){if(typeof(e=yt(e))=="string"){if(e==="")throw new F(P.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Pw(t)&&e.indexOf("/")!==-1)throw new F(P.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);let i=t.path.child(Tt.fromString(e));if(!$.isDocumentKey(i))throw new F(P.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Yy(n,new $(i))}if(e instanceof se)return Yy(n,e._key);throw new F(P.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${bl(e)}.`)}function Ew(n,t){if(!Array.isArray(n)||n.length===0)throw new F(P.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function DE(n,t){let e=function(r,s){for(let o of r)for(let c of o.getFlattenedFilters())if(s.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(e!==null)throw e===t.op?new F(P.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new F(P.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}var tp=class{convertValue(t,e="none"){switch(Ni(t)){case 0:return null;case 1:return t.booleanValue;case 2:return St(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(qn(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw G()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){let i={};return Vi(t,(r,s)=>{i[r]=this.convertValue(s,e)}),i}convertGeoPoint(t){return new Uo(St(t.latitude),St(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":let i=rp(t);return i==null?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(Po(t));default:return null}}convertTimestamp(t){let e=bn(t);return new Yt(e.seconds,e.nanos)}convertDocumentKey(t,e){let i=Tt.fromString(t);gt(Zw(i));let r=new Lc(i.get(1),i.get(3)),s=new $(i.popFirst(5));return r.isEqual(e)||_n(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}};function xE(n,t,e){let i;return i=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,i}var ki=class{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}},ul=class extends cl{constructor(t,e,i,r,s,o){super(t,e,i,r,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){let e=new Nr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){let i=this._document.data.field(yp("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}},Nr=class extends ul{data(t={}){return super.data(t)}},ep=class{constructor(t,e,i,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new ki(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new Nr(this._firestore,this._userDataWriter,i.key,i,new ki(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){let e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new F(P.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(c=>{let l=new Nr(r._firestore,r._userDataWriter,c.doc.key,c.doc,new ki(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{let l=new Nr(r._firestore,r._userDataWriter,c.doc.key,c.doc,new ki(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),u=-1,f=-1;return c.type!==0&&(u=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:rO(c.type),doc:l,oldIndex:u,newIndex:f}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}};function rO(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return G()}}function _t(n){n=Ye(n,se);let t=Ye(n.firestore,Kn);return KP(_p(t),n._key).then(e=>sO(t,n,e))}var dl=class extends tp{constructor(t){super(),this.firestore=t}convertBytes(t){return new Vo(t)}convertReference(t){let e=this.convertDocumentKey(t,this.firestore._databaseId);return new se(this.firestore,null,e)}};function Pt(n){n=Ye(n,Gr);let t=Ye(n.firestore,Kn),e=_p(t),i=new dl(t);return iO(n._query),YP(e,n._query).then(r=>new ep(t,i,n,r))}function kE(n,t,e){n=Ye(n,se);let i=Ye(n.firestore,Kn),r=xE(n.converter,t,e);return wp(i,[AE(vl(i),"setDoc",n._key,r,n.converter!==null,e).toMutation(n._key,gn.none())])}function ge(n,t,e,...i){n=Ye(n,se);let r=Ye(n.firestore,Kn),s=vl(r),o;return o=typeof(t=yt(t))=="string"||t instanceof Kr?tO(s,"updateDoc",n._key,t,e,i):ZP(s,"updateDoc",n._key,t),wp(r,[o.toMutation(n._key,gn.exists(!0))])}function yl(n,t){let e=Ye(n.firestore,Kn),i=st(n),r=xE(n.converter,t);return wp(e,[AE(vl(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,gn.exists(!1))]).then(()=>i)}function wp(n,t){return function(i,r){let s=new Pe;return i.asyncQueue.enqueueAndForget(()=>g(this,null,function*(){return FP(yield GP(i),r,s)})),s.promise}(_p(n),t)}function sO(n,t,e){let i=e.docs.get(t._key),r=new dl(n);return new ul(n,r,t._key,i,new ki(e.hasPendingWrites,e.fromCache),t.converter)}function wl(...n){return new Ym("arrayUnion",n)}(function(t,e=!0){(function(r){Qr=r})(Ue),Ve(new ce("firestore",(i,{instanceIdentifier:r,options:s})=>{let o=i.getProvider("app").getImmediate(),c=new Kn(new Tf(i.getProvider("auth-internal")),new Cf(i.getProvider("app-check-internal")),function(u,f){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new F(P.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Lc(u.options.projectId,f)}(o,r),o);return s=Object.assign({useFetchStreams:e},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),wt(Wy,"4.6.3",t),wt(Wy,"4.6.3","esm2017")})();var Ho=class{constructor(t){return t}},PE="firestore",Ep=class{constructor(){return wi(PE)}};var Ip=new tt("angularfire2.firestore-instances");function oO(n,t){let e=Er(PE,n,t);return e&&new Ho(e)}function aO(n){return(t,e)=>{let i=t.runOutsideAngular(()=>n(e));return new Ho(i)}}var cO={provide:Ep,deps:[[new Ut,Ip]]},lO={provide:Ho,useFactory:oO,deps:[[new Ut,Ip],xe]},uO=(()=>{class n{constructor(){wt("angularfire",cn.full,"fst")}static \u0275fac=function(i){return new(i||n)};static \u0275mod=pt({type:n});static \u0275inj=mt({providers:[lO,cO]})}return n})();function HU(n,...t){return{ngModule:uO,providers:[{provide:Ip,useFactory:aO(n),multi:!0,deps:[K,jt,Un,ln,[new Ut,Si],[new Ut,Vn],...t]}]}}var Et=Gt(wE,!0);var ht=Gt(EE,!0);var ji=Gt(kE,!0);var nj=(()=>{let t=class t{constructor(i,r){this.storage=i,this.router=r,this.auth=B(Ri),this.utilsSvc=B(Gb),this.firestore=ht()}getAuth(){return bo()}sigIn(i,r){return g(this,null,function*(){let s=bo(),o=ht();try{let l=(yield py(s,i,r)).user;if(!l.emailVerified)throw yield vo(s),this.utilsSvc.showWarning("Por favor, confirma tu correo electr\xF3nico antes de iniciar sesi\xF3n."),new Error("Correo no verificado.");let u=null,f;if(f=yield _t(st(o,"especialistas",l.uid)),f.exists()?u="especialista":(f=yield _t(st(o,"administradores",l.uid)),f.exists()?u="administrador":(f=yield _t(st(o,"pacientes",l.uid)),f.exists()&&(u="paciente"))),!u)throw yield vo(s),this.utilsSvc.showError("Usuario no autorizado."),new Error("Usuario no autorizado.");if(u==="especialista"&&!f.data()?.activated)throw yield vo(s),this.utilsSvc.showError("Tu cuenta est\xE1 desactivada, contacta con el administrador."),new Error("Tu cuenta est\xE1 desactivada, contacta con el administrador.");localStorage.setItem("user",JSON.stringify({uid:l.uid,role:u,email:l.email})),yield this.registrarLogIngreso(l.uid,u),this.utilsSvc.showSuccess("Inicio de sesi\xF3n exitoso")}catch(c){throw c instanceof Error?this.utilsSvc.showError("Error al iniciar sesi\xF3n: "+c.message):this.utilsSvc.showError("Error desconocido al iniciar sesi\xF3n."),c}})}registrarLogIngreso(i,r){return g(this,null,function*(){let s=ht(),o=Et(s,"logs_ingresos"),c={uid:i,role:r,timestamp:new Date().toISOString()};yield yl(o,c)})}obtenerLogs(){return g(this,null,function*(){let i=ht(),r=Et(i,"logs_ingresos"),s=Ae(r),o=[];try{let c=yield Pt(s);for(let l of c.docs){let u=l.data(),f=u.uid,p=u.role,_=yield this.getUserByUidAndRole(f,p);_&&(u.name=_.name,u.lastName=_.lastName,u.email=_.email),o.push(u)}return o}catch(c){return console.error("Error al obtener los logs: ",c),[]}})}getUserByUidAndRole(i,r){return g(this,null,function*(){let s=ht(),c={paciente:"pacientes",administrador:"administradores",especialista:"especialistas"}[r],l=Et(s,c);try{let u=yield _t(st(l,i));return u.exists()?u.data():null}catch(u){return console.error("Error al obtener los datos del usuario:",u),null}})}signUp(i,r){return g(this,null,function*(){let s=bo(),o=s.currentUser;return fy(s,i,r).then(c=>{let l=c.user;return my(l).then(()=>(this.utilsSvc.showSuccess("Usuario registrado. Revisa tu correo para confirmar."),o?s.updateCurrentUser(o).then(()=>(this.router.navigate(["./users"]),c)):vo(s).then(()=>c)))}).catch(c=>{let l=c.code==="auth/email-already-in-use"?"Este correo electr\xF3nico ya est\xE1 en uso. Por favor, utiliza otro correo.":`Error al registrar el usuario: ${c.message}`;throw this.utilsSvc.showError(l),c})})}signOut(){return g(this,null,function*(){bo().signOut(),localStorage.removeItem("user"),this.utilsSvc.routerLink("home"),this.utilsSvc.showSuccess("Se cerr\xF3 sesi\xF3n con \xE9xito.")})}isUserLoggedIn(){let i=localStorage.getItem("user");return this.auth.currentUser!==null||i!==null}uploadImage(i,r){return g(this,null,function*(){let s=uf(this.storage,r);return $y(s,i).then(()=>lf(s))})}saveUserDataAsPatient(i){return g(this,null,function*(){let r=st(this.firestore,`pacientes/${i.uid}`);return ji(r,i)})}saveUserDataAsAdministrator(i){return g(this,null,function*(){let r=st(this.firestore,`administradores/${i.uid}`);return ji(r,i)})}saveUserDataAsSpecialist(i){return g(this,null,function*(){let r=st(this.firestore,`especialistas/${i.uid}`);return ji(r,i)})}updateSpecialistActivation(i,r){return g(this,null,function*(){let s=st(this.firestore,"especialistas",i);return ge(s,{activated:r}).then(()=>{console.log("Estado de activaci\xF3n actualizado exitosamente")}).catch(o=>{console.error("Error al actualizar el estado de activaci\xF3n:",o)})})}getPatientData(i){return g(this,null,function*(){try{let r=st(this.firestore,`pacientes/${i}`),s=yield _t(r);return s.exists()?s.data():(console.warn(`El paciente con UID ${i} no existe.`),null)}catch(r){throw console.error(`Error al obtener los datos del paciente con UID ${i}:`,r),r}})}getPatientProfilePic(i){return g(this,null,function*(){try{let r=st(this.firestore,`pacientes/${i}`),s=yield _t(r);return s.exists()?s.data()?.profilePic||null:(console.error("No se encontr\xF3 al paciente con el UID proporcionado."),null)}catch(r){throw console.error("Error al obtener la foto de perfil:",r),r}})}getAdminProfilePic(i){return g(this,null,function*(){try{let r=st(this.firestore,`administradores/${i}`),s=yield _t(r);return s.exists()?s.data()?.profilePic||null:(console.error("No se encontr\xF3 al paciente con el UID proporcionado."),null)}catch(r){throw console.error("Error al obtener la foto de perfil:",r),r}})}getEspecialistas(){return g(this,null,function*(){try{let i=Et(this.firestore,"especialistas");return(yield Pt(i)).docs.map(o=>o.data())}catch(i){return console.error("Error al obtener los especialistas",i),[]}})}getPacientes(){return g(this,null,function*(){try{let i=Et(this.firestore,"pacientes");return(yield Pt(i)).docs.map(o=>o.data())}catch(i){return console.error("Error al obtener los pacientes",i),[]}})}getSpecialistsProfilePic(i){return g(this,null,function*(){try{let r=st(this.firestore,`especialistas/${i}`),s=yield _t(r);return s.exists()?s.data()?.profilePic||null:(console.error("No se encontr\xF3 al paciente con el UID proporcionado."),null)}catch(r){throw console.error("Error al obtener la foto de perfil:",r),r}})}getAllPatients(){return g(this,null,function*(){try{let i=ht(),r=Et(i,"pacientes");return(yield Pt(r)).docs.map(c=>c.data())}catch(i){throw console.error("Error al obtener los pacientes: ",i),i}})}getUserData(){return g(this,null,function*(){try{let i=localStorage.getItem("user");if(!i)throw new Error("Usuario no encontrado en localStorage");let r=JSON.parse(i),{role:s,uid:o}=r;if(!s||!o)throw new Error("Rol o UID no encontrados en localStorage");let l={administrador:"administradores",especialista:"especialistas",paciente:"pacientes"}[s];if(!l)throw new Error("Rol no v\xE1lido");let u=st(this.firestore,`${l}/${o}`),f=yield _t(u);if(!f.exists())throw new Error("El documento no existe");return f.data()}catch(i){throw console.error("Error al obtener datos del usuario:",i),i}})}getAllSpecialists(){return g(this,null,function*(){try{let i=ht(),r=Et(i,"especialistas");return(yield Pt(r)).docs.map(c=>c.data())}catch(i){throw console.error("Error al obtener los especialistas: ",i),i}})}getAllAdmins(){return g(this,null,function*(){try{let i=ht(),r=Et(i,"administradores");return(yield Pt(r)).docs.map(c=>c.data())}catch(i){throw console.error("Error al obtener los especialistas: ",i),i}})}getProfilePicUrl(i,r,s){return g(this,null,function*(){let o=`profilePics/${i}_${r}_${s}`,c=uf(this.storage,o);return lf(c)})}getSpecialties(){return g(this,null,function*(){let i=Et(this.firestore,"especialidades");return(yield Pt(i)).docs.map(s=>s.data())})}addSpecialty(i){return g(this,null,function*(){let r=Et(this.firestore,"especialidades");if((yield this.getSpecialties()).some(c=>c.nombre.toLowerCase()===i.nombre.toLowerCase())){console.log("La especialidad ya existe en la base de datos.");return}yield yl(r,i),console.log("Especialidad agregada exitosamente.")})}getUserType(i){return g(this,null,function*(){return new Promise(r=>{let s=localStorage.getItem("user");if(s){let o=JSON.parse(s);if(o.uid===i){r(o.role);return}}r(null)})})}formatTime(i){let r=i.getHours().toString().padStart(2,"0"),s=i.getMinutes().toString().padStart(2,"0");return`${r}:${s}`}generateHourlyBlocks(i,r){let s=[],o=this.parseTime(i),c=this.parseTime(r),l=new Date(o);for(;l.getTime()<c.getTime();){let u=new Date(l);if(u.setHours(l.getHours()+1),u.getTime()>c.getTime())break;s.push({start:this.formatTime(l),end:this.formatTime(u)}),l=u}return s}parseTime(i){let[r,s]=i.split(":").map(Number),o=new Date;return o.setHours(r,s,0,0),o}getTurnosAdmin(){return g(this,null,function*(){try{let i=ht(),r=Et(i,"turnos"),s=yield Pt(r),o=[];return s.forEach(c=>{let l=c.data();l.id=c.id,o.push(l)}),o.length>0?o:(console.log("No se encontraron turnos"),[])}catch(i){throw console.error("Error al obtener los turnos",i),new Error("Error al obtener los turnos")}})}getTurnosPaciente(i){return g(this,null,function*(){try{let r=ht(),s=Et(r,"turnos"),o=Ae(s,pe("pacienteId","==",i));return(yield Pt(o)).docs.map(u=>N({id:u.id},u.data()))}catch(r){return console.error("Error al obtener los turnos del paciente:",r),[]}})}getTurnosEspecialista(i){return g(this,null,function*(){try{let r=ht(),s=Et(r,"turnos"),o=Ae(s,pe("especialistaId","==",i));return(yield Pt(o)).docs.map(u=>N({id:u.id},u.data()))}catch(r){return console.error("Error al obtener los turnos del paciente:",r),[]}})}verificarTurnoDisponible(i,r,s,o){return g(this,null,function*(){try{let[c,l,u]=r.split("/"),f=`${c}-${l}-${u}`,p=ht(),_=Et(p,"turnos"),E=Ae(_,pe("especialistaId","==",i),pe("fecha","==",f)),C=yield Pt(E),D=this.convertToDate(s),x=this.convertToDate(o);for(let L of C.docs){let V=L.data(),z=this.convertToDate(V?.startTime),H=this.convertToDate(V?.endTime);if(D<H&&x>z)return!1}return!0}catch(c){return console.error("Error al verificar disponibilidad del turno:",c),!1}})}obtenerTurnosPorEspecialidad(){return g(this,null,function*(){let i=ht(),r=Et(i,"turnos");try{let o=(yield Pt(r)).docs.map(l=>l.data()),c={};return o.forEach(l=>{let u=l.especialidad;c[u]=(c[u]||0)+1}),c}catch(s){return console.error("Error al obtener los turnos:",s),{}}})}reservarHorarioTurno(i,r,s,o,c){return g(this,null,function*(){try{let[l,u,f]=r.split("/"),p=`${l}-${u}-${f}`,_=ht(),E=Et(_,"turnos"),C=st(E),D={especialistaId:i,pacienteId:o,fecha:p,startTime:s.startTime,endTime:s.endTime,especialidad:c,estado:"pendiente",comentario:"",encuestaPaciente:"",calificacionPaciente:"",resenia:""};yield ji(C,D),console.log("Turno reservado exitosamente")}catch(l){console.error("Error al reservar el turno:",l)}})}rechazarTurno(i,r){return g(this,null,function*(){try{let s=ht(),o=st(s,`turnos/${i}`),c=yield _t(o);if(c.exists()){let l=c.data();yield ge(o,{estado:"rechazado",comentario:r}),console.log("Turno rechazado exitosamente")}else console.log("No se encontr\xF3 el turno con el ID proporcionado")}catch(s){console.error("Error al rechazar el turno:",s)}})}cancelarTurno(i,r){return g(this,null,function*(){try{let s=ht(),o=st(s,`turnos/${i}`);(yield _t(o)).exists()?(yield ge(o,{estado:"cancelado",comentario:r}),console.log("Turno cancelado exitosamente")):console.log("El turno no existe")}catch(s){console.error("Error al cancelar el turno:",s)}})}completarEncuestaHorario(i,r){return g(this,null,function*(){try{let s=ht(),o=st(s,`turnos/${i}`),c=yield _t(o);c.exists()?c.data()&&(yield ge(o,{encuestaPaciente:r}),console.log("Encuesta completada exitosamente")):console.log("El turno no existe")}catch(s){console.error("Error al completar la encuesta:",s)}})}completarCalificacionTurno(i,r){return g(this,null,function*(){try{let s=ht(),o=st(s,`turnos/${i}`),c=yield _t(o);if(c.exists()){let l=c.data(),u=vt(N({},l),{calificacionPaciente:r});yield ge(o,u),console.log("Calificaci\xF3n del turno completada exitosamente")}else console.error("Turno no encontrado")}catch(s){console.error("Error al completar la calificaci\xF3n del turno:",s)}})}aceptarHorario(i){return g(this,null,function*(){try{let r=ht(),s=st(r,`turnos/${i}`);(yield _t(s)).exists()?(yield ge(s,{estado:"aceptado"}),console.log(`Turno ${i} aceptado exitosamente.`)):console.error(`El turno con ID ${i} no existe.`)}catch(r){console.error("Error al aceptar el turno:",r)}})}finalizarHorario(i,r,s,o){return g(this,null,function*(){try{let c=ht(),l=st(c,`turnos/${r}`),u=yield _t(l);if(u.exists()){let f=u.data(),p=vt(N({},f),{estado:"finalizado",resenia:s,historiaClinica:o});yield ji(l,p),console.log("Turno finalizado y actualizado con la historia cl\xEDnica.")}else console.error("El turno no existe.")}catch(c){console.error("Error al finalizar el turno:",c)}})}getPacienteNombre(i){return g(this,null,function*(){try{let r=st(this.firestore,`pacientes/${i}`),s=yield _t(r);if(s.exists()){let o=s.data();return`${o?.name||""} ${o?.lastName||""} ${o?.dni||""}`.trim()}else return console.log("No se encontr\xF3 el paciente con UID:",i),null}catch(r){return console.error("Error al obtener el nombre del paciente:",r),null}})}getEspecialistaNombre(i){return g(this,null,function*(){try{let r=st(this.firestore,`especialistas/${i}`),s=yield _t(r);if(s.exists()){let o=s.data();return`${o?.name||""} ${o?.lastName||""}`.trim()}else return console.log("No se encontr\xF3 el especialista con UID:",i),null}catch(r){return console.error("Error al obtener el nombre del especialista:",r),null}})}getHistoriaClinica(i){return g(this,null,function*(){let r=ht(),s=Et(r,"turnos");try{let o=yield Pt(Ae(s,pe("pacienteId","==",i)));if(o.empty)return[];let c=[];for(let l of o.docs){let u=l.data();if(u.historiaClinica){let f=yield this.getEspecialistaNombre(u.especialistaId),p=vt(N({},u.historiaClinica),{fecha:u.fecha||"Fecha no disponible",horaInicio:u.startTime||"Hora de inicio no disponible",horaFin:u.endTime||"Hora de fin no disponible",especialidad:u.especialidad||"Especialidad no disponible",especialista:f||"Especialista no disponible",rese\u00F1a:u.resenia||"Rese\xF1a no disponible"});c.push(p)}}return c}catch(o){throw o instanceof Error?new Error(`Error al obtener la historia cl\xEDnica: ${o.message}`):new Error("Error desconocido al obtener la historia cl\xEDnica.")}})}getHistoriaClinicaConEspecialista(i,r){return g(this,null,function*(){let s=ht(),o=Et(s,"turnos");try{let c=yield Pt(Ae(o,pe("pacienteId","==",i),pe("especialistaId","==",r)));if(c.empty)return[];let l=[];for(let u of c.docs){let f=u.data();if(f.historiaClinica){let p=yield this.getEspecialistaNombre(f.especialistaId),_=vt(N({},f.historiaClinica),{fecha:f.fecha||"Fecha no disponible",horaInicio:f.startTime||"Hora de inicio no disponible",horaFin:f.endTime||"Hora de fin no disponible",especialidad:f.especialidad||"Especialidad no disponible",especialista:p||"Especialista no disponible",rese\u00F1a:f.resenia||"Rese\xF1a no disponible"});l.push(_)}}return l}catch(c){throw c instanceof Error?new Error(`Error al obtener la historia cl\xEDnica: ${c.message}`):new Error("Error desconocido al obtener la historia cl\xEDnica.")}})}obtenerPacientesUnicos(i){return g(this,null,function*(){try{let r=ht(),s=Et(r,"turnos"),o=Ae(s,pe("especialistaId","==",i),pe("estado","==","finalizado")),l=(yield Pt(o)).docs.map(u=>u.data().pacienteId);return[...new Set(l)]}catch(r){return console.error("Error al obtener pacientes \xFAnicos:",r),[]}})}saveEspecialistaHorario(i,r){return g(this,null,function*(){try{let s=st(this.firestore,`especialistas/${i}`);yield ge(s,{horarios:r})}catch(s){console.error("Error al guardar los horarios:",s)}})}getEspecialistaHorarios(i){return g(this,null,function*(){try{let r=st(this.firestore,"especialistas",i),s=yield _t(r);if(s.exists()){let c=s.data()?.horarios;return c||(console.error("No se encontraron horarios"),{})}else return console.error("No se encontr\xF3 el especialista"),{}}catch(r){return console.error("Error al obtener los horarios del especialista:",r),{}}})}getDiasDisponiblesEspecialista(i){return g(this,null,function*(){let r=[];try{let s=yield this.getEspecialistaHorarios(i),o=new Date;new Date().setDate(o.getDate()+15);let l=["domingo","lunes","martes","miercoles","jueves","viernes","sabado"];for(let u=0;u<=15;u++){let f=new Date;f.setDate(o.getDate()+u);let p=l[f.getDay()];if(s[p]?.length>0){let _=`${f.getDate()}/${f.getMonth()+1}/${f.getFullYear()}`;r.push(_)}}r.sort((u,f)=>{let[p,_,E]=u.split("/").map(Number),[C,D,x]=f.split("/").map(Number),L=new Date(E,_-1,p),V=new Date(x,D-1,C);return L.getTime()-V.getTime()})}catch(s){console.error("Error al obtener los d\xEDas disponibles del especialista:",s)}return r})}getHorariosDisponiblesEspecialista(i,r){return g(this,null,function*(){try{let s=r.split("/"),o=parseInt(s[0],10),c=parseInt(s[1],10)-1,l=parseInt(s[2],10),f=new Date(l,c,o).getDay(),_=["domingo","lunes","martes","mi\xE9rcoles","jueves","viernes","s\xE1bado"][f],C=(yield this.getEspecialistaHorarios(i))[_],D=[];return Array.isArray(C)&&C.length>0?(C.forEach(x=>{let L=this.convertToDate(x.startTime),V=this.convertToDate(x.endTime);for(;L<V;){let z=new Date(L);z.setHours(L.getHours()+1),D.push({startTime:this.formatTime(L),endTime:this.formatTime(z)}),L.setHours(L.getHours()+1)}}),D):(console.log(`No hay horarios disponibles para ${_}.`),[])}catch(s){return console.error("Error al obtener los horarios disponibles del especialista:",s),[]}})}convertToDate(i){let[r,s]=i.split(":").map(Number),o=new Date;return o.setHours(r,s,0,0),o}getHorariosFiltradosEspecialista(i,r,s){return g(this,null,function*(){try{let o=r.split("/"),c=parseInt(o[0],10),l=parseInt(o[1],10)-1,u=parseInt(o[2],10),p=new Date(u,l,c).getDay(),E=["domingo","lunes","martes","miercoles","jueves","viernes","sabado"][p],D=(yield this.getEspecialistaHorarios(i))[E],x=[];if(Array.isArray(D)&&D.length>0){for(let L of D){let V=this.convertToDate(L.startTime),z=this.convertToDate(L.endTime);for(;V<z;){let H=new Date(V);H.setMinutes(V.getMinutes()+s);let lt={startTime:this.formatTime(V),endTime:this.formatTime(H)};(yield this.verificarTurnoDisponible(i,r,lt.startTime,lt.endTime))&&x.push(lt),V.setMinutes(V.getMinutes()+s)}}return x}else return console.log(`No hay horarios disponibles para ${E}.`),[]}catch(o){return console.error("Error al obtener los horarios filtrados del especialista:",o),[]}})}getHorariosDisponibles(i,r,s){return g(this,null,function*(){try{let[o,c,l]=r.split("/"),u=`${o}-${c}-${l}`,f=yield this.getEspecialistaHorarios(i),_=new Date(`${l}-${c}-${o}`).getDay(),C=["domingo","lunes","martes","mi\xE9rcoles","jueves","viernes","s\xE1bado"][_],D=f[C];if(!Array.isArray(D)||D.length===0)return console.log(`No hay horarios configurados para el d\xEDa ${C}.`),[];let x=yield this.getTurnosReservados(i,u),L=[];return D.forEach(V=>{let z=this.convertToDate(V.startTime),H=this.convertToDate(V.endTime);for(;z<H;){let lt=new Date(z);if(lt.setMinutes(z.getMinutes()+s),lt>H)break;let Z={startTime:this.formatTime(z),endTime:this.formatTime(lt)};x.some(b=>this.haySolapamiento(this.convertToDate(b.startTime),this.convertToDate(b.endTime),z,lt))||L.push(Z),z.setMinutes(z.getMinutes()+s)}}),L}catch(o){return console.error("Error al obtener los horarios disponibles:",o),[]}})}getTurnosReservados(i,r){return g(this,null,function*(){try{let s=Et(this.firestore,"turnos"),o=Ae(s,pe("especialistaId","==",i),pe("fecha","==",r));return(yield Pt(o)).docs.map(l=>l.data())}catch(s){return console.error("Error al obtener los turnos reservados:",s),[]}})}haySolapamiento(i,r,s,o){return i<o&&r>s}getDuracionEspecialidad(i,r){return g(this,null,function*(){try{let s=st(this.firestore,"especialistas",i),o=yield _t(s);if(o.exists()){let c=o.data();if(c&&c.specialtyDurations){let l=c.specialtyDurations.find(u=>u.especialidad===r);return l?parseInt(l.duracion):30}}else console.error("Documento de especialista no encontrado");return 30}catch(s){return console.error("Error al obtener la duraci\xF3n de la especialidad:",s),30}})}getEspecialidades(i){return g(this,null,function*(){try{let r=st(this.firestore,"especialistas",i),s=yield _t(r);if(s.exists()){let o=s.data();if(o&&o.specialities)return o.specialities}return[]}catch(r){return console.error("Error al obtener las especialidades del especialista:",r),[]}})}getEspecialidadesConDuracion(i){return g(this,null,function*(){try{let r=st(this.firestore,"especialistas",i),s=yield _t(r);if(s.exists()){let o=s.data();if(o&&o.specialities){let c=o.specialities;return yield Promise.all(c.map(u=>g(this,null,function*(){let f=yield this.getDuracionEspecialidad(i,u);return{especialidad:u,duracion:f}})))}}return[]}catch(r){return console.error("Error al obtener las especialidades con duraci\xF3n del especialista:",r),[]}})}actualizarDuracionEspecialidad(i,r){return g(this,null,function*(){try{let s=st(this.firestore,"especialistas",i),o=yield _t(s);if(o.exists()){let c=o.data();if(c&&c.specialtyDurations){let l=c.specialtyDurations.find(u=>u.especialidad===r.especialidad);l?(l.duracion=r.duracion,yield ge(s,{specialtyDurations:c.specialtyDurations})):yield ge(s,{specialtyDurations:wl({especialidad:r.especialidad,duracion:r.duracion})})}else yield ge(s,{specialtyDurations:wl({especialidad:r.especialidad,duracion:r.duracion})})}}catch(s){console.error("Error al actualizar la duraci\xF3n de la especialidad:",s)}})}isCaptchaActivated(){return g(this,null,function*(){try{let i=ht(),r=st(i,"isCaptchaActivated","status"),s=yield _t(r);return s.exists()?s.data().active??!1:(console.warn('El documento "status" no existe en la colecci\xF3n "isCaptchaActivated".'),!1)}catch(i){return console.error("Error al obtener el estado del captcha:",i),!1}})}toggleCaptchaStatus(){return g(this,null,function*(){try{let i=ht(),r=st(i,"isCaptchaActivated","status"),s=yield _t(r);if(s.exists()){let o=s.data().active;yield ge(r,{active:!o}),console.log(`Captcha cambiado a: ${o?"desactivado":"activado"}`)}else console.warn('El documento "status" no existe. Creando con valor inicial "true".'),yield ji(r,{active:!0}),console.log("Captcha activado por defecto.")}catch(i){console.error("Error al alternar el estado del captcha:",i)}})}obtenerTurnosPorDia(){return g(this,null,function*(){try{let i=Et(this.firestore,"turnos"),r=yield Pt(i),s={};return r.forEach(o=>{let l=o.data().fecha;s[l]?s[l]++:s[l]=1}),s}catch(i){throw console.error("Error al obtener los turnos:",i),i}})}obtenerTurnosPorEspecialistaYFecha(i,r){return g(this,null,function*(){try{let s=ht(),o=Et(s,"turnos"),c=Ae(o),l=yield Pt(c),u={};return l.forEach(f=>{let p=f.data(),E=p.fecha.split("-"),C=new Date(`${E[2]}-${E[1]}-${E[0]}`);if(C>=i&&C<=r){let D=p.especialistaId;u[D]?u[D]++:u[D]=1}}),u}catch(s){throw console.error("Error al obtener los turnos por especialista y fecha:",s),s}})}obtenerTurnosPorEspecialistaYFechaFinalizado(i,r){return g(this,null,function*(){try{let s=ht(),o=Et(s,"turnos"),c=Ae(o),l=yield Pt(c),u={};return l.forEach(f=>{let p=f.data(),E=p.fecha.split("-"),C=new Date(`${E[2]}-${E[1]}-${E[0]}`);if(C>=i&&C<=r){let D=p.especialistaId;p.estado==="finalizado"&&(u[D]?u[D]++:u[D]=1)}}),u}catch(s){throw console.error("Error al obtener los turnos por especialista y fecha:",s),s}})}};t.\u0275fac=function(r){return new(r||t)(k(Ci),k(ur))},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();export{mO as a,b_ as b,VO as c,VI as d,m0 as e,ur as f,_N as g,qL as h,HL as i,VF as j,bo as k,It as l,TN as m,hr as n,LT as o,AN as p,FT as q,cb as r,on as s,DN as t,qT as u,aM as v,bb as w,wb as x,eo as y,Eb as z,VM as A,Nb as B,AA as C,pr as D,gr as E,_r as F,Dd as G,io as H,$b as I,Ld as J,qb as K,Gb as L,hV as M,fV as N,HU as O,ht as P,nj as Q};
