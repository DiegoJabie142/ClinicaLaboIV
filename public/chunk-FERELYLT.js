import{$ as ht,$a as Jd,A as Cd,Aa as Ea,B as ma,Ba as jd,Bb as ef,Ca as nn,Db as cs,E as Ct,Ea as Ta,Eb as tf,F as On,Fa as Mn,Fb as us,G as en,Ga as Ln,Gb as nf,Ha as $d,Hb as rf,I as ga,Ia as Bd,Ib as Aa,J as xn,Ja as qd,Jb as ba,K as Pd,Ka as zd,Kb as Sa,La as Gd,Lb as sf,M as Ur,Ma as Wd,N as Pt,Na as Kd,Nb as Ra,O as ya,Oa as rn,Ob as of,P as Dd,Pa as qr,Pb as af,Q as Nd,Qb as He,Rb as ls,Sb as cf,U as kd,Ua as Hd,V as Ke,W as Od,Wb as uf,X as ue,Xa as we,Y as ie,Ya as Qd,Yb as Ca,Zb as lf,_ as K,a as x,aa as xd,ab as Yd,b as Ie,ba as pe,bb as Xd,ca as va,d as St,da as Y,e as v,ea as F,f as Ed,fa as Oe,g as Td,ga as jr,h as as,i as ua,ia as Md,j as la,ja as dt,k as Zt,ka as Ld,kb as Zd,l as $e,la as _a,m as Ad,n as bd,na as Vd,o as Rt,oa as $r,p as ha,pa as tn,q as da,qa as Fd,r as fa,s as Be,t as U,ta as Ia,u as Fr,v as Sd,va as Dt,w as Rd,wa,x as H,y as pa,ya as Br,z as qe,za as Ud}from"./chunk-HUW2LGCZ.js";var Da=class{};var Vn=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),s=i.toLowerCase(),a=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(a):this.headers.set(s,[a])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let a=this.headers.get(t);if(!a)return;a=a.filter(u=>s.indexOf(u)===-1),a.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,a)}break}}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var Na=class{encodeKey(e){return hf(e)}encodeValue(e){return hf(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function Ay(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let s=i.indexOf("="),[a,u]=s==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],h=t.get(a)||[];h.push(u),t.set(a,h)}),t}var by=/%(\d[a-f0-9])/gi,Sy={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function hf(n){return encodeURIComponent(n).replace(by,(e,t)=>Sy[t]??e)}function hs(n){return`${n}`}var Nt=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Na,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=Ay(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(hs):[hs(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(hs(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(hs(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var ka=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function Ry(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function df(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function ff(n){return typeof Blob<"u"&&n instanceof Blob}function pf(n){return typeof FormData<"u"&&n instanceof FormData}function Cy(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var zr=class n{constructor(e,t,r,i){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let s;if(Ry(this.method)||i?(this.body=r!==void 0?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new Vn,this.context??=new ka,!this.params)this.params=new Nt,this.urlWithParams=t;else{let a=this.params.toString();if(a.length===0)this.urlWithParams=t;else{let u=t.indexOf("?"),h=u===-1?"?":u<t.length-1?"&":"";this.urlWithParams=t+h+a}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||df(this.body)||ff(this.body)||pf(this.body)||Cy(this.body)?this.body:this.body instanceof Nt?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||pf(this.body)?null:ff(this.body)?this.body.type||null:df(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Nt?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=e.transferCache??this.transferCache,a=e.body!==void 0?e.body:this.body,u=e.withCredentials??this.withCredentials,h=e.reportProgress??this.reportProgress,d=e.headers||this.headers,p=e.params||this.params,w=e.context??this.context;return e.setHeaders!==void 0&&(d=Object.keys(e.setHeaders).reduce((b,R)=>b.set(R,e.setHeaders[R]),d)),e.setParams&&(p=Object.keys(e.setParams).reduce((b,R)=>b.set(R,e.setParams[R]),p)),new n(t,r,a,{params:p,headers:d,context:w,reportProgress:h,responseType:i,withCredentials:u,transferCache:s})}},mf=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(mf||{}),Oa=class{constructor(e,t=gf.Ok,r="OK"){this.headers=e.headers||new Vn,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}};var xa=class n extends Oa{constructor(e={}){super(e),this.type=mf.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}};var gf=function(n){return n[n.Continue=100]="Continue",n[n.SwitchingProtocols=101]="SwitchingProtocols",n[n.Processing=102]="Processing",n[n.EarlyHints=103]="EarlyHints",n[n.Ok=200]="Ok",n[n.Created=201]="Created",n[n.Accepted=202]="Accepted",n[n.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",n[n.NoContent=204]="NoContent",n[n.ResetContent=205]="ResetContent",n[n.PartialContent=206]="PartialContent",n[n.MultiStatus=207]="MultiStatus",n[n.AlreadyReported=208]="AlreadyReported",n[n.ImUsed=226]="ImUsed",n[n.MultipleChoices=300]="MultipleChoices",n[n.MovedPermanently=301]="MovedPermanently",n[n.Found=302]="Found",n[n.SeeOther=303]="SeeOther",n[n.NotModified=304]="NotModified",n[n.UseProxy=305]="UseProxy",n[n.Unused=306]="Unused",n[n.TemporaryRedirect=307]="TemporaryRedirect",n[n.PermanentRedirect=308]="PermanentRedirect",n[n.BadRequest=400]="BadRequest",n[n.Unauthorized=401]="Unauthorized",n[n.PaymentRequired=402]="PaymentRequired",n[n.Forbidden=403]="Forbidden",n[n.NotFound=404]="NotFound",n[n.MethodNotAllowed=405]="MethodNotAllowed",n[n.NotAcceptable=406]="NotAcceptable",n[n.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",n[n.RequestTimeout=408]="RequestTimeout",n[n.Conflict=409]="Conflict",n[n.Gone=410]="Gone",n[n.LengthRequired=411]="LengthRequired",n[n.PreconditionFailed=412]="PreconditionFailed",n[n.PayloadTooLarge=413]="PayloadTooLarge",n[n.UriTooLong=414]="UriTooLong",n[n.UnsupportedMediaType=415]="UnsupportedMediaType",n[n.RangeNotSatisfiable=416]="RangeNotSatisfiable",n[n.ExpectationFailed=417]="ExpectationFailed",n[n.ImATeapot=418]="ImATeapot",n[n.MisdirectedRequest=421]="MisdirectedRequest",n[n.UnprocessableEntity=422]="UnprocessableEntity",n[n.Locked=423]="Locked",n[n.FailedDependency=424]="FailedDependency",n[n.TooEarly=425]="TooEarly",n[n.UpgradeRequired=426]="UpgradeRequired",n[n.PreconditionRequired=428]="PreconditionRequired",n[n.TooManyRequests=429]="TooManyRequests",n[n.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",n[n.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",n[n.InternalServerError=500]="InternalServerError",n[n.NotImplemented=501]="NotImplemented",n[n.BadGateway=502]="BadGateway",n[n.ServiceUnavailable=503]="ServiceUnavailable",n[n.GatewayTimeout=504]="GatewayTimeout",n[n.HttpVersionNotSupported=505]="HttpVersionNotSupported",n[n.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",n[n.InsufficientStorage=507]="InsufficientStorage",n[n.LoopDetected=508]="LoopDetected",n[n.NotExtended=510]="NotExtended",n[n.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",n}(gf||{});function Pa(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var Db=(()=>{let e=class e{constructor(r){this.handler=r}request(r,i,s={}){let a;if(r instanceof zr)a=r;else{let d;s.headers instanceof Vn?d=s.headers:d=new Vn(s.headers);let p;s.params&&(s.params instanceof Nt?p=s.params:p=new Nt({fromObject:s.params})),a=new zr(r,i,s.body!==void 0?s.body:null,{headers:d,context:s.context,params:p,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}let u=U(a).pipe(en(d=>this.handler.handle(d)));if(r instanceof zr||s.observe==="events")return u;let h=u.pipe(Ct(d=>d instanceof xa));switch(s.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return h.pipe(H(d=>{if(d.body!==null&&!(d.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return d.body}));case"blob":return h.pipe(H(d=>{if(d.body!==null&&!(d.body instanceof Blob))throw new Error("Response is not a Blob.");return d.body}));case"text":return h.pipe(H(d=>{if(d.body!==null&&typeof d.body!="string")throw new Error("Response is not a string.");return d.body}));case"json":default:return h.pipe(H(d=>d.body))}case"response":return h;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(r,i={}){return this.request("DELETE",r,i)}get(r,i={}){return this.request("GET",r,i)}head(r,i={}){return this.request("HEAD",r,i)}jsonp(r,i){return this.request("JSONP",r,{params:new Nt().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,i={}){return this.request("OPTIONS",r,i)}patch(r,i,s={}){return this.request("PATCH",r,Pa(s,i))}post(r,i,s={}){return this.request("POST",r,Pa(s,i))}put(r,i,s={}){return this.request("PUT",r,Pa(s,i))}};e.\u0275fac=function(i){return new(i||e)(Y(Da))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})();var Va=class extends af{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Fa=class n extends Va{static makeCurrent(){of(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=Dy();return t==null?null:Ny(t)}resetBaseElement(){Gr=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return cf(document.cookie,e)}},Gr=null;function Dy(){return Gr=Gr||document.querySelector("base"),Gr?Gr.getAttribute("href"):null}function Ny(n){return new URL(n,document.baseURI).pathname}var ky=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})(),Ua=new pe(""),If=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(a=>a.supports(r)),!i)throw new ie(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(Y(Ua),Y(we))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})(),ds=class{constructor(e){this._doc=e}},Ma="ng-app-id",wf=(()=>{let e=class e{constructor(r,i,s,a={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=a,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Ca(a),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${Ma}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let a=s.get(r);return a.usage+=i,a.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,a=s?.get(i);if(a?.parentNode===r)return s.delete(i),a.removeAttribute(Ma),a;{let u=this.doc.createElement("style");return this.nonce&&u.setAttribute("nonce",this.nonce),u.textContent=i,this.platformIsServer&&u.setAttribute(Ma,this.appId),r.appendChild(u),u}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),a=this.styleRef,u=a.get(i)?.elements;u?u.push(s):a.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(Y(He),Y(Ea),Y(Ta,8),Y(nn))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})(),La={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},$a=/%COMP%/g,Ef="%COMP%",Oy=`_nghost-${Ef}`,xy=`_ngcontent-${Ef}`,My=!0,Ly=new pe("",{providedIn:"root",factory:()=>My});function Vy(n){return xy.replace($a,n)}function Fy(n){return Oy.replace($a,n)}function Tf(n,e){return e.map(t=>t.replace($a,n))}var yf=(()=>{let e=class e{constructor(r,i,s,a,u,h,d,p=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=a,this.doc=u,this.platformId=h,this.ngZone=d,this.nonce=p,this.rendererByCompId=new Map,this.platformIsServer=Ca(h),this.defaultRenderer=new Wr(r,u,d,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===jr.ShadowDom&&(i=Ie(x({},i),{encapsulation:jr.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof fs?s.applyToHost(r):s instanceof Kr&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,a=s.get(i.id);if(!a){let u=this.doc,h=this.ngZone,d=this.eventManager,p=this.sharedStylesHost,w=this.removeStylesOnCompDestroy,b=this.platformIsServer;switch(i.encapsulation){case jr.Emulated:a=new fs(d,p,i,this.appId,w,u,h,b);break;case jr.ShadowDom:return new ja(d,p,r,i,u,h,this.nonce,b);default:a=new Kr(d,p,i,w,u,h,b);break}s.set(i.id,a)}return a}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(Y(If),Y(wf),Y(Ea),Y(Ly),Y(He),Y(nn),Y(we),Y(Ta))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})(),Wr=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(La[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(vf(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(vf(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new ie(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=La[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=La[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(qr.DashCase|qr.Important)?e.style.setProperty(t,r,i&qr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&qr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=Ra().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function vf(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var ja=class extends Wr{constructor(e,t,r,i,s,a,u,h){super(e,s,a,h),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=Tf(i.id,i.styles);for(let p of d){let w=document.createElement("style");u&&w.setAttribute("nonce",u),w.textContent=p,this.shadowRoot.appendChild(w)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Kr=class extends Wr{constructor(e,t,r,i,s,a,u,h){super(e,s,a,u),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=h?Tf(h,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},fs=class extends Kr{constructor(e,t,r,i,s,a,u,h){let d=i+"-"+r.id;super(e,t,r,s,a,u,h,d),this.contentAttr=Vy(d),this.hostAttr=Fy(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},Uy=(()=>{let e=class e extends ds{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(Y(He))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})(),_f=["alt","control","meta","shift"],jy={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},$y={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},By=(()=>{let e=class e extends ds{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let a=e.parseEventName(i),u=e.eventCallback(a.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ra().onAndCancel(r,a.domEventName,u))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let a=e._normalizeKey(i.pop()),u="",h=i.indexOf("code");if(h>-1&&(i.splice(h,1),u="code."),_f.forEach(p=>{let w=i.indexOf(p);w>-1&&(i.splice(w,1),u+=p+".")}),u+=a,i.length!=0||a.length===0)return null;let d={};return d.domEventName=s,d.fullKey=u,d}static matchEventFullKeyCode(r,i){let s=jy[r.key]||r.key,a="";return i.indexOf("code.")>-1&&(s=r.code,a="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),_f.forEach(u=>{if(u!==s){let h=$y[u];h(r)&&(a+=u+".")}}),a+=s,a===i)}static eventCallback(r,i,s){return a=>{e.matchEventFullKeyCode(a,r)&&s.runGuarded(()=>i(a))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(Y(He))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})();function eS(n,e){return sf(x({rootComponent:n},qy(e)))}function qy(n){return{appProviders:[...Hy,...n?.providers??[]],platformProviders:Ky}}function zy(){Fa.makeCurrent()}function Gy(){return new wa}function Wy(){return Ud(document),document}var Ky=[{provide:nn,useValue:uf},{provide:jd,useValue:zy,multi:!0},{provide:He,useFactory:Wy,deps:[]}];var Hy=[{provide:Vd,useValue:"root"},{provide:wa,useFactory:Gy,deps:[]},{provide:Ua,useClass:Uy,multi:!0,deps:[He,we,nn]},{provide:Ua,useClass:By,multi:!0,deps:[He]},yf,wf,If,{provide:Hd,useExisting:yf},{provide:lf,useClass:ky,deps:[]},[]];var Af=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(Y(He))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Qy=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:function(i){let s=null;return i?s=new(i||e):s=Y(Jy),s},providedIn:"root"});let n=e;return n})(),Jy=(()=>{let e=class e extends Qy{constructor(r){super(),this._doc=r}sanitize(r,i){if(i==null)return null;switch(r){case rn.NONE:return i;case rn.HTML:return Ln(i,"HTML")?Mn(i):Kd(this._doc,String(i)).toString();case rn.STYLE:return Ln(i,"Style")?Mn(i):i;case rn.SCRIPT:if(Ln(i,"Script"))return Mn(i);throw new ie(5200,!1);case rn.URL:return Ln(i,"URL")?Mn(i):Wd(String(i));case rn.RESOURCE_URL:if(Ln(i,"ResourceURL"))return Mn(i);throw new ie(5201,!1);default:throw new ie(5202,!1)}}bypassSecurityTrustHtml(r){return $d(r)}bypassSecurityTrustStyle(r){return Bd(r)}bypassSecurityTrustScript(r){return qd(r)}bypassSecurityTrustUrl(r){return zd(r)}bypassSecurityTrustResourceUrl(r){return Gd(r)}};e.\u0275fac=function(i){return new(i||e)(Y(He))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var j="primary",ci=Symbol("RouteTitle"),Wa=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Bn(n){return new Wa(n)}function Xy(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let a=r[s],u=n[s];if(a.startsWith(":"))i[a.substring(1)]=u;else if(a!==u.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Zy(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ye(n[t],e[t]))return!1;return!0}function Ye(n,e){let t=n?Ka(n):void 0,r=e?Ka(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!Df(n[i],e[i]))return!1;return!0}function Ka(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Df(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function Nf(n){return n.length>0?n[n.length-1]:null}function Mt(n){return Sd(n)?n:nf(n)?Be(Promise.resolve(n)):U(n)}var ev={exact:Of,subset:xf},kf={exact:tv,subset:nv,ignored:()=>!0};function bf(n,e,t){return ev[t.paths](n.root,e.root,t.matrixParams)&&kf[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function tv(n,e){return Ye(n,e)}function Of(n,e,t){if(!on(n.segments,e.segments)||!gs(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!Of(n.children[r],e.children[r],t))return!1;return!0}function nv(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Df(n[t],e[t]))}function xf(n,e,t){return Mf(n,e,e.segments,t)}function Mf(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!on(i,t)||e.hasChildren()||!gs(i,t,r))}else if(n.segments.length===t.length){if(!on(n.segments,t)||!gs(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!xf(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!on(n.segments,i)||!gs(n.segments,i,r)||!n.children[j]?!1:Mf(n.children[j],e,s,r)}}function gs(n,e,t){return e.every((r,i)=>kf[t](n[i].parameters,r.parameters))}var Ot=class{constructor(e=new Q([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Bn(this.queryParams),this._queryParamMap}toString(){return sv.serialize(this)}},Q=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ys(this)}},sn=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Bn(this.parameters),this._parameterMap}toString(){return Vf(this)}};function rv(n,e){return on(n,e)&&n.every((t,r)=>Ye(t.parameters,e[r].parameters))}function on(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function iv(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===j&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==j&&(t=t.concat(e(i,r)))}),t}var _c=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:()=>new _s,providedIn:"root"});let n=e;return n})(),_s=class{parse(e){let t=new Qa(e);return new Ot(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Hr(e.root,!0)}`,r=cv(e.queryParams),i=typeof e.fragment=="string"?`#${ov(e.fragment)}`:"";return`${t}${r}${i}`}},sv=new _s;function ys(n){return n.segments.map(e=>Vf(e)).join("/")}function Hr(n,e){if(!n.hasChildren())return ys(n);if(e){let t=n.children[j]?Hr(n.children[j],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==j&&r.push(`${i}:${Hr(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=iv(n,(r,i)=>i===j?[Hr(n.children[j],!1)]:[`${i}:${Hr(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[j]!=null?`${ys(n)}/${t[0]}`:`${ys(n)}/(${t.join("//")})`}}function Lf(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ps(n){return Lf(n).replace(/%3B/gi,";")}function ov(n){return encodeURI(n)}function Ha(n){return Lf(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function vs(n){return decodeURIComponent(n)}function Sf(n){return vs(n.replace(/\+/g,"%20"))}function Vf(n){return`${Ha(n.path)}${av(n.parameters)}`}function av(n){return Object.entries(n).map(([e,t])=>`;${Ha(e)}=${Ha(t)}`).join("")}function cv(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${ps(t)}=${ps(i)}`).join("&"):`${ps(t)}=${ps(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var uv=/^[^\/()?;#]+/;function Ba(n){let e=n.match(uv);return e?e[0]:""}var lv=/^[^\/()?;=#]+/;function hv(n){let e=n.match(lv);return e?e[0]:""}var dv=/^[^=?&#]+/;function fv(n){let e=n.match(dv);return e?e[0]:""}var pv=/^[^&#]+/;function mv(n){let e=n.match(pv);return e?e[0]:""}var Qa=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Q([],{}):new Q([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[j]=new Q(e,t)),r}parseSegment(){let e=Ba(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new ie(4009,!1);return this.capture(e),new sn(vs(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=hv(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Ba(this.remaining);i&&(r=i,this.capture(r))}e[vs(t)]=vs(r)}parseQueryParam(e){let t=fv(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let a=mv(this.remaining);a&&(r=a,this.capture(r))}let i=Sf(t),s=Sf(r);if(e.hasOwnProperty(i)){let a=e[i];Array.isArray(a)||(a=[a],e[i]=a),a.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Ba(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new ie(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=j);let a=this.parseChildren();t[s]=Object.keys(a).length===1?a[j]:new Q([],a),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new ie(4011,!1)}};function Ff(n){return n.segments.length>0?new Q([],{[j]:n}):n}function Uf(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=Uf(i);if(r===j&&s.segments.length===0&&s.hasChildren())for(let[a,u]of Object.entries(s.children))e[a]=u;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new Q(n.segments,e);return gv(t)}function gv(n){if(n.numberOfChildren===1&&n.children[j]){let e=n.children[j];return new Q(n.segments.concat(e.segments),e.children)}return n}function qn(n){return n instanceof Ot}function yv(n,e,t=null,r=null){let i=jf(n);return $f(i,e,t,r)}function jf(n){let e;function t(s){let a={};for(let h of s.children){let d=t(h);a[h.outlet]=d}let u=new Q(s.url,a);return s===n&&(e=u),u}let r=t(n.root),i=Ff(r);return e??i}function $f(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return qa(i,i,i,t,r);let s=vv(e);if(s.toRoot())return qa(i,i,new Q([],{}),t,r);let a=_v(s,i,n),u=a.processChildren?Yr(a.segmentGroup,a.index,s.commands):qf(a.segmentGroup,a.index,s.commands);return qa(i,a.segmentGroup,u,t,r)}function Is(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function ei(n){return typeof n=="object"&&n!=null&&n.outlets}function qa(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([h,d])=>{s[h]=Array.isArray(d)?d.map(p=>`${p}`):`${d}`});let a;n===e?a=t:a=Bf(n,e,t);let u=Ff(Uf(a));return new Ot(u,s,i)}function Bf(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=Bf(s,e,t)}),new Q(n.segments,r)}var ws=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Is(r[0]))throw new ie(4003,!1);let i=r.find(ei);if(i&&i!==Nf(r))throw new ie(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function vv(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new ws(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,a)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let u={};return Object.entries(s.outlets).forEach(([h,d])=>{u[h]=typeof d=="string"?d.split("/"):d}),[...i,{outlets:u}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:a===0?(s.split("/").forEach((u,h)=>{h==0&&u==="."||(h==0&&u===""?t=!0:u===".."?e++:u!=""&&i.push(u))}),i):[...i,s]},[]);return new ws(t,e,r)}var jn=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function _v(n,e,t){if(n.isAbsolute)return new jn(e,!0,0);if(!t)return new jn(e,!1,NaN);if(t.parent===null)return new jn(t,!0,0);let r=Is(n.commands[0])?0:1,i=t.segments.length-1+r;return Iv(t,i,n.numberOfDoubleDots)}function Iv(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new ie(4005,!1);i=r.segments.length}return new jn(r,!1,i-s)}function wv(n){return ei(n[0])?n[0].outlets:{[j]:n}}function qf(n,e,t){if(n??=new Q([],{}),n.segments.length===0&&n.hasChildren())return Yr(n,e,t);let r=Ev(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new Q(n.segments.slice(0,r.pathIndex),{});return s.children[j]=new Q(n.segments.slice(r.pathIndex),n.children),Yr(s,0,i)}else return r.match&&i.length===0?new Q(n.segments,{}):r.match&&!n.hasChildren()?Ja(n,e,t):r.match?Yr(n,0,i):Ja(n,e,t)}function Yr(n,e,t){if(t.length===0)return new Q(n.segments,{});{let r=wv(t),i={};if(Object.keys(r).some(s=>s!==j)&&n.children[j]&&n.numberOfChildren===1&&n.children[j].segments.length===0){let s=Yr(n.children[j],e,t);return new Q(n.segments,s.children)}return Object.entries(r).forEach(([s,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(i[s]=qf(n.children[s],e,a))}),Object.entries(n.children).forEach(([s,a])=>{r[s]===void 0&&(i[s]=a)}),new Q(n.segments,i)}}function Ev(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let a=n.segments[i],u=t[r];if(ei(u))break;let h=`${u}`,d=r<t.length-1?t[r+1]:null;if(i>0&&h===void 0)break;if(h&&d&&typeof d=="object"&&d.outlets===void 0){if(!Cf(h,d,a))return s;r+=2}else{if(!Cf(h,{},a))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Ja(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(ei(s)){let h=Tv(s.outlets);return new Q(r,h)}if(i===0&&Is(t[0])){let h=n.segments[e];r.push(new sn(h.path,Rf(t[0]))),i++;continue}let a=ei(s)?s.outlets[j]:`${s}`,u=i<t.length-1?t[i+1]:null;a&&u&&Is(u)?(r.push(new sn(a,Rf(u))),i+=2):(r.push(new sn(a,{})),i++)}return new Q(r,{})}function Tv(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Ja(new Q([],{}),0,r))}),e}function Rf(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function Cf(n,e,t){return n==t.path&&Ye(e,t.parameters)}var Xr="imperative",Ee=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Ee||{}),ze=class{constructor(e,t){this.id=e,this.url=t}},ti=class extends ze{constructor(e,t,r="imperative",i=null){super(e,t),this.type=Ee.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},an=class extends ze{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=Ee.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Le=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Le||{}),Ya=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Ya||{}),xt=class extends ze{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Ee.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},cn=class extends ze{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Ee.NavigationSkipped}},ni=class extends ze{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=Ee.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Es=class extends ze{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ee.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Xa=class extends ze{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ee.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Za=class extends ze{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=Ee.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},ec=class extends ze{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ee.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},tc=class extends ze{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ee.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},nc=class{constructor(e){this.route=e,this.type=Ee.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},rc=class{constructor(e){this.route=e,this.type=Ee.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},ic=class{constructor(e){this.snapshot=e,this.type=Ee.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},sc=class{constructor(e){this.snapshot=e,this.type=Ee.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},oc=class{constructor(e){this.snapshot=e,this.type=Ee.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ac=class{constructor(e){this.snapshot=e,this.type=Ee.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var ri=class{},ii=class{constructor(e){this.url=e}};var cc=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Cs,this.attachRef=null}},Cs=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new cc,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Ts=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=uc(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=uc(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=lc(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return lc(e,this._root).map(t=>t.value)}};function uc(n,e){if(n===e.value)return e;for(let t of e.children){let r=uc(n,t);if(r)return r}return null}function lc(n,e){if(n===e.value)return[e];for(let t of e.children){let r=lc(n,t);if(r.length)return r.unshift(e),r}return[]}var Me=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Un(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var As=class extends Ts{constructor(e,t){super(e),this.snapshot=t,wc(this,e)}toString(){return this.snapshot.toString()}};function zf(n){let e=Av(n),t=new $e([new sn("",{})]),r=new $e({}),i=new $e({}),s=new $e({}),a=new $e(""),u=new zn(t,r,s,a,i,j,n,e.root);return u.snapshot=e.root,new As(new Me(u,[]),e)}function Av(n){let e={},t={},r={},i="",s=new si([],e,r,i,t,j,n,null,{});return new bs("",new Me(s,[]))}var zn=class{constructor(e,t,r,i,s,a,u,h){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=a,this.component=u,this._futureSnapshot=h,this.title=this.dataSubject?.pipe(H(d=>d[ci]))??U(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(H(e=>Bn(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(H(e=>Bn(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Ic(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:x(x({},e.params),n.params),data:x(x({},e.data),n.data),resolve:x(x(x(x({},n.data),e.data),i?.data),n._resolvedData)}:r={params:x({},n.params),data:x({},n.data),resolve:x(x({},n.data),n._resolvedData??{})},i&&Wf(i)&&(r.resolve[ci]=i.title),r}var si=class{get title(){return this.data?.[ci]}constructor(e,t,r,i,s,a,u,h,d){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=a,this.component=u,this.routeConfig=h,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Bn(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Bn(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},bs=class extends Ts{constructor(e,t){super(t),this.url=e,wc(this,t)}toString(){return Gf(this._root)}};function wc(n,e){e.value._routerState=n,e.children.forEach(t=>wc(n,t))}function Gf(n){let e=n.children.length>0?` { ${n.children.map(Gf).join(", ")} } `:"";return`${n.value}${e}`}function za(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ye(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Ye(e.params,t.params)||n.paramsSubject.next(t.params),Zy(e.url,t.url)||n.urlSubject.next(t.url),Ye(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function hc(n,e){let t=Ye(n.params,e.params)&&rv(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||hc(n.parent,e.parent))}function Wf(n){return typeof n.title=="string"||n.title===null}var bv=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=j,this.activateEvents=new Br,this.deactivateEvents=new Br,this.attachEvents=new Br,this.detachEvents=new Br,this.parentContexts=F(Cs),this.location=F(Qd),this.changeDetector=F(Sa),this.environmentInjector=F($r),this.inputBinder=F(Ec,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ie(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ie(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ie(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new ie(4013,!1);this._activatedRoute=r;let s=this.location,u=r.snapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,d=new dc(r,h,s.injector);this.activated=s.createComponent(u,{index:s.length,injector:d,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Ld({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Fd]});let n=e;return n})(),dc=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===zn?this.route:e===Cs?this.childContexts:this.parent.get(e,t)}},Ec=new pe("");function Sv(n,e,t){let r=oi(n,e._root,t?t._root:void 0);return new As(r,e)}function oi(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=Rv(n,e,t);return new Me(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let a=s.route;return a.value._futureSnapshot=e.value,a.children=e.children.map(u=>oi(n,u)),a}}let r=Cv(e.value),i=e.children.map(s=>oi(n,s));return new Me(r,i)}}function Rv(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return oi(n,r,i);return oi(n,r)})}function Cv(n){return new zn(new $e(n.url),new $e(n.params),new $e(n.queryParams),new $e(n.fragment),new $e(n.data),n.outlet,n.component,n)}var Kf="ngNavigationCancelingError";function Hf(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=qn(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Qf(!1,Le.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function Qf(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[Kf]=!0,t.cancellationCode=e,t}function Pv(n){return Jf(n)&&qn(n.url)}function Jf(n){return!!n&&n[Kf]}var Dv=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Md({type:e,selectors:[["ng-component"]],standalone:!0,features:[ef],decls:1,vars:0,template:function(i,s){i&1&&Zd(0,"router-outlet")},dependencies:[bv],encapsulation:2});let n=e;return n})();function Nv(n,e){return n.providers&&!n._injector&&(n._injector=Yd(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Tc(n){let e=n.children&&n.children.map(Tc),t=e?Ie(x({},n),{children:e}):x({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==j&&(t.component=Dv),t}function Xe(n){return n.outlet||j}function kv(n,e){let t=n.filter(r=>Xe(r)===e);return t.push(...n.filter(r=>Xe(r)!==e)),t}function ui(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Ov=(n,e,t,r)=>H(i=>(new fc(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),fc=class{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),za(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Un(t);e.children.forEach(s=>{let a=s.value.outlet;this.deactivateRoutes(s,i[a],r),delete i[a]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let a=r.getContext(i.outlet);a&&this.deactivateChildRoutes(e,t,a.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Un(e);for(let a of Object.values(s))this.deactivateRouteAndItsChildren(a,i);if(r&&r.outlet){let a=r.outlet.detach(),u=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:a,route:e,contexts:u})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Un(e);for(let a of Object.values(s))this.deactivateRouteAndItsChildren(a,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Un(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new ac(s.value.snapshot))}),e.children.length&&this.forwardEvent(new sc(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(za(i),i===s)if(i.component){let a=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,a.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let a=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let u=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),a.children.onOutletReAttached(u.contexts),a.attachRef=u.componentRef,a.route=u.route.value,a.outlet&&a.outlet.attach(u.componentRef,u.route.value),za(u.route.value),this.activateChildRoutes(e,null,a.children)}else{let u=ui(i.snapshot);a.attachRef=null,a.route=i,a.injector=u,a.outlet&&a.outlet.activateWith(i,a.injector),this.activateChildRoutes(e,null,a.children)}}else this.activateChildRoutes(e,null,r)}},Ss=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},$n=class{constructor(e,t){this.component=e,this.route=t}};function xv(n,e,t){let r=n._root,i=e?e._root:null;return Qr(r,i,t,[r.value])}function Mv(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Wn(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!xd(n)?n:e.get(n):r}function Qr(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Un(e);return n.children.forEach(a=>{Lv(a,s[a.value.outlet],t,r.concat([a.value]),i),delete s[a.value.outlet]}),Object.entries(s).forEach(([a,u])=>Zr(u,t.getContext(a),i)),i}function Lv(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,a=e?e.value:null,u=t?t.getContext(n.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){let h=Vv(a,s,s.routeConfig.runGuardsAndResolvers);h?i.canActivateChecks.push(new Ss(r)):(s.data=a.data,s._resolvedData=a._resolvedData),s.component?Qr(n,e,u?u.children:null,r,i):Qr(n,e,t,r,i),h&&u&&u.outlet&&u.outlet.isActivated&&i.canDeactivateChecks.push(new $n(u.outlet.component,a))}else a&&Zr(e,u,i),i.canActivateChecks.push(new Ss(r)),s.component?Qr(n,null,u?u.children:null,r,i):Qr(n,null,t,r,i);return i}function Vv(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!on(n.url,e.url);case"pathParamsOrQueryParamsChange":return!on(n.url,e.url)||!Ye(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!hc(n,e)||!Ye(n.queryParams,e.queryParams);case"paramsChange":default:return!hc(n,e)}}function Zr(n,e,t){let r=Un(n),i=n.value;Object.entries(r).forEach(([s,a])=>{i.component?e?Zr(a,e.children.getContext(s),t):Zr(a,null,t):Zr(a,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new $n(e.outlet.component,i)):t.canDeactivateChecks.push(new $n(null,i)):t.canDeactivateChecks.push(new $n(null,i))}function li(n){return typeof n=="function"}function Fv(n){return typeof n=="boolean"}function Uv(n){return n&&li(n.canLoad)}function jv(n){return n&&li(n.canActivate)}function $v(n){return n&&li(n.canActivateChild)}function Bv(n){return n&&li(n.canDeactivate)}function qv(n){return n&&li(n.canMatch)}function Yf(n){return n instanceof Rd||n?.name==="EmptyError"}var ms=Symbol("INITIAL_VALUE");function Gn(){return Ke(n=>pa(n.map(e=>e.pipe(xn(1),kd(ms)))).pipe(H(e=>{for(let t of e)if(t!==!0){if(t===ms)return ms;if(t===!1||t instanceof Ot)return t}return!0}),Ct(e=>e!==ms),xn(1)))}function zv(n,e){return qe(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:a}}=t;return a.length===0&&s.length===0?U(Ie(x({},t),{guardsResult:!0})):Gv(a,r,i,n).pipe(qe(u=>u&&Fv(u)?Wv(r,s,n,e):U(u)),H(u=>Ie(x({},t),{guardsResult:u})))})}function Gv(n,e,t,r){return Be(n).pipe(qe(i=>Yv(i.component,i.route,t,e,r)),Pt(i=>i!==!0,!0))}function Wv(n,e,t,r){return Be(e).pipe(en(i=>Cd(Hv(i.route.parent,r),Kv(i.route,r),Jv(n,i.path,t),Qv(n,i.route,t))),Pt(i=>i!==!0,!0))}function Kv(n,e){return n!==null&&e&&e(new oc(n)),U(!0)}function Hv(n,e){return n!==null&&e&&e(new ic(n)),U(!0)}function Qv(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return U(!0);let i=r.map(s=>ma(()=>{let a=ui(e)??t,u=Wn(s,a),h=jv(u)?u.canActivate(e,n):tn(a,()=>u(e,n));return Mt(h).pipe(Pt())}));return U(i).pipe(Gn())}function Jv(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(a=>Mv(a)).filter(a=>a!==null).map(a=>ma(()=>{let u=a.guards.map(h=>{let d=ui(a.node)??t,p=Wn(h,d),w=$v(p)?p.canActivateChild(r,n):tn(d,()=>p(r,n));return Mt(w).pipe(Pt())});return U(u).pipe(Gn())}));return U(s).pipe(Gn())}function Yv(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return U(!0);let a=s.map(u=>{let h=ui(e)??i,d=Wn(u,h),p=Bv(d)?d.canDeactivate(n,e,t,r):tn(h,()=>d(n,e,t,r));return Mt(p).pipe(Pt())});return U(a).pipe(Gn())}function Xv(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return U(!0);let s=i.map(a=>{let u=Wn(a,n),h=Uv(u)?u.canLoad(e,t):tn(n,()=>u(e,t));return Mt(h)});return U(s).pipe(Gn(),Xf(r))}function Xf(n){return Td(ue(e=>{if(qn(e))throw Hf(n,e)}),H(e=>e===!0))}function Zv(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return U(!0);let s=i.map(a=>{let u=Wn(a,n),h=qv(u)?u.canMatch(e,t):tn(n,()=>u(e,t));return Mt(h)});return U(s).pipe(Gn(),Xf(r))}var ai=class{constructor(e){this.segmentGroup=e||null}},Rs=class extends Error{constructor(e){super(),this.urlTree=e}};function Fn(n){return Fr(new ai(n))}function e_(n){return Fr(new ie(4e3,!1))}function t_(n){return Fr(Qf(!1,Le.GuardRejected))}var pc=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return U(r);if(i.numberOfChildren>1||!i.children[j])return e_(e.redirectTo);i=i.children[j]}}applyRedirectCommands(e,t,r){let i=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t.startsWith("/"))throw new Rs(i);return i}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new Ot(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s.startsWith(":")){let u=s.substring(1);r[i]=t[u]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),a={};return Object.entries(t.children).forEach(([u,h])=>{a[u]=this.createSegmentGroup(e,h,r,i)}),new Q(s,a)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new ie(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},mc={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function n_(n,e,t,r,i){let s=Ac(n,e,t);return s.matched?(r=Nv(e,r),Zv(r,e,t,i).pipe(H(a=>a===!0?s:x({},mc)))):U(s)}function Ac(n,e,t){if(e.path==="**")return r_(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?x({},mc):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||Xy)(t,n,e);if(!i)return x({},mc);let s={};Object.entries(i.posParams??{}).forEach(([u,h])=>{s[u]=h.path});let a=i.consumed.length>0?x(x({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:a,positionalParamSegments:i.posParams??{}}}function r_(n){return{matched:!0,parameters:n.length>0?Nf(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function Pf(n,e,t,r){return t.length>0&&o_(n,t,r)?{segmentGroup:new Q(e,s_(r,new Q(t,n.children))),slicedSegments:[]}:t.length===0&&a_(n,t,r)?{segmentGroup:new Q(n.segments,i_(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Q(n.segments,n.children),slicedSegments:t}}function i_(n,e,t,r){let i={};for(let s of t)if(Ps(n,e,s)&&!r[Xe(s)]){let a=new Q([],{});i[Xe(s)]=a}return x(x({},r),i)}function s_(n,e){let t={};t[j]=e;for(let r of n)if(r.path===""&&Xe(r)!==j){let i=new Q([],{});t[Xe(r)]=i}return t}function o_(n,e,t){return t.some(r=>Ps(n,e,r)&&Xe(r)!==j)}function a_(n,e,t){return t.some(r=>Ps(n,e,r))}function Ps(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function c_(n,e,t,r){return Xe(n)!==r&&(r===j||!Ps(e,t,n))?!1:Ac(e,n,t).matched}function u_(n,e,t){return e.length===0&&!n.children[t]}var gc=class{};function l_(n,e,t,r,i,s,a="emptyOnly"){return new yc(n,e,t,r,i,a,s).recognize()}var h_=31,yc=class{constructor(e,t,r,i,s,a,u){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=a,this.urlSerializer=u,this.applyRedirects=new pc(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new ie(4002,`'${e.segmentGroup}'`)}recognize(){let e=Pf(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(H(t=>{let r=new si([],Object.freeze({}),Object.freeze(x({},this.urlTree.queryParams)),this.urlTree.fragment,{},j,this.rootComponentType,null,{}),i=new Me(r,t),s=new bs("",i),a=yv(r,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(a),this.inheritParamsAndData(s._root,null),{state:s,tree:a}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,j).pipe(On(r=>{if(r instanceof Rs)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ai?this.noMatchError(r):r}))}inheritParamsAndData(e,t){let r=e.value,i=Ic(r,t,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(s=>this.inheritParamsAndData(s,r))}processSegmentGroup(e,t,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0).pipe(H(s=>s instanceof Me?[s]:[]))}processChildren(e,t,r){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return Be(i).pipe(en(s=>{let a=r.children[s],u=kv(t,s);return this.processSegmentGroup(e,u,a,s)}),Nd((s,a)=>(s.push(...a),s)),ga(null),Dd(),qe(s=>{if(s===null)return Fn(r);let a=Zf(s);return d_(a),U(a)}))}processSegment(e,t,r,i,s,a){return Be(t).pipe(en(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,s,a).pipe(On(h=>{if(h instanceof ai)return U(null);throw h}))),Pt(u=>!!u),On(u=>{if(Yf(u))return u_(r,i,s)?U(new gc):Fn(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,s,a,u){return c_(r,i,s,a)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,a):this.allowRedirects&&u?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,a):Fn(i):Fn(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,a){let{matched:u,consumedSegments:h,positionalParamSegments:d,remainingSegments:p}=Ac(t,i,s);if(!u)return Fn(t);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>h_&&(this.allowRedirects=!1));let w=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,d);return this.applyRedirects.lineralizeSegments(i,w).pipe(qe(b=>this.processSegment(e,r,t,b.concat(p),a,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){let a=n_(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Ke(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Ke(({routes:h})=>{let d=r._loadedInjector??e,{consumedSegments:p,remainingSegments:w,parameters:b}=u,R=new si(p,b,Object.freeze(x({},this.urlTree.queryParams)),this.urlTree.fragment,p_(r),Xe(r),r.component??r._loadedComponent??null,r,m_(r)),{segmentGroup:N,slicedSegments:V}=Pf(t,p,w,h);if(V.length===0&&N.hasChildren())return this.processChildren(d,h,N).pipe(H(G=>G===null?null:new Me(R,G)));if(h.length===0&&V.length===0)return U(new Me(R,[]));let k=Xe(r)===s;return this.processSegment(d,h,N,V,k?j:s,!0).pipe(H(G=>new Me(R,G instanceof Me?[G]:[])))}))):Fn(t)))}getChildConfig(e,t,r){return t.children?U({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?U({routes:t._loadedRoutes,injector:t._loadedInjector}):Xv(e,t,r,this.urlSerializer).pipe(qe(i=>i?this.configLoader.loadChildren(e,t).pipe(ue(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):t_(t))):U({routes:[],injector:e})}};function d_(n){n.sort((e,t)=>e.value.outlet===j?-1:t.value.outlet===j?1:e.value.outlet.localeCompare(t.value.outlet))}function f_(n){let e=n.value.routeConfig;return e&&e.path===""}function Zf(n){let e=[],t=new Set;for(let r of n){if(!f_(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=Zf(r.children);e.push(new Me(r.value,i))}return e.filter(r=>!t.has(r))}function p_(n){return n.data||{}}function m_(n){return n.resolve||{}}function g_(n,e,t,r,i,s){return qe(a=>l_(n,e,t,r,a.extractedUrl,i,s).pipe(H(({state:u,tree:h})=>Ie(x({},a),{targetSnapshot:u,urlAfterRedirects:h}))))}function y_(n,e){return qe(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return U(t);let s=new Set(i.map(h=>h.route)),a=new Set;for(let h of s)if(!a.has(h))for(let d of ep(h))a.add(d);let u=0;return Be(a).pipe(en(h=>s.has(h)?v_(h,r,n,e):(h.data=Ic(h,h.parent,n).resolve,U(void 0))),ue(()=>u++),ya(1),qe(h=>u===a.size?U(t):Rt))})}function ep(n){let e=n.children.map(t=>ep(t)).flat();return[n,...e]}function v_(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!Wf(i)&&(s[ci]=i.title),__(s,n,e,r).pipe(H(a=>(n._resolvedData=a,n.data=Ic(n,n.parent,t).resolve,null)))}function __(n,e,t,r){let i=Ka(n);if(i.length===0)return U({});let s={};return Be(i).pipe(qe(a=>I_(n[a],e,t,r).pipe(Pt(),ue(u=>{s[a]=u}))),ya(1),Pd(s),On(a=>Yf(a)?Rt:Fr(a)))}function I_(n,e,t,r){let i=ui(e)??r,s=Wn(n,i),a=s.resolve?s.resolve(e,t):tn(i,()=>s(e,t));return Mt(a)}function Ga(n){return Ke(e=>{let t=n(e);return t?Be(t).pipe(H(()=>e)):U(e)})}var tp=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(a=>a.outlet===j);return i}getResolvedTitleForRoute(r){return r.data[ci]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:()=>F(w_),providedIn:"root"});let n=e;return n})(),w_=(()=>{let e=class e extends tp{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(Y(Af))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),bc=new pe("",{providedIn:"root",factory:()=>({})}),Sc=new pe(""),E_=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=F(ba)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return U(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Mt(r.loadComponent()).pipe(H(np),ue(a=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=a}),Ur(()=>{this.componentLoaders.delete(r)})),s=new la(i,()=>new Zt).pipe(ua());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return U({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let a=T_(i,this.compiler,r,this.onLoadEndListener).pipe(Ur(()=>{this.childrenLoaders.delete(i)})),u=new la(a,()=>new Zt).pipe(ua());return this.childrenLoaders.set(i,u),u}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function T_(n,e,t,r){return Mt(n.loadChildren()).pipe(H(np),qe(i=>i instanceof Jd||Array.isArray(i)?U(i):Be(e.compileModuleAsync(i))),H(i=>{r&&r(n);let s,a,u=!1;return Array.isArray(i)?(a=i,u=!0):(s=i.create(t).injector,a=s.get(Sc,[],{optional:!0,self:!0}).flat()),{routes:a.map(Tc),injector:s}}))}function A_(n){return n&&typeof n=="object"&&"default"in n}function np(n){return A_(n)?n.default:n}var Rc=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:()=>F(b_),providedIn:"root"});let n=e;return n})(),b_=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),S_=new pe("");var R_=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Zt,this.transitionAbortSubject=new Zt,this.configLoader=F(E_),this.environmentInjector=F($r),this.urlSerializer=F(_c),this.rootContexts=F(Cs),this.location=F(ls),this.inputBindingEnabled=F(Ec,{optional:!0})!==null,this.titleStrategy=F(tp),this.options=F(bc,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=F(Rc),this.createViewTransition=F(S_,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>U(void 0),this.rootComponentType=null;let r=s=>this.events.next(new nc(s)),i=s=>this.events.next(new rc(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(Ie(x(x({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new $e({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Xr,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ct(a=>a.id!==0),H(a=>Ie(x({},a),{extractedUrl:this.urlHandlingStrategy.extract(a.rawUrl)})),Ke(a=>{let u=!1,h=!1;return U(a).pipe(Ke(d=>{if(this.navigationId>a.id)return this.cancelNavigationTransition(a,"",Le.SupersededByNewNavigation),Rt;this.currentTransition=a,this.currentNavigation={id:d.id,initialUrl:d.rawUrl,extractedUrl:d.extractedUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?Ie(x({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let p=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),w=d.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!p&&w!=="reload"){let b="";return this.events.next(new cn(d.id,this.urlSerializer.serialize(d.rawUrl),b,Ya.IgnoredSameUrlNavigation)),d.resolve(null),Rt}if(this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return U(d).pipe(Ke(b=>{let R=this.transitions?.getValue();return this.events.next(new ti(b.id,this.urlSerializer.serialize(b.extractedUrl),b.source,b.restoredState)),R!==this.transitions?.getValue()?Rt:Promise.resolve(b)}),g_(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),ue(b=>{a.targetSnapshot=b.targetSnapshot,a.urlAfterRedirects=b.urlAfterRedirects,this.currentNavigation=Ie(x({},this.currentNavigation),{finalUrl:b.urlAfterRedirects});let R=new Es(b.id,this.urlSerializer.serialize(b.extractedUrl),this.urlSerializer.serialize(b.urlAfterRedirects),b.targetSnapshot);this.events.next(R)}));if(p&&this.urlHandlingStrategy.shouldProcessUrl(d.currentRawUrl)){let{id:b,extractedUrl:R,source:N,restoredState:V,extras:k}=d,G=new ti(b,this.urlSerializer.serialize(R),N,V);this.events.next(G);let J=zf(this.rootComponentType).snapshot;return this.currentTransition=a=Ie(x({},d),{targetSnapshot:J,urlAfterRedirects:R,extras:Ie(x({},k),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=R,U(a)}else{let b="";return this.events.next(new cn(d.id,this.urlSerializer.serialize(d.extractedUrl),b,Ya.IgnoredByUrlHandlingStrategy)),d.resolve(null),Rt}}),ue(d=>{let p=new Xa(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(p)}),H(d=>(this.currentTransition=a=Ie(x({},d),{guards:xv(d.targetSnapshot,d.currentSnapshot,this.rootContexts)}),a)),zv(this.environmentInjector,d=>this.events.next(d)),ue(d=>{if(a.guardsResult=d.guardsResult,qn(d.guardsResult))throw Hf(this.urlSerializer,d.guardsResult);let p=new Za(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.events.next(p)}),Ct(d=>d.guardsResult?!0:(this.cancelNavigationTransition(d,"",Le.GuardRejected),!1)),Ga(d=>{if(d.guards.canActivateChecks.length)return U(d).pipe(ue(p=>{let w=new ec(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(w)}),Ke(p=>{let w=!1;return U(p).pipe(y_(this.paramsInheritanceStrategy,this.environmentInjector),ue({next:()=>w=!0,complete:()=>{w||this.cancelNavigationTransition(p,"",Le.NoDataFromResolver)}}))}),ue(p=>{let w=new tc(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(w)}))}),Ga(d=>{let p=w=>{let b=[];w.routeConfig?.loadComponent&&!w.routeConfig._loadedComponent&&b.push(this.configLoader.loadComponent(w.routeConfig).pipe(ue(R=>{w.component=R}),H(()=>{})));for(let R of w.children)b.push(...p(R));return b};return pa(p(d.targetSnapshot.root)).pipe(ga(null),xn(1))}),Ga(()=>this.afterPreactivation()),Ke(()=>{let{currentSnapshot:d,targetSnapshot:p}=a,w=this.createViewTransition?.(this.environmentInjector,d.root,p.root);return w?Be(w).pipe(H(()=>a)):U(a)}),H(d=>{let p=Sv(r.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return this.currentTransition=a=Ie(x({},d),{targetRouterState:p}),this.currentNavigation.targetRouterState=p,a}),ue(()=>{this.events.next(new ri)}),Ov(this.rootContexts,r.routeReuseStrategy,d=>this.events.next(d),this.inputBindingEnabled),xn(1),ue({next:d=>{u=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new an(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects))),this.titleStrategy?.updateTitle(d.targetRouterState.snapshot),d.resolve(!0)},complete:()=>{u=!0}}),Od(this.transitionAbortSubject.pipe(ue(d=>{throw d}))),Ur(()=>{!u&&!h&&this.cancelNavigationTransition(a,"",Le.SupersededByNewNavigation),this.currentTransition?.id===a.id&&(this.currentNavigation=null,this.currentTransition=null)}),On(d=>{if(h=!0,Jf(d))this.events.next(new xt(a.id,this.urlSerializer.serialize(a.extractedUrl),d.message,d.cancellationCode)),Pv(d)?this.events.next(new ii(d.url)):a.resolve(!1);else{this.events.next(new ni(a.id,this.urlSerializer.serialize(a.extractedUrl),d,a.targetSnapshot??void 0));try{a.resolve(r.errorHandler(d))}catch(p){this.options.resolveNavigationPromiseOnError?a.resolve(!1):a.reject(p)}}return Rt}))}))}cancelNavigationTransition(r,i,s){let a=new xt(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(a),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function C_(n){return n!==Xr}var P_=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:()=>F(D_),providedIn:"root"});let n=e;return n})(),vc=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},D_=(()=>{let e=class e extends vc{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Ia(e)))(s||e)}})(),e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),rp=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:()=>F(N_),providedIn:"root"});let n=e;return n})(),N_=(()=>{let e=class e extends rp{constructor(){super(...arguments),this.location=F(ls),this.urlSerializer=F(_c),this.options=F(bc,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=F(Rc),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Ot,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=zf(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof ti)this.stateMemento=this.createStateMemento();else if(r instanceof cn)this.rawUrlTree=i.initialUrl;else if(r instanceof Es){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(s,i)}}else r instanceof ri?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof xt&&(r.code===Le.GuardRejected||r.code===Le.NoDataFromResolver)?this.restoreHistory(i):r instanceof ni?this.restoreHistory(i,!0):r instanceof an&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let a=this.browserPageId,u=x(x({},i.extras.state),this.generateNgRouterState(i.id,a));this.location.replaceState(s,"",u)}else{let a=x(x({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",a)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,a=this.currentPageId-s;a!==0?this.location.historyGo(a):this.currentUrlTree===r.finalUrl&&a===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Ia(e)))(s||e)}})(),e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Jr=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Jr||{});function k_(n,e){n.events.pipe(Ct(t=>t instanceof an||t instanceof xt||t instanceof ni||t instanceof cn),H(t=>t instanceof an||t instanceof cn?Jr.COMPLETE:(t instanceof xt?t.code===Le.Redirect||t.code===Le.SupersededByNewNavigation:!1)?Jr.REDIRECTING:Jr.FAILED),Ct(t=>t!==Jr.REDIRECTING),xn(1)).subscribe(()=>{e()})}function O_(n){throw n}var x_={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},M_={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ds=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=F(us),this.stateManager=F(rp),this.options=F(bc,{optional:!0})||{},this.pendingTasks=F(Xd),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=F(R_),this.urlSerializer=F(_c),this.location=F(ls),this.urlHandlingStrategy=F(Rc),this._events=new Zt,this.errorHandler=this.options.errorHandler||O_,this.navigated=!1,this.routeReuseStrategy=F(P_),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=F(Sc,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!F(Ec,{optional:!0}),this.eventsSubscription=new Ed,this.isNgZoneEnabled=F(we)instanceof we&&we.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,a=this.navigationTransitions.currentNavigation;if(s!==null&&a!==null){if(this.stateManager.handleRouterEvent(i,a),i instanceof xt&&i.code!==Le.Redirect&&i.code!==Le.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof an)this.navigated=!0;else if(i instanceof ii){let u=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),h={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||C_(s.source)};this.scheduleNavigation(u,Xr,null,h,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}V_(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Xr,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let a={replaceUrl:!0},u=s?.navigationId?s:null;if(s){let d=x({},s);delete d.navigationId,delete d.\u0275routerPageId,Object.keys(d).length!==0&&(a.state=d)}let h=this.parseUrl(r);this.scheduleNavigation(h,i,u,a)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(Tc),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:a,fragment:u,queryParamsHandling:h,preserveFragment:d}=i,p=d?this.currentUrlTree.fragment:u,w=null;switch(h){case"merge":w=x(x({},this.currentUrlTree.queryParams),a);break;case"preserve":w=this.currentUrlTree.queryParams;break;default:w=a||null}w!==null&&(w=this.removeEmptyProps(w));let b;try{let R=s?s.snapshot:this.routerState.snapshot.root;b=jf(R)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),b=this.currentUrlTree.root}return $f(b,r,w,p??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=qn(r)?r:this.parseUrl(r),a=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(a,Xr,null,i)}navigate(r,i={skipLocationChange:!1}){return L_(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=x({},x_):i===!1?s=x({},M_):s=i,qn(r))return bf(this.currentUrlTree,r,s);let a=this.parseUrl(r);return bf(this.currentUrlTree,a,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,a])=>(a!=null&&(i[s]=a),i),{})}scheduleNavigation(r,i,s,a,u){if(this.disposed)return Promise.resolve(!1);let h,d,p;u?(h=u.resolve,d=u.reject,p=u.promise):p=new Promise((b,R)=>{h=b,d=R});let w=this.pendingTasks.add();return k_(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(w))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:a,resolve:h,reject:d,promise:p,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),p.catch(b=>Promise.reject(b))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function L_(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new ie(4008,!1)}function V_(n){return!(n instanceof ri)&&!(n instanceof ii)}var F_=new pe("");function qS(n,...e){return _a([{provide:Sc,multi:!0,useValue:n},[],{provide:zn,useFactory:U_,deps:[Ds]},{provide:rf,multi:!0,useFactory:j_},e.map(t=>t.\u0275providers)])}function U_(n){return n.routerState.root}function j_(){let n=F(Dt);return e=>{let t=n.get(Aa);if(e!==t.components[0])return;let r=n.get(Ds),i=n.get($_);n.get(B_)===1&&r.initialNavigation(),n.get(q_,null,va.Optional)?.setUpPreloading(),n.get(F_,null,va.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var $_=new pe("",{factory:()=>new Zt}),B_=new pe("",{providedIn:"root",factory:()=>1});var q_=new pe("");var ip=(()=>{let e=class e{constructor(){this.router=F(Ds)}routerLink(r){return this.router.navigateByUrl(r)}saveInLocalStorage(r,i){return localStorage.setItem(r,JSON.stringify(i))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var op=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},z_=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],a=n[t++],u=n[t++],h=((i&7)<<18|(s&63)<<12|(a&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{let s=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},ap={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],a=i+1<n.length,u=a?n[i+1]:0,h=i+2<n.length,d=h?n[i+2]:0,p=s>>2,w=(s&3)<<4|u>>4,b=(u&15)<<2|d>>6,R=d&63;h||(R=64,a||(b=64)),r.push(t[p],t[w],t[b],t[R])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(op(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):z_(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],u=i<n.length?t[n.charAt(i)]:0;++i;let d=i<n.length?t[n.charAt(i)]:64;++i;let w=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||u==null||d==null||w==null)throw new Pc;let b=s<<2|u>>4;if(r.push(b),d!==64){let R=u<<4&240|d>>2;if(r.push(R),w!==64){let N=d<<6&192|w;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Pc=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},G_=function(n){let e=op(n);return ap.encodeByteArray(e,!0)},hi=function(n){return G_(n).replace(/\./g,"")},Nc=function(n){try{return ap.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function W_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var K_=()=>W_().__FIREBASE_DEFAULTS__,H_=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Q_=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Nc(n[1]);return e&&JSON.parse(e)},ks=()=>{try{return K_()||H_()||Q_()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},kc=n=>{var e,t;return(t=(e=ks())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},cp=n=>{let e=kc(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Oc=()=>{var n;return(n=ks())===null||n===void 0?void 0:n.config},xc=n=>{var e;return(e=ks())===null||e===void 0?void 0:e[`_${n}`]};var Ns=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function up(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[hi(JSON.stringify(t)),hi(JSON.stringify(a)),""].join(".")}function le(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function lp(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(le())}function J_(){var n;let e=(n=ks())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function hp(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function dp(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function fp(){let n=le();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function pp(){return!J_()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Mc(){try{return typeof indexedDB=="object"}catch{return!1}}function mp(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var Y_="FirebaseError",Ve=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Y_,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ft.prototype.create)}},ft=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?X_(s,r):"Error",u=`${this.serviceName}: ${a} (${i}).`;return new Ve(i,u,r)}};function X_(n,e){return n.replace(Z_,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var Z_=/\{\$([^}]+)}/g;function gp(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function un(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],a=e[i];if(sp(s)&&sp(a)){if(!un(s,a))return!1}else if(s!==a)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function sp(n){return n!==null&&typeof n=="object"}function di(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Kn(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Hn(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function yp(n,e){let t=new Dc(n,e);return t.subscribe.bind(t)}var Dc=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");eI(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Cc),i.error===void 0&&(i.error=Cc),i.complete===void 0&&(i.complete=Cc);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function eI(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Cc(){}var JS=4*60*60*1e3;function Fe(n){return n&&n._delegate?n._delegate:n}var Ge=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var ln="[DEFAULT]";var Lc=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Ns;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(nI(e))try{this.getOrInitializeService({instanceIdentifier:ln})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ln){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return v(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=ln){return this.instances.has(e)}getOptions(e=ln){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,a]of this.instancesDeferred.entries()){let u=this.normalizeInstanceIdentifier(s);r===u&&a.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:tI(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ln){return this.component?this.component.multipleInstances?e:ln:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function tI(n){return n===ln?void 0:n}function nI(n){return n.instantiationMode==="EAGER"}var Os=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Lc(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var rI=[],B=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(B||{}),iI={debug:B.DEBUG,verbose:B.VERBOSE,info:B.INFO,warn:B.WARN,error:B.ERROR,silent:B.SILENT},sI=B.INFO,oI={[B.DEBUG]:"log",[B.VERBOSE]:"log",[B.INFO]:"info",[B.WARN]:"warn",[B.ERROR]:"error"},aI=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=oI[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Lt=class{constructor(e){this.name=e,this._logLevel=sI,this._logHandler=aI,this._userLogHandler=null,rI.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in B))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?iI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,B.DEBUG,...e),this._logHandler(this,B.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,B.VERBOSE,...e),this._logHandler(this,B.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,B.INFO,...e),this._logHandler(this,B.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,B.WARN,...e),this._logHandler(this,B.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,B.ERROR,...e),this._logHandler(this,B.ERROR,...e)}};var cI=(n,e)=>e.some(t=>n instanceof t),vp,_p;function uI(){return vp||(vp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lI(){return _p||(_p=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Ip=new WeakMap,Fc=new WeakMap,wp=new WeakMap,Vc=new WeakMap,jc=new WeakMap;function hI(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{t(Ze(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&Ip.set(t,n)}).catch(()=>{}),jc.set(e,n),e}function dI(n){if(Fc.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});Fc.set(n,e)}var Uc={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Fc.get(n);if(e==="objectStoreNames")return n.objectStoreNames||wp.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ze(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Ep(n){Uc=n(Uc)}function fI(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(xs(this),e,...t);return wp.set(r,e.sort?e.sort():[e]),Ze(r)}:lI().includes(n)?function(...e){return n.apply(xs(this),e),Ze(Ip.get(this))}:function(...e){return Ze(n.apply(xs(this),e))}}function pI(n){return typeof n=="function"?fI(n):(n instanceof IDBTransaction&&dI(n),cI(n,uI())?new Proxy(n,Uc):n)}function Ze(n){if(n instanceof IDBRequest)return hI(n);if(Vc.has(n))return Vc.get(n);let e=pI(n);return e!==n&&(Vc.set(n,e),jc.set(e,n)),e}var xs=n=>jc.get(n);function Ap(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let a=indexedDB.open(n,e),u=Ze(a);return r&&a.addEventListener("upgradeneeded",h=>{r(Ze(a.result),h.oldVersion,h.newVersion,Ze(a.transaction),h)}),t&&a.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),u.then(h=>{s&&h.addEventListener("close",()=>s()),i&&h.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),u}var mI=["get","getKey","getAll","getAllKeys","count"],gI=["put","add","delete","clear"],$c=new Map;function Tp(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if($c.get(e))return $c.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=gI.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||mI.includes(t)))return;let s=function(a,...u){return v(this,null,function*(){let h=this.transaction(a,i?"readwrite":"readonly"),d=h.store;return r&&(d=d.index(u.shift())),(yield Promise.all([d[t](...u),i&&h.done]))[0]})};return $c.set(e,s),s}Ep(n=>Ie(x({},n),{get:(e,t,r)=>Tp(e,t)||n.get(e,t,r),has:(e,t)=>!!Tp(e,t)||n.has(e,t)}));var qc=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(yI(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function yI(n){let e=n.getComponent();return e?.type==="VERSION"}var zc="@firebase/app",bp="0.10.5";var hn=new Lt("@firebase/app"),vI="@firebase/app-compat",_I="@firebase/analytics-compat",II="@firebase/analytics",wI="@firebase/app-check-compat",EI="@firebase/app-check",TI="@firebase/auth",AI="@firebase/auth-compat",bI="@firebase/database",SI="@firebase/database-compat",RI="@firebase/functions",CI="@firebase/functions-compat",PI="@firebase/installations",DI="@firebase/installations-compat",NI="@firebase/messaging",kI="@firebase/messaging-compat",OI="@firebase/performance",xI="@firebase/performance-compat",MI="@firebase/remote-config",LI="@firebase/remote-config-compat",VI="@firebase/storage",FI="@firebase/storage-compat",UI="@firebase/firestore",jI="@firebase/vertexai-preview",$I="@firebase/firestore-compat",BI="firebase",qI="10.12.2";var Gc="[DEFAULT]",zI={[zc]:"fire-core",[vI]:"fire-core-compat",[II]:"fire-analytics",[_I]:"fire-analytics-compat",[EI]:"fire-app-check",[wI]:"fire-app-check-compat",[TI]:"fire-auth",[AI]:"fire-auth-compat",[bI]:"fire-rtdb",[SI]:"fire-rtdb-compat",[RI]:"fire-fn",[CI]:"fire-fn-compat",[PI]:"fire-iid",[DI]:"fire-iid-compat",[NI]:"fire-fcm",[kI]:"fire-fcm-compat",[OI]:"fire-perf",[xI]:"fire-perf-compat",[MI]:"fire-rc",[LI]:"fire-rc-compat",[VI]:"fire-gcs",[FI]:"fire-gcs-compat",[UI]:"fire-fst",[$I]:"fire-fst-compat",[jI]:"fire-vertex","fire-js":"fire-js",[BI]:"fire-js-all"};var fi=new Map,GI=new Map,Wc=new Map;function Sp(n,e){try{n.container.addComponent(e)}catch(t){hn.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ft(n){let e=n.name;if(Wc.has(e))return hn.debug(`There were multiple attempts to register component ${e}.`),!1;Wc.set(e,n);for(let t of fi.values())Sp(t,n);for(let t of GI.values())Sp(t,n);return!0}function mi(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Qe(n){return n.settings!==void 0}var WI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Vt=new ft("app","Firebase",WI);var Kc=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ge("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Vt.create("app-deleted",{appName:this._name})}};var Ut=qI;function Jc(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Gc,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Vt.create("bad-app-name",{appName:String(i)});if(t||(t=Oc()),!t)throw Vt.create("no-options");let s=fi.get(i);if(s){if(un(t,s.options)&&un(r,s.config))return s;throw Vt.create("duplicate-app",{appName:i})}let a=new Os(i);for(let h of Wc.values())a.addComponent(h);let u=new Kc(t,r,a);return fi.set(i,u),u}function Qn(n=Gc){let e=fi.get(n);if(!e&&n===Gc&&Oc())return Jc();if(!e)throw Vt.create("no-app",{appName:n});return e}function Ms(){return Array.from(fi.values())}function he(n,e,t){var r;let i=(r=zI[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){let u=[`Unable to register library "${i}" with version "${e}":`];s&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),hn.warn(u.join(" "));return}Ft(new Ge(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var KI="firebase-heartbeat-database",HI=1,pi="firebase-heartbeat-store",Bc=null;function Dp(){return Bc||(Bc=Ap(KI,HI,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(pi)}catch(t){console.warn(t)}}}}).catch(n=>{throw Vt.create("idb-open",{originalErrorMessage:n.message})})),Bc}function QI(n){return v(this,null,function*(){try{let t=(yield Dp()).transaction(pi),r=yield t.objectStore(pi).get(Np(n));return yield t.done,r}catch(e){if(e instanceof Ve)hn.warn(e.message);else{let t=Vt.create("idb-get",{originalErrorMessage:e?.message});hn.warn(t.message)}}})}function Rp(n,e){return v(this,null,function*(){try{let r=(yield Dp()).transaction(pi,"readwrite");yield r.objectStore(pi).put(e,Np(n)),yield r.done}catch(t){if(t instanceof Ve)hn.warn(t.message);else{let r=Vt.create("idb-set",{originalErrorMessage:t?.message});hn.warn(r.message)}}})}function Np(n){return`${n.name}!${n.options.appId}`}var JI=1024,YI=30*24*60*60*1e3,Hc=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Qc(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return v(this,null,function*(){var e,t;let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Cp();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{let u=new Date(a.date).valueOf();return Date.now()-u<=YI}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return v(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=Cp(),{heartbeatsToSend:r,unsentEntries:i}=XI(this._heartbeatsCache.heartbeats),s=hi(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function Cp(){return new Date().toISOString().substring(0,10)}function XI(n,e=JI){let t=[],r=n.slice();for(let i of n){let s=t.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),Pp(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Pp(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Qc=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return v(this,null,function*(){return Mc()?mp().then(()=>!0).catch(()=>!1):!1})}read(){return v(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield QI(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return v(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Rp(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return v(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Rp(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function Pp(n){return hi(JSON.stringify({version:2,heartbeats:n})).length}function ZI(n){Ft(new Ge("platform-logger",e=>new qc(e),"PRIVATE")),Ft(new Ge("heartbeat",e=>new Hc(e),"PRIVATE")),he(zc,bp,n),he(zc,bp,"esm2017"),he("fire-js","")}ZI("");var ew="firebase",tw="10.12.2";he(ew,tw,"app");var fn=new cs("ANGULARFIRE2_VERSION");function Vs(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(a=>a.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var gi=(n,e)=>{let t=e?[e]:Ms(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(a=>{r.includes(a)||r.push(a)})}),r},Yn=class{constructor(){return gi(nw)}},nw="app-check";function Jn(){}var Ls=class{zone;delegate;constructor(e,t=bd){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(a){i.runGuarded(()=>{e.apply(this,[a])})};return this.delegate.schedule(s,t,r)}},Yc=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Jn,{},Jn,Jn)),t.pipe(ue({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Xn=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Ls(Zone.current)),this.insideAngular=t.run(()=>new Ls(Zone.current,Ad)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(Y(we))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Fs(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function rw(n){return Fs().ngZone.runOutsideAngular(()=>n())}function dn(n){return Fs().ngZone.run(()=>n())}function iw(n){return sw(Fs())(n)}function sw(n){return function(t){return t=t.lift(new Yc(n.ngZone)),t.pipe(fa(n.outsideAngular),da(n.insideAngular))}}var ow=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),dn(()=>n.apply(void 0,r))},et=(n,e)=>function(){let t,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(t||=dn(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Jn,{},Jn,Jn))),r[s]=ow(r[s],t));let i=rw(()=>n.apply(this,r));if(!e)if(i instanceof as){let s=Fs();return i.pipe(fa(s.outsideAngular),da(s.insideAngular))}else return dn(()=>i);return i instanceof as?i.pipe(iw):i instanceof Promise?dn(()=>new Promise((s,a)=>i.then(u=>dn(()=>s(u)),u=>dn(()=>a(u))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:dn(()=>i)};var pt=class{constructor(e){return e}},pn=class{constructor(){return Ms()}};function aw(n){return n&&n.length===1?n[0]:new pt(Qn())}var Xc=new pe("angularfire2._apps"),cw={provide:pt,useFactory:aw,deps:[[new Oe,Xc]]},uw={provide:pn,deps:[[new Oe,Xc]]};function lw(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new pt(r)}}var hw=(()=>{class n{constructor(t){he("angularfire",fn.full,"core"),he("angularfire",fn.full,"app"),he("angular",tf.full,t.toString())}static \u0275fac=function(r){return new(r||n)(Y(nn))};static \u0275mod=dt({type:n});static \u0275inj=ht({providers:[cw,uw]})}return n})();function xR(n,...e){return{ngModule:hw,providers:[{provide:Xc,useFactory:lw(n),multi:!0,deps:[we,Dt,Xn,...e]}]}}var MR=et(Jc,!0);function Hp(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var Qp=Hp,Jp=new ft("auth","Firebase",Hp());var zs=new Lt("@firebase/auth");function dw(n,...e){zs.logLevel<=B.WARN&&zs.warn(`Auth (${Ut}): ${n}`,...e)}function js(n,...e){zs.logLevel<=B.ERROR&&zs.error(`Auth (${Ut}): ${n}`,...e)}function nt(n,...e){throw wu(n,...e)}function mn(n,...e){return wu(n,...e)}function Yp(n,e,t){let r=Object.assign(Object.assign({},Qp()),{[e]:t});return new ft("auth","Firebase",r).create(e,{appName:n.name})}function yt(n){return Yp(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function wu(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Jp.create(n,...e)}function M(n,e,...t){if(!n)throw wu(e,...t)}function mt(n){let e="INTERNAL ASSERTION FAILED: "+n;throw js(e),new Error(e)}function $t(n,e){n||mt(e)}function nu(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function fw(){return kp()==="http:"||kp()==="https:"}function kp(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function pw(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(fw()||hp()||"connection"in navigator)?navigator.onLine:!0}function mw(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var gn=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,$t(t>e,"Short delay should be less than long delay!"),this.isMobile=lp()||dp()}get(){return pw()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Eu(n,e){$t(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Gs=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;mt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;mt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;mt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var gw={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var yw=new gn(3e4,6e4);function Bt(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function qt(s,a,u,h){return v(this,arguments,function*(n,e,t,r,i={}){return Xp(n,i,()=>v(this,null,function*(){let d={},p={};r&&(e==="GET"?p=r:d={body:JSON.stringify(r)});let w=di(Object.assign({key:n.config.apiKey},p)).slice(1),b=yield n._getAdditionalHeaders();return b["Content-Type"]="application/json",n.languageCode&&(b["X-Firebase-Locale"]=n.languageCode),Gs.fetch()(Zp(n,n.config.apiHost,t,w),Object.assign({method:e,headers:b,referrerPolicy:"no-referrer"},d))}))})}function Xp(n,e,t){return v(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},gw),e);try{let i=new ru(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let a=yield s.json();if("needConfirmation"in a)throw Us(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{let u=s.ok?a.errorMessage:a.error.message,[h,d]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Us(n,"credential-already-in-use",a);if(h==="EMAIL_EXISTS")throw Us(n,"email-already-in-use",a);if(h==="USER_DISABLED")throw Us(n,"user-disabled",a);let p=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Yp(n,p,d);nt(n,p)}}catch(i){if(i instanceof Ve)throw i;nt(n,"network-request-failed",{message:String(i)})}})}function Ai(s,a,u,h){return v(this,arguments,function*(n,e,t,r,i={}){let d=yield qt(n,e,t,r,i);return"mfaPendingCredential"in d&&nt(n,"multi-factor-auth-required",{_serverResponse:d}),d})}function Zp(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?Eu(n.config,i):`${n.config.apiScheme}://${i}`}function vw(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var ru=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(mn(this.auth,"network-request-failed")),yw.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Us(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=mn(n,e,r);return i.customData._tokenResponse=t,i}function Op(n){return n!==void 0&&n.enterprise!==void 0}var iu=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return vw(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function _w(n,e){return v(this,null,function*(){return qt(n,"GET","/v2/recaptchaConfig",Bt(n,e))})}function Iw(n,e){return v(this,null,function*(){return qt(n,"POST","/v1/accounts:delete",e)})}function em(n,e){return v(this,null,function*(){return qt(n,"POST","/v1/accounts:lookup",e)})}function yi(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Tu(n,e=!1){return v(this,null,function*(){let t=Fe(n),r=yield t.getIdToken(e),i=Au(r);M(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,a=s?.sign_in_provider;return{claims:i,token:r,authTime:yi(Zc(i.auth_time)),issuedAtTime:yi(Zc(i.iat)),expirationTime:yi(Zc(i.exp)),signInProvider:a||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Zc(n){return Number(n)*1e3}function Au(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return js("JWT malformed, contained fewer than 3 sections"),null;try{let i=Nc(t);return i?JSON.parse(i):(js("Failed to decode base64 JWT payload"),null)}catch(i){return js("Caught error parsing JWT payload as JSON",i?.toString()),null}}function xp(n){let e=Au(n);return M(e,"internal-error"),M(typeof e.exp<"u","internal-error"),M(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function _i(n,e,t=!1){return v(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Ve&&ww(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function ww({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var su=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>v(this,null,function*(){yield this.iteration()}),t)}iteration(){return v(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Ii=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=yi(this.lastLoginAt),this.creationTime=yi(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Ws(n){return v(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield _i(n,em(t,{idToken:r}));M(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?tm(s.providerUserInfo):[],u=Ew(n.providerData,a),h=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!u?.length,p=h?d:!1,w={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:u,metadata:new Ii(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(n,w)})}function bu(n){return v(this,null,function*(){let e=Fe(n);yield Ws(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function Ew(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function tm(n){return n.map(e=>{var{providerId:t}=e,r=ha(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function Tw(n,e){return v(this,null,function*(){let t=yield Xp(n,{},()=>v(this,null,function*(){let r=di({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,a=Zp(n,i,"/v1/token",`key=${s}`),u=yield n._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",Gs.fetch()(a,{method:"POST",headers:u,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function Aw(n,e){return v(this,null,function*(){return qt(n,"POST","/v2/accounts:revokeToken",Bt(n,e))})}var vi=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){M(e.idToken,"internal-error"),M(typeof e.idToken<"u","internal-error"),M(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):xp(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){M(e.length!==0,"internal-error");let t=xp(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return v(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(M(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return v(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield Tw(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,a=new n;return r&&(M(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(M(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(M(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return mt("not implemented")}};function jt(n,e){M(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Zn=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=ha(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new su(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Ii(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return v(this,null,function*(){let t=yield _i(this,this.stsTokenManager.getToken(this.auth,e));return M(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return Tu(this,e)}reload(){return bu(this)}_assign(e){this!==e&&(M(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){M(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return v(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield Ws(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return v(this,null,function*(){if(Qe(this.auth.app))return Promise.reject(yt(this.auth));let e=yield this.getIdToken();return yield _i(this,Iw(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,a,u,h,d,p;let w=(r=t.displayName)!==null&&r!==void 0?r:void 0,b=(i=t.email)!==null&&i!==void 0?i:void 0,R=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,N=(a=t.photoURL)!==null&&a!==void 0?a:void 0,V=(u=t.tenantId)!==null&&u!==void 0?u:void 0,k=(h=t._redirectEventId)!==null&&h!==void 0?h:void 0,G=(d=t.createdAt)!==null&&d!==void 0?d:void 0,J=(p=t.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:ee,emailVerified:ce,isAnonymous:Je,providerData:fe,stsTokenManager:E}=t;M(ee&&E,e,"internal-error");let m=vi.fromJSON(this.name,E);M(typeof ee=="string",e,"internal-error"),jt(w,e.name),jt(b,e.name),M(typeof ce=="boolean",e,"internal-error"),M(typeof Je=="boolean",e,"internal-error"),jt(R,e.name),jt(N,e.name),jt(V,e.name),jt(k,e.name),jt(G,e.name),jt(J,e.name);let y=new n({uid:ee,auth:e,email:b,emailVerified:ce,displayName:w,isAnonymous:Je,photoURL:N,phoneNumber:R,tenantId:V,stsTokenManager:m,createdAt:G,lastLoginAt:J});return fe&&Array.isArray(fe)&&(y.providerData=fe.map(_=>Object.assign({},_))),k&&(y._redirectEventId=k),y}static _fromIdTokenResponse(e,t,r=!1){return v(this,null,function*(){let i=new vi;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Ws(s),s})}static _fromGetAccountInfoResponse(e,t,r){return v(this,null,function*(){let i=t.users[0];M(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?tm(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!s?.length,u=new vi;u.updateFromIdToken(r);let h=new n({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:a}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Ii(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(h,d),h})}};var Mp=new Map;function gt(n){$t(n instanceof Function,"Expected a class definition");let e=Mp.get(n);return e?($t(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Mp.set(n,e),e)}var bw=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return v(this,null,function*(){return!0})}_set(t,r){return v(this,null,function*(){this.storage[t]=r})}_get(t){return v(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return v(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),ou=bw;function $s(n,e,t){return`firebase:${n}:${e}:${t}`}var Ks=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=$s(this.userKey,i.apiKey,s),this.fullPersistenceKey=$s("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return v(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Zn._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return v(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return v(this,null,function*(){if(!t.length)return new n(gt(ou),e,r);let i=(yield Promise.all(t.map(d=>v(this,null,function*(){if(yield d._isAvailable())return d})))).filter(d=>d),s=i[0]||gt(ou),a=$s(r,e.config.apiKey,e.name),u=null;for(let d of t)try{let p=yield d._get(a);if(p){let w=Zn._fromJSON(e,p);d!==s&&(u=w),s=d;break}}catch{}let h=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!h.length?new n(s,e,r):(s=h[0],u&&(yield s._set(a,u.toJSON())),yield Promise.all(t.map(d=>v(this,null,function*(){if(d!==s)try{yield d._remove(a)}catch{}}))),new n(s,e,r))})}};function Lp(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(im(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(nm(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(om(e))return"Blackberry";if(am(e))return"Webos";if(Su(e))return"Safari";if((e.includes("chrome/")||rm(e))&&!e.includes("edge/"))return"Chrome";if(sm(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function nm(n=le()){return/firefox\//i.test(n)}function Su(n=le()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function rm(n=le()){return/crios\//i.test(n)}function im(n=le()){return/iemobile/i.test(n)}function sm(n=le()){return/android/i.test(n)}function om(n=le()){return/blackberry/i.test(n)}function am(n=le()){return/webos/i.test(n)}function to(n=le()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Sw(n=le()){var e;return to(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Rw(){return fp()&&document.documentMode===10}function cm(n=le()){return to(n)||sm(n)||am(n)||om(n)||/windows phone/i.test(n)||im(n)}function Cw(){try{return!!(window&&window!==window.top)}catch{return!1}}function um(n,e=[]){let t;switch(n){case"Browser":t=Lp(le());break;case"Worker":t=`${Lp(le())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ut}/${r}`}var au=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((a,u)=>{try{let h=e(s);a(h)}catch(h){u(h)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return v(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function Pw(t){return v(this,arguments,function*(n,e={}){return qt(n,"GET","/v2/passwordPolicy",Bt(n,e))})}var Dw=6,cu=class{constructor(e){var t,r,i,s;let a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:Dw,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,a,u;let h={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,h),this.validatePasswordCharacterOptions(e,h),h.isValid&&(h.isValid=(t=h.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),h.isValid&&(h.isValid=(r=h.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),h.isValid&&(h.isValid=(i=h.containsLowercaseLetter)!==null&&i!==void 0?i:!0),h.isValid&&(h.isValid=(s=h.containsUppercaseLetter)!==null&&s!==void 0?s:!0),h.isValid&&(h.isValid=(a=h.containsNumericCharacter)!==null&&a!==void 0?a:!0),h.isValid&&(h.isValid=(u=h.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),h}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var uu=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Hs(this),this.idTokenSubscription=new Hs(this),this.beforeStateQueue=new au(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Jp,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=gt(t)),this._initializationPromise=this.queue(()=>v(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Ks.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return v(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return v(this,null,function*(){try{let t=yield em(this,{idToken:e}),r=yield Zn._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return v(this,null,function*(){var t;if(Qe(this.app)){let a=this.app.settings.authIdToken;return a?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(u,u))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,u=i?._redirectEventId,h=yield this.tryRedirectSignIn(e);(!a||a===u)&&h?.user&&(i=h.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return M(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return v(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return v(this,null,function*(){try{yield Ws(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=mw()}_delete(){return v(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return v(this,null,function*(){if(Qe(this.app))return Promise.reject(yt(this));let t=e?Fe(e):null;return t&&M(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return v(this,null,function*(){if(!this._deleted)return e&&M(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>v(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return v(this,null,function*(){return Qe(this.app)?Promise.reject(yt(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Qe(this.app)?Promise.reject(yt(this)):this.queue(()=>v(this,null,function*(){yield this.assertedPersistence.setPersistence(gt(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return v(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return v(this,null,function*(){let e=yield Pw(this),t=new cu(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ft("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return v(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield Aw(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return v(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return v(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&gt(e)||this._popupRedirectResolver;M(t,this,"argument-error"),this.redirectPersistenceManager=yield Ks.create(this,[gt(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return v(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>v(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return v(this,null,function*(){if(e===this.currentUser)return this.queue(()=>v(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),a=!1,u=this._isInitialized?Promise.resolve():this._initializationPromise;if(M(u,this,"internal-error"),u.then(()=>{a||s(this.currentUser)}),typeof t=="function"){let h=e.addObserver(t,r,i);return()=>{a=!0,h()}}else{let h=e.addObserver(t);return()=>{a=!0,h()}}}directlySetCurrentUser(e){return v(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return M(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=um(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return v(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return v(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&dw(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function vn(n){return Fe(n)}var Hs=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=yp(t=>this.observer=t)}get next(){return M(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var no={loadJS(){return v(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Nw(n){no=n}function lm(n){return no.loadJS(n)}function kw(){return no.recaptchaEnterpriseScript}function Ow(){return no.gapiScript}function hm(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var xw="recaptcha-enterprise",Mw="NO_RECAPTCHA",lu=class{constructor(e){this.type=xw,this.auth=vn(e)}verify(e="verify",t=!1){return v(this,null,function*(){function r(s){return v(this,null,function*(){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((a,u)=>v(this,null,function*(){_w(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{let d=new iu(h);return s.tenantId==null?s._agentRecaptchaConfig=d:s._tenantRecaptchaConfigs[s.tenantId]=d,a(d.siteKey)}}).catch(h=>{u(h)})}))})}function i(s,a,u){let h=window.grecaptcha;Op(h)?h.enterprise.ready(()=>{h.enterprise.execute(s,{action:e}).then(d=>{a(d)}).catch(()=>{a(Mw)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,a)=>{r(this.auth).then(u=>{if(!t&&Op(window.grecaptcha))i(u,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let h=kw();h.length!==0&&(h+=u),lm(h).then(()=>{i(u,s,a)}).catch(d=>{a(d)})}}).catch(u=>{a(u)})})})}};function Vp(n,e,t,r=!1){return v(this,null,function*(){let i=new lu(n),s;try{s=yield i.verify(t)}catch{s=yield i.verify(t,!0)}let a=Object.assign({},e);return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function hu(n,e,t,r){return v(this,null,function*(){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield Vp(n,e,t,t==="getOobCode");return r(n,s)}else return r(n,e).catch(s=>v(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let a=yield Vp(n,e,t,t==="getOobCode");return r(n,a)}else return Promise.reject(s)}))})}function Ru(n,e){let t=mi(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(un(s,e??{}))return i;nt(i,"already-initialized")}return t.initialize({options:e})}function Lw(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(gt);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function Cu(n,e,t){let r=vn(n);M(r._canInitEmulator,r,"emulator-config-failed"),M(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=dm(e),{host:a,port:u}=Vw(e),h=u===null?"":`:${u}`;r.config.emulator={url:`${s}//${a}${h}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:u,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||Fw()}function dm(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Vw(n){let e=dm(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:Fp(r.substr(s.length+1))}}else{let[s,a]=r.split(":");return{host:s,port:Fp(a)}}}function Fp(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function Fw(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var wi=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return mt("not implemented")}_getIdTokenResponse(e){return mt("not implemented")}_linkToIdToken(e,t){return mt("not implemented")}_getReauthenticationResolver(e){return mt("not implemented")}};function Uw(n,e){return v(this,null,function*(){return qt(n,"POST","/v1/accounts:signUp",e)})}function jw(n,e){return v(this,null,function*(){return Ai(n,"POST","/v1/accounts:signInWithPassword",Bt(n,e))})}function $w(n,e){return v(this,null,function*(){return Ai(n,"POST","/v1/accounts:signInWithEmailLink",Bt(n,e))})}function Bw(n,e){return v(this,null,function*(){return Ai(n,"POST","/v1/accounts:signInWithEmailLink",Bt(n,e))})}var Ei=class n extends wi{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return v(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return hu(e,t,"signInWithPassword",jw);case"emailLink":return $w(e,{email:this._email,oobCode:this._password});default:nt(e,"internal-error")}})}_linkToIdToken(e,t){return v(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return hu(e,r,"signUpPassword",Uw);case"emailLink":return Bw(e,{idToken:t,email:this._email,oobCode:this._password});default:nt(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function eu(n,e){return v(this,null,function*(){return Ai(n,"POST","/v1/accounts:signInWithIdp",Bt(n,e))})}function qw(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function zw(n){let e=Kn(Hn(n)).link,t=e?Kn(Hn(e)).deep_link_id:null,r=Kn(Hn(n)).deep_link_id;return(r?Kn(Hn(r)).link:null)||r||t||e||n}var Qs=class n{constructor(e){var t,r,i,s,a,u;let h=Kn(Hn(e)),d=(t=h.apiKey)!==null&&t!==void 0?t:null,p=(r=h.oobCode)!==null&&r!==void 0?r:null,w=qw((i=h.mode)!==null&&i!==void 0?i:null);M(d&&p&&w,"argument-error"),this.apiKey=d,this.operation=w,this.code=p,this.continueUrl=(s=h.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(a=h.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(u=h.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){let t=zw(e);try{return new n(t)}catch{return null}}};var fm=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return Ei._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=Qs.parseLink(r);return M(i,"argument-error"),Ei._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),Js=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var du=class extends Js{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function Gw(n,e){return v(this,null,function*(){return Ai(n,"POST","/v1/accounts:signUp",Bt(n,e))})}var er=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return v(this,null,function*(){let s=yield Zn._fromIdTokenResponse(e,r,i),a=Up(r);return new n({user:s,providerId:a,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return v(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=Up(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function Up(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var fu=class n extends Ve{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function pm(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?fu._fromErrorAndOperation(n,s,e,r):s})}function Ww(n,e,t=!1){return v(this,null,function*(){let r=yield _i(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return er._forOperation(n,"link",r)})}function Kw(n,e,t=!1){return v(this,null,function*(){let{auth:r}=n;if(Qe(r.app))return Promise.reject(yt(r));let i="reauthenticate";try{let s=yield _i(n,pm(r,i,e,n),t);M(s.idToken,r,"internal-error");let a=Au(s.idToken);M(a,r,"internal-error");let{sub:u}=a;return M(n.uid===u,r,"user-mismatch"),er._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&nt(r,"user-mismatch"),s}})}function mm(n,e,t=!1){return v(this,null,function*(){if(Qe(n.app))return Promise.reject(yt(n));let r="signIn",i=yield pm(n,r,e),s=yield er._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s})}function Pu(n,e){return v(this,null,function*(){return mm(vn(n),e)})}function gm(n){return v(this,null,function*(){let e=vn(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function Du(n,e,t){return v(this,null,function*(){if(Qe(n.app))return Promise.reject(yt(n));let r=vn(n),a=yield hu(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Gw).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&gm(n),h}),u=yield er._fromIdTokenResponse(r,"signIn",a);return yield r._updateCurrentUser(u.user),u})}function Nu(n,e,t){return Qe(n.app)?Promise.reject(yt(n)):Pu(Fe(n),fm.credential(e,t)).catch(r=>v(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&gm(n),r}))}function ku(n,e,t,r){return Fe(n).onIdTokenChanged(e,t,r)}function Ou(n,e,t){return Fe(n).beforeAuthStateChanged(e,t)}var Ys="__sak";var Xs=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ys,"1"),this.storage.removeItem(Ys),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};function Hw(){let n=le();return Su(n)||to(n)}var Qw=1e3,Jw=10,Yw=(()=>{class n extends Xs{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=Hw()&&Cw(),this.fallbackToPolling=cm(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((u,h,d)=>{this.notifyListeners(u,d)});return}let i=t.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let u=this.storage.getItem(i);if(t.newValue!==u)t.newValue!==null?this.storage.setItem(i,t.newValue):this.storage.removeItem(i);else if(this.localCache[i]===t.newValue&&!r)return}let s=()=>{let u=this.storage.getItem(i);!r&&this.localCache[i]===u||this.notifyListeners(i,u)},a=this.storage.getItem(i);Rw()&&a!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,Jw):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},Qw)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return v(this,null,function*(){yield St(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return v(this,null,function*(){let r=yield St(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return v(this,null,function*(){yield St(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),ym=Yw;var Xw=(()=>{class n extends Xs{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),xu=Xw;function Zw(n){return Promise.all(n.map(e=>v(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var eE=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return v(this,null,function*(){let r=t,{eventId:i,eventType:s,data:a}=r.data,u=this.handlersMap[s];if(!u?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let h=Array.from(u).map(p=>v(this,null,function*(){return p(r.origin,a)})),d=yield Zw(h);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function vm(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var pu=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return v(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((u,h)=>{let d=vm("",20);i.port1.start();let p=setTimeout(()=>{h(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(w){let b=w;if(b.data.eventId===d)switch(b.data.status){case"ack":clearTimeout(p),s=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),u(b.data.response);break;default:clearTimeout(p),clearTimeout(s),h(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})})}};function tt(){return window}function tE(n){tt().location.href=n}function _m(){return typeof tt().WorkerGlobalScope<"u"&&typeof tt().importScripts=="function"}function nE(){return v(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function rE(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function iE(){return _m()?self:null}var Im="firebaseLocalStorageDb",sE=1,Zs="firebaseLocalStorage",wm="fbase_key",yn=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function ro(n,e){return n.transaction([Zs],e?"readwrite":"readonly").objectStore(Zs)}function oE(){let n=indexedDB.deleteDatabase(Im);return new yn(n).toPromise()}function mu(){let n=indexedDB.open(Im,sE);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(Zs,{keyPath:wm})}catch(i){t(i)}}),n.addEventListener("success",()=>v(this,null,function*(){let r=n.result;r.objectStoreNames.contains(Zs)?e(r):(r.close(),yield oE(),e(yield mu()))}))})}function jp(n,e,t){return v(this,null,function*(){let r=ro(n,!0).put({[wm]:e,value:t});return new yn(r).toPromise()})}function aE(n,e){return v(this,null,function*(){let t=ro(n,!1).get(e),r=yield new yn(t).toPromise();return r===void 0?null:r.value})}function $p(n,e){let t=ro(n,!0).delete(e);return new yn(t).toPromise()}var cE=800,uE=3,lE=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return v(this,null,function*(){return this.db?this.db:(this.db=yield mu(),this.db)})}_withRetries(t){return v(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>uE)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return v(this,null,function*(){return _m()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return v(this,null,function*(){this.receiver=eE._getInstance(iE()),this.receiver._subscribe("keyChanged",(t,r)=>v(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>v(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return v(this,null,function*(){var t,r;if(this.activeServiceWorker=yield nE(),!this.activeServiceWorker)return;this.sender=new pu(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return v(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||rE()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return v(this,null,function*(){try{if(!indexedDB)return!1;let t=yield mu();return yield jp(t,Ys,"1"),yield $p(t,Ys),!0}catch{}return!1})}_withPendingWrite(t){return v(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(i=>jp(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return v(this,null,function*(){let r=yield this._withRetries(i=>aE(i,t));return this.localCache[t]=r,r})}_remove(t){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(r=>$p(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return v(this,null,function*(){let t=yield this._withRetries(s=>{let a=ro(s,!1).getAll();return new yn(a).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:a}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>v(this,null,function*(){return this._poll()}),cE)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),Em=lE;var qR=hm("rcb"),zR=new gn(3e4,6e4);function hE(n,e){return e?gt(e):(M(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Ti=class extends wi{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return eu(e,this._buildIdpRequest())}_linkToIdToken(e,t){return eu(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return eu(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function dE(n){return mm(n.auth,new Ti(n),n.bypassAuthState)}function fE(n){let{auth:e,user:t}=n;return M(t,e,"internal-error"),Kw(t,new Ti(n),n.bypassAuthState)}function pE(n){return v(this,null,function*(){let{auth:e,user:t}=n;return M(t,e,"internal-error"),Ww(t,new Ti(n),n.bypassAuthState)})}var gu=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>v(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return v(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:a,type:u}=e;if(a){this.reject(a);return}let h={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(u)(h))}catch(d){this.reject(d)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return dE;case"linkViaPopup":case"linkViaRedirect":return pE;case"reauthViaPopup":case"reauthViaRedirect":return fE;default:nt(this.auth,"internal-error")}}resolve(e){$t(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){$t(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var GR=new gn(2e3,1e4);var mE="pendingRedirect",Bs=new Map,yu=class n extends gu{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return v(this,null,function*(){let e=Bs.get(this.auth._key());if(!e){try{let r=(yield gE(this.resolver,this.auth))?yield St(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Bs.set(this.auth._key(),e)}return this.bypassAuthState||Bs.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return v(this,null,function*(){if(e.type==="signInViaRedirect")return St(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,St(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return v(this,null,function*(){})}cleanUp(){}};function gE(n,e){return v(this,null,function*(){let t=_E(e),r=vE(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function yE(n,e){Bs.set(n._key(),e)}function vE(n){return gt(n._redirectPersistence)}function _E(n){return $s(mE,n.config.apiKey,n.name)}function IE(n,e,t=!1){return v(this,null,function*(){if(Qe(n.app))return Promise.reject(yt(n));let r=vn(n),i=hE(r,e),a=yield new yu(r,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,yield r._persistUserIfCurrent(a.user),yield r._setRedirectUser(null,e)),a})}var wE=10*60*1e3,vu=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!EE(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!Tm(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(mn(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=wE&&this.cachedEventUids.clear(),this.cachedEventUids.has(Bp(e))}saveEventToCache(e){this.cachedEventUids.add(Bp(e)),this.lastProcessedEventTime=Date.now()}};function Bp(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Tm({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function EE(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Tm(n);default:return!1}}function TE(t){return v(this,arguments,function*(n,e={}){return qt(n,"GET","/v1/projects",e)})}var AE=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bE=/^https?/;function SE(n){return v(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield TE(n);for(let t of e)try{if(RE(t))return}catch{}nt(n,"unauthorized-domain")})}function RE(n){let e=nu(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!bE.test(t))return!1;if(AE.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var CE=new gn(3e4,6e4);function qp(){let n=tt().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function PE(n){return new Promise((e,t)=>{var r,i,s;function a(){qp(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{qp(),t(mn(n,"network-request-failed"))},timeout:CE.get()})}if(!((i=(r=tt().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=tt().gapi)===null||s===void 0)&&s.load)a();else{let u=hm("iframefcb");return tt()[u]=()=>{gapi.load?a():t(mn(n,"network-request-failed"))},lm(`${Ow()}?onload=${u}`).catch(h=>t(h))}}).catch(e=>{throw qs=null,e})}var qs=null;function DE(n){return qs=qs||PE(n),qs}var NE=new gn(5e3,15e3),kE="__/auth/iframe",OE="emulator/auth/iframe",xE={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ME=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function LE(n){let e=n.config;M(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?Eu(e,OE):`https://${n.config.authDomain}/${kE}`,r={apiKey:e.apiKey,appName:n.name,v:Ut},i=ME.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${di(r).slice(1)}`}function VE(n){return v(this,null,function*(){let e=yield DE(n),t=tt().gapi;return M(t,n,"internal-error"),e.open({where:document.body,url:LE(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xE,dontclear:!0},r=>new Promise((i,s)=>v(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let a=mn(n,"network-request-failed"),u=tt().setTimeout(()=>{s(a)},NE.get());function h(){tt().clearTimeout(u),i(r)}r.ping(h).then(h,()=>{s(a)})})))})}var FE={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},UE=500,jE=600,$E="_blank",BE="http://localhost",eo=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function qE(n,e,t,r=UE,i=jE){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",h=Object.assign(Object.assign({},FE),{width:r.toString(),height:i.toString(),top:s,left:a}),d=le().toLowerCase();t&&(u=rm(d)?$E:t),nm(d)&&(e=e||BE,h.scrollbars="yes");let p=Object.entries(h).reduce((b,[R,N])=>`${b}${R}=${N},`,"");if(Sw(d)&&u!=="_self")return zE(e||"",u),new eo(null);let w=window.open(e||"",u,p);M(w,n,"popup-blocked");try{w.focus()}catch{}return new eo(w)}function zE(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var GE="__/auth/handler",WE="emulator/auth/handler",KE=encodeURIComponent("fac");function zp(n,e,t,r,i,s){return v(this,null,function*(){M(n.config.authDomain,n,"auth-domain-config-required"),M(n.config.apiKey,n,"invalid-api-key");let a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ut,eventId:i};if(e instanceof Js){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",gp(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(let[p,w]of Object.entries(s||{}))a[p]=w}if(e instanceof du){let p=e.getScopes().filter(w=>w!=="");p.length>0&&(a.scopes=p.join(","))}n.tenantId&&(a.tid=n.tenantId);let u=a;for(let p of Object.keys(u))u[p]===void 0&&delete u[p];let h=yield n._getAppCheckToken(),d=h?`#${KE}=${encodeURIComponent(h)}`:"";return`${HE(n)}?${di(u).slice(1)}${d}`})}function HE({config:n}){return n.emulator?Eu(n,WE):`https://${n.authDomain}/${GE}`}var tu="webStorageSupport",_u=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=xu,this._completeRedirectFn=IE,this._overrideRedirectResult=yE}_openPopup(e,t,r,i){return v(this,null,function*(){var s;$t((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let a=yield zp(e,t,r,nu(),i);return qE(e,a,vm())})}_openRedirect(e,t,r,i){return v(this,null,function*(){yield this._originValidation(e);let s=yield zp(e,t,r,nu(),i);return tE(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):($t(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return v(this,null,function*(){let t=yield VE(e),r=new vu(e);return t.register("authEvent",i=>(M(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(tu,{type:tu},i=>{var s;let a=(s=i?.[0])===null||s===void 0?void 0:s[tu];a!==void 0&&t(!!a),nt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=SE(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return cm()||Su()||to()}},Am=_u;var Gp="@firebase/auth",Wp="1.7.4";var Iu=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return v(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){M(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function QE(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function JE(n){Ft(new Ge("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:u}=r.options;M(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});let h={apiKey:a,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:um(n)},d=new uu(r,i,s,h);return Lw(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ft(new Ge("auth-internal",e=>{let t=vn(e.getProvider("auth").getImmediate());return(r=>new Iu(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),he(Gp,Wp,QE(n)),he(Gp,Wp,"esm2017")}var YE=5*60,XE=xc("authIdTokenMaxAge")||YE,Kp=null,ZE=n=>e=>v(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>XE)return;let i=t?.token;Kp!==i&&(Kp=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Mu(n=Qn()){let e=mi(n,"auth");if(e.isInitialized())return e.getImmediate();let t=Ru(n,{popupRedirectResolver:Am,persistence:[Em,ym,xu]}),r=xc("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let a=ZE(s.toString());Ou(t,a,()=>a(t.currentUser)),ku(t,u=>a(u))}}let i=kc("auth");return i&&Cu(t,`http://${i}`),t}function eT(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}Nw({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=mn("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",eT().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});JE("Browser");var bm="auth",_n=class{constructor(e){return e}},bi=class{constructor(){return gi(bm)}};var Lu=new pe("angularfire2.auth-instances");function GT(n,e){let t=Vs(bm,n,e);return t&&new _n(t)}function WT(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new _n(r)}}var KT={provide:bi,deps:[[new Oe,Lu]]},HT={provide:_n,useFactory:GT,deps:[[new Oe,Lu],pt]},QT=(()=>{class n{constructor(){he("angularfire",fn.full,"auth")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=dt({type:n});static \u0275inj=ht({providers:[HT,KT]})}return n})();function C0(n,...e){return{ngModule:QT,providers:[{provide:Lu,useFactory:WT(n),multi:!0,deps:[we,Dt,Xn,pn,[new Oe,Yn],...e]}]}}var Sm=et(Du,!0);var Si=et(Mu,!0);var Rm=et(Nu,!0);var Cm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Pm={};var Vu,Dm;(function(){var n;function e(E,m){function y(){}y.prototype=m.prototype,E.D=m.prototype,E.prototype=new y,E.prototype.constructor=E,E.C=function(_,I,A){for(var g=Array(arguments.length-2),ct=2;ct<arguments.length;ct++)g[ct-2]=arguments[ct];return m.prototype[I].apply(_,g)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,m,y){y||(y=0);var _=Array(16);if(typeof m=="string")for(var I=0;16>I;++I)_[I]=m.charCodeAt(y++)|m.charCodeAt(y++)<<8|m.charCodeAt(y++)<<16|m.charCodeAt(y++)<<24;else for(I=0;16>I;++I)_[I]=m[y++]|m[y++]<<8|m[y++]<<16|m[y++]<<24;m=E.g[0],y=E.g[1],I=E.g[2];var A=E.g[3],g=m+(A^y&(I^A))+_[0]+3614090360&4294967295;m=y+(g<<7&4294967295|g>>>25),g=A+(I^m&(y^I))+_[1]+3905402710&4294967295,A=m+(g<<12&4294967295|g>>>20),g=I+(y^A&(m^y))+_[2]+606105819&4294967295,I=A+(g<<17&4294967295|g>>>15),g=y+(m^I&(A^m))+_[3]+3250441966&4294967295,y=I+(g<<22&4294967295|g>>>10),g=m+(A^y&(I^A))+_[4]+4118548399&4294967295,m=y+(g<<7&4294967295|g>>>25),g=A+(I^m&(y^I))+_[5]+1200080426&4294967295,A=m+(g<<12&4294967295|g>>>20),g=I+(y^A&(m^y))+_[6]+2821735955&4294967295,I=A+(g<<17&4294967295|g>>>15),g=y+(m^I&(A^m))+_[7]+4249261313&4294967295,y=I+(g<<22&4294967295|g>>>10),g=m+(A^y&(I^A))+_[8]+1770035416&4294967295,m=y+(g<<7&4294967295|g>>>25),g=A+(I^m&(y^I))+_[9]+2336552879&4294967295,A=m+(g<<12&4294967295|g>>>20),g=I+(y^A&(m^y))+_[10]+4294925233&4294967295,I=A+(g<<17&4294967295|g>>>15),g=y+(m^I&(A^m))+_[11]+2304563134&4294967295,y=I+(g<<22&4294967295|g>>>10),g=m+(A^y&(I^A))+_[12]+1804603682&4294967295,m=y+(g<<7&4294967295|g>>>25),g=A+(I^m&(y^I))+_[13]+4254626195&4294967295,A=m+(g<<12&4294967295|g>>>20),g=I+(y^A&(m^y))+_[14]+2792965006&4294967295,I=A+(g<<17&4294967295|g>>>15),g=y+(m^I&(A^m))+_[15]+1236535329&4294967295,y=I+(g<<22&4294967295|g>>>10),g=m+(I^A&(y^I))+_[1]+4129170786&4294967295,m=y+(g<<5&4294967295|g>>>27),g=A+(y^I&(m^y))+_[6]+3225465664&4294967295,A=m+(g<<9&4294967295|g>>>23),g=I+(m^y&(A^m))+_[11]+643717713&4294967295,I=A+(g<<14&4294967295|g>>>18),g=y+(A^m&(I^A))+_[0]+3921069994&4294967295,y=I+(g<<20&4294967295|g>>>12),g=m+(I^A&(y^I))+_[5]+3593408605&4294967295,m=y+(g<<5&4294967295|g>>>27),g=A+(y^I&(m^y))+_[10]+38016083&4294967295,A=m+(g<<9&4294967295|g>>>23),g=I+(m^y&(A^m))+_[15]+3634488961&4294967295,I=A+(g<<14&4294967295|g>>>18),g=y+(A^m&(I^A))+_[4]+3889429448&4294967295,y=I+(g<<20&4294967295|g>>>12),g=m+(I^A&(y^I))+_[9]+568446438&4294967295,m=y+(g<<5&4294967295|g>>>27),g=A+(y^I&(m^y))+_[14]+3275163606&4294967295,A=m+(g<<9&4294967295|g>>>23),g=I+(m^y&(A^m))+_[3]+4107603335&4294967295,I=A+(g<<14&4294967295|g>>>18),g=y+(A^m&(I^A))+_[8]+1163531501&4294967295,y=I+(g<<20&4294967295|g>>>12),g=m+(I^A&(y^I))+_[13]+2850285829&4294967295,m=y+(g<<5&4294967295|g>>>27),g=A+(y^I&(m^y))+_[2]+4243563512&4294967295,A=m+(g<<9&4294967295|g>>>23),g=I+(m^y&(A^m))+_[7]+1735328473&4294967295,I=A+(g<<14&4294967295|g>>>18),g=y+(A^m&(I^A))+_[12]+2368359562&4294967295,y=I+(g<<20&4294967295|g>>>12),g=m+(y^I^A)+_[5]+4294588738&4294967295,m=y+(g<<4&4294967295|g>>>28),g=A+(m^y^I)+_[8]+2272392833&4294967295,A=m+(g<<11&4294967295|g>>>21),g=I+(A^m^y)+_[11]+1839030562&4294967295,I=A+(g<<16&4294967295|g>>>16),g=y+(I^A^m)+_[14]+4259657740&4294967295,y=I+(g<<23&4294967295|g>>>9),g=m+(y^I^A)+_[1]+2763975236&4294967295,m=y+(g<<4&4294967295|g>>>28),g=A+(m^y^I)+_[4]+1272893353&4294967295,A=m+(g<<11&4294967295|g>>>21),g=I+(A^m^y)+_[7]+4139469664&4294967295,I=A+(g<<16&4294967295|g>>>16),g=y+(I^A^m)+_[10]+3200236656&4294967295,y=I+(g<<23&4294967295|g>>>9),g=m+(y^I^A)+_[13]+681279174&4294967295,m=y+(g<<4&4294967295|g>>>28),g=A+(m^y^I)+_[0]+3936430074&4294967295,A=m+(g<<11&4294967295|g>>>21),g=I+(A^m^y)+_[3]+3572445317&4294967295,I=A+(g<<16&4294967295|g>>>16),g=y+(I^A^m)+_[6]+76029189&4294967295,y=I+(g<<23&4294967295|g>>>9),g=m+(y^I^A)+_[9]+3654602809&4294967295,m=y+(g<<4&4294967295|g>>>28),g=A+(m^y^I)+_[12]+3873151461&4294967295,A=m+(g<<11&4294967295|g>>>21),g=I+(A^m^y)+_[15]+530742520&4294967295,I=A+(g<<16&4294967295|g>>>16),g=y+(I^A^m)+_[2]+3299628645&4294967295,y=I+(g<<23&4294967295|g>>>9),g=m+(I^(y|~A))+_[0]+4096336452&4294967295,m=y+(g<<6&4294967295|g>>>26),g=A+(y^(m|~I))+_[7]+1126891415&4294967295,A=m+(g<<10&4294967295|g>>>22),g=I+(m^(A|~y))+_[14]+2878612391&4294967295,I=A+(g<<15&4294967295|g>>>17),g=y+(A^(I|~m))+_[5]+4237533241&4294967295,y=I+(g<<21&4294967295|g>>>11),g=m+(I^(y|~A))+_[12]+1700485571&4294967295,m=y+(g<<6&4294967295|g>>>26),g=A+(y^(m|~I))+_[3]+2399980690&4294967295,A=m+(g<<10&4294967295|g>>>22),g=I+(m^(A|~y))+_[10]+4293915773&4294967295,I=A+(g<<15&4294967295|g>>>17),g=y+(A^(I|~m))+_[1]+2240044497&4294967295,y=I+(g<<21&4294967295|g>>>11),g=m+(I^(y|~A))+_[8]+1873313359&4294967295,m=y+(g<<6&4294967295|g>>>26),g=A+(y^(m|~I))+_[15]+4264355552&4294967295,A=m+(g<<10&4294967295|g>>>22),g=I+(m^(A|~y))+_[6]+2734768916&4294967295,I=A+(g<<15&4294967295|g>>>17),g=y+(A^(I|~m))+_[13]+1309151649&4294967295,y=I+(g<<21&4294967295|g>>>11),g=m+(I^(y|~A))+_[4]+4149444226&4294967295,m=y+(g<<6&4294967295|g>>>26),g=A+(y^(m|~I))+_[11]+3174756917&4294967295,A=m+(g<<10&4294967295|g>>>22),g=I+(m^(A|~y))+_[2]+718787259&4294967295,I=A+(g<<15&4294967295|g>>>17),g=y+(A^(I|~m))+_[9]+3951481745&4294967295,E.g[0]=E.g[0]+m&4294967295,E.g[1]=E.g[1]+(I+(g<<21&4294967295|g>>>11))&4294967295,E.g[2]=E.g[2]+I&4294967295,E.g[3]=E.g[3]+A&4294967295}r.prototype.u=function(E,m){m===void 0&&(m=E.length);for(var y=m-this.blockSize,_=this.B,I=this.h,A=0;A<m;){if(I==0)for(;A<=y;)i(this,E,A),A+=this.blockSize;if(typeof E=="string"){for(;A<m;)if(_[I++]=E.charCodeAt(A++),I==this.blockSize){i(this,_),I=0;break}}else for(;A<m;)if(_[I++]=E[A++],I==this.blockSize){i(this,_),I=0;break}}this.h=I,this.o+=m},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var m=1;m<E.length-8;++m)E[m]=0;var y=8*this.o;for(m=E.length-8;m<E.length;++m)E[m]=y&255,y/=256;for(this.u(E),E=Array(16),m=y=0;4>m;++m)for(var _=0;32>_;_+=8)E[y++]=this.g[m]>>>_&255;return E};function s(E,m){var y=u;return Object.prototype.hasOwnProperty.call(y,E)?y[E]:y[E]=m(E)}function a(E,m){this.h=m;for(var y=[],_=!0,I=E.length-1;0<=I;I--){var A=E[I]|0;_&&A==m||(y[I]=A,_=!1)}this.g=y}var u={};function h(E){return-128<=E&&128>E?s(E,function(m){return new a([m|0],0>m?-1:0)}):new a([E|0],0>E?-1:0)}function d(E){if(isNaN(E)||!isFinite(E))return w;if(0>E)return k(d(-E));for(var m=[],y=1,_=0;E>=y;_++)m[_]=E/y|0,y*=4294967296;return new a(m,0)}function p(E,m){if(E.length==0)throw Error("number format error: empty string");if(m=m||10,2>m||36<m)throw Error("radix out of range: "+m);if(E.charAt(0)=="-")return k(p(E.substring(1),m));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=d(Math.pow(m,8)),_=w,I=0;I<E.length;I+=8){var A=Math.min(8,E.length-I),g=parseInt(E.substring(I,I+A),m);8>A?(A=d(Math.pow(m,A)),_=_.j(A).add(d(g))):(_=_.j(y),_=_.add(d(g)))}return _}var w=h(0),b=h(1),R=h(16777216);n=a.prototype,n.m=function(){if(V(this))return-k(this).m();for(var E=0,m=1,y=0;y<this.g.length;y++){var _=this.i(y);E+=(0<=_?_:4294967296+_)*m,m*=4294967296}return E},n.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(N(this))return"0";if(V(this))return"-"+k(this).toString(E);for(var m=d(Math.pow(E,6)),y=this,_="";;){var I=ce(y,m).g;y=G(y,I.j(m));var A=((0<y.g.length?y.g[0]:y.h)>>>0).toString(E);if(y=I,N(y))return A+_;for(;6>A.length;)A="0"+A;_=A+_}},n.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function N(E){if(E.h!=0)return!1;for(var m=0;m<E.g.length;m++)if(E.g[m]!=0)return!1;return!0}function V(E){return E.h==-1}n.l=function(E){return E=G(this,E),V(E)?-1:N(E)?0:1};function k(E){for(var m=E.g.length,y=[],_=0;_<m;_++)y[_]=~E.g[_];return new a(y,~E.h).add(b)}n.abs=function(){return V(this)?k(this):this},n.add=function(E){for(var m=Math.max(this.g.length,E.g.length),y=[],_=0,I=0;I<=m;I++){var A=_+(this.i(I)&65535)+(E.i(I)&65535),g=(A>>>16)+(this.i(I)>>>16)+(E.i(I)>>>16);_=g>>>16,A&=65535,g&=65535,y[I]=g<<16|A}return new a(y,y[y.length-1]&-2147483648?-1:0)};function G(E,m){return E.add(k(m))}n.j=function(E){if(N(this)||N(E))return w;if(V(this))return V(E)?k(this).j(k(E)):k(k(this).j(E));if(V(E))return k(this.j(k(E)));if(0>this.l(R)&&0>E.l(R))return d(this.m()*E.m());for(var m=this.g.length+E.g.length,y=[],_=0;_<2*m;_++)y[_]=0;for(_=0;_<this.g.length;_++)for(var I=0;I<E.g.length;I++){var A=this.i(_)>>>16,g=this.i(_)&65535,ct=E.i(I)>>>16,_r=E.i(I)&65535;y[2*_+2*I]+=g*_r,J(y,2*_+2*I),y[2*_+2*I+1]+=A*_r,J(y,2*_+2*I+1),y[2*_+2*I+1]+=g*ct,J(y,2*_+2*I+1),y[2*_+2*I+2]+=A*ct,J(y,2*_+2*I+2)}for(_=0;_<m;_++)y[_]=y[2*_+1]<<16|y[2*_];for(_=m;_<2*m;_++)y[_]=0;return new a(y,0)};function J(E,m){for(;(E[m]&65535)!=E[m];)E[m+1]+=E[m]>>>16,E[m]&=65535,m++}function ee(E,m){this.g=E,this.h=m}function ce(E,m){if(N(m))throw Error("division by zero");if(N(E))return new ee(w,w);if(V(E))return m=ce(k(E),m),new ee(k(m.g),k(m.h));if(V(m))return m=ce(E,k(m)),new ee(k(m.g),m.h);if(30<E.g.length){if(V(E)||V(m))throw Error("slowDivide_ only works with positive integers.");for(var y=b,_=m;0>=_.l(E);)y=Je(y),_=Je(_);var I=fe(y,1),A=fe(_,1);for(_=fe(_,2),y=fe(y,2);!N(_);){var g=A.add(_);0>=g.l(E)&&(I=I.add(y),A=g),_=fe(_,1),y=fe(y,1)}return m=G(E,I.j(m)),new ee(I,m)}for(I=w;0<=E.l(m);){for(y=Math.max(1,Math.floor(E.m()/m.m())),_=Math.ceil(Math.log(y)/Math.LN2),_=48>=_?1:Math.pow(2,_-48),A=d(y),g=A.j(m);V(g)||0<g.l(E);)y-=_,A=d(y),g=A.j(m);N(A)&&(A=b),I=I.add(A),E=G(E,g)}return new ee(I,E)}n.A=function(E){return ce(this,E).h},n.and=function(E){for(var m=Math.max(this.g.length,E.g.length),y=[],_=0;_<m;_++)y[_]=this.i(_)&E.i(_);return new a(y,this.h&E.h)},n.or=function(E){for(var m=Math.max(this.g.length,E.g.length),y=[],_=0;_<m;_++)y[_]=this.i(_)|E.i(_);return new a(y,this.h|E.h)},n.xor=function(E){for(var m=Math.max(this.g.length,E.g.length),y=[],_=0;_<m;_++)y[_]=this.i(_)^E.i(_);return new a(y,this.h^E.h)};function Je(E){for(var m=E.g.length+1,y=[],_=0;_<m;_++)y[_]=E.i(_)<<1|E.i(_-1)>>>31;return new a(y,E.h)}function fe(E,m){var y=m>>5;m%=32;for(var _=E.g.length-y,I=[],A=0;A<_;A++)I[A]=0<m?E.i(A+y)>>>m|E.i(A+y+1)<<32-m:E.i(A+y);return new a(I,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Dm=Pm.Md5=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=p,Vu=Pm.Integer=a}).apply(typeof Cm<"u"?Cm:typeof self<"u"?self:typeof window<"u"?window:{});var io=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},vt={};var Fu,Uu,tr,ju,Ri,so,$u,Bu,qu;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,c,l){return o==Array.prototype||o==Object.prototype||(o[c]=l.value),o};function t(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof io=="object"&&io];for(var c=0;c<o.length;++c){var l=o[c];if(l&&l.Math==Math)return l}throw Error("Cannot find global object")}var r=t(this);function i(o,c){if(c)e:{var l=r;o=o.split(".");for(var f=0;f<o.length-1;f++){var T=o[f];if(!(T in l))break e;l=l[T]}o=o[o.length-1],f=l[o],c=c(f),c!=f&&c!=null&&e(l,o,{configurable:!0,writable:!0,value:c})}}function s(o,c){o instanceof String&&(o+="");var l=0,f=!1,T={next:function(){if(!f&&l<o.length){var S=l++;return{value:c(S,o[S]),done:!1}}return f=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}i("Array.prototype.values",function(o){return o||function(){return s(this,function(c,l){return l})}});var a=a||{},u=this||self;function h(o){var c=typeof o;return c=c!="object"?c:o?Array.isArray(o)?"array":c:"null",c=="array"||c=="object"&&typeof o.length=="number"}function d(o){var c=typeof o;return c=="object"&&o!=null||c=="function"}function p(o,c,l){return o.call.apply(o.bind,arguments)}function w(o,c,l){if(!o)throw Error();if(2<arguments.length){var f=Array.prototype.slice.call(arguments,2);return function(){var T=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(T,f),o.apply(c,T)}}return function(){return o.apply(c,arguments)}}function b(o,c,l){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:w,b.apply(null,arguments)}function R(o,c){var l=Array.prototype.slice.call(arguments,1);return function(){var f=l.slice();return f.push.apply(f,arguments),o.apply(this,f)}}function N(o,c){function l(){}l.prototype=c.prototype,o.aa=c.prototype,o.prototype=new l,o.prototype.constructor=o,o.Qb=function(f,T,S){for(var D=Array(arguments.length-2),X=2;X<arguments.length;X++)D[X-2]=arguments[X];return c.prototype[T].apply(f,D)}}function V(o){let c=o.length;if(0<c){let l=Array(c);for(let f=0;f<c;f++)l[f]=o[f];return l}return[]}function k(o,c){for(let l=1;l<arguments.length;l++){let f=arguments[l];if(h(f)){let T=o.length||0,S=f.length||0;o.length=T+S;for(let D=0;D<S;D++)o[T+D]=f[D]}else o.push(f)}}class G{constructor(c,l){this.i=c,this.j=l,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function J(o){return/^[\s\xa0]*$/.test(o)}function ee(){var o=u.navigator;return o&&(o=o.userAgent)?o:""}function ce(o){return ce[" "](o),o}ce[" "]=function(){};var Je=ee().indexOf("Gecko")!=-1&&!(ee().toLowerCase().indexOf("webkit")!=-1&&ee().indexOf("Edge")==-1)&&!(ee().indexOf("Trident")!=-1||ee().indexOf("MSIE")!=-1)&&ee().indexOf("Edge")==-1;function fe(o,c,l){for(let f in o)c.call(l,o[f],f,o)}function E(o,c){for(let l in o)c.call(void 0,o[l],l,o)}function m(o){let c={};for(let l in o)c[l]=o[l];return c}let y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _(o,c){let l,f;for(let T=1;T<arguments.length;T++){f=arguments[T];for(l in f)o[l]=f[l];for(let S=0;S<y.length;S++)l=y[S],Object.prototype.hasOwnProperty.call(f,l)&&(o[l]=f[l])}}function I(o){var c=1;o=o.split(":");let l=[];for(;0<c&&o.length;)l.push(o.shift()),c--;return o.length&&l.push(o.join(":")),l}function A(o){u.setTimeout(()=>{throw o},0)}function g(){var o=Fo;let c=null;return o.g&&(c=o.g,o.g=o.g.next,o.g||(o.h=null),c.next=null),c}class ct{constructor(){this.h=this.g=null}add(c,l){let f=_r.get();f.set(c,l),this.h?this.h.next=f:this.g=f,this.h=f}}var _r=new G(()=>new zg,o=>o.reset());class zg{constructor(){this.next=this.g=this.h=null}set(c,l){this.h=c,this.g=l,this.next=null}reset(){this.next=this.g=this.h=null}}let Ir,wr=!1,Fo=new ct,wh=()=>{let o=u.Promise.resolve(void 0);Ir=()=>{o.then(Gg)}};var Gg=()=>{for(var o;o=g();){try{o.h.call(o.g)}catch(l){A(l)}var c=_r;c.j(o),100>c.h&&(c.h++,o.next=c.g,c.g=o)}wr=!1};function Et(){this.s=this.s,this.C=this.C}Et.prototype.s=!1,Et.prototype.ma=function(){this.s||(this.s=!0,this.N())},Et.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Te(o,c){this.type=o,this.g=this.target=c,this.defaultPrevented=!1}Te.prototype.h=function(){this.defaultPrevented=!0};var Wg=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var o=!1,c=Object.defineProperty({},"passive",{get:function(){o=!0}});try{let l=()=>{};u.addEventListener("test",l,c),u.removeEventListener("test",l,c)}catch{}return o}();function Er(o,c){if(Te.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var l=this.type=o.type,f=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=c,c=o.relatedTarget){if(Je){e:{try{ce(c.nodeName);var T=!0;break e}catch{}T=!1}T||(c=null)}}else l=="mouseover"?c=o.fromElement:l=="mouseout"&&(c=o.toElement);this.relatedTarget=c,f?(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:Kg[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&Er.aa.h.call(this)}}N(Er,Te);var Kg={2:"touch",3:"pen",4:"mouse"};Er.prototype.h=function(){Er.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var Tr="closure_listenable_"+(1e6*Math.random()|0),Hg=0;function Qg(o,c,l,f,T){this.listener=o,this.proxy=null,this.src=c,this.type=l,this.capture=!!f,this.ha=T,this.key=++Hg,this.da=this.fa=!1}function zi(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function Gi(o){this.src=o,this.g={},this.h=0}Gi.prototype.add=function(o,c,l,f,T){var S=o.toString();o=this.g[S],o||(o=this.g[S]=[],this.h++);var D=jo(o,c,f,T);return-1<D?(c=o[D],l||(c.fa=!1)):(c=new Qg(c,this.src,S,!!f,T),c.fa=l,o.push(c)),c};function Uo(o,c){var l=c.type;if(l in o.g){var f=o.g[l],T=Array.prototype.indexOf.call(f,c,void 0),S;(S=0<=T)&&Array.prototype.splice.call(f,T,1),S&&(zi(c),o.g[l].length==0&&(delete o.g[l],o.h--))}}function jo(o,c,l,f){for(var T=0;T<o.length;++T){var S=o[T];if(!S.da&&S.listener==c&&S.capture==!!l&&S.ha==f)return T}return-1}var $o="closure_lm_"+(1e6*Math.random()|0),Bo={};function Eh(o,c,l,f,T){if(f&&f.once)return Ah(o,c,l,f,T);if(Array.isArray(c)){for(var S=0;S<c.length;S++)Eh(o,c[S],l,f,T);return null}return l=Wo(l),o&&o[Tr]?o.K(c,l,d(f)?!!f.capture:!!f,T):Th(o,c,l,!1,f,T)}function Th(o,c,l,f,T,S){if(!c)throw Error("Invalid event type");var D=d(T)?!!T.capture:!!T,X=zo(o);if(X||(o[$o]=X=new Gi(o)),l=X.add(c,l,f,D,S),l.proxy)return l;if(f=Jg(),l.proxy=f,f.src=o,f.listener=l,o.addEventListener)Wg||(T=D),T===void 0&&(T=!1),o.addEventListener(c.toString(),f,T);else if(o.attachEvent)o.attachEvent(Sh(c.toString()),f);else if(o.addListener&&o.removeListener)o.addListener(f);else throw Error("addEventListener and attachEvent are unavailable.");return l}function Jg(){function o(l){return c.call(o.src,o.listener,l)}let c=Yg;return o}function Ah(o,c,l,f,T){if(Array.isArray(c)){for(var S=0;S<c.length;S++)Ah(o,c[S],l,f,T);return null}return l=Wo(l),o&&o[Tr]?o.L(c,l,d(f)?!!f.capture:!!f,T):Th(o,c,l,!0,f,T)}function bh(o,c,l,f,T){if(Array.isArray(c))for(var S=0;S<c.length;S++)bh(o,c[S],l,f,T);else f=d(f)?!!f.capture:!!f,l=Wo(l),o&&o[Tr]?(o=o.i,c=String(c).toString(),c in o.g&&(S=o.g[c],l=jo(S,l,f,T),-1<l&&(zi(S[l]),Array.prototype.splice.call(S,l,1),S.length==0&&(delete o.g[c],o.h--)))):o&&(o=zo(o))&&(c=o.g[c.toString()],o=-1,c&&(o=jo(c,l,f,T)),(l=-1<o?c[o]:null)&&qo(l))}function qo(o){if(typeof o!="number"&&o&&!o.da){var c=o.src;if(c&&c[Tr])Uo(c.i,o);else{var l=o.type,f=o.proxy;c.removeEventListener?c.removeEventListener(l,f,o.capture):c.detachEvent?c.detachEvent(Sh(l),f):c.addListener&&c.removeListener&&c.removeListener(f),(l=zo(c))?(Uo(l,o),l.h==0&&(l.src=null,c[$o]=null)):zi(o)}}}function Sh(o){return o in Bo?Bo[o]:Bo[o]="on"+o}function Yg(o,c){if(o.da)o=!0;else{c=new Er(c,this);var l=o.listener,f=o.ha||o.src;o.fa&&qo(o),o=l.call(f,c)}return o}function zo(o){return o=o[$o],o instanceof Gi?o:null}var Go="__closure_events_fn_"+(1e9*Math.random()>>>0);function Wo(o){return typeof o=="function"?o:(o[Go]||(o[Go]=function(c){return o.handleEvent(c)}),o[Go])}function Ae(){Et.call(this),this.i=new Gi(this),this.M=this,this.F=null}N(Ae,Et),Ae.prototype[Tr]=!0,Ae.prototype.removeEventListener=function(o,c,l,f){bh(this,o,c,l,f)};function De(o,c){var l,f=o.F;if(f)for(l=[];f;f=f.F)l.push(f);if(o=o.M,f=c.type||c,typeof c=="string")c=new Te(c,o);else if(c instanceof Te)c.target=c.target||o;else{var T=c;c=new Te(f,o),_(c,T)}if(T=!0,l)for(var S=l.length-1;0<=S;S--){var D=c.g=l[S];T=Wi(D,f,!0,c)&&T}if(D=c.g=o,T=Wi(D,f,!0,c)&&T,T=Wi(D,f,!1,c)&&T,l)for(S=0;S<l.length;S++)D=c.g=l[S],T=Wi(D,f,!1,c)&&T}Ae.prototype.N=function(){if(Ae.aa.N.call(this),this.i){var o=this.i,c;for(c in o.g){for(var l=o.g[c],f=0;f<l.length;f++)zi(l[f]);delete o.g[c],o.h--}}this.F=null},Ae.prototype.K=function(o,c,l,f){return this.i.add(String(o),c,!1,l,f)},Ae.prototype.L=function(o,c,l,f){return this.i.add(String(o),c,!0,l,f)};function Wi(o,c,l,f){if(c=o.i.g[String(c)],!c)return!0;c=c.concat();for(var T=!0,S=0;S<c.length;++S){var D=c[S];if(D&&!D.da&&D.capture==l){var X=D.listener,_e=D.ha||D.src;D.fa&&Uo(o.i,D),T=X.call(_e,f)!==!1&&T}}return T&&!f.defaultPrevented}function Rh(o,c,l){if(typeof o=="function")l&&(o=b(o,l));else if(o&&typeof o.handleEvent=="function")o=b(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:u.setTimeout(o,c||0)}function Ch(o){o.g=Rh(()=>{o.g=null,o.i&&(o.i=!1,Ch(o))},o.l);let c=o.h;o.h=null,o.m.apply(null,c)}class Xg extends Et{constructor(c,l){super(),this.m=c,this.l=l,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:Ch(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ar(o){Et.call(this),this.h=o,this.g={}}N(Ar,Et);var Ph=[];function Dh(o){fe(o.g,function(c,l){this.g.hasOwnProperty(l)&&qo(c)},o),o.g={}}Ar.prototype.N=function(){Ar.aa.N.call(this),Dh(this)},Ar.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ko=u.JSON.stringify,Zg=u.JSON.parse,ey=class{stringify(o){return u.JSON.stringify(o,void 0)}parse(o){return u.JSON.parse(o,void 0)}};function Ho(){}Ho.prototype.h=null;function Nh(o){return o.h||(o.h=o.i())}function kh(){}var br={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Qo(){Te.call(this,"d")}N(Qo,Te);function Jo(){Te.call(this,"c")}N(Jo,Te);var Qt={},Oh=null;function Ki(){return Oh=Oh||new Ae}Qt.La="serverreachability";function xh(o){Te.call(this,Qt.La,o)}N(xh,Te);function Sr(o){let c=Ki();De(c,new xh(c))}Qt.STAT_EVENT="statevent";function Mh(o,c){Te.call(this,Qt.STAT_EVENT,o),this.stat=c}N(Mh,Te);function Ne(o){let c=Ki();De(c,new Mh(c,o))}Qt.Ma="timingevent";function Lh(o,c){Te.call(this,Qt.Ma,o),this.size=c}N(Lh,Te);function Rr(o,c){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){o()},c)}function Cr(){this.g=!0}Cr.prototype.xa=function(){this.g=!1};function ty(o,c,l,f,T,S){o.info(function(){if(o.g)if(S)for(var D="",X=S.split("&"),_e=0;_e<X.length;_e++){var W=X[_e].split("=");if(1<W.length){var be=W[0];W=W[1];var Se=be.split("_");D=2<=Se.length&&Se[1]=="type"?D+(be+"="+W+"&"):D+(be+"=redacted&")}}else D=null;else D=S;return"XMLHTTP REQ ("+f+") [attempt "+T+"]: "+c+`
`+l+`
`+D})}function ny(o,c,l,f,T,S,D){o.info(function(){return"XMLHTTP RESP ("+f+") [ attempt "+T+"]: "+c+`
`+l+`
`+S+" "+D})}function Pn(o,c,l,f){o.info(function(){return"XMLHTTP TEXT ("+c+"): "+iy(o,l)+(f?" "+f:"")})}function ry(o,c){o.info(function(){return"TIMEOUT: "+c})}Cr.prototype.info=function(){};function iy(o,c){if(!o.g)return c;if(!c)return null;try{var l=JSON.parse(c);if(l){for(o=0;o<l.length;o++)if(Array.isArray(l[o])){var f=l[o];if(!(2>f.length)){var T=f[1];if(Array.isArray(T)&&!(1>T.length)){var S=T[0];if(S!="noop"&&S!="stop"&&S!="close")for(var D=1;D<T.length;D++)T[D]=""}}}}return Ko(l)}catch{return c}}var Hi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Vh={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Yo;function Qi(){}N(Qi,Ho),Qi.prototype.g=function(){return new XMLHttpRequest},Qi.prototype.i=function(){return{}},Yo=new Qi;function Tt(o,c,l,f){this.j=o,this.i=c,this.l=l,this.R=f||1,this.U=new Ar(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Fh}function Fh(){this.i=null,this.g="",this.h=!1}var Uh={},Xo={};function Zo(o,c,l){o.L=1,o.v=Zi(ut(c)),o.m=l,o.P=!0,jh(o,null)}function jh(o,c){o.F=Date.now(),Ji(o),o.A=ut(o.v);var l=o.A,f=o.R;Array.isArray(f)||(f=[String(f)]),ed(l.i,"t",f),o.C=0,l=o.j.J,o.h=new Fh,o.g=vd(o.j,l?c:null,!o.m),0<o.O&&(o.M=new Xg(b(o.Y,o,o.g),o.O)),c=o.U,l=o.g,f=o.ca;var T="readystatechange";Array.isArray(T)||(T&&(Ph[0]=T.toString()),T=Ph);for(var S=0;S<T.length;S++){var D=Eh(l,T[S],f||c.handleEvent,!1,c.h||c);if(!D)break;c.g[D.key]=D}c=o.H?m(o.H):{},o.m?(o.u||(o.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,c)):(o.u="GET",o.g.ea(o.A,o.u,null,c)),Sr(),ty(o.i,o.u,o.A,o.l,o.R,o.m)}Tt.prototype.ca=function(o){o=o.target;let c=this.M;c&&lt(o)==3?c.j():this.Y(o)},Tt.prototype.Y=function(o){try{if(o==this.g)e:{let Se=lt(this.g);var c=this.g.Ba();let kn=this.g.Z();if(!(3>Se)&&(Se!=3||this.g&&(this.h.h||this.g.oa()||ad(this.g)))){this.J||Se!=4||c==7||(c==8||0>=kn?Sr(3):Sr(2)),ea(this);var l=this.g.Z();this.X=l;t:if($h(this)){var f=ad(this.g);o="";var T=f.length,S=lt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Jt(this),Pr(this);var D="";break t}this.h.i=new u.TextDecoder}for(c=0;c<T;c++)this.h.h=!0,o+=this.h.i.decode(f[c],{stream:!(S&&c==T-1)});f.length=0,this.h.g+=o,this.C=0,D=this.h.g}else D=this.g.oa();if(this.o=l==200,ny(this.i,this.u,this.A,this.l,this.R,Se,l),this.o){if(this.T&&!this.K){t:{if(this.g){var X,_e=this.g;if((X=_e.g?_e.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!J(X)){var W=X;break t}}W=null}if(l=W)Pn(this.i,this.l,l,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ta(this,l);else{this.o=!1,this.s=3,Ne(12),Jt(this),Pr(this);break e}}if(this.P){l=!0;let We;for(;!this.J&&this.C<D.length;)if(We=sy(this,D),We==Xo){Se==4&&(this.s=4,Ne(14),l=!1),Pn(this.i,this.l,null,"[Incomplete Response]");break}else if(We==Uh){this.s=4,Ne(15),Pn(this.i,this.l,D,"[Invalid Chunk]"),l=!1;break}else Pn(this.i,this.l,We,null),ta(this,We);if($h(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Se!=4||D.length!=0||this.h.h||(this.s=1,Ne(16),l=!1),this.o=this.o&&l,!l)Pn(this.i,this.l,D,"[Invalid Chunked Response]"),Jt(this),Pr(this);else if(0<D.length&&!this.W){this.W=!0;var be=this.j;be.g==this&&be.ba&&!be.M&&(be.j.info("Great, no buffering proxy detected. Bytes received: "+D.length),aa(be),be.M=!0,Ne(11))}}else Pn(this.i,this.l,D,null),ta(this,D);Se==4&&Jt(this),this.o&&!this.J&&(Se==4?pd(this.j,this):(this.o=!1,Ji(this)))}else Ey(this.g),l==400&&0<D.indexOf("Unknown SID")?(this.s=3,Ne(12)):(this.s=0,Ne(13)),Jt(this),Pr(this)}}}catch{}finally{}};function $h(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function sy(o,c){var l=o.C,f=c.indexOf(`
`,l);return f==-1?Xo:(l=Number(c.substring(l,f)),isNaN(l)?Uh:(f+=1,f+l>c.length?Xo:(c=c.slice(f,f+l),o.C=f+l,c)))}Tt.prototype.cancel=function(){this.J=!0,Jt(this)};function Ji(o){o.S=Date.now()+o.I,Bh(o,o.I)}function Bh(o,c){if(o.B!=null)throw Error("WatchDog timer not null");o.B=Rr(b(o.ba,o),c)}function ea(o){o.B&&(u.clearTimeout(o.B),o.B=null)}Tt.prototype.ba=function(){this.B=null;let o=Date.now();0<=o-this.S?(ry(this.i,this.A),this.L!=2&&(Sr(),Ne(17)),Jt(this),this.s=2,Pr(this)):Bh(this,this.S-o)};function Pr(o){o.j.G==0||o.J||pd(o.j,o)}function Jt(o){ea(o);var c=o.M;c&&typeof c.ma=="function"&&c.ma(),o.M=null,Dh(o.U),o.g&&(c=o.g,o.g=null,c.abort(),c.ma())}function ta(o,c){try{var l=o.j;if(l.G!=0&&(l.g==o||na(l.h,o))){if(!o.K&&na(l.h,o)&&l.G==3){try{var f=l.Da.g.parse(c)}catch{f=null}if(Array.isArray(f)&&f.length==3){var T=f;if(T[0]==0){e:if(!l.u){if(l.g)if(l.g.F+3e3<o.F)is(l),ns(l);else break e;oa(l),Ne(18)}}else l.za=T[1],0<l.za-l.T&&37500>T[2]&&l.F&&l.v==0&&!l.C&&(l.C=Rr(b(l.Za,l),6e3));if(1>=Gh(l.h)&&l.ca){try{l.ca()}catch{}l.ca=void 0}}else Xt(l,11)}else if((o.K||l.g==o)&&is(l),!J(c))for(T=l.Da.g.parse(c),c=0;c<T.length;c++){let W=T[c];if(l.T=W[0],W=W[1],l.G==2)if(W[0]=="c"){l.K=W[1],l.ia=W[2];let be=W[3];be!=null&&(l.la=be,l.j.info("VER="+l.la));let Se=W[4];Se!=null&&(l.Aa=Se,l.j.info("SVER="+l.Aa));let kn=W[5];kn!=null&&typeof kn=="number"&&0<kn&&(f=1.5*kn,l.L=f,l.j.info("backChannelRequestTimeoutMs_="+f)),f=l;let We=o.g;if(We){let os=We.g?We.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(os){var S=f.h;S.g||os.indexOf("spdy")==-1&&os.indexOf("quic")==-1&&os.indexOf("h2")==-1||(S.j=S.l,S.g=new Set,S.h&&(ra(S,S.h),S.h=null))}if(f.D){let ca=We.g?We.g.getResponseHeader("X-HTTP-Session-Id"):null;ca&&(f.ya=ca,te(f.I,f.D,ca))}}l.G=3,l.l&&l.l.ua(),l.ba&&(l.R=Date.now()-o.F,l.j.info("Handshake RTT: "+l.R+"ms")),f=l;var D=o;if(f.qa=yd(f,f.J?f.ia:null,f.W),D.K){Wh(f.h,D);var X=D,_e=f.L;_e&&(X.I=_e),X.B&&(ea(X),Ji(X)),f.g=D}else dd(f);0<l.i.length&&rs(l)}else W[0]!="stop"&&W[0]!="close"||Xt(l,7);else l.G==3&&(W[0]=="stop"||W[0]=="close"?W[0]=="stop"?Xt(l,7):sa(l):W[0]!="noop"&&l.l&&l.l.ta(W),l.v=0)}}Sr(4)}catch{}}var oy=class{constructor(o,c){this.g=o,this.map=c}};function qh(o){this.l=o||10,u.PerformanceNavigationTiming?(o=u.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function zh(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Gh(o){return o.h?1:o.g?o.g.size:0}function na(o,c){return o.h?o.h==c:o.g?o.g.has(c):!1}function ra(o,c){o.g?o.g.add(c):o.h=c}function Wh(o,c){o.h&&o.h==c?o.h=null:o.g&&o.g.has(c)&&o.g.delete(c)}qh.prototype.cancel=function(){if(this.i=Kh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let o of this.g.values())o.cancel();this.g.clear()}};function Kh(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let c=o.i;for(let l of o.g.values())c=c.concat(l.D);return c}return V(o.i)}function ay(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(h(o)){for(var c=[],l=o.length,f=0;f<l;f++)c.push(o[f]);return c}c=[],l=0;for(f in o)c[l++]=o[f];return c}function cy(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(h(o)||typeof o=="string"){var c=[];o=o.length;for(var l=0;l<o;l++)c.push(l);return c}c=[],l=0;for(let f in o)c[l++]=f;return c}}}function Hh(o,c){if(o.forEach&&typeof o.forEach=="function")o.forEach(c,void 0);else if(h(o)||typeof o=="string")Array.prototype.forEach.call(o,c,void 0);else for(var l=cy(o),f=ay(o),T=f.length,S=0;S<T;S++)c.call(void 0,f[S],l&&l[S],o)}var Qh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function uy(o,c){if(o){o=o.split("&");for(var l=0;l<o.length;l++){var f=o[l].indexOf("="),T=null;if(0<=f){var S=o[l].substring(0,f);T=o[l].substring(f+1)}else S=o[l];c(S,T?decodeURIComponent(T.replace(/\+/g," ")):"")}}}function Yt(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof Yt){this.h=o.h,Yi(this,o.j),this.o=o.o,this.g=o.g,Xi(this,o.s),this.l=o.l;var c=o.i,l=new kr;l.i=c.i,c.g&&(l.g=new Map(c.g),l.h=c.h),Jh(this,l),this.m=o.m}else o&&(c=String(o).match(Qh))?(this.h=!1,Yi(this,c[1]||"",!0),this.o=Dr(c[2]||""),this.g=Dr(c[3]||"",!0),Xi(this,c[4]),this.l=Dr(c[5]||"",!0),Jh(this,c[6]||"",!0),this.m=Dr(c[7]||"")):(this.h=!1,this.i=new kr(null,this.h))}Yt.prototype.toString=function(){var o=[],c=this.j;c&&o.push(Nr(c,Yh,!0),":");var l=this.g;return(l||c=="file")&&(o.push("//"),(c=this.o)&&o.push(Nr(c,Yh,!0),"@"),o.push(encodeURIComponent(String(l)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l=this.s,l!=null&&o.push(":",String(l))),(l=this.l)&&(this.g&&l.charAt(0)!="/"&&o.push("/"),o.push(Nr(l,l.charAt(0)=="/"?dy:hy,!0))),(l=this.i.toString())&&o.push("?",l),(l=this.m)&&o.push("#",Nr(l,py)),o.join("")};function ut(o){return new Yt(o)}function Yi(o,c,l){o.j=l?Dr(c,!0):c,o.j&&(o.j=o.j.replace(/:$/,""))}function Xi(o,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);o.s=c}else o.s=null}function Jh(o,c,l){c instanceof kr?(o.i=c,my(o.i,o.h)):(l||(c=Nr(c,fy)),o.i=new kr(c,o.h))}function te(o,c,l){o.i.set(c,l)}function Zi(o){return te(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Dr(o,c){return o?c?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Nr(o,c,l){return typeof o=="string"?(o=encodeURI(o).replace(c,ly),l&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function ly(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Yh=/[#\/\?@]/g,hy=/[#\?:]/g,dy=/[#\?]/g,fy=/[#\?@]/g,py=/#/g;function kr(o,c){this.h=this.g=null,this.i=o||null,this.j=!!c}function At(o){o.g||(o.g=new Map,o.h=0,o.i&&uy(o.i,function(c,l){o.add(decodeURIComponent(c.replace(/\+/g," ")),l)}))}n=kr.prototype,n.add=function(o,c){At(this),this.i=null,o=Dn(this,o);var l=this.g.get(o);return l||this.g.set(o,l=[]),l.push(c),this.h+=1,this};function Xh(o,c){At(o),c=Dn(o,c),o.g.has(c)&&(o.i=null,o.h-=o.g.get(c).length,o.g.delete(c))}function Zh(o,c){return At(o),c=Dn(o,c),o.g.has(c)}n.forEach=function(o,c){At(this),this.g.forEach(function(l,f){l.forEach(function(T){o.call(c,T,f,this)},this)},this)},n.na=function(){At(this);let o=Array.from(this.g.values()),c=Array.from(this.g.keys()),l=[];for(let f=0;f<c.length;f++){let T=o[f];for(let S=0;S<T.length;S++)l.push(c[f])}return l},n.V=function(o){At(this);let c=[];if(typeof o=="string")Zh(this,o)&&(c=c.concat(this.g.get(Dn(this,o))));else{o=Array.from(this.g.values());for(let l=0;l<o.length;l++)c=c.concat(o[l])}return c},n.set=function(o,c){return At(this),this.i=null,o=Dn(this,o),Zh(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[c]),this.h+=1,this},n.get=function(o,c){return o?(o=this.V(o),0<o.length?String(o[0]):c):c};function ed(o,c,l){Xh(o,c),0<l.length&&(o.i=null,o.g.set(Dn(o,c),V(l)),o.h+=l.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let o=[],c=Array.from(this.g.keys());for(var l=0;l<c.length;l++){var f=c[l];let S=encodeURIComponent(String(f)),D=this.V(f);for(f=0;f<D.length;f++){var T=S;D[f]!==""&&(T+="="+encodeURIComponent(String(D[f]))),o.push(T)}}return this.i=o.join("&")};function Dn(o,c){return c=String(c),o.j&&(c=c.toLowerCase()),c}function my(o,c){c&&!o.j&&(At(o),o.i=null,o.g.forEach(function(l,f){var T=f.toLowerCase();f!=T&&(Xh(this,f),ed(this,T,l))},o)),o.j=c}function gy(o,c){let l=new Cr;if(u.Image){let f=new Image;f.onload=R(bt,l,"TestLoadImage: loaded",!0,c,f),f.onerror=R(bt,l,"TestLoadImage: error",!1,c,f),f.onabort=R(bt,l,"TestLoadImage: abort",!1,c,f),f.ontimeout=R(bt,l,"TestLoadImage: timeout",!1,c,f),u.setTimeout(function(){f.ontimeout&&f.ontimeout()},1e4),f.src=o}else c(!1)}function yy(o,c){let l=new Cr,f=new AbortController,T=setTimeout(()=>{f.abort(),bt(l,"TestPingServer: timeout",!1,c)},1e4);fetch(o,{signal:f.signal}).then(S=>{clearTimeout(T),S.ok?bt(l,"TestPingServer: ok",!0,c):bt(l,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(T),bt(l,"TestPingServer: error",!1,c)})}function bt(o,c,l,f,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),f(l)}catch{}}function vy(){this.g=new ey}function _y(o,c,l){let f=l||"";try{Hh(o,function(T,S){let D=T;d(T)&&(D=Ko(T)),c.push(f+S+"="+encodeURIComponent(D))})}catch(T){throw c.push(f+"type="+encodeURIComponent("_badmap")),T}}function Or(o){this.l=o.Ub||null,this.j=o.eb||!1}N(Or,Ho),Or.prototype.g=function(){return new es(this.l,this.j)},Or.prototype.i=function(o){return function(){return o}}({});function es(o,c){Ae.call(this),this.D=o,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(es,Ae),n=es.prototype,n.open=function(o,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=c,this.readyState=1,Mr(this)},n.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(c.body=o),(this.D||u).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,xr(this)),this.readyState=0},n.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Mr(this)),this.g&&(this.readyState=3,Mr(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;td(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function td(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}n.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var c=o.value?o.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!o.done}))&&(this.response=this.responseText+=c)}o.done?xr(this):Mr(this),this.readyState==3&&td(this)}},n.Ra=function(o){this.g&&(this.response=this.responseText=o,xr(this))},n.Qa=function(o){this.g&&(this.response=o,xr(this))},n.ga=function(){this.g&&xr(this)};function xr(o){o.readyState=4,o.l=null,o.j=null,o.v=null,Mr(o)}n.setRequestHeader=function(o,c){this.u.append(o,c)},n.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let o=[],c=this.h.entries();for(var l=c.next();!l.done;)l=l.value,o.push(l[0]+": "+l[1]),l=c.next();return o.join(`\r
`)};function Mr(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(es.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function nd(o){let c="";return fe(o,function(l,f){c+=f,c+=":",c+=l,c+=`\r
`}),c}function ia(o,c,l){e:{for(f in l){var f=!1;break e}f=!0}f||(l=nd(l),typeof o=="string"?l!=null&&encodeURIComponent(String(l)):te(o,c,l))}function re(o){Ae.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(re,Ae);var Iy=/^https?$/i,wy=["POST","PUT"];n=re.prototype,n.Ha=function(o){this.J=o},n.ea=function(o,c,l,f){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);c=c?c.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Yo.g(),this.v=this.o?Nh(this.o):Nh(Yo),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(c,String(o),!0),this.B=!1}catch(S){rd(this,S);return}if(o=l||"",l=new Map(this.headers),f)if(Object.getPrototypeOf(f)===Object.prototype)for(var T in f)l.set(T,f[T]);else if(typeof f.keys=="function"&&typeof f.get=="function")for(let S of f.keys())l.set(S,f.get(S));else throw Error("Unknown input type for opt_headers: "+String(f));f=Array.from(l.keys()).find(S=>S.toLowerCase()=="content-type"),T=u.FormData&&o instanceof u.FormData,!(0<=Array.prototype.indexOf.call(wy,c,void 0))||f||T||l.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[S,D]of l)this.g.setRequestHeader(S,D);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{od(this),this.u=!0,this.g.send(o),this.u=!1}catch(S){rd(this,S)}};function rd(o,c){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=c,o.m=5,id(o),ts(o)}function id(o){o.A||(o.A=!0,De(o,"complete"),De(o,"error"))}n.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,De(this,"complete"),De(this,"abort"),ts(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ts(this,!0)),re.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?sd(this):this.bb())},n.bb=function(){sd(this)};function sd(o){if(o.h&&typeof a<"u"&&(!o.v[1]||lt(o)!=4||o.Z()!=2)){if(o.u&&lt(o)==4)Rh(o.Ea,0,o);else if(De(o,"readystatechange"),lt(o)==4){o.h=!1;try{let D=o.Z();e:switch(D){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var l;if(!(l=c)){var f;if(f=D===0){var T=String(o.D).match(Qh)[1]||null;!T&&u.self&&u.self.location&&(T=u.self.location.protocol.slice(0,-1)),f=!Iy.test(T?T.toLowerCase():"")}l=f}if(l)De(o,"complete"),De(o,"success");else{o.m=6;try{var S=2<lt(o)?o.g.statusText:""}catch{S=""}o.l=S+" ["+o.Z()+"]",id(o)}}finally{ts(o)}}}}function ts(o,c){if(o.g){od(o);let l=o.g,f=o.v[0]?()=>{}:null;o.g=null,o.v=null,c||De(o,"ready");try{l.onreadystatechange=f}catch{}}}function od(o){o.I&&(u.clearTimeout(o.I),o.I=null)}n.isActive=function(){return!!this.g};function lt(o){return o.g?o.g.readyState:0}n.Z=function(){try{return 2<lt(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(o){if(this.g){var c=this.g.responseText;return o&&c.indexOf(o)==0&&(c=c.substring(o.length)),Zg(c)}};function ad(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function Ey(o){let c={};o=(o.g&&2<=lt(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let f=0;f<o.length;f++){if(J(o[f]))continue;var l=I(o[f]);let T=l[0];if(l=l[1],typeof l!="string")continue;l=l.trim();let S=c[T]||[];c[T]=S,S.push(l)}E(c,function(f){return f.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Lr(o,c,l){return l&&l.internalChannelParams&&l.internalChannelParams[o]||c}function cd(o){this.Aa=0,this.i=[],this.j=new Cr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Lr("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Lr("baseRetryDelayMs",5e3,o),this.cb=Lr("retryDelaySeedMs",1e4,o),this.Wa=Lr("forwardChannelMaxRetries",2,o),this.wa=Lr("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new qh(o&&o.concurrentRequestLimit),this.Da=new vy,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=cd.prototype,n.la=8,n.G=1,n.connect=function(o,c,l,f){Ne(0),this.W=o,this.H=c||{},l&&f!==void 0&&(this.H.OSID=l,this.H.OAID=f),this.F=this.X,this.I=yd(this,null,this.W),rs(this)};function sa(o){if(ud(o),o.G==3){var c=o.U++,l=ut(o.I);if(te(l,"SID",o.K),te(l,"RID",c),te(l,"TYPE","terminate"),Vr(o,l),c=new Tt(o,o.j,c),c.L=2,c.v=Zi(ut(l)),l=!1,u.navigator&&u.navigator.sendBeacon)try{l=u.navigator.sendBeacon(c.v.toString(),"")}catch{}!l&&u.Image&&(new Image().src=c.v,l=!0),l||(c.g=vd(c.j,null),c.g.ea(c.v)),c.F=Date.now(),Ji(c)}gd(o)}function ns(o){o.g&&(aa(o),o.g.cancel(),o.g=null)}function ud(o){ns(o),o.u&&(u.clearTimeout(o.u),o.u=null),is(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&u.clearTimeout(o.s),o.s=null)}function rs(o){if(!zh(o.h)&&!o.s){o.s=!0;var c=o.Ga;Ir||wh(),wr||(Ir(),wr=!0),Fo.add(c,o),o.B=0}}function Ty(o,c){return Gh(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=c.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=Rr(b(o.Ga,o,c),md(o,o.B)),o.B++,!0)}n.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;let T=new Tt(this,this.j,o),S=this.o;if(this.S&&(S?(S=m(S),_(S,this.S)):S=this.S),this.m!==null||this.O||(T.H=S,S=null),this.P)e:{for(var c=0,l=0;l<this.i.length;l++){t:{var f=this.i[l];if("__data__"in f.map&&(f=f.map.__data__,typeof f=="string")){f=f.length;break t}f=void 0}if(f===void 0)break;if(c+=f,4096<c){c=l;break e}if(c===4096||l===this.i.length-1){c=l+1;break e}}c=1e3}else c=1e3;c=hd(this,T,c),l=ut(this.I),te(l,"RID",o),te(l,"CVER",22),this.D&&te(l,"X-HTTP-Session-Id",this.D),Vr(this,l),S&&(this.O?c="headers="+encodeURIComponent(String(nd(S)))+"&"+c:this.m&&ia(l,this.m,S)),ra(this.h,T),this.Ua&&te(l,"TYPE","init"),this.P?(te(l,"$req",c),te(l,"SID","null"),T.T=!0,Zo(T,l,null)):Zo(T,l,c),this.G=2}}else this.G==3&&(o?ld(this,o):this.i.length==0||zh(this.h)||ld(this))};function ld(o,c){var l;c?l=c.l:l=o.U++;let f=ut(o.I);te(f,"SID",o.K),te(f,"RID",l),te(f,"AID",o.T),Vr(o,f),o.m&&o.o&&ia(f,o.m,o.o),l=new Tt(o,o.j,l,o.B+1),o.m===null&&(l.H=o.o),c&&(o.i=c.D.concat(o.i)),c=hd(o,l,1e3),l.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),ra(o.h,l),Zo(l,f,c)}function Vr(o,c){o.H&&fe(o.H,function(l,f){te(c,f,l)}),o.l&&Hh({},function(l,f){te(c,f,l)})}function hd(o,c,l){l=Math.min(o.i.length,l);var f=o.l?b(o.l.Na,o.l,o):null;e:{var T=o.i;let S=-1;for(;;){let D=["count="+l];S==-1?0<l?(S=T[0].g,D.push("ofs="+S)):S=0:D.push("ofs="+S);let X=!0;for(let _e=0;_e<l;_e++){let W=T[_e].g,be=T[_e].map;if(W-=S,0>W)S=Math.max(0,T[_e].g-100),X=!1;else try{_y(be,D,"req"+W+"_")}catch{f&&f(be)}}if(X){f=D.join("&");break e}}}return o=o.i.splice(0,l),c.D=o,f}function dd(o){if(!o.g&&!o.u){o.Y=1;var c=o.Fa;Ir||wh(),wr||(Ir(),wr=!0),Fo.add(c,o),o.v=0}}function oa(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=Rr(b(o.Fa,o),md(o,o.v)),o.v++,!0)}n.Fa=function(){if(this.u=null,fd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=Rr(b(this.ab,this),o)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ne(10),ns(this),fd(this))};function aa(o){o.A!=null&&(u.clearTimeout(o.A),o.A=null)}function fd(o){o.g=new Tt(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var c=ut(o.qa);te(c,"RID","rpc"),te(c,"SID",o.K),te(c,"AID",o.T),te(c,"CI",o.F?"0":"1"),!o.F&&o.ja&&te(c,"TO",o.ja),te(c,"TYPE","xmlhttp"),Vr(o,c),o.m&&o.o&&ia(c,o.m,o.o),o.L&&(o.g.I=o.L);var l=o.g;o=o.ia,l.L=1,l.v=Zi(ut(c)),l.m=null,l.P=!0,jh(l,o)}n.Za=function(){this.C!=null&&(this.C=null,ns(this),oa(this),Ne(19))};function is(o){o.C!=null&&(u.clearTimeout(o.C),o.C=null)}function pd(o,c){var l=null;if(o.g==c){is(o),aa(o),o.g=null;var f=2}else if(na(o.h,c))l=c.D,Wh(o.h,c),f=1;else return;if(o.G!=0){if(c.o)if(f==1){l=c.m?c.m.length:0,c=Date.now()-c.F;var T=o.B;f=Ki(),De(f,new Lh(f,l)),rs(o)}else dd(o);else if(T=c.s,T==3||T==0&&0<c.X||!(f==1&&Ty(o,c)||f==2&&oa(o)))switch(l&&0<l.length&&(c=o.h,c.i=c.i.concat(l)),T){case 1:Xt(o,5);break;case 4:Xt(o,10);break;case 3:Xt(o,6);break;default:Xt(o,2)}}}function md(o,c){let l=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(l*=2),l*c}function Xt(o,c){if(o.j.info("Error code "+c),c==2){var l=b(o.fb,o),f=o.Xa;let T=!f;f=new Yt(f||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Yi(f,"https"),Zi(f),T?gy(f.toString(),l):yy(f.toString(),l)}else Ne(2);o.G=0,o.l&&o.l.sa(c),gd(o),ud(o)}n.fb=function(o){o?(this.j.info("Successfully pinged google.com"),Ne(2)):(this.j.info("Failed to ping google.com"),Ne(1))};function gd(o){if(o.G=0,o.ka=[],o.l){let c=Kh(o.h);(c.length!=0||o.i.length!=0)&&(k(o.ka,c),k(o.ka,o.i),o.h.i.length=0,V(o.i),o.i.length=0),o.l.ra()}}function yd(o,c,l){var f=l instanceof Yt?ut(l):new Yt(l);if(f.g!="")c&&(f.g=c+"."+f.g),Xi(f,f.s);else{var T=u.location;f=T.protocol,c=c?c+"."+T.hostname:T.hostname,T=+T.port;var S=new Yt(null);f&&Yi(S,f),c&&(S.g=c),T&&Xi(S,T),l&&(S.l=l),f=S}return l=o.D,c=o.ya,l&&c&&te(f,l,c),te(f,"VER",o.la),Vr(o,f),f}function vd(o,c,l){if(c&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=o.Ca&&!o.pa?new re(new Or({eb:l})):new re(o.pa),c.Ha(o.J),c}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function _d(){}n=_d.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ss(){}ss.prototype.g=function(o,c){return new xe(o,c)};function xe(o,c){Ae.call(this),this.g=new cd(c),this.l=o,this.h=c&&c.messageUrlParams||null,o=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(o?o["X-WebChannel-Content-Type"]=c.messageContentType:o={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(o?o["X-WebChannel-Client-Profile"]=c.va:o={"X-WebChannel-Client-Profile":c.va}),this.g.S=o,(o=c&&c.Sb)&&!J(o)&&(this.g.m=o),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!J(c)&&(this.g.D=c,o=this.h,o!==null&&c in o&&(o=this.h,c in o&&delete o[c])),this.j=new Nn(this)}N(xe,Ae),xe.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},xe.prototype.close=function(){sa(this.g)},xe.prototype.o=function(o){var c=this.g;if(typeof o=="string"){var l={};l.__data__=o,o=l}else this.u&&(l={},l.__data__=Ko(o),o=l);c.i.push(new oy(c.Ya++,o)),c.G==3&&rs(c)},xe.prototype.N=function(){this.g.l=null,delete this.j,sa(this.g),delete this.g,xe.aa.N.call(this)};function Id(o){Qo.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var c=o.__sm__;if(c){e:{for(let l in c){o=l;break e}o=void 0}(this.i=o)&&(o=this.i,c=c!==null&&o in c?c[o]:void 0),this.data=c}else this.data=o}N(Id,Qo);function wd(){Jo.call(this),this.status=1}N(wd,Jo);function Nn(o){this.g=o}N(Nn,_d),Nn.prototype.ua=function(){De(this.g,"a")},Nn.prototype.ta=function(o){De(this.g,new Id(o))},Nn.prototype.sa=function(o){De(this.g,new wd)},Nn.prototype.ra=function(){De(this.g,"b")},ss.prototype.createWebChannel=ss.prototype.g,xe.prototype.send=xe.prototype.o,xe.prototype.open=xe.prototype.m,xe.prototype.close=xe.prototype.close,qu=vt.createWebChannelTransport=function(){return new ss},Bu=vt.getStatEventTarget=function(){return Ki()},$u=vt.Event=Qt,so=vt.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Hi.NO_ERROR=0,Hi.TIMEOUT=8,Hi.HTTP_ERROR=6,Ri=vt.ErrorCode=Hi,Vh.COMPLETE="complete",ju=vt.EventType=Vh,kh.EventType=br,br.OPEN="a",br.CLOSE="b",br.ERROR="c",br.MESSAGE="d",Ae.prototype.listen=Ae.prototype.K,tr=vt.WebChannel=kh,Uu=vt.FetchXmlHttpFactory=Or,re.prototype.listenOnce=re.prototype.L,re.prototype.getLastError=re.prototype.Ka,re.prototype.getLastErrorCode=re.prototype.Ba,re.prototype.getStatus=re.prototype.Z,re.prototype.getResponseJson=re.prototype.Oa,re.prototype.getResponseText=re.prototype.oa,re.prototype.send=re.prototype.ea,re.prototype.setWithCredentials=re.prototype.Ha,Fu=vt.XhrIo=re}).apply(typeof io<"u"?io:typeof self<"u"?self:typeof window<"u"?window:{});var Nm="@firebase/firestore";var me=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};me.UNAUTHENTICATED=new me(null),me.GOOGLE_CREDENTIALS=new me("google-credentials-uid"),me.FIRST_PARTY=new me("first-party-uid"),me.MOCK_USER=new me("mock-user");var vr="10.12.1";var Tn=new Lt("@firebase/firestore");function Ci(){return Tn.logLevel}function O(n,...e){if(Tn.logLevel<=B.DEBUG){let t=e.map(hh);Tn.debug(`Firestore (${vr}): ${n}`,...t)}}function An(n,...e){if(Tn.logLevel<=B.ERROR){let t=e.map(hh);Tn.error(`Firestore (${vr}): ${n}`,...t)}}function ho(n,...e){if(Tn.logLevel<=B.WARN){let t=e.map(hh);Tn.warn(`Firestore (${vr}): ${n}`,...t)}}function hh(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function q(n="Unexpected state"){let e=`FIRESTORE (${vr}) INTERNAL ASSERTION FAILED: `+n;throw An(e),new Error(e)}function ve(n,e){n||q()}function ne(n,e){return n}var C={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},L=class extends Ve{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var _t=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var fo=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Ku=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(me.UNAUTHENTICATED))}shutdown(){}},Hu=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Qu=class{constructor(e){this.t=e,this.currentUser=me.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let r=this.i,i=h=>this.i!==r?(r=this.i,t(h)):Promise.resolve(),s=new _t;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new _t,e.enqueueRetryable(()=>i(this.currentUser))};let a=()=>{let h=s;e.enqueueRetryable(()=>v(this,null,function*(){yield h.promise,yield i(this.currentUser)}))},u=h=>{O("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(h=>u(h)),setTimeout(()=>{if(!this.auth){let h=this.t.getImmediate({optional:!0});h?u(h):(O("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new _t)}},0),a()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(O("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ve(typeof r.accessToken=="string"),new fo(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return ve(e===null||typeof e=="string"),new me(e)}},Ju=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=me.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Yu=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Ju(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(me.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Xu=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Zu=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){let r=s=>{s.error!=null&&O("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let a=s.token!==this.R;return this.R=s.token,O("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{O("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):O("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ve(typeof t.token=="string"),this.R=t.token,new Xu(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function JT(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var po=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=JT(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}};function Z(n,e){return n<e?-1:n>e?1:0}function sr(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var Pe=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new L(C.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new L(C.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new L(C.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new L(C.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Z(this.nanoseconds,e.nanoseconds):Z(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var se=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Pe(0,0))}static max(){return new n(new Pe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var mo=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&q(),r===void 0?r=e.length-t:r>e.length-t&&q(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=e.get(i),a=t.get(i);if(s<a)return-1;if(s>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},ge=class n extends mo{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new L(C.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},YT=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ue=class n extends mo{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return YT.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new L(C.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},a=!1;for(;i<e.length;){let u=e[i];if(u==="\\"){if(i+1===e.length)throw new L(C.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let h=e[i+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new L(C.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,i+=2}else u==="`"?(a=!a,i++):u!=="."||a?(r+=u,i++):(s(),i++)}if(s(),a)throw new L(C.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var $=class n{constructor(e){this.path=e}static fromPath(e){return new n(ge.fromString(e))}static fromName(e){return new n(ge.fromString(e).popFirst(5))}static empty(){return new n(ge.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ge.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ge.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new ge(e.slice()))}};var el=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};el.UNKNOWN_ID=-1;function XT(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=se.fromTimestamp(r===1e9?new Pe(t+1,0):new Pe(t,r));return new bn(i,$.empty(),e)}function ZT(n){return new bn(n.readTime,n.key,-1)}var bn=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(se.min(),$.empty(),-1)}static max(){return new n(se.max(),$.empty(),-1)}};function eA(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=$.comparator(n.documentKey,e.documentKey),t!==0?t:Z(n.largestBatchId,e.largestBatchId))}var tA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",tl=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Jm(n){return v(this,null,function*(){if(n.code!==C.FAILED_PRECONDITION||n.message!==tA)throw n;O("LocalStore","Unexpectedly lost primary lease")})}var P=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&q(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,a=!1;e.forEach(u=>{++i,u.next(()=>{++s,a&&s===i&&t()},h=>r(h))}),a=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,a=new Array(s),u=0;for(let h=0;h<s;h++){let d=h;t(e[d]).next(p=>{a[d]=p,++u,u===s&&r(a)},p=>i(p))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function nA(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Oo(n){return n.name==="IndexedDbTransactionError"}var rA=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function dh(n){return n==null}function xi(n){return n===0&&1/n==-1/0}function iA(n){return typeof n=="number"&&Number.isInteger(n)&&!xi(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var sA=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],B0=[...sA,"documentOverlays"],oA=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],aA=oA,q0=[...aA,"indexConfiguration","indexState","indexEntries"];function km(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ji(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Ym(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var je=class n{constructor(e,t){this.comparator=e,this.root=t||ot.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ot.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ot.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new rr(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new rr(this.root,e,this.comparator,!1)}getReverseIterator(){return new rr(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new rr(this.root,e,this.comparator,!0)}},rr=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},ot=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw q();let e=this.left.check();if(e!==this.right.check())throw q();return e+(this.isRed()?0:1)}};ot.EMPTY=null,ot.RED=!0,ot.BLACK=!1;ot.EMPTY=new class{constructor(){this.size=0}get key(){throw q()}get value(){throw q()}get color(){throw q()}get left(){throw q()}get right(){throw q()}copy(e,t,r,i,s){return this}insert(e,t,r){return new ot(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var ke=class n{constructor(e){this.comparator=e,this.data=new je(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new go(this.data.getIterator())}getIteratorFrom(e){return new go(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},go=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var st=class n{constructor(e){this.fields=e,e.sort(Ue.comparator)}static empty(){return new n([])}unionWith(e){let t=new ke(Ue.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return sr(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var nl=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var zt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new nl("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Z(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};zt.EMPTY_BYTE_STRING=new zt("");var cA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gt(n){if(ve(!!n),typeof n=="string"){let e=0,t=cA.exec(n);if(ve(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:de(n.seconds),nanos:de(n.nanos)}}function de(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function or(n){return typeof n=="string"?zt.fromBase64String(n):zt.fromUint8Array(n)}function fh(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Xm(n){let e=n.mapValue.fields.__previous_value__;return fh(e)?Xm(e):e}function yo(n){let e=Gt(n.mapValue.fields.__local_write_time__.timestampValue);return new Pe(e.seconds,e.nanos)}var rl=class{constructor(e,t,r,i,s,a,u,h,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=h,this.useFetchStreams=d}},il=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var oo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ar(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?fh(n)?4:Zm(n)?9007199254740991:10:q()}function at(n,e){if(n===e)return!0;let t=ar(n);if(t!==ar(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return yo(n).isEqual(yo(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let a=Gt(i.timestampValue),u=Gt(s.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return or(i.bytesValue).isEqual(or(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return de(i.geoPointValue.latitude)===de(s.geoPointValue.latitude)&&de(i.geoPointValue.longitude)===de(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return de(i.integerValue)===de(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let a=de(i.doubleValue),u=de(s.doubleValue);return a===u?xi(a)===xi(u):isNaN(a)&&isNaN(u)}return!1}(n,e);case 9:return sr(n.arrayValue.values||[],e.arrayValue.values||[],at);case 10:return function(i,s){let a=i.mapValue.fields||{},u=s.mapValue.fields||{};if(km(a)!==km(u))return!1;for(let h in a)if(a.hasOwnProperty(h)&&(u[h]===void 0||!at(a[h],u[h])))return!1;return!0}(n,e);default:return q()}}function Mi(n,e){return(n.values||[]).find(t=>at(t,e))!==void 0}function cr(n,e){if(n===e)return 0;let t=ar(n),r=ar(e);if(t!==r)return Z(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Z(n.booleanValue,e.booleanValue);case 2:return function(s,a){let u=de(s.integerValue||s.doubleValue),h=de(a.integerValue||a.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(n,e);case 3:return Om(n.timestampValue,e.timestampValue);case 4:return Om(yo(n),yo(e));case 5:return Z(n.stringValue,e.stringValue);case 6:return function(s,a){let u=or(s),h=or(a);return u.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(s,a){let u=s.split("/"),h=a.split("/");for(let d=0;d<u.length&&d<h.length;d++){let p=Z(u[d],h[d]);if(p!==0)return p}return Z(u.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,a){let u=Z(de(s.latitude),de(a.latitude));return u!==0?u:Z(de(s.longitude),de(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,a){let u=s.values||[],h=a.values||[];for(let d=0;d<u.length&&d<h.length;++d){let p=cr(u[d],h[d]);if(p)return p}return Z(u.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,a){if(s===oo.mapValue&&a===oo.mapValue)return 0;if(s===oo.mapValue)return 1;if(a===oo.mapValue)return-1;let u=s.fields||{},h=Object.keys(u),d=a.fields||{},p=Object.keys(d);h.sort(),p.sort();for(let w=0;w<h.length&&w<p.length;++w){let b=Z(h[w],p[w]);if(b!==0)return b;let R=cr(u[h[w]],d[p[w]]);if(R!==0)return R}return Z(h.length,p.length)}(n.mapValue,e.mapValue);default:throw q()}}function Om(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Z(n,e);let t=Gt(n),r=Gt(e),i=Z(t.seconds,r.seconds);return i!==0?i:Z(t.nanos,r.nanos)}function ur(n){return sl(n)}function sl(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Gt(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return or(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return $.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=sl(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let a of r)s?s=!1:i+=",",i+=`${a}:${sl(t.fields[a])}`;return i+"}"}(n.mapValue):q()}function ol(n){return!!n&&"integerValue"in n}function ph(n){return!!n&&"arrayValue"in n}function uo(n){return!!n&&"mapValue"in n}function Di(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return ji(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Di(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Di(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Zm(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var it=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!uo(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Di(t)}setAll(e){let t=Ue.emptyPath(),r={},i=[];e.forEach((a,u)=>{if(!t.isImmediateParentOf(u)){let h=this.getFieldsMap(t);this.applyChanges(h,r,i),r={},i=[],t=u.popLast()}a?r[u.lastSegment()]=Di(a):i.push(u.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());uo(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return at(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];uo(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ji(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(Di(this.value))}};function eg(n){let e=[];return ji(n.fields,(t,r)=>{let i=new Ue([t]);if(uo(r)){let s=eg(r.mapValue).fields;if(s.length===0)e.push(i);else for(let a of s)e.push(i.child(a))}else e.push(i)}),new st(e)}var lr=class n{constructor(e,t,r,i,s,a,u){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=u}static newInvalidDocument(e){return new n(e,0,se.min(),se.min(),se.min(),it.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,se.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,se.min(),se.min(),it.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,se.min(),se.min(),it.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=it.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=it.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var hr=class{constructor(e,t){this.position=e,this.inclusive=t}};function xm(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],a=n.position[i];if(s.field.isKeyField()?r=$.comparator($.fromName(a.referenceValue),t.key):r=cr(a,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Mm(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!at(n.position[t],e.position[t]))return!1;return!0}var dr=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function uA(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var vo=class{},ye=class n extends vo{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new cl(e,t,r):t==="array-contains"?new hl(e,r):t==="in"?new dl(e,r):t==="not-in"?new fl(e,r):t==="array-contains-any"?new pl(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new ul(e,r):new ll(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(cr(t,this.value)):t!==null&&ar(this.value)===ar(t)&&this.matchesComparison(cr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return q()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Wt=class n extends vo{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return tg(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function tg(n){return n.op==="and"}function ng(n){return lA(n)&&tg(n)}function lA(n){for(let e of n.filters)if(e instanceof Wt)return!1;return!0}function al(n){if(n instanceof ye)return n.field.canonicalString()+n.op.toString()+ur(n.value);if(ng(n))return n.filters.map(e=>al(e)).join(",");{let e=n.filters.map(t=>al(t)).join(",");return`${n.op}(${e})`}}function rg(n,e){return n instanceof ye?function(r,i){return i instanceof ye&&r.op===i.op&&r.field.isEqual(i.field)&&at(r.value,i.value)}(n,e):n instanceof Wt?function(r,i){return i instanceof Wt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,u)=>s&&rg(a,i.filters[u]),!0):!1}(n,e):void q()}function ig(n){return n instanceof ye?function(t){return`${t.field.canonicalString()} ${t.op} ${ur(t.value)}`}(n):n instanceof Wt?function(t){return t.op.toString()+" {"+t.getFilters().map(ig).join(" ,")+"}"}(n):"Filter"}var cl=class extends ye{constructor(e,t,r){super(e,t,r),this.key=$.fromName(r.referenceValue)}matches(e){let t=$.comparator(e.key,this.key);return this.matchesComparison(t)}},ul=class extends ye{constructor(e,t){super(e,"in",t),this.keys=sg("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},ll=class extends ye{constructor(e,t){super(e,"not-in",t),this.keys=sg("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function sg(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>$.fromName(r.referenceValue))}var hl=class extends ye{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return ph(t)&&Mi(t.arrayValue,this.value)}},dl=class extends ye{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Mi(this.value.arrayValue,t)}},fl=class extends ye{constructor(e,t){super(e,"not-in",t)}matches(e){if(Mi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Mi(this.value.arrayValue,t)}},pl=class extends ye{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!ph(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Mi(this.value.arrayValue,r))}};var ml=class{constructor(e,t=null,r=[],i=[],s=null,a=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=u,this.ue=null}};function Lm(n,e=null,t=[],r=[],i=null,s=null,a=null){return new ml(n,e,t,r,i,s,a)}function mh(n){let e=ne(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>al(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),dh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ur(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ur(r)).join(",")),e.ue=t}return e.ue}function gh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!uA(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!rg(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Mm(n.startAt,e.startAt)&&Mm(n.endAt,e.endAt)}var fr=class{constructor(e,t=null,r=[],i=[],s=null,a="F",u=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=u,this.endAt=h,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function hA(n,e,t,r,i,s,a,u){return new fr(n,e,t,r,i,s,a,u)}function dA(n){return new fr(n)}function Vm(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function fA(n){return n.collectionGroup!==null}function Ni(n){let e=ne(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new ke(Ue.comparator);return a.filters.forEach(h=>{h.getFlattenedFilters().forEach(d=>{d.isInequality()&&(u=u.add(d.field))})}),u})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new dr(s,r))}),t.has(Ue.keyField().canonicalString())||e.ce.push(new dr(Ue.keyField(),r))}return e.ce}function wn(n){let e=ne(n);return e.le||(e.le=pA(e,Ni(n))),e.le}function pA(n,e){if(n.limitType==="F")return Lm(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new dr(i.field,s)});let t=n.endAt?new hr(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new hr(n.startAt.position,n.startAt.inclusive):null;return Lm(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function gl(n,e,t){return new fr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function og(n,e){return gh(wn(n),wn(e))&&n.limitType===e.limitType}function ag(n){return`${mh(wn(n))}|lt:${n.limitType}`}function Pi(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>ig(i)).join(", ")}]`),dh(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>ur(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>ur(i)).join(",")),`Target(${r})`}(wn(n))}; limitType=${n.limitType})`}function yh(n,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):$.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(let s of Ni(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(a,u,h){let d=xm(a,u,h);return a.inclusive?d<=0:d<0}(r.startAt,Ni(r),i)||r.endAt&&!function(a,u,h){let d=xm(a,u,h);return a.inclusive?d>=0:d>0}(r.endAt,Ni(r),i))}(n,e)}function mA(n){return(e,t)=>{let r=!1;for(let i of Ni(n)){let s=gA(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function gA(n,e,t){let r=n.field.isKeyField()?$.comparator(e.key,t.key):function(s,a,u){let h=a.data.field(s),d=u.data.field(s);return h!==null&&d!==null?cr(h,d):q()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return q()}}var Kt=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ji(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return Ym(this.inner)}size(){return this.innerSize}};var yA=new je($.comparator);function _o(){return yA}var cg=new je($.comparator);function ao(...n){let e=cg;for(let t of n)e=e.insert(t.key,t);return e}function ug(n){let e=cg;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function In(){return ki()}function lg(){return ki()}function ki(){return new Kt(n=>n.toString(),(n,e)=>n.isEqual(e))}var vA=new je($.comparator),_A=new ke($.comparator);function Ce(...n){let e=_A;for(let t of n)e=e.add(t);return e}var IA=new ke(Z);function wA(){return IA}function hg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xi(e)?"-0":e}}function dg(n){return{integerValue:""+n}}function EA(n,e){return iA(e)?dg(e):hg(n,e)}var pr=class{constructor(){this._=void 0}};function TA(n,e,t){return n instanceof mr?function(i,s){let a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&fh(s)&&(s=Xm(s)),s&&(a.fields.__previous_value__=s),{mapValue:a}}(t,e):n instanceof Sn?pg(n,e):n instanceof Rn?mg(n,e):function(i,s){let a=fg(i,s),u=Fm(a)+Fm(i.Pe);return ol(a)&&ol(i.Pe)?dg(u):hg(i.serializer,u)}(n,e)}function AA(n,e,t){return n instanceof Sn?pg(n,e):n instanceof Rn?mg(n,e):t}function fg(n,e){return n instanceof gr?function(r){return ol(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var mr=class extends pr{},Sn=class extends pr{constructor(e){super(),this.elements=e}};function pg(n,e){let t=gg(e);for(let r of n.elements)t.some(i=>at(i,r))||t.push(r);return{arrayValue:{values:t}}}var Rn=class extends pr{constructor(e){super(),this.elements=e}};function mg(n,e){let t=gg(e);for(let r of n.elements)t=t.filter(i=>!at(i,r));return{arrayValue:{values:t}}}var gr=class extends pr{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function Fm(n){return de(n.integerValue||n.doubleValue)}function gg(n){return ph(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function bA(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Sn&&i instanceof Sn||r instanceof Rn&&i instanceof Rn?sr(r.elements,i.elements,at):r instanceof gr&&i instanceof gr?at(r.Pe,i.Pe):r instanceof mr&&i instanceof mr}(n.transform,e.transform)}var yl=class{constructor(e,t){this.version=e,this.transformResults=t}},En=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function lo(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var yr=class{};function yg(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Io(n.key,En.none()):new Cn(n.key,n.data,En.none());{let t=n.data,r=it.empty(),i=new ke(Ue.comparator);for(let s of e.fields)if(!i.has(s)){let a=t.field(s);a===null&&s.length>1&&(s=s.popLast(),a=t.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new wt(n.key,r,new st(i.toArray()),En.none())}}function SA(n,e,t){n instanceof Cn?function(i,s,a){let u=i.value.clone(),h=jm(i.fieldTransforms,s,a.transformResults);u.setAll(h),s.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(n,e,t):n instanceof wt?function(i,s,a){if(!lo(i.precondition,s))return void s.convertToUnknownDocument(a.version);let u=jm(i.fieldTransforms,s,a.transformResults),h=s.data;h.setAll(vg(i)),h.setAll(u),s.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(n,e,t):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,t)}function Oi(n,e,t,r){return n instanceof Cn?function(s,a,u,h){if(!lo(s.precondition,a))return u;let d=s.value.clone(),p=$m(s.fieldTransforms,h,a);return d.setAll(p),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(n,e,t,r):n instanceof wt?function(s,a,u,h){if(!lo(s.precondition,a))return u;let d=$m(s.fieldTransforms,h,a),p=a.data;return p.setAll(vg(s)),p.setAll(d),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),u===null?null:u.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(w=>w.field))}(n,e,t,r):function(s,a,u){return lo(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u}(n,e,t)}function RA(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=fg(r.transform,i||null);s!=null&&(t===null&&(t=it.empty()),t.set(r.field,s))}return t||null}function Um(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&sr(r,i,(s,a)=>bA(s,a))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Cn=class extends yr{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},wt=class extends yr{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function vg(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function jm(n,e,t){let r=new Map;ve(n.length===t.length);for(let i=0;i<t.length;i++){let s=n[i],a=s.transform,u=e.data.field(s.field);r.set(s.field,AA(a,u,t[i]))}return r}function $m(n,e,t){let r=new Map;for(let i of n){let s=i.transform,a=t.data.field(i.field);r.set(i.field,TA(s,a,e))}return r}var Io=class extends yr{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},vl=class extends yr{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var _l=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&SA(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Oi(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Oi(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=lg();return this.mutations.forEach(i=>{let s=e.get(i.key),a=s.overlayedDocument,u=this.applyToLocalView(a,s.mutatedFields);u=t.has(i.key)?null:u;let h=yg(a,u);h!==null&&r.set(i.key,h),a.isValidDocument()||a.convertToNoDocument(se.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ce())}isEqual(e){return this.batchId===e.batchId&&sr(this.mutations,e.mutations,(t,r)=>Um(t,r))&&sr(this.baseMutations,e.baseMutations,(t,r)=>Um(t,r))}},Il=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ve(e.mutations.length===r.length);let i=function(){return vA}(),s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new n(e,t,r,i)}};var wl=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var oe,z;function CA(n){switch(n){default:return q();case C.CANCELLED:case C.UNKNOWN:case C.DEADLINE_EXCEEDED:case C.RESOURCE_EXHAUSTED:case C.INTERNAL:case C.UNAVAILABLE:case C.UNAUTHENTICATED:return!1;case C.INVALID_ARGUMENT:case C.NOT_FOUND:case C.ALREADY_EXISTS:case C.PERMISSION_DENIED:case C.FAILED_PRECONDITION:case C.ABORTED:case C.OUT_OF_RANGE:case C.UNIMPLEMENTED:case C.DATA_LOSS:return!0}}function PA(n){if(n===void 0)return An("GRPC error has no .code"),C.UNKNOWN;switch(n){case oe.OK:return C.OK;case oe.CANCELLED:return C.CANCELLED;case oe.UNKNOWN:return C.UNKNOWN;case oe.DEADLINE_EXCEEDED:return C.DEADLINE_EXCEEDED;case oe.RESOURCE_EXHAUSTED:return C.RESOURCE_EXHAUSTED;case oe.INTERNAL:return C.INTERNAL;case oe.UNAVAILABLE:return C.UNAVAILABLE;case oe.UNAUTHENTICATED:return C.UNAUTHENTICATED;case oe.INVALID_ARGUMENT:return C.INVALID_ARGUMENT;case oe.NOT_FOUND:return C.NOT_FOUND;case oe.ALREADY_EXISTS:return C.ALREADY_EXISTS;case oe.PERMISSION_DENIED:return C.PERMISSION_DENIED;case oe.FAILED_PRECONDITION:return C.FAILED_PRECONDITION;case oe.ABORTED:return C.ABORTED;case oe.OUT_OF_RANGE:return C.OUT_OF_RANGE;case oe.UNIMPLEMENTED:return C.UNIMPLEMENTED;case oe.DATA_LOSS:return C.DATA_LOSS;default:return q()}}(z=oe||(oe={}))[z.OK=0]="OK",z[z.CANCELLED=1]="CANCELLED",z[z.UNKNOWN=2]="UNKNOWN",z[z.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",z[z.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",z[z.NOT_FOUND=5]="NOT_FOUND",z[z.ALREADY_EXISTS=6]="ALREADY_EXISTS",z[z.PERMISSION_DENIED=7]="PERMISSION_DENIED",z[z.UNAUTHENTICATED=16]="UNAUTHENTICATED",z[z.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",z[z.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",z[z.ABORTED=10]="ABORTED",z[z.OUT_OF_RANGE=11]="OUT_OF_RANGE",z[z.UNIMPLEMENTED=12]="UNIMPLEMENTED",z[z.INTERNAL=13]="INTERNAL",z[z.UNAVAILABLE=14]="UNAVAILABLE",z[z.DATA_LOSS=15]="DATA_LOSS";var G0=new Vu([4294967295,4294967295],0);var El=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Tl(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function DA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function NA(n,e){return Tl(n,e.toTimestamp())}function ir(n){return ve(!!n),se.fromTimestamp(function(t){let r=Gt(t);return new Pe(r.seconds,r.nanos)}(n))}function _g(n,e){return Al(n,e).canonicalString()}function Al(n,e){let t=function(i){return new ge(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function kA(n){let e=ge.fromString(n);return ve(jA(e)),e}function bl(n,e){return _g(n.databaseId,e.path)}function OA(n){let e=kA(n);return e.length===4?ge.emptyPath():MA(e)}function xA(n){return new ge(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function MA(n){return ve(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function Bm(n,e,t){return{name:bl(n,e),fields:t.value.mapValue.fields}}function LA(n,e){let t;if(e instanceof Cn)t={update:Bm(n,e.key,e.value)};else if(e instanceof Io)t={delete:bl(n,e.key)};else if(e instanceof wt)t={update:Bm(n,e.key,e.data),updateMask:UA(e.fieldMask)};else{if(!(e instanceof vl))return q();t={verify:bl(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,a){let u=a.transform;if(u instanceof mr)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Sn)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Rn)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof gr)return{fieldPath:a.field.canonicalString(),increment:u.Pe};throw q()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:NA(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:q()}(n,e.precondition)),t}function VA(n,e){return n&&n.length>0?(ve(e!==void 0),n.map(t=>function(i,s){let a=i.updateTime?ir(i.updateTime):ir(s);return a.isEqual(se.min())&&(a=ir(s)),new yl(a,i.transformResults||[])}(t,e))):[]}function FA(n){let e=OA(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){ve(r===1);let p=t.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let s=[];t.where&&(s=function(w){let b=Ig(w);return b instanceof Wt&&ng(b)?b.getFilters():[b]}(t.where));let a=[];t.orderBy&&(a=function(w){return w.map(b=>function(N){return new dr(nr(N.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(b))}(t.orderBy));let u=null;t.limit&&(u=function(w){let b;return b=typeof w=="object"?w.value:w,dh(b)?null:b}(t.limit));let h=null;t.startAt&&(h=function(w){let b=!!w.before,R=w.values||[];return new hr(R,b)}(t.startAt));let d=null;return t.endAt&&(d=function(w){let b=!w.before,R=w.values||[];return new hr(R,b)}(t.endAt)),hA(e,i,a,s,u,"F",h,d)}function Ig(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=nr(t.unaryFilter.field);return ye.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=nr(t.unaryFilter.field);return ye.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=nr(t.unaryFilter.field);return ye.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let a=nr(t.unaryFilter.field);return ye.create(a,"!=",{nullValue:"NULL_VALUE"});default:return q()}}(n):n.fieldFilter!==void 0?function(t){return ye.create(nr(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return q()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Wt.create(t.compositeFilter.filters.map(r=>Ig(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return q()}}(t.compositeFilter.op))}(n):q()}function nr(n){return Ue.fromServerFormat(n.fieldPath)}function UA(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function jA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Sl=class{constructor(e){this.ct=e}};function $A(n){let e=FA({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?gl(e,e.limit,"L"):e}var wo=class{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(de(e.integerValue));else if("doubleValue"in e){let r=de(e.doubleValue);isNaN(r)?this.Et(t,13):(this.Et(t,15),xi(r)?t.dt(0):t.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(t,20),typeof r=="string"&&(r=Gt(r)),t.At(`${r.seconds||""}`),t.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(or(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Et(t,45),t.dt(r.latitude||0),t.dt(r.longitude||0)}else"mapValue"in e?Zm(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):q()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){let r=e.fields||{};this.Et(t,55);for(let i of Object.keys(r))this.Rt(i,t),this.It(r[i],t)}wt(e,t){let r=e.values||[];this.Et(t,50);for(let i of r)this.It(i,t)}gt(e,t){this.Et(t,37),$.fromName(e).path.forEach(r=>{this.Et(t,60),this.St(r,t)})}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}};wo.bt=new wo;var Rl=class{constructor(){this._n=new Cl}addToCollectionParentIndex(e,t){return this._n.add(t),P.resolve()}getCollectionParents(e,t){return P.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return P.resolve()}deleteFieldIndex(e,t){return P.resolve()}deleteAllFieldIndexes(e){return P.resolve()}createTargetIndexes(e,t){return P.resolve()}getDocumentsMatchingTarget(e,t){return P.resolve(null)}getIndexType(e,t){return P.resolve(0)}getFieldIndexes(e,t){return P.resolve([])}getNextCollectionGroupToUpdate(e){return P.resolve(null)}getMinOffset(e,t){return P.resolve(bn.min())}getMinOffsetFromCollectionGroup(e,t){return P.resolve(bn.min())}updateCollectionGroup(e,t,r){return P.resolve()}updateIndexEntries(e,t){return P.resolve()}},Cl=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new ke(ge.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ke(ge.comparator)).toArray()}};var W0=new Uint8Array(0);var rt=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};rt.DEFAULT_COLLECTION_PERCENTILE=10,rt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,rt.DEFAULT=new rt(41943040,rt.DEFAULT_COLLECTION_PERCENTILE,rt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),rt.DISABLED=new rt(-1,0,0);var Li=class n{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new n(0)}static Ln(){return new n(-1)}};var Pl=class{constructor(){this.changes=new Kt(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,lr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?P.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Dl=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Nl=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Oi(r.mutation,i,st.empty(),Pe.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ce()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ce()){let i=In();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let a=ao();return s.forEach((u,h)=>{a=a.insert(u,h.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){let r=In();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ce()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,u)=>{t.set(a,u)})})}computeViews(e,t,r,i){let s=_o(),a=ki(),u=function(){return ki()}();return t.forEach((h,d)=>{let p=r.get(d.key);i.has(d.key)&&(p===void 0||p.mutation instanceof wt)?s=s.insert(d.key,d):p!==void 0?(a.set(d.key,p.mutation.getFieldMask()),Oi(p.mutation,d,p.mutation.getFieldMask(),Pe.now())):a.set(d.key,st.empty())}),this.recalculateAndSaveOverlays(e,s).next(h=>(h.forEach((d,p)=>a.set(d,p)),t.forEach((d,p)=>{var w;return u.set(d,new Dl(p,(w=a.get(d))!==null&&w!==void 0?w:null))}),u))}recalculateAndSaveOverlays(e,t){let r=ki(),i=new je((a,u)=>a-u),s=Ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(let u of a)u.keys().forEach(h=>{let d=t.get(h);if(d===null)return;let p=r.get(h)||st.empty();p=u.applyToLocalView(d,p),r.set(h,p);let w=(i.get(u.batchId)||Ce()).add(h);i=i.insert(u.batchId,w)})}).next(()=>{let a=[],u=i.getReverseIterator();for(;u.hasNext();){let h=u.getNext(),d=h.key,p=h.value,w=lg();p.forEach(b=>{if(!s.has(b)){let R=yg(t.get(b),r.get(b));R!==null&&w.set(b,R),s=s.add(b)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,w))}return P.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(a){return $.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):fA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):P.resolve(In()),u=-1,h=s;return a.next(d=>P.forEach(d,(p,w)=>(u<w.largestBatchId&&(u=w.largestBatchId),s.get(p)?P.resolve():this.remoteDocumentCache.getEntry(e,p).next(b=>{h=h.insert(p,b)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,h,d,Ce())).next(p=>({batchId:u,changes:ug(p)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new $(t)).next(r=>{let i=ao();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,a=ao();return this.indexManager.getCollectionParents(e,s).next(u=>P.forEach(u,h=>{let d=function(w,b){return new fr(b,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(t,h.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(p=>{p.forEach((w,b)=>{a=a.insert(w,b)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(a=>{s.forEach((h,d)=>{let p=d.getKey();a.get(p)===null&&(a=a.insert(p,lr.newInvalidDocument(p)))});let u=ao();return a.forEach((h,d)=>{let p=s.get(h);p!==void 0&&Oi(p.mutation,d,st.empty(),Pe.now()),yh(t,d)&&(u=u.insert(h,d))}),u})}};var kl=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return P.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:ir(i.createTime)}}(t)),P.resolve()}getNamedQuery(e,t){return P.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(i){return{name:i.name,query:$A(i.bundledQuery),readTime:ir(i.readTime)}}(t)),P.resolve()}};var Ol=class{constructor(){this.overlays=new je($.comparator),this.hr=new Map}getOverlay(e,t){return P.resolve(this.overlays.get(t))}getOverlays(e,t){let r=In();return P.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),P.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),P.resolve()}getOverlaysForCollection(e,t,r){let i=In(),s=t.length+1,a=new $(t.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){let h=u.getNext().value,d=h.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&h.largestBatchId>r&&i.set(h.getKey(),h)}return P.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new je((d,p)=>d-p),a=this.overlays.getIterator();for(;a.hasNext();){let d=a.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let p=s.get(d.largestBatchId);p===null&&(p=In(),s=s.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}let u=In(),h=s.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((d,p)=>u.set(d,p)),!(u.size()>=i)););return P.resolve(u)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let a=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new wl(t,r));let s=this.hr.get(t);s===void 0&&(s=Ce(),this.hr.set(t,s)),this.hr.set(t,s.add(r.key))}};var Vi=class{constructor(){this.Pr=new ke(ae.Ir),this.Tr=new ke(ae.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){let r=new ae(e,t);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ar(new ae(e,t))}Rr(e,t){e.forEach(r=>this.removeReference(r,t))}Vr(e){let t=new $(new ge([])),r=new ae(t,e),i=new ae(t,e+1),s=[];return this.Tr.forEachInRange([r,i],a=>{this.Ar(a),s.push(a.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let t=new $(new ge([])),r=new ae(t,e),i=new ae(t,e+1),s=Ce();return this.Tr.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){let t=new ae(e,0),r=this.Pr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},ae=class{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return $.comparator(e.key,t.key)||Z(e.pr,t.pr)}static Er(e,t){return Z(e.pr,t.pr)||$.comparator(e.key,t.key)}};var xl=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new ke(ae.Ir)}checkEmpty(e){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new _l(s,t,r,i);this.mutationQueue.push(a);for(let u of i)this.wr=this.wr.add(new ae(u.key,s)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return P.resolve(a)}lookupMutationBatch(e,t){return P.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.br(r),s=i<0?0:i;return P.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new ae(t,0),i=new ae(t,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],a=>{let u=this.Sr(a.pr);s.push(u)}),P.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ke(Z);return t.forEach(i=>{let s=new ae(i,0),a=new ae(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,a],u=>{r=r.add(u.pr)})}),P.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;$.isDocumentKey(s)||(s=s.child(""));let a=new ae(new $(s),0),u=new ke(Z);return this.wr.forEachWhile(h=>{let d=h.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(u=u.add(h.pr)),!0)},a),P.resolve(this.Dr(u))}Dr(e){let t=[];return e.forEach(r=>{let i=this.Sr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ve(this.Cr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return P.forEach(t.mutations,i=>{let s=new ae(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,t){let r=new ae(t,0),i=this.wr.firstAfterOrEqual(r);return P.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,P.resolve()}Cr(e,t){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Ml=class{constructor(e){this.vr=e,this.docs=function(){return new je($.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,a=this.vr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return P.resolve(r?r.document.mutableCopy():lr.newInvalidDocument(t))}getEntries(e,t){let r=_o();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():lr.newInvalidDocument(i))}),P.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=_o(),a=t.path,u=new $(a.child("")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){let{key:d,value:{document:p}}=h.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||eA(ZT(p),r)<=0||(i.has(p.key)||yh(t,p))&&(s=s.insert(p.key,p.mutableCopy()))}return P.resolve(s)}getAllFromCollectionGroup(e,t,r,i){q()}Fr(e,t){return P.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Ll(this)}getSize(e){return P.resolve(this.size)}},Ll=class extends Pl{constructor(e){super(),this.ar=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),P.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}};var Vl=class{constructor(e){this.persistence=e,this.Mr=new Kt(t=>mh(t),gh),this.lastRemoteSnapshotVersion=se.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Vi,this.targetCount=0,this.Lr=Li.Nn()}forEachTarget(e,t){return this.Mr.forEach((r,i)=>t(i)),P.resolve()}getLastRemoteSnapshotVersion(e){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return P.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Or&&(this.Or=t),P.resolve()}qn(e){this.Mr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.Lr=new Li(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,P.resolve()}updateTargetData(e,t){return this.qn(t),P.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,P.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.Mr.forEach((a,u)=>{u.sequenceNumber<=t&&r.get(u.targetId)===null&&(this.Mr.delete(a),s.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)}),P.waitFor(s).next(()=>i)}getTargetCount(e){return P.resolve(this.targetCount)}getTargetData(e,t){let r=this.Mr.get(t)||null;return P.resolve(r)}addMatchingKeys(e,t,r){return this.Nr.dr(t,r),P.resolve()}removeMatchingKeys(e,t,r){this.Nr.Rr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),P.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),P.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Nr.gr(t);return P.resolve(r)}containsKey(e,t){return P.resolve(this.Nr.containsKey(t))}};var Fl=class{constructor(e,t){this.Br={},this.overlays={},this.kr=new rA(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Vl(this),this.indexManager=new Rl,this.remoteDocumentCache=function(i){return new Ml(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new Sl(t),this.$r=new kl(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Ol,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Br[e.toKey()];return r||(r=new xl(t,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,r){O("MemoryPersistence","Starting transaction:",e);let i=new Ul(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,t){return P.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,t)))}},Ul=class extends tl{constructor(e){super(),this.currentSequenceNumber=e}},jl=class n{constructor(e){this.persistence=e,this.zr=new Vi,this.jr=null}static Hr(e){return new n(e)}get Jr(){if(this.jr)return this.jr;throw q()}addReference(e,t,r){return this.zr.addReference(r,t),this.Jr.delete(r.toString()),P.resolve()}removeReference(e,t,r){return this.zr.removeReference(r,t),this.Jr.add(r.toString()),P.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),P.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach(i=>this.Jr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ur(){this.jr=new Set}Wr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.Jr,r=>{let i=$.fromPath(r);return this.Yr(e,i).next(s=>{s||t.removeEntry(i,se.min())})}).next(()=>(this.jr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Yr(e,t).next(r=>{r?this.Jr.delete(t.toString()):this.Jr.add(t.toString())})}Kr(e){return 0}Yr(e,t){return P.or([()=>P.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}};var $l=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.qi=r,this.Qi=i}static Ki(e,t){let r=Ce(),i=Ce();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var Bl=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var ql=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return pp()?8:nA(le())>0?6:4}()}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.ji(e,t).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.Hi(e,t,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;let a=new Bl;return this.Ji(e,t,a).next(u=>{if(s.result=u,this.Ui)return this.Yi(e,t,a,u.size)})}).next(()=>s.result)}Yi(e,t,r,i){return r.documentReadCount<this.Wi?(Ci()<=B.DEBUG&&O("QueryEngine","SDK will not create cache indexes for query:",Pi(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),P.resolve()):(Ci()<=B.DEBUG&&O("QueryEngine","Query:",Pi(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Ci()<=B.DEBUG&&O("QueryEngine","The SDK decides to create cache indexes for query:",Pi(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,wn(t))):P.resolve())}ji(e,t){if(Vm(t))return P.resolve(null);let r=wn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=gl(t,null,"F"),r=wn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let a=Ce(...s);return this.zi.getDocuments(e,a).next(u=>this.indexManager.getMinOffset(e,r).next(h=>{let d=this.Zi(t,u);return this.Xi(t,d,a,h.readTime)?this.ji(e,gl(t,null,"F")):this.es(e,d,t,h)}))})))}Hi(e,t,r,i){return Vm(t)||i.isEqual(se.min())?P.resolve(null):this.zi.getDocuments(e,r).next(s=>{let a=this.Zi(t,s);return this.Xi(t,a,r,i)?P.resolve(null):(Ci()<=B.DEBUG&&O("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Pi(t)),this.es(e,a,t,XT(i,-1)).next(u=>u))})}Zi(e,t){let r=new ke(mA(e));return t.forEach((i,s)=>{yh(e,s)&&(r=r.add(s))}),r}Xi(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,t,r){return Ci()<=B.DEBUG&&O("QueryEngine","Using full collection scan to execute query:",Pi(t)),this.zi.getDocumentsMatchingQuery(e,t,bn.min(),r)}es(e,t,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(a=>{s=s.insert(a.key,a)}),s))}};var zl=class{constructor(e,t,r,i){this.persistence=e,this.ts=t,this.serializer=i,this.ns=new je(Z),this.rs=new Kt(s=>mh(s),gh),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Nl(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ns))}};function BA(n,e,t,r){return new zl(n,e,t,r)}function wg(n,e){return v(this,null,function*(){let t=ne(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t._s(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let a=[],u=[],h=Ce();for(let d of i){a.push(d.batchId);for(let p of d.mutations)h=h.add(p.key)}for(let d of s){u.push(d.batchId);for(let p of d.mutations)h=h.add(p.key)}return t.localDocuments.getDocuments(r,h).next(d=>({us:d,removedBatchIds:a,addedBatchIds:u}))})})})}function qA(n,e){let t=ne(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.os.newChangeBuffer({trackRemovals:!0});return function(u,h,d,p){let w=d.batch,b=w.keys(),R=P.resolve();return b.forEach(N=>{R=R.next(()=>p.getEntry(h,N)).next(V=>{let k=d.docVersions.get(N);ve(k!==null),V.version.compareTo(k)<0&&(w.applyToRemoteDocument(V,d),V.isValidDocument()&&(V.setReadTime(d.commitVersion),p.addEntry(V)))})}),R.next(()=>u.mutationQueue.removeMutationBatch(h,w))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let h=Ce();for(let d=0;d<u.mutationResults.length;++d)u.mutationResults[d].transformResults.length>0&&(h=h.add(u.batch.mutations[d].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function zA(n){let e=ne(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Qr.getLastRemoteSnapshotVersion(t))}function GA(n,e){let t=ne(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}var Eo=class{constructor(){this.activeTargetIds=wA()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Gl=class{constructor(){this.no=new Eo,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,r){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Eo,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Wl=class{io(e){}shutdown(){}};var To=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){O("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){O("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var co=null;function zu(){return co===null?co=function(){return 268435456+Math.round(2147483648*Math.random())}():co++,"0x"+co.toString(16)}var WA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Kl=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}};var Re="WebChannelConnection",Hl=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+t.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(t,r,i,s,a){let u=zu(),h=this.vo(t,r.toUriEncodedString());O("RestConnection",`Sending RPC '${t}' ${u}:`,h,i);let d={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(d,s,a),this.Mo(t,h,d,i).then(p=>(O("RestConnection",`Received RPC '${t}' ${u}: `,p),p),p=>{throw ho("RestConnection",`RPC '${t}' ${u} failed with error: `,p,"url: ",h,"request:",i),p})}xo(t,r,i,s,a,u){return this.Co(t,r,i,s,a)}Fo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+vr}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,a)=>t[a]=s),i&&i.headers.forEach((s,a)=>t[a]=s)}vo(t,r){let i=WA[t];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,t,r,i){let s=zu();return new Promise((a,u)=>{let h=new Fu;h.setWithCredentials(!0),h.listenOnce(ju.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Ri.NO_ERROR:let p=h.getResponseJson();O(Re,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case Ri.TIMEOUT:O(Re,`RPC '${e}' ${s} timed out`),u(new L(C.DEADLINE_EXCEEDED,"Request time out"));break;case Ri.HTTP_ERROR:let w=h.getStatus();if(O(Re,`RPC '${e}' ${s} failed with status:`,w,"response text:",h.getResponseText()),w>0){let b=h.getResponseJson();Array.isArray(b)&&(b=b[0]);let R=b?.error;if(R&&R.status&&R.message){let N=function(k){let G=k.toLowerCase().replace(/_/g,"-");return Object.values(C).indexOf(G)>=0?G:C.UNKNOWN}(R.status);u(new L(N,R.message))}else u(new L(C.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new L(C.UNAVAILABLE,"Connection failed."));break;default:q()}}finally{O(Re,`RPC '${e}' ${s} completed.`)}});let d=JSON.stringify(i);O(Re,`RPC '${e}' ${s} sending request:`,i),h.send(t,"POST",d,r,15)})}Oo(e,t,r){let i=zu(),s=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=qu(),u=Bu(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(h.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(h.xmlHttpFactory=new Uu({})),this.Fo(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;let p=s.join("");O(Re,`Creating RPC '${e}' stream ${i}: ${p}`,h);let w=a.createWebChannel(p,h),b=!1,R=!1,N=new Kl({lo:k=>{R?O(Re,`Not sending because RPC '${e}' stream ${i} is closed:`,k):(b||(O(Re,`Opening RPC '${e}' stream ${i} transport.`),w.open(),b=!0),O(Re,`RPC '${e}' stream ${i} sending:`,k),w.send(k))},ho:()=>w.close()}),V=(k,G,J)=>{k.listen(G,ee=>{try{J(ee)}catch(ce){setTimeout(()=>{throw ce},0)}})};return V(w,tr.EventType.OPEN,()=>{R||(O(Re,`RPC '${e}' stream ${i} transport opened.`),N.mo())}),V(w,tr.EventType.CLOSE,()=>{R||(R=!0,O(Re,`RPC '${e}' stream ${i} transport closed`),N.po())}),V(w,tr.EventType.ERROR,k=>{R||(R=!0,ho(Re,`RPC '${e}' stream ${i} transport errored:`,k),N.po(new L(C.UNAVAILABLE,"The operation could not be completed")))}),V(w,tr.EventType.MESSAGE,k=>{var G;if(!R){let J=k.data[0];ve(!!J);let ee=J,ce=ee.error||((G=ee[0])===null||G===void 0?void 0:G.error);if(ce){O(Re,`RPC '${e}' stream ${i} received error:`,ce);let Je=ce.status,fe=function(y){let _=oe[y];if(_!==void 0)return PA(_)}(Je),E=ce.message;fe===void 0&&(fe=C.INTERNAL,E="Unknown error status: "+Je+" with message "+ce.message),R=!0,N.po(new L(fe,E)),w.close()}else O(Re,`RPC '${e}' stream ${i} received:`,J),N.yo(J)}}),V(u,$u.STAT_EVENT,k=>{k.stat===so.PROXY?O(Re,`RPC '${e}' stream ${i} detected buffering proxy`):k.stat===so.NOPROXY&&O(Re,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{N.fo()},0),N}};function Gu(){return typeof document<"u"?document:null}function xo(n){return new El(n,!0)}var Ao=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=t,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();let t=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,t-r);i>0&&O("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}};var Ql=class{constructor(e,t,r,i,s,a,u,h){this.oi=e,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=h,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new Ao(e,t)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}stop(){return v(this,null,function*(){this.Zo()&&(yield this.close(0))})}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){return v(this,null,function*(){if(this.Xo())return this.close(0)})}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,t){return v(this,null,function*(){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():t&&t.code===C.RESOURCE_EXHAUSTED?(An(t.toString()),An("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):t&&t.code===C.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Ao(t)})}__(){}auth(){this.state=1;let e=this.a_(this.jo),t=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===t&&this.u_(r,i)},r=>{e(()=>{let i=new L(C.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,t){let r=this.a_(this.jo);this.stream=this.l_(e,t),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(()=>v(this,null,function*(){this.state=0,this.start()}))}c_(e){return O("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return t=>{this.oi.enqueueAndForget(()=>this.jo===e?t():(O("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}};var Jl=class extends Ql{constructor(e,t,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,t){return this.connection.Oo("Write",e,t)}onMessage(e){if(ve(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();let t=VA(e.writeResults,e.commitTime),r=ir(e.commitTime);return this.listener.A_(r,t)}return ve(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){let e={};e.database=xA(this.serializer),this.i_(e)}d_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>LA(this.serializer,r))};this.i_(t)}};var Yl=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new L(C.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,t,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Co(e,Al(t,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===C.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new L(C.UNKNOWN,s.toString())})}xo(e,t,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.xo(e,Al(t,r),i,a,u,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===C.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new L(C.UNKNOWN,a.toString())})}terminate(){this.m_=!0,this.connection.terminate()}},Xl=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(An(t),this.y_=!1):O("OnlineStateTracker",t)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}};var Zl=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(a=>{r.enqueueAndForget(()=>v(this,null,function*(){Bi(this)&&(O("RemoteStore","Restarting streams for network reachability change."),yield function(h){return v(this,null,function*(){let d=ne(h);d.M_.add(4),yield $i(d),d.N_.set("Unknown"),d.M_.delete(4),yield Mo(d)})}(this))}))}),this.N_=new Xl(r,i)}};function Mo(n){return v(this,null,function*(){if(Bi(n))for(let e of n.x_)yield e(!0)})}function $i(n){return v(this,null,function*(){for(let e of n.x_)yield e(!1)})}function Bi(n){return ne(n).M_.size===0}function Eg(n,e,t){return v(this,null,function*(){if(!Oo(e))throw e;n.M_.add(1),yield $i(n),n.N_.set("Offline"),t||(t=()=>zA(n.localStore)),n.asyncQueue.enqueueRetryable(()=>v(this,null,function*(){O("RemoteStore","Retrying IndexedDB access"),yield t(),n.M_.delete(1),yield Mo(n)}))})}function Tg(n,e){return e().catch(t=>Eg(n,t,e))}function Lo(n){return v(this,null,function*(){let e=ne(n),t=Ht(e),r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;KA(e);)try{let i=yield GA(e.localStore,r);if(i===null){e.v_.length===0&&t.n_();break}r=i.batchId,HA(e,i)}catch(i){yield Eg(e,i)}Ag(e)&&bg(e)})}function KA(n){return Bi(n)&&n.v_.length<10}function HA(n,e){n.v_.push(e);let t=Ht(n);t.Xo()&&t.E_&&t.d_(e.mutations)}function Ag(n){return Bi(n)&&!Ht(n).Zo()&&n.v_.length>0}function bg(n){Ht(n).start()}function QA(n){return v(this,null,function*(){Ht(n).V_()})}function JA(n){return v(this,null,function*(){let e=Ht(n);for(let t of n.v_)e.d_(t.mutations)})}function YA(n,e,t){return v(this,null,function*(){let r=n.v_.shift(),i=Il.from(r,e,t);yield Tg(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Lo(n)})}function XA(n,e){return v(this,null,function*(){e&&Ht(n).E_&&(yield function(r,i){return v(this,null,function*(){if(function(a){return CA(a)&&a!==C.ABORTED}(i.code)){let s=r.v_.shift();Ht(r).t_(),yield Tg(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield Lo(r)}})}(n,e)),Ag(n)&&bg(n)})}function qm(n,e){return v(this,null,function*(){let t=ne(n);t.asyncQueue.verifyOperationInProgress(),O("RemoteStore","RemoteStore received new credentials");let r=Bi(t);t.M_.add(3),yield $i(t),r&&t.N_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.M_.delete(3),yield Mo(t)})}function ZA(n,e){return v(this,null,function*(){let t=ne(n);e?(t.M_.delete(2),yield Mo(t)):e||(t.M_.add(2),yield $i(t),t.N_.set("Unknown"))})}function Ht(n){return n.k_||(n.k_=function(t,r,i){let s=ne(t);return s.f_(),new Jl(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Po:()=>Promise.resolve(),To:QA.bind(null,n),Ao:XA.bind(null,n),R_:JA.bind(null,n),A_:YA.bind(null,n)}),n.x_.push(e=>v(this,null,function*(){e?(n.k_.t_(),yield Lo(n)):(yield n.k_.stop(),n.v_.length>0&&(O("RemoteStore",`Stopping write stream with ${n.v_.length} pending writes`),n.v_=[]))}))),n.k_}var eh=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new _t,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let a=Date.now()+r,u=new n(e,t,a,i,s);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new L(C.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Sg(n,e){if(An("AsyncQueue",`${e}: ${n}`),Oo(n))return new L(C.UNAVAILABLE,`${e}: ${n}`);throw n}var th=class{constructor(){this.queries=new Kt(e=>ag(e),og),this.onlineState="Unknown",this.z_=new Set}};function eb(n){n.z_.forEach(e=>{e.next()})}var zm,Gm;(Gm=zm||(zm={})).J_="default",Gm.Cache="cache";var nh=class{constructor(e,t,r,i,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Sa={},this.ba=new Kt(u=>ag(u),og),this.Da=new Map,this.Ca=new Set,this.va=new je($.comparator),this.Fa=new Map,this.Ma=new Vi,this.xa={},this.Oa=new Map,this.Na=Li.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}};function tb(n,e,t){return v(this,null,function*(){let r=sb(n);try{let i=yield function(a,u){let h=ne(a),d=Pe.now(),p=u.reduce((R,N)=>R.add(N.key),Ce()),w,b;return h.persistence.runTransaction("Locally write mutations","readwrite",R=>{let N=_o(),V=Ce();return h.os.getEntries(R,p).next(k=>{N=k,N.forEach((G,J)=>{J.isValidDocument()||(V=V.add(G))})}).next(()=>h.localDocuments.getOverlayedDocuments(R,N)).next(k=>{w=k;let G=[];for(let J of u){let ee=RA(J,w.get(J.key).overlayedDocument);ee!=null&&G.push(new wt(J.key,ee,eg(ee.value.mapValue),En.exists(!0)))}return h.mutationQueue.addMutationBatch(R,d,G,u)}).next(k=>{b=k;let G=k.applyToLocalDocumentSet(w,V);return h.documentOverlayCache.saveOverlays(R,k.batchId,G)})}).then(()=>({batchId:b.batchId,changes:ug(w)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,u,h){let d=a.xa[a.currentUser.toKey()];d||(d=new je(Z)),d=d.insert(u,h),a.xa[a.currentUser.toKey()]=d}(r,i.batchId,t),yield Vo(r,i.changes),yield Lo(r.remoteStore)}catch(i){let s=Sg(i,"Failed to persist write");t.reject(s)}})}function Wm(n,e,t){let r=ne(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.ba.forEach((s,a)=>{let u=a.view.j_(e);u.snapshot&&i.push(u.snapshot)}),function(a,u){let h=ne(a);h.onlineState=u;let d=!1;h.queries.forEach((p,w)=>{for(let b of w.U_)b.j_(u)&&(d=!0)}),d&&eb(h)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function nb(n,e){return v(this,null,function*(){let t=ne(n),r=e.batch.batchId;try{let i=yield qA(t.localStore,e);Cg(t,r,null),Rg(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Vo(t,i)}catch(i){yield Jm(i)}})}function rb(n,e,t){return v(this,null,function*(){let r=ne(n);try{let i=yield function(a,u){let h=ne(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let p;return h.mutationQueue.lookupMutationBatch(d,u).next(w=>(ve(w!==null),p=w.keys(),h.mutationQueue.removeMutationBatch(d,w))).next(()=>h.mutationQueue.performConsistencyCheck(d)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(d,p,u)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p)).next(()=>h.localDocuments.getDocuments(d,p))})}(r.localStore,e);Cg(r,e,t),Rg(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Vo(r,i)}catch(i){yield Jm(i)}})}function Rg(n,e){(n.Oa.get(e)||[]).forEach(t=>{t.resolve()}),n.Oa.delete(e)}function Cg(n,e,t){let r=ne(n),i=r.xa[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function Vo(n,e,t){return v(this,null,function*(){let r=ne(n),i=[],s=[],a=[];r.ba.isEmpty()||(r.ba.forEach((u,h)=>{a.push(r.Ba(h,e,t).then(d=>{if((d||t)&&r.isPrimaryClient){let p=d&&!d.fromCache;r.sharedClientState.updateQueryState(h.targetId,p?"current":"not-current")}if(d){i.push(d);let p=$l.Ki(h.targetId,d);s.push(p)}}))}),yield Promise.all(a),r.Sa.h_(i),yield function(h,d){return v(this,null,function*(){let p=ne(h);try{yield p.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>P.forEach(d,b=>P.forEach(b.qi,R=>p.persistence.referenceDelegate.addReference(w,b.targetId,R)).next(()=>P.forEach(b.Qi,R=>p.persistence.referenceDelegate.removeReference(w,b.targetId,R)))))}catch(w){if(!Oo(w))throw w;O("LocalStore","Failed to update sequence numbers: "+w)}for(let w of d){let b=w.targetId;if(!w.fromCache){let R=p.ns.get(b),N=R.snapshotVersion,V=R.withLastLimboFreeSnapshotVersion(N);p.ns=p.ns.insert(b,V)}}})}(r.localStore,s))})}function ib(n,e){return v(this,null,function*(){let t=ne(n);if(!t.currentUser.isEqual(e)){O("SyncEngine","User change. New user:",e.toKey());let r=yield wg(t.localStore,e);t.currentUser=e,function(s,a){s.Oa.forEach(u=>{u.forEach(h=>{h.reject(new L(C.CANCELLED,a))})}),s.Oa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Vo(t,r.us)}})}function sb(n){let e=ne(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=nb.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=rb.bind(null,e),e}var bo=class{constructor(){this.synchronizeTabs=!1}initialize(e){return v(this,null,function*(){this.serializer=xo(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return BA(this.persistence,new ql,e.initialUser,this.serializer)}createPersistence(e){return new Fl(jl.Hr,this.serializer)}createSharedClientState(e){return new Gl}terminate(){return v(this,null,function*(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var rh=class{initialize(e,t){return v(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Wm(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=ib.bind(null,this.syncEngine),yield ZA(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new th}()}createDatastore(e){let t=xo(e.databaseInfo.databaseId),r=function(s){return new Hl(s)}(e.databaseInfo);return function(s,a,u,h){return new Yl(s,a,u,h)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,s,a,u){return new Zl(r,i,s,a,u)}(this.localStore,this.datastore,e.asyncQueue,t=>Wm(this.syncEngine,t,0),function(){return To.D()?new To:new Wl}())}createSyncEngine(e,t){return function(i,s,a,u,h,d,p){let w=new nh(i,s,a,u,h,d);return p&&(w.La=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return v(this,null,function*(){var e;yield function(r){return v(this,null,function*(){let i=ne(r);O("RemoteStore","RemoteStore shutting down."),i.M_.add(5),yield $i(i),i.O_.shutdown(),i.N_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};var ih=class{constructor(e,t,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=me.UNAUTHENTICATED,this.clientId=po.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>v(this,null,function*(){O("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(O("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new L(C.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new _t;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>v(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Sg(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Wu(n,e){return v(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),O("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>v(this,null,function*(){r.isEqual(i)||(yield wg(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function Km(n,e){return v(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield ab(n);O("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>qm(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>qm(e.remoteStore,i)),n._onlineComponents=e})}function ob(n){return n.name==="FirebaseError"?n.code===C.FAILED_PRECONDITION||n.code===C.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}function ab(n){return v(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){O("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Wu(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!ob(t))throw t;ho("Error using user provided cache. Falling back to memory cache: "+t),yield Wu(n,new bo)}}else O("FirestoreClient","Using default OfflineComponentProvider"),yield Wu(n,new bo);return n._offlineComponents})}function cb(n){return v(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(O("FirestoreClient","Using user provided OnlineComponentProvider"),yield Km(n,n._uninitializedComponentsProvider._online)):(O("FirestoreClient","Using default OnlineComponentProvider"),yield Km(n,new rh))),n._onlineComponents})}function ub(n){return cb(n).then(e=>e.syncEngine)}function Pg(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var Hm=new Map;function lb(n,e,t){if(!t)throw new L(C.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function hb(n,e,t,r){if(e===!0&&r===!0)throw new L(C.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Qm(n){if(!$.isDocumentKey(n))throw new L(C.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function vh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":q()}function sh(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new L(C.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=vh(n);throw new L(C.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var So=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new L(C.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new L(C.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}hb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Pg((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new L(C.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new L(C.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new L(C.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Fi=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new So({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new L(C.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new L(C.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new So(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Ku;switch(r.type){case"firstParty":return new Yu(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new L(C.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=Hm.get(t);r&&(O("ComponentProvider","Removing Datastore"),Hm.delete(t),r.terminate())}(this),Promise.resolve()}};function Dg(n,e,t,r={}){var i;let s=(n=sh(n,Fi))._getSettings(),a=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==a&&ho("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),r.mockUserToken){let u,h;if(typeof r.mockUserToken=="string")u=r.mockUserToken,h=me.MOCK_USER;else{u=up(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new L(C.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new me(d)}n._authCredentials=new Hu(new fo(u,h))}}var oh=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},It=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ui(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Ui=class n extends oh{constructor(e,t,r){super(e,t,dA(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new It(this.firestore,null,new $(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function Ng(n,e,...t){if(n=Fe(n),arguments.length===1&&(e=po.newId()),lb("doc","path",e),n instanceof Fi){let r=ge.fromString(e,...t);return Qm(r),new It(n,null,new $(r))}{if(!(n instanceof It||n instanceof Ui))throw new L(C.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ge.fromString(e,...t));return Qm(r),new It(n.firestore,n instanceof Ui?n.converter:null,new $(r))}}var ah=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new Ao(this,"async_queue_retry"),this.hu=()=>{let t=Gu();t&&O("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Yo.Wo()};let e=Gu();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;let t=Gu();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});let t=new _t;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){return v(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!Oo(e))throw e;O("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}})}Iu(e){let t=this.iu.then(()=>(this.uu=!0,e().catch(r=>{this.au=r,this.uu=!1;let i=function(a){let u=a.message||"";return a.stack&&(u=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),u}(r);throw An("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=t,t}enqueueAfterDelay(e,t,r){this.Pu(),this.lu.indexOf(e)>-1&&(t=0);let i=eh.createAndSchedule(this,e,t,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&q()}verifyOperationInProgress(){}du(){return v(this,null,function*(){let e;do e=this.iu,yield e;while(e!==this.iu)})}Au(e){for(let t of this._u)if(t.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this._u)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){let t=this._u.indexOf(e);this._u.splice(t,1)}};var Ro=class extends Fi{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=function(){return new ah}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Og(this),this._firestoreClient.terminate()}};function kg(n,e){let t=typeof n=="object"?n:Qn(),r=typeof n=="string"?n:e||"(default)",i=mi(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=cp("firestore");s&&Dg(i,...s)}return i}function db(n){return n._firestoreClient||Og(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Og(n){var e,t,r;let i=n._freezeSettings(),s=function(u,h,d,p){return new rl(u,h,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,Pg(p.experimentalLongPollingOptions),p.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._firestoreClient=new ih(n._authCredentials,n._appCheckCredentials,n._queue,s),!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var Co=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(zt.fromBase64String(e))}catch(t){throw new L(C.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(zt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Po=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new L(C.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ue(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Do=class{constructor(e){this._methodName=e}};var No=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new L(C.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new L(C.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Z(this._lat,e._lat)||Z(this._long,e._long)}};var fb=/^__.*__$/,ch=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new wt(e,this.data,this.fieldMask,t,this.fieldTransforms):new Cn(e,this.data,t,this.fieldTransforms)}};function xg(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw q()}}var uh=class n{constructor(e,t,r,i,s,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return ko(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(xg(this.fu)&&fb.test(e))throw this.Du('Document fields cannot begin and end with "__"')}},lh=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||xo(e)}Fu(e,t,r,i=!1){return new uh({fu:e,methodName:t,vu:r,path:Ue.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function pb(n){let e=n._freezeSettings(),t=xo(n._databaseId);return new lh(n._databaseId,!!e.ignoreUndefinedProperties,t)}function mb(n,e,t,r,i,s={}){let a=n.Fu(s.merge||s.mergeFields?2:0,e,t,i);Fg("Data must be an object, but it was:",a,r);let u=Lg(r,a),h,d;if(s.merge)h=new st(a.fieldMask),d=a.fieldTransforms;else if(s.mergeFields){let p=[];for(let w of s.mergeFields){let b=gb(e,w,t);if(!a.contains(b))throw new L(C.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);_b(p,b)||p.push(b)}h=new st(p),d=a.fieldTransforms.filter(w=>h.covers(w.field))}else h=null,d=a.fieldTransforms;return new ch(new it(u),h,d)}function Mg(n,e){if(Vg(n=Fe(n)))return Fg("Unsupported field value:",e,n),Lg(n,e);if(n instanceof Do)return function(r,i){if(!xg(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(r,i){let s=[],a=0;for(let u of r){let h=Mg(u,i.bu(a));h==null&&(h={nullValue:"NULL_VALUE"}),s.push(h),a++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=Fe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return EA(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Pe.fromDate(r);return{timestampValue:Tl(i.serializer,s)}}if(r instanceof Pe){let s=new Pe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Tl(i.serializer,s)}}if(r instanceof No)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Co)return{bytesValue:DA(i.serializer,r._byteString)};if(r instanceof It){let s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Du(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:_g(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${vh(r)}`)}(n,e)}function Lg(n,e){let t={};return Ym(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ji(n,(r,i)=>{let s=Mg(i,e.pu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function Vg(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Pe||n instanceof No||n instanceof Co||n instanceof It||n instanceof Do)}function Fg(n,e,t){if(!Vg(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=vh(t);throw r==="an object"?e.Du(n+" a custom object"):e.Du(n+" "+r)}}function gb(n,e,t){if((e=Fe(e))instanceof Po)return e._internalPath;if(typeof e=="string")return vb(n,e);throw ko("Field path arguments must be of type string or ",n,!1,void 0,t)}var yb=new RegExp("[~\\*/\\[\\]]");function vb(n,e,t){if(e.search(yb)>=0)throw ko(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Po(...e.split("."))._internalPath}catch{throw ko(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ko(n,e,t,r,i){let s=r&&!r.isEmpty(),a=i!==void 0,u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(s||a)&&(h+=" (found",s&&(h+=` in field ${r}`),a&&(h+=` in document ${i}`),h+=")"),new L(C.INVALID_ARGUMENT,u+n+h)}function _b(n,e){return n.some(t=>t.isEqual(e))}function Ib(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}function Ug(n,e,t){n=sh(n,It);let r=sh(n.firestore,Ro),i=Ib(n.converter,e,t);return wb(r,[mb(pb(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,En.none())])}function wb(n,e){return function(r,i){let s=new _t;return r.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return tb(yield ub(r),i,s)})),s.promise}(db(n),e)}(function(e,t=!0){(function(i){vr=i})(Ut),Ft(new Ge("firestore",(r,{instanceIdentifier:i,options:s})=>{let a=r.getProvider("app").getImmediate(),u=new Ro(new Qu(r.getProvider("auth-internal")),new Zu(r.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new L(C.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new il(d.options.projectId,p)}(a,i),a);return s=Object.assign({useFetchStreams:t},s),u._setSettings(s),u},"PUBLIC").setMultipleInstances(!0)),he(Nm,"4.6.3",e),he(Nm,"4.6.3","esm2017")})();var qi=class{constructor(e){return e}},jg="firestore",_h=class{constructor(){return gi(jg)}};var Ih=new pe("angularfire2.firestore-instances");function Eb(n,e){let t=Vs(jg,n,e);return t&&new qi(t)}function Tb(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new qi(r)}}var Ab={provide:_h,deps:[[new Oe,Ih]]},bb={provide:qi,useFactory:Eb,deps:[[new Oe,Ih],pt]},Sb=(()=>{class n{constructor(){he("angularfire",fn.full,"fst")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=dt({type:n});static \u0275inj=ht({providers:[bb,Ab]})}return n})();function gP(n,...e){return{ngModule:Sb,providers:[{provide:Ih,useFactory:Tb(n),multi:!0,deps:[we,Dt,Xn,pn,[new Oe,bi],[new Oe,Yn],...e]}]}}var $g=et(Ng,!0);var Bg=et(kg,!0);var qg=et(Ug,!0);var AP=(()=>{let e=class e{constructor(){this.auth=F(_n),this.utilsSvc=F(ip)}getAuth(){return Si()}sigIn(r){return Rm(Si(),r.email,r.password)}signUp(r){return Sm(Si(),r.email,r.password)}signOut(){Si().signOut(),localStorage.removeItem("use"),this.utilsSvc.routerLink("/auth")}setDocument(r,i){return qg($g(Bg(),r),i)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();export{Db as a,yf as b,eS as c,Qy as d,bv as e,Ds as f,qS as g,cp as h,up as i,Ve as j,Fe as k,Ge as l,Ft as m,mi as n,Ut as o,Qn as p,he as q,fn as r,Vs as s,gi as t,Yn as u,Xn as v,et as w,pt as x,pn as y,xR as z,MR as A,bi as B,C0 as C,Si as D,ip as E,gP as F,Bg as G,AP as H};
