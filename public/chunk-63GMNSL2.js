import{a as D,b as j}from"./chunk-GPYPOCRQ.js";import{d,f as T,g as M,h as g,i as F,l as q,m as O,n as L,t as N,v as R}from"./chunk-G2UKSNZO.js";import{E as k,H as I,f as U}from"./chunk-FERELYLT.js";import"./chunk-WXI33M2S.js";import{Bb as E,Qa as i,Ra as w,Tb as P,cb as c,e as f,ea as v,eb as a,hb as _,ia as x,ib as r,jb as l,kb as u,lb as C,mb as b,pb as h,qb as S,yb as p}from"./chunk-HUW2LGCZ.js";function z(e,n){e&1&&(r(0,"div",13),p(1,"El nombre es requerido"),l())}function B(e,n){e&1&&(r(0,"div",13),p(1,"El nombre debe tener 5 o m\xE1s car\xE1cteres"),l())}function G(e,n){if(e&1&&(C(0,8),c(1,z,2,0,"div",12)(2,B,2,0,"div",12),b()),e&2){let o=S();i(),a("ngIf",o.form.controls.name.errors==null?null:o.form.controls.name.errors.required),i(),a("ngIf",!(o.form.controls.name.errors!=null&&o.form.controls.name.errors.required))}}function V(e,n){e&1&&(r(0,"div",13),p(1,"El correo es requerido"),l())}function A(e,n){e&1&&(r(0,"div",13),p(1,"Ingrese un formato correcto"),l())}function H(e,n){if(e&1&&(C(0,8),c(1,V,2,0,"div",12)(2,A,2,0,"div",12),b()),e&2){let o=S();i(),a("ngIf",o.form.controls.email.errors==null?null:o.form.controls.email.errors.required),i(),a("ngIf",o.form.controls.email.errors==null?null:o.form.controls.email.errors.email)}}function W(e,n){e&1&&(r(0,"div",13),p(1,"La contrase\xF1a es requerida"),l())}function Y(e,n){e&1&&(r(0,"div",13),p(1,"Debe tener 6 car\xE1cteres o m\xE1s"),l())}function $(e,n){if(e&1&&(C(0,8),c(1,W,2,0,"div",12)(2,Y,2,0,"div",12),b()),e&2){let o=S();i(),a("ngIf",o.form.controls.password.errors==null?null:o.form.controls.password.errors.required),i(),a("ngIf",o.form.controls.password.errors==null?null:o.form.controls.password.errors.email)}}var se=(()=>{let n=class n{constructor(s){this.router=s,this.fb=v(q),this.form=this.fb.group({uid:new g(""),email:new g("",[d.required,d.email]),name:new g("",[d.required,d.minLength(5)]),password:new g("",[d.required,d.minLength(6)])}),this.firebaseSvc=v(I),this.utilSvc=v(k)}submit(){return f(this,null,function*(){this.form.valid&&this.firebaseSvc.signUp(this.form.value).then(s=>f(this,null,function*(){let m=s.user.uid;this.form.controls.uid.setValue(m),this.setUserInfo(m),console.log(s)})).catch(s=>{console.log(s)}).finally(()=>{})})}setUserInfo(s){return f(this,null,function*(){if(this.form.valid){let m=`users/${s}`;delete this.form.value.password,this.firebaseSvc.setDocument(m,this.form.value).then(t=>f(this,null,function*(){this.utilSvc.saveInLocalStorage("user",this.form.value),this.utilSvc.routerLink("/main/home"),this.form.reset()})).catch(t=>{console.log(t)}).finally(()=>{})}})}};n.\u0275fac=function(m){return new(m||n)(w(U))},n.\u0275cmp=x({type:n,selectors:[["app-sign-up-patient"]],standalone:!0,features:[E],decls:19,vars:8,consts:[["title","Registrarse","whereToBack","/sign-up/select/",3,"back"],[1,"body"],[1,"bg-goku"],[1,"d-flex-center","widht-100"],[1,"d-flex-center","width-100"],[1,"auth-form",3,"ngSubmit","keypress.enter"],[1,"margin-input"],["label","Nombre","type","name",3,"control"],[1,"validators-container"],["label","Correo","type","email",3,"control"],["label","Contrase\xF1a","type","password",3,"keypress.enter","control"],["mat-flat-button","","color","warn",1,"button-login",3,"disabled"],["class","validators",4,"ngIf"],[1,"validators"]],template:function(m,t){m&1&&(u(0,"app-header",0),r(1,"div",1),u(2,"div",2),r(3,"div",3),u(4,"app-logo"),l(),r(5,"div",4)(6,"form",5),h("ngSubmit",function(){return t.submit()})("keypress.enter",function(){return t.submit()}),r(7,"div",6),u(8,"app-custom-input",7),l(),c(9,G,3,2,"ng-container",8),r(10,"div",6),u(11,"app-custom-input",9),l(),c(12,H,3,2,"ng-container",8),r(13,"div",6)(14,"app-custom-input",10),h("keypress.enter",function(){return t.submit()}),l()(),c(15,$,3,2,"ng-container",8),r(16,"div",3)(17,"button",11),p(18,"REGISTRARSE"),l()()()()()),m&2&&(a("back",!0),i(8),a("control",t.form.controls.name),i(),_(9,t.form.controls.name.errors&&t.form.controls.name.touched?9:-1),i(2),a("control",t.form.controls.email),i(),_(12,t.form.controls.email.errors&&t.form.controls.email.touched?12:-1),i(2),a("control",t.form.controls.password),i(),_(15,t.form.controls.password.errors&&t.form.controls.password.touched?15:-1),i(2),a("disabled",t.form.invalid))},dependencies:[R,D,j,N,L,F,T,O,M,P],styles:['@charset "UTF-8";.d-flex[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;flex-wrap:wrap}.body[_ngcontent-%COMP%]{height:800px;margin-top:20px;background-position-y:-50px}body[_ngcontent-%COMP%]{position:relative;margin:0;font-family:Arial,sans-serif}.body[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:10px 0 0;background:url("./media/wounded-heart-svgrepo-com-2GYDWICH.svg");background-repeat:no-repeat;background-position-x:center;background-size:925px;opacity:.2;z-index:-1}.d-flex-space-between[_ngcontent-%COMP%]{display:flex;align-content:space-between;justify-content:space-between}.margin-input[_ngcontent-%COMP%]{margin-top:40px}.button-login[_ngcontent-%COMP%]{padding:22px;margin-top:40px}.validators[_ngcontent-%COMP%]{font-size:15px;text-align:center;color:red}']});let e=n;return e})();export{se as SignUpPatientComponent};
