import{a as R,b as D}from"./chunk-CNYOJBBN.js";import{a as A}from"./chunk-R74B2RF4.js";import{a as W}from"./chunk-ZTLMMYYW.js";import{b as U,h as I,m as T}from"./chunk-HRZ33I3O.js";import{f as c,h as q,i as k,j as f,k as L,n as N,o as M,p as F,v as O}from"./chunk-WLLJKHNI.js";import"./chunk-IINB6WE4.js";import"./chunk-WXI33M2S.js";import{Cb as E,Ra as n,Sa as P,Ub as w,db as m,e as S,ea as x,fb as r,ia as b,ib as _,jb as a,kb as l,lb as d,mb as v,nb as g,qb as y,rb as C,zb as s}from"./chunk-3QBVEAUN.js";function j(e,o){e&1&&(a(0,"div",17),s(1,"El nombre es requerido"),l())}function B(e,o){e&1&&(a(0,"div",17),s(1,"El nombre debe tener 5 o m\xE1s car\xE1cteres"),l())}function z(e,o){if(e&1&&(v(0,8),m(1,j,2,0,"div",16)(2,B,2,0,"div",16),g()),e&2){let t=C();n(),r("ngIf",t.form.controls.name.errors==null?null:t.form.controls.name.errors.required),n(),r("ngIf",!(t.form.controls.name.errors!=null&&t.form.controls.name.errors.required))}}function G(e,o){e&1&&(a(0,"div",17),s(1,"El apellido es requerido"),l())}function V(e,o){e&1&&(a(0,"div",17),s(1,"El apellido debe tener 5 o m\xE1s car\xE1cteres"),l())}function H(e,o){if(e&1&&(v(0,8),m(1,G,2,0,"div",16)(2,V,2,0,"div",16),g()),e&2){let t=C();n(),r("ngIf",t.form.controls.lastName.errors==null?null:t.form.controls.lastName.errors.required),n(),r("ngIf",!(t.form.controls.lastName.errors!=null&&t.form.controls.lastName.errors.required))}}function Y(e,o){e&1&&(a(0,"div",17),s(1,"El dni es requerido"),l())}function $(e,o){e&1&&(a(0,"div",17),s(1,"El dni debe tener entre 6 y 8 car\xE1cteres"),l())}function J(e,o){if(e&1&&(v(0,8),m(1,Y,2,0,"div",16)(2,$,2,0,"div",16),g()),e&2){let t=C();n(),r("ngIf",t.form.controls.dni.errors==null?null:t.form.controls.dni.errors.required),n(),r("ngIf",!(t.form.controls.dni.errors!=null&&t.form.controls.dni.errors.required))}}function K(e,o){e&1&&(a(0,"div",17),s(1,"La obra social es requerida"),l())}function Q(e,o){e&1&&(a(0,"div",17),s(1,"La obra social debe tener 4 o m\xE1s car\xE1cteres"),l())}function X(e,o){if(e&1&&(v(0,8),m(1,K,2,0,"div",16)(2,Q,2,0,"div",16),g()),e&2){let t=C();n(),r("ngIf",t.form.controls.socialWork.errors==null?null:t.form.controls.socialWork.errors.required),n(),r("ngIf",!(t.form.controls.socialWork.errors!=null&&t.form.controls.socialWork.errors.required))}}function Z(e,o){e&1&&(a(0,"div",17),s(1,"El correo es requerido"),l())}function ee(e,o){e&1&&(a(0,"div",17),s(1,"Ingrese un formato correcto"),l())}function te(e,o){if(e&1&&(v(0,8),m(1,Z,2,0,"div",16)(2,ee,2,0,"div",16),g()),e&2){let t=C();n(),r("ngIf",t.form.controls.email.errors==null?null:t.form.controls.email.errors.required),n(),r("ngIf",t.form.controls.email.errors==null?null:t.form.controls.email.errors.email)}}function ne(e,o){e&1&&(a(0,"div",17),s(1,"La contrase\xF1a es requerida"),l())}function ie(e,o){e&1&&(a(0,"div",17),s(1,"Debe tener 6 car\xE1cteres o m\xE1s"),l())}function oe(e,o){if(e&1&&(v(0,8),m(1,ne,2,0,"div",16)(2,ie,2,0,"div",16),g()),e&2){let t=C();n(),r("ngIf",t.form.controls.password.errors==null?null:t.form.controls.password.errors.required),n(),r("ngIf",t.form.controls.password.errors==null?null:t.form.controls.password.errors.email)}}function re(e,o){e&1&&(a(0,"div",17),s(1,"La imagen es requerida"),l())}function ae(e,o){if(e&1&&(v(0,8),m(1,re,2,0,"div",16),g()),e&2){let t=C();n(),r("ngIf",t.form.controls.profilePic.errors==null?null:t.form.controls.profilePic.errors.required)}}function le(e,o){e&1&&(a(0,"div",17),s(1,"La imagen es requerida"),l())}function me(e,o){if(e&1&&(v(0,8),m(1,le,2,0,"div",16),g()),e&2){let t=C();n(),r("ngIf",t.form.controls.profilePic2.errors==null?null:t.form.controls.profilePic2.errors.required)}}var be=(()=>{let o=class o{constructor(p){this.router=p,this.fb=x(N),this.form=this.fb.group({uid:new f(""),name:new f("",[c.required,c.minLength(5)]),lastName:new f("",[c.required,c.minLength(5)]),dni:new f("",[c.required,c.minLength(6),c.maxLength(8)]),socialWork:new f("",[c.required,c.minLength(4)]),email:new f("",[c.required,c.email]),password:new f("",[c.required,c.minLength(6)]),profilePic:new f("",[c.required]),profilePic2:new f("",[c.required])}),this.firebaseSvc=x(T),this.utilSvc=x(I)}submit(){return S(this,null,function*(){this.form.valid&&this.firebaseSvc.signUp(this.form.value).then(p=>S(this,null,function*(){let u=p.user.uid;this.form.controls.uid.setValue(u),this.setUserInfo(u),console.log(p)})).catch(p=>{console.log(p)}).finally(()=>{})})}setUserInfo(p){return S(this,null,function*(){if(this.form.valid){let u=`patients/${p}`;delete this.form.value.password,console.log(this.form.value.profilePic),console.log(this.form.value.profilePic2),this.firebaseSvc.uploadImage(p,this.form.value.profilePic,"profilePic"),this.firebaseSvc.uploadImage(p,this.form.value.profilePic2,"profilePic2"),this.firebaseSvc.setDocument(u,this.form.value).then(i=>S(this,null,function*(){this.utilSvc.saveInLocalStorage("user",this.form.value),this.utilSvc.routerLink("/main/home"),this.form.reset()})).catch(i=>{console.log(i)}).finally(()=>{})}})}};o.\u0275fac=function(u){return new(u||o)(P(U))},o.\u0275cmp=b({type:o,selectors:[["app-sign-up-patient"]],standalone:!0,features:[E],decls:32,vars:18,consts:[["title","Registrarse","whereToBack","/sign-up/select/",3,"back"],[1,"body"],[1,"bg-goku"],[1,"d-flex-center","widht-100"],[1,"d-flex-center","width-100"],[1,"auth-form",3,"ngSubmit","keypress.enter"],[1,"margin-input"],["label","Nombre","type","text",3,"control"],[1,"validators-container"],["label","Apellido","type","text",3,"control"],["label","DNI","type","number",3,"control"],["label","OBRA SOCIAL","type","text",3,"control"],["label","Correo","type","email",3,"control"],["label","Contrase\xF1a","type","password",3,"keypress.enter","control"],[3,"control"],["mat-flat-button","","color","warn",1,"button-login",3,"disabled"],["class","validators",4,"ngIf"],[1,"validators"]],template:function(u,i){u&1&&(d(0,"app-header",0),a(1,"div",1),d(2,"div",2),a(3,"div",3),d(4,"app-logo"),l(),a(5,"div",4)(6,"form",5),y("ngSubmit",function(){return i.submit()})("keypress.enter",function(){return i.submit()}),a(7,"div",6),d(8,"app-custom-input",7),l(),m(9,z,3,2,"ng-container",8),a(10,"div",6),d(11,"app-custom-input",9),l(),m(12,H,3,2,"ng-container",8),a(13,"div",6),d(14,"app-custom-input",10),l(),m(15,J,3,2,"ng-container",8),a(16,"div",6),d(17,"app-custom-input",11),l(),m(18,X,3,2,"ng-container",8),a(19,"div",6),d(20,"app-custom-input",12),l(),m(21,te,3,2,"ng-container",8),a(22,"div",6)(23,"app-custom-input",13),y("keypress.enter",function(){return i.submit()}),l()(),m(24,oe,3,2,"ng-container",8),d(25,"app-picture-input",14),m(26,ae,2,1,"ng-container",8),d(27,"app-picture-input",14),m(28,me,2,1,"ng-container",8),a(29,"div",3)(30,"button",15),s(31,"REGISTRARSE"),l()()()()()),u&2&&(r("back",!0),n(8),r("control",i.form.controls.name),n(),_(9,i.form.controls.name.errors&&i.form.controls.name.touched?9:-1),n(2),r("control",i.form.controls.lastName),n(),_(12,i.form.controls.lastName.errors&&i.form.controls.lastName.touched?12:-1),n(2),r("control",i.form.controls.dni),n(),_(15,i.form.controls.dni.errors&&i.form.controls.dni.touched?15:-1),n(2),r("control",i.form.controls.socialWork),n(),_(18,i.form.controls.socialWork.errors&&i.form.controls.socialWork.touched?18:-1),n(2),r("control",i.form.controls.email),n(),_(21,i.form.controls.email.errors&&i.form.controls.email.touched?21:-1),n(2),r("control",i.form.controls.password),n(),_(24,i.form.controls.password.errors&&i.form.controls.password.touched?24:-1),n(),r("control",i.form.controls.profilePic),n(),_(26,i.form.controls.profilePic.errors&&i.form.controls.profilePic.touched?26:-1),n(),r("control",i.form.controls.profilePic2),n(),_(28,i.form.controls.profilePic2.errors&&i.form.controls.profilePic2.touched?28:-1),n(2),r("disabled",i.form.invalid))},dependencies:[W,R,D,O,F,L,q,M,k,w,A],styles:['@charset "UTF-8";.d-flex[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;flex-wrap:wrap}.body[_ngcontent-%COMP%]{height:800px;margin-top:20px;background-position-y:-50px}body[_ngcontent-%COMP%]{position:relative;margin:0;font-family:Arial,sans-serif}.body[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:10px 0 0;background:url("./media/wounded-heart-svgrepo-com-2GYDWICH.svg");background-repeat:no-repeat;background-position-x:center;background-size:925px;opacity:.2;z-index:-1}.d-flex-space-between[_ngcontent-%COMP%]{display:flex;align-content:space-between;justify-content:space-between}.margin-input[_ngcontent-%COMP%]{margin-top:40px}.button-login[_ngcontent-%COMP%]{padding:22px;margin-top:40px}.validators[_ngcontent-%COMP%]{font-size:15px;text-align:center;color:red}']});let e=o;return e})();export{be as SignUpPatientComponent};
